const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BJgMrJwo.js","assets/index-BXrqP_f1.js","assets/index-LiBuWs57.js","assets/index-w89rgx4U.js","assets/index-DIQS817y.js","assets/index-B8LX-azg.js","assets/index-Dvrh98v1.js","assets/index-B42i7u7Q.js","assets/index-CTif6t2_.js","assets/index-CFLDM0Lw.js","assets/index-DQFSKSCW.js","assets/index-xuwkZbcd.js","assets/index-ZGgHnaAl.js","assets/index-Dq3XqoNM.js","assets/index-Ba-ywiUv.js","assets/index-C2uN0b2d.js","assets/index-DnNFbPGw.js","assets/index-B1qBHFx7.js","assets/index-BjJOlgmo.js","assets/dockerfile-BU1Ap__c.js","assets/simple-mode-CKxFYdZi.js","assets/factor-BPndPnYX.js","assets/nsis-ClDXqMnM.js","assets/pug-BmUsPMDj.js","assets/javascript-iSgyE4tI.js","assets/index-DI0ipZim.js","assets/index-B7xSQ30h.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mZ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var N$={exports:{}},Rb={},I$={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy=Symbol.for("react.element"),gZ=Symbol.for("react.portal"),yZ=Symbol.for("react.fragment"),vZ=Symbol.for("react.strict_mode"),wZ=Symbol.for("react.profiler"),xZ=Symbol.for("react.provider"),bZ=Symbol.for("react.context"),kZ=Symbol.for("react.forward_ref"),SZ=Symbol.for("react.suspense"),CZ=Symbol.for("react.memo"),_Z=Symbol.for("react.lazy"),vO=Symbol.iterator;function AZ(t){return t===null||typeof t!="object"?null:(t=vO&&t[vO]||t["@@iterator"],typeof t=="function"?t:null)}var P$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R$=Object.assign,D$={};function V0(t,e,n){this.props=t,this.context=e,this.refs=D$,this.updater=n||P$}V0.prototype.isReactComponent={};V0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};V0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function L$(){}L$.prototype=V0.prototype;function OC(t,e,n){this.props=t,this.context=e,this.refs=D$,this.updater=n||P$}var NC=OC.prototype=new L$;NC.constructor=OC;R$(NC,V0.prototype);NC.isPureReactComponent=!0;var wO=Array.isArray,B$=Object.prototype.hasOwnProperty,IC={current:null},$$={key:!0,ref:!0,__self:!0,__source:!0};function F$(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)B$.call(e,r)&&!$$.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Sy,type:t,key:s,ref:o,props:i,_owner:IC.current}}function TZ(t,e){return{$$typeof:Sy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function PC(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sy}function MZ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xO=/\/+/g;function z3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MZ(""+t.key):e.toString(36)}function tw(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sy:case gZ:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+z3(o,0):r,wO(i)?(n="",t!=null&&(n=t.replace(xO,"$&/")+"/"),tw(i,e,n,"",function(c){return c})):i!=null&&(PC(i)&&(i=TZ(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xO,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wO(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+z3(s,l);o+=tw(s,e,n,a,i)}else if(a=AZ(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+z3(s,l++),o+=tw(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _v(t,e,n){if(t==null)return t;var r=[],i=0;return tw(t,r,"","",function(s){return e.call(n,s,i++)}),r}function EZ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ti={current:null},nw={transition:null},OZ={ReactCurrentDispatcher:Ti,ReactCurrentBatchConfig:nw,ReactCurrentOwner:IC};function z$(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:_v,forEach:function(t,e,n){_v(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _v(t,function(){e++}),e},toArray:function(t){return _v(t,function(e){return e})||[]},only:function(t){if(!PC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=V0;Et.Fragment=yZ;Et.Profiler=wZ;Et.PureComponent=OC;Et.StrictMode=vZ;Et.Suspense=SZ;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OZ;Et.act=z$;Et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R$({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=IC.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)B$.call(e,a)&&!$$.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Sy,type:t.type,key:i,ref:s,props:r,_owner:o}};Et.createContext=function(t){return t={$$typeof:bZ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xZ,_context:t},t.Consumer=t};Et.createElement=F$;Et.createFactory=function(t){var e=F$.bind(null,t);return e.type=t,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:kZ,render:t}};Et.isValidElement=PC;Et.lazy=function(t){return{$$typeof:_Z,_payload:{_status:-1,_result:t},_init:EZ}};Et.memo=function(t,e){return{$$typeof:CZ,type:t,compare:e===void 0?null:e}};Et.startTransition=function(t){var e=nw.transition;nw.transition={};try{t()}finally{nw.transition=e}};Et.unstable_act=z$;Et.useCallback=function(t,e){return Ti.current.useCallback(t,e)};Et.useContext=function(t){return Ti.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return Ti.current.useDeferredValue(t)};Et.useEffect=function(t,e){return Ti.current.useEffect(t,e)};Et.useId=function(){return Ti.current.useId()};Et.useImperativeHandle=function(t,e,n){return Ti.current.useImperativeHandle(t,e,n)};Et.useInsertionEffect=function(t,e){return Ti.current.useInsertionEffect(t,e)};Et.useLayoutEffect=function(t,e){return Ti.current.useLayoutEffect(t,e)};Et.useMemo=function(t,e){return Ti.current.useMemo(t,e)};Et.useReducer=function(t,e,n){return Ti.current.useReducer(t,e,n)};Et.useRef=function(t){return Ti.current.useRef(t)};Et.useState=function(t){return Ti.current.useState(t)};Et.useSyncExternalStore=function(t,e,n){return Ti.current.useSyncExternalStore(t,e,n)};Et.useTransition=function(){return Ti.current.useTransition()};Et.version="18.3.1";I$.exports=Et;var Ae=I$.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NZ=Ae,IZ=Symbol.for("react.element"),PZ=Symbol.for("react.fragment"),RZ=Object.prototype.hasOwnProperty,DZ=NZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LZ={key:!0,ref:!0,__self:!0,__source:!0};function j$(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)RZ.call(e,r)&&!LZ.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IZ,type:t,key:s,ref:o,props:i,_owner:DZ.current}}Rb.Fragment=PZ;Rb.jsx=j$;Rb.jsxs=j$;N$.exports=Rb;var b=N$.exports,H$={exports:{}},Ts={},V$={exports:{}},W$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,z){var O=W.length;W.push(z);e:for(;0<O;){var ee=O-1>>>1,X=W[ee];if(0<i(X,z))W[ee]=z,W[O]=X,O=ee;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var z=W[0],O=W.pop();if(O!==z){W[0]=O;e:for(var ee=0,X=W.length,E=X>>>1;ee<E;){var xe=2*(ee+1)-1,U=W[xe],ue=xe+1,ve=W[ue];if(0>i(U,O))ue<X&&0>i(ve,U)?(W[ee]=ve,W[ue]=O,ee=ue):(W[ee]=U,W[xe]=O,ee=xe);else if(ue<X&&0>i(ve,O))W[ee]=ve,W[ue]=O,ee=ue;else break e}}return z}function i(W,z){var O=W.sortIndex-z.sortIndex;return O!==0?O:W.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,h=null,d=3,f=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(W){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=W)r(c),z.sortIndex=z.expirationTime,e(a,z);else break;z=n(c)}}function S(W){if(m=!1,w(W),!p)if(n(a)!==null)p=!0,pe(_);else{var z=n(c);z!==null&&de(S,z.startTime-W)}}function _(W,z){p=!1,m&&(m=!1,g(I),I=-1),f=!0;var O=d;try{for(w(z),h=n(a);h!==null&&(!(h.expirationTime>z)||W&&!$());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,d=h.priorityLevel;var X=ee(h.expirationTime<=z);z=t.unstable_now(),typeof X=="function"?h.callback=X:h===n(a)&&r(a),w(z)}else r(a);h=n(a)}if(h!==null)var E=!0;else{var xe=n(c);xe!==null&&de(S,xe.startTime-z),E=!1}return E}finally{h=null,d=O,f=!1}}var C=!1,T=null,I=-1,L=5,N=-1;function $(){return!(t.unstable_now()-N<L)}function F(){if(T!==null){var W=t.unstable_now();N=W;var z=!0;try{z=T(!0,W)}finally{z?ie():(C=!1,T=null)}}else C=!1}var ie;if(typeof v=="function")ie=function(){v(F)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Y=Z.port2;Z.port1.onmessage=F,ie=function(){Y.postMessage(null)}}else ie=function(){y(F,0)};function pe(W){T=W,C||(C=!0,ie())}function de(W,z){I=y(function(){W(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,pe(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(W){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var O=d;d=z;try{return W()}finally{d=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var O=d;d=W;try{return z()}finally{d=O}},t.unstable_scheduleCallback=function(W,z,O){var ee=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ee+O:ee):O=ee,W){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=O+X,W={id:u++,callback:z,priorityLevel:W,startTime:O,expirationTime:X,sortIndex:-1},O>ee?(W.sortIndex=O,e(c,W),n(a)===null&&W===n(c)&&(m?(g(I),I=-1):m=!0,de(S,O-ee))):(W.sortIndex=X,e(a,W),p||f||(p=!0,pe(_))),W},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(W){var z=d;return function(){var O=d;d=z;try{return W.apply(this,arguments)}finally{d=O}}}})(W$);V$.exports=W$;var BZ=V$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $Z=Ae,_s=BZ;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q$=new Set,m1={};function yd(t,e){p0(t,e),p0(t+"Capture",e)}function p0(t,e){for(m1[t]=e,t=0;t<e.length;t++)q$.add(e[t])}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A7=Object.prototype.hasOwnProperty,FZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bO={},kO={};function zZ(t){return A7.call(kO,t)?!0:A7.call(bO,t)?!1:FZ.test(t)?kO[t]=!0:(bO[t]=!0,!1)}function jZ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HZ(t,e,n,r){if(e===null||typeof e>"u"||jZ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fr[t]=new Mi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fr[e]=new Mi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fr[t]=new Mi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fr[t]=new Mi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fr[t]=new Mi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fr[t]=new Mi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fr[t]=new Mi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fr[t]=new Mi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fr[t]=new Mi(t,5,!1,t.toLowerCase(),null,!1,!1)});var RC=/[\-:]([a-z])/g;function DC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RC,DC);Fr[e]=new Mi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RC,DC);Fr[e]=new Mi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RC,DC);Fr[e]=new Mi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fr[t]=new Mi(t,1,!1,t.toLowerCase(),null,!1,!1)});Fr.xlinkHref=new Mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fr[t]=new Mi(t,1,!1,t.toLowerCase(),null,!0,!0)});function LC(t,e,n,r){var i=Fr.hasOwnProperty(e)?Fr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HZ(e,n,i,r)&&(n=null),r||i===null?zZ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ka=$Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Av=Symbol.for("react.element"),Sf=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),BC=Symbol.for("react.strict_mode"),T7=Symbol.for("react.profiler"),U$=Symbol.for("react.provider"),G$=Symbol.for("react.context"),$C=Symbol.for("react.forward_ref"),M7=Symbol.for("react.suspense"),E7=Symbol.for("react.suspense_list"),FC=Symbol.for("react.memo"),Cc=Symbol.for("react.lazy"),K$=Symbol.for("react.offscreen"),SO=Symbol.iterator;function Op(t){return t===null||typeof t!="object"?null:(t=SO&&t[SO]||t["@@iterator"],typeof t=="function"?t:null)}var Ln=Object.assign,j3;function im(t){if(j3===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j3=e&&e[1]||""}return`
`+j3+t}var H3=!1;function V3(t,e){if(!t||H3)return"";H3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{H3=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?im(t):""}function VZ(t){switch(t.tag){case 5:return im(t.type);case 16:return im("Lazy");case 13:return im("Suspense");case 19:return im("SuspenseList");case 0:case 2:case 15:return t=V3(t.type,!1),t;case 11:return t=V3(t.type.render,!1),t;case 1:return t=V3(t.type,!0),t;default:return""}}function O7(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cf:return"Fragment";case Sf:return"Portal";case T7:return"Profiler";case BC:return"StrictMode";case M7:return"Suspense";case E7:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G$:return(t.displayName||"Context")+".Consumer";case U$:return(t._context.displayName||"Context")+".Provider";case $C:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case FC:return e=t.displayName||null,e!==null?e:O7(t.type)||"Memo";case Cc:e=t._payload,t=t._init;try{return O7(t(e))}catch{}}return null}function WZ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O7(e);case 8:return e===BC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function J$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qZ(t){var e=J$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tv(t){t._valueTracker||(t._valueTracker=qZ(t))}function Y$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=J$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ex(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function N7(t,e){var n=e.checked;return Ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function CO(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function X$(t,e){e=e.checked,e!=null&&LC(t,"checked",e,!1)}function I7(t,e){X$(t,e);var n=fu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?P7(t,e.type,n):e.hasOwnProperty("defaultValue")&&P7(t,e.type,fu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _O(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function P7(t,e,n){(e!=="number"||ex(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sm=Array.isArray;function Ff(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fu(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function R7(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function AO(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ye(92));if(sm(n)){if(1<n.length)throw Error(ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fu(n)}}function Q$(t,e){var n=fu(e.value),r=fu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function TO(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D7(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mv,eF=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mv=Mv||document.createElement("div"),Mv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function g1(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UZ=["Webkit","ms","Moz","O"];Object.keys(Sg).forEach(function(t){UZ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sg[e]=Sg[t]})});function tF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sg.hasOwnProperty(t)&&Sg[t]?(""+e).trim():e+"px"}function nF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=tF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GZ=Ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function L7(t,e){if(e){if(GZ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function B7(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $7=null;function zC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var F7=null,zf=null,jf=null;function MO(t){if(t=Ay(t)){if(typeof F7!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=Fb(e),F7(t.stateNode,t.type,e))}}function rF(t){zf?jf?jf.push(t):jf=[t]:zf=t}function iF(){if(zf){var t=zf,e=jf;if(jf=zf=null,MO(t),e)for(t=0;t<e.length;t++)MO(e[t])}}function sF(t,e){return t(e)}function oF(){}var W3=!1;function lF(t,e,n){if(W3)return t(e,n);W3=!0;try{return sF(t,e,n)}finally{W3=!1,(zf!==null||jf!==null)&&(oF(),iF())}}function y1(t,e){var n=t.stateNode;if(n===null)return null;var r=Fb(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ye(231,e,typeof n));return n}var z7=!1;if(Pa)try{var Np={};Object.defineProperty(Np,"passive",{get:function(){z7=!0}}),window.addEventListener("test",Np,Np),window.removeEventListener("test",Np,Np)}catch{z7=!1}function KZ(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Cg=!1,tx=null,nx=!1,j7=null,JZ={onError:function(t){Cg=!0,tx=t}};function YZ(t,e,n,r,i,s,o,l,a){Cg=!1,tx=null,KZ.apply(JZ,arguments)}function XZ(t,e,n,r,i,s,o,l,a){if(YZ.apply(this,arguments),Cg){if(Cg){var c=tx;Cg=!1,tx=null}else throw Error(ye(198));nx||(nx=!0,j7=c)}}function vd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function EO(t){if(vd(t)!==t)throw Error(ye(188))}function QZ(t){var e=t.alternate;if(!e){if(e=vd(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return EO(i),t;if(s===r)return EO(i),e;s=s.sibling}throw Error(ye(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?t:e}function cF(t){return t=QZ(t),t!==null?uF(t):null}function uF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uF(t);if(e!==null)return e;t=t.sibling}return null}var hF=_s.unstable_scheduleCallback,OO=_s.unstable_cancelCallback,ZZ=_s.unstable_shouldYield,eee=_s.unstable_requestPaint,Un=_s.unstable_now,tee=_s.unstable_getCurrentPriorityLevel,jC=_s.unstable_ImmediatePriority,dF=_s.unstable_UserBlockingPriority,rx=_s.unstable_NormalPriority,nee=_s.unstable_LowPriority,fF=_s.unstable_IdlePriority,Db=null,El=null;function ree(t){if(El&&typeof El.onCommitFiberRoot=="function")try{El.onCommitFiberRoot(Db,t,void 0,(t.current.flags&128)===128)}catch{}}var Mo=Math.clz32?Math.clz32:oee,iee=Math.log,see=Math.LN2;function oee(t){return t>>>=0,t===0?32:31-(iee(t)/see|0)|0}var Ev=64,Ov=4194304;function om(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ix(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=om(l):(s&=o,s!==0&&(r=om(s)))}else o=n&~i,o!==0?r=om(o):s!==0&&(r=om(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mo(e),i=1<<n,r|=t[n],e&=~i;return r}function lee(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aee(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Mo(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=lee(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function H7(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pF(){var t=Ev;return Ev<<=1,!(Ev&4194240)&&(Ev=64),t}function q3(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cy(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mo(e),t[e]=n}function cee(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mo(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function HC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mo(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ut=0;function mF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gF,VC,yF,vF,wF,V7=!1,Nv=[],Qc=null,Zc=null,eu=null,v1=new Map,w1=new Map,Rc=[],uee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NO(t,e){switch(t){case"focusin":case"focusout":Qc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":eu=null;break;case"pointerover":case"pointerout":v1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":w1.delete(e.pointerId)}}function Ip(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ay(e),e!==null&&VC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hee(t,e,n,r,i){switch(e){case"focusin":return Qc=Ip(Qc,t,e,n,r,i),!0;case"dragenter":return Zc=Ip(Zc,t,e,n,r,i),!0;case"mouseover":return eu=Ip(eu,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return v1.set(s,Ip(v1.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,w1.set(s,Ip(w1.get(s)||null,t,e,n,r,i)),!0}return!1}function xF(t){var e=kh(t.target);if(e!==null){var n=vd(e);if(n!==null){if(e=n.tag,e===13){if(e=aF(n),e!==null){t.blockedOn=e,wF(t.priority,function(){yF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=W7(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$7=r,n.target.dispatchEvent(r),$7=null}else return e=Ay(n),e!==null&&VC(e),t.blockedOn=n,!1;e.shift()}return!0}function IO(t,e,n){rw(t)&&n.delete(e)}function dee(){V7=!1,Qc!==null&&rw(Qc)&&(Qc=null),Zc!==null&&rw(Zc)&&(Zc=null),eu!==null&&rw(eu)&&(eu=null),v1.forEach(IO),w1.forEach(IO)}function Pp(t,e){t.blockedOn===e&&(t.blockedOn=null,V7||(V7=!0,_s.unstable_scheduleCallback(_s.unstable_NormalPriority,dee)))}function x1(t){function e(i){return Pp(i,t)}if(0<Nv.length){Pp(Nv[0],t);for(var n=1;n<Nv.length;n++){var r=Nv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qc!==null&&Pp(Qc,t),Zc!==null&&Pp(Zc,t),eu!==null&&Pp(eu,t),v1.forEach(e),w1.forEach(e),n=0;n<Rc.length;n++)r=Rc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rc.length&&(n=Rc[0],n.blockedOn===null);)xF(n),n.blockedOn===null&&Rc.shift()}var Hf=Ka.ReactCurrentBatchConfig,sx=!0;function fee(t,e,n,r){var i=Ut,s=Hf.transition;Hf.transition=null;try{Ut=1,WC(t,e,n,r)}finally{Ut=i,Hf.transition=s}}function pee(t,e,n,r){var i=Ut,s=Hf.transition;Hf.transition=null;try{Ut=4,WC(t,e,n,r)}finally{Ut=i,Hf.transition=s}}function WC(t,e,n,r){if(sx){var i=W7(t,e,n,r);if(i===null)tk(t,e,r,ox,n),NO(t,r);else if(hee(i,t,e,n,r))r.stopPropagation();else if(NO(t,r),e&4&&-1<uee.indexOf(t)){for(;i!==null;){var s=Ay(i);if(s!==null&&gF(s),s=W7(t,e,n,r),s===null&&tk(t,e,r,ox,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tk(t,e,r,null,n)}}var ox=null;function W7(t,e,n,r){if(ox=null,t=zC(r),t=kh(t),t!==null)if(e=vd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aF(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ox=t,null}function bF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tee()){case jC:return 1;case dF:return 4;case rx:case nee:return 16;case fF:return 536870912;default:return 16}default:return 16}}var jc=null,qC=null,iw=null;function kF(){if(iw)return iw;var t,e=qC,n=e.length,r,i="value"in jc?jc.value:jc.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return iw=i.slice(t,1<r?1-r:void 0)}function sw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Iv(){return!0}function PO(){return!1}function Ms(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Iv:PO,this.isPropagationStopped=PO,this}return Ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Iv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Iv)},persist:function(){},isPersistent:Iv}),e}var W0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},UC=Ms(W0),_y=Ln({},W0,{view:0,detail:0}),mee=Ms(_y),U3,G3,Rp,Lb=Ln({},_y,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rp&&(Rp&&t.type==="mousemove"?(U3=t.screenX-Rp.screenX,G3=t.screenY-Rp.screenY):G3=U3=0,Rp=t),U3)},movementY:function(t){return"movementY"in t?t.movementY:G3}}),RO=Ms(Lb),gee=Ln({},Lb,{dataTransfer:0}),yee=Ms(gee),vee=Ln({},_y,{relatedTarget:0}),K3=Ms(vee),wee=Ln({},W0,{animationName:0,elapsedTime:0,pseudoElement:0}),xee=Ms(wee),bee=Ln({},W0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kee=Ms(bee),See=Ln({},W0,{data:0}),DO=Ms(See),Cee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_ee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Aee[t])?!!e[t]:!1}function GC(){return Tee}var Mee=Ln({},_y,{key:function(t){if(t.key){var e=Cee[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_ee[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GC,charCode:function(t){return t.type==="keypress"?sw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eee=Ms(Mee),Oee=Ln({},Lb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LO=Ms(Oee),Nee=Ln({},_y,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GC}),Iee=Ms(Nee),Pee=Ln({},W0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ree=Ms(Pee),Dee=Ln({},Lb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lee=Ms(Dee),Bee=[9,13,27,32],KC=Pa&&"CompositionEvent"in window,_g=null;Pa&&"documentMode"in document&&(_g=document.documentMode);var $ee=Pa&&"TextEvent"in window&&!_g,SF=Pa&&(!KC||_g&&8<_g&&11>=_g),BO=" ",$O=!1;function CF(t,e){switch(t){case"keyup":return Bee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _F(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _f=!1;function Fee(t,e){switch(t){case"compositionend":return _F(e);case"keypress":return e.which!==32?null:($O=!0,BO);case"textInput":return t=e.data,t===BO&&$O?null:t;default:return null}}function zee(t,e){if(_f)return t==="compositionend"||!KC&&CF(t,e)?(t=kF(),iw=qC=jc=null,_f=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SF&&e.locale!=="ko"?null:e.data;default:return null}}var jee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jee[t.type]:e==="textarea"}function AF(t,e,n,r){rF(r),e=lx(e,"onChange"),0<e.length&&(n=new UC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ag=null,b1=null;function Hee(t){BF(t,0)}function Bb(t){var e=Mf(t);if(Y$(e))return t}function Vee(t,e){if(t==="change")return e}var TF=!1;if(Pa){var J3;if(Pa){var Y3="oninput"in document;if(!Y3){var zO=document.createElement("div");zO.setAttribute("oninput","return;"),Y3=typeof zO.oninput=="function"}J3=Y3}else J3=!1;TF=J3&&(!document.documentMode||9<document.documentMode)}function jO(){Ag&&(Ag.detachEvent("onpropertychange",MF),b1=Ag=null)}function MF(t){if(t.propertyName==="value"&&Bb(b1)){var e=[];AF(e,b1,t,zC(t)),lF(Hee,e)}}function Wee(t,e,n){t==="focusin"?(jO(),Ag=e,b1=n,Ag.attachEvent("onpropertychange",MF)):t==="focusout"&&jO()}function qee(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bb(b1)}function Uee(t,e){if(t==="click")return Bb(e)}function Gee(t,e){if(t==="input"||t==="change")return Bb(e)}function Kee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lo=typeof Object.is=="function"?Object.is:Kee;function k1(t,e){if(Lo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!A7.call(e,i)||!Lo(t[i],e[i]))return!1}return!0}function HO(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function VO(t,e){var n=HO(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=HO(n)}}function EF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OF(){for(var t=window,e=ex();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ex(t.document)}return e}function JC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jee(t){var e=OF(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EF(n.ownerDocument.documentElement,n)){if(r!==null&&JC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=VO(n,s);var o=VO(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yee=Pa&&"documentMode"in document&&11>=document.documentMode,Af=null,q7=null,Tg=null,U7=!1;function WO(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;U7||Af==null||Af!==ex(r)||(r=Af,"selectionStart"in r&&JC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tg&&k1(Tg,r)||(Tg=r,r=lx(q7,"onSelect"),0<r.length&&(e=new UC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Af)))}function Pv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Tf={animationend:Pv("Animation","AnimationEnd"),animationiteration:Pv("Animation","AnimationIteration"),animationstart:Pv("Animation","AnimationStart"),transitionend:Pv("Transition","TransitionEnd")},X3={},NF={};Pa&&(NF=document.createElement("div").style,"AnimationEvent"in window||(delete Tf.animationend.animation,delete Tf.animationiteration.animation,delete Tf.animationstart.animation),"TransitionEvent"in window||delete Tf.transitionend.transition);function $b(t){if(X3[t])return X3[t];if(!Tf[t])return t;var e=Tf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NF)return X3[t]=e[n];return t}var IF=$b("animationend"),PF=$b("animationiteration"),RF=$b("animationstart"),DF=$b("transitionend"),LF=new Map,qO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tu(t,e){LF.set(t,e),yd(e,[t])}for(var Q3=0;Q3<qO.length;Q3++){var Z3=qO[Q3],Xee=Z3.toLowerCase(),Qee=Z3[0].toUpperCase()+Z3.slice(1);Tu(Xee,"on"+Qee)}Tu(IF,"onAnimationEnd");Tu(PF,"onAnimationIteration");Tu(RF,"onAnimationStart");Tu("dblclick","onDoubleClick");Tu("focusin","onFocus");Tu("focusout","onBlur");Tu(DF,"onTransitionEnd");p0("onMouseEnter",["mouseout","mouseover"]);p0("onMouseLeave",["mouseout","mouseover"]);p0("onPointerEnter",["pointerout","pointerover"]);p0("onPointerLeave",["pointerout","pointerover"]);yd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yd("onBeforeInput",["compositionend","keypress","textInput","paste"]);yd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zee=new Set("cancel close invalid load scroll toggle".split(" ").concat(lm));function UO(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XZ(r,e,void 0,t),t.currentTarget=null}function BF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;UO(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;UO(i,l,c),s=a}}}if(nx)throw t=j7,nx=!1,j7=null,t}function mn(t,e){var n=e[X7];n===void 0&&(n=e[X7]=new Set);var r=t+"__bubble";n.has(r)||($F(e,t,2,!1),n.add(r))}function ek(t,e,n){var r=0;e&&(r|=4),$F(n,t,r,e)}var Rv="_reactListening"+Math.random().toString(36).slice(2);function S1(t){if(!t[Rv]){t[Rv]=!0,q$.forEach(function(n){n!=="selectionchange"&&(Zee.has(n)||ek(n,!1,t),ek(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rv]||(e[Rv]=!0,ek("selectionchange",!1,e))}}function $F(t,e,n,r){switch(bF(e)){case 1:var i=fee;break;case 4:i=pee;break;default:i=WC}n=i.bind(null,e,n,t),i=void 0,!z7||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tk(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=kh(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}lF(function(){var c=s,u=zC(n),h=[];e:{var d=LF.get(t);if(d!==void 0){var f=UC,p=t;switch(t){case"keypress":if(sw(n)===0)break e;case"keydown":case"keyup":f=Eee;break;case"focusin":p="focus",f=K3;break;case"focusout":p="blur",f=K3;break;case"beforeblur":case"afterblur":f=K3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=RO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=yee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Iee;break;case IF:case PF:case RF:f=xee;break;case DF:f=Ree;break;case"scroll":f=mee;break;case"wheel":f=Lee;break;case"copy":case"cut":case"paste":f=kee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=LO}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var v=c,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=y1(v,g),S!=null&&m.push(C1(v,S,w)))),y)break;v=v.return}0<m.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==$7&&(p=n.relatedTarget||n.fromElement)&&(kh(p)||p[Ra]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?kh(p):null,p!==null&&(y=vd(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=RO,S="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=LO,S="onPointerLeave",g="onPointerEnter",v="pointer"),y=f==null?d:Mf(f),w=p==null?d:Mf(p),d=new m(S,v+"leave",f,n,u),d.target=y,d.relatedTarget=w,S=null,kh(u)===c&&(m=new m(g,v+"enter",p,n,u),m.target=w,m.relatedTarget=y,S=m),y=S,f&&p)t:{for(m=f,g=p,v=0,w=m;w;w=Rd(w))v++;for(w=0,S=g;S;S=Rd(S))w++;for(;0<v-w;)m=Rd(m),v--;for(;0<w-v;)g=Rd(g),w--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=Rd(m),g=Rd(g)}m=null}else m=null;f!==null&&GO(h,d,f,m,!1),p!==null&&y!==null&&GO(h,y,p,m,!0)}}e:{if(d=c?Mf(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=Vee;else if(FO(d))if(TF)_=Gee;else{_=qee;var C=Wee}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=Uee);if(_&&(_=_(t,c))){AF(h,_,n,u);break e}C&&C(t,d,c),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&P7(d,"number",d.value)}switch(C=c?Mf(c):window,t){case"focusin":(FO(C)||C.contentEditable==="true")&&(Af=C,q7=c,Tg=null);break;case"focusout":Tg=q7=Af=null;break;case"mousedown":U7=!0;break;case"contextmenu":case"mouseup":case"dragend":U7=!1,WO(h,n,u);break;case"selectionchange":if(Yee)break;case"keydown":case"keyup":WO(h,n,u)}var T;if(KC)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else _f?CF(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(SF&&n.locale!=="ko"&&(_f||I!=="onCompositionStart"?I==="onCompositionEnd"&&_f&&(T=kF()):(jc=u,qC="value"in jc?jc.value:jc.textContent,_f=!0)),C=lx(c,I),0<C.length&&(I=new DO(I,t,null,n,u),h.push({event:I,listeners:C}),T?I.data=T:(T=_F(n),T!==null&&(I.data=T)))),(T=$ee?Fee(t,n):zee(t,n))&&(c=lx(c,"onBeforeInput"),0<c.length&&(u=new DO("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=T))}BF(h,e)})}function C1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lx(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=y1(t,n),s!=null&&r.unshift(C1(t,s,i)),s=y1(t,e),s!=null&&r.push(C1(t,s,i))),t=t.return}return r}function Rd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function GO(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=y1(n,s),a!=null&&o.unshift(C1(n,a,l))):i||(a=y1(n,s),a!=null&&o.push(C1(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ete=/\r\n?/g,tte=/\u0000|\uFFFD/g;function KO(t){return(typeof t=="string"?t:""+t).replace(ete,`
`).replace(tte,"")}function Dv(t,e,n){if(e=KO(e),KO(t)!==e&&n)throw Error(ye(425))}function ax(){}var G7=null,K7=null;function J7(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Y7=typeof setTimeout=="function"?setTimeout:void 0,nte=typeof clearTimeout=="function"?clearTimeout:void 0,JO=typeof Promise=="function"?Promise:void 0,rte=typeof queueMicrotask=="function"?queueMicrotask:typeof JO<"u"?function(t){return JO.resolve(null).then(t).catch(ite)}:Y7;function ite(t){setTimeout(function(){throw t})}function nk(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),x1(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);x1(e)}function tu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function YO(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var q0=Math.random().toString(36).slice(2),vl="__reactFiber$"+q0,_1="__reactProps$"+q0,Ra="__reactContainer$"+q0,X7="__reactEvents$"+q0,ste="__reactListeners$"+q0,ote="__reactHandles$"+q0;function kh(t){var e=t[vl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ra]||n[vl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=YO(t);t!==null;){if(n=t[vl])return n;t=YO(t)}return e}t=n,n=t.parentNode}return null}function Ay(t){return t=t[vl]||t[Ra],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function Fb(t){return t[_1]||null}var Q7=[],Ef=-1;function Mu(t){return{current:t}}function wn(t){0>Ef||(t.current=Q7[Ef],Q7[Ef]=null,Ef--)}function dn(t,e){Ef++,Q7[Ef]=t.current,t.current=e}var pu={},ni=Mu(pu),Wi=Mu(!1),Gh=pu;function m0(t,e){var n=t.type.contextTypes;if(!n)return pu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qi(t){return t=t.childContextTypes,t!=null}function cx(){wn(Wi),wn(ni)}function XO(t,e,n){if(ni.current!==pu)throw Error(ye(168));dn(ni,e),dn(Wi,n)}function FF(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ye(108,WZ(t)||"Unknown",i));return Ln({},n,r)}function ux(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pu,Gh=ni.current,dn(ni,t),dn(Wi,Wi.current),!0}function QO(t,e,n){var r=t.stateNode;if(!r)throw Error(ye(169));n?(t=FF(t,e,Gh),r.__reactInternalMemoizedMergedChildContext=t,wn(Wi),wn(ni),dn(ni,t)):wn(Wi),dn(Wi,n)}var ma=null,zb=!1,rk=!1;function zF(t){ma===null?ma=[t]:ma.push(t)}function lte(t){zb=!0,zF(t)}function Eu(){if(!rk&&ma!==null){rk=!0;var t=0,e=Ut;try{var n=ma;for(Ut=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ma=null,zb=!1}catch(i){throw ma!==null&&(ma=ma.slice(t+1)),hF(jC,Eu),i}finally{Ut=e,rk=!1}}return null}var Of=[],Nf=0,hx=null,dx=0,Ls=[],Bs=0,Kh=null,xa=1,ba="";function ih(t,e){Of[Nf++]=dx,Of[Nf++]=hx,hx=t,dx=e}function jF(t,e,n){Ls[Bs++]=xa,Ls[Bs++]=ba,Ls[Bs++]=Kh,Kh=t;var r=xa;t=ba;var i=32-Mo(r)-1;r&=~(1<<i),n+=1;var s=32-Mo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xa=1<<32-Mo(e)+i|n<<i|r,ba=s+t}else xa=1<<s|n<<i|r,ba=t}function YC(t){t.return!==null&&(ih(t,1),jF(t,1,0))}function XC(t){for(;t===hx;)hx=Of[--Nf],Of[Nf]=null,dx=Of[--Nf],Of[Nf]=null;for(;t===Kh;)Kh=Ls[--Bs],Ls[Bs]=null,ba=Ls[--Bs],Ls[Bs]=null,xa=Ls[--Bs],Ls[Bs]=null}var ks=null,xs=null,Sn=!1,Co=null;function HF(t,e){var n=js(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ZO(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ks=t,xs=tu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ks=t,xs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kh!==null?{id:xa,overflow:ba}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=js(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ks=t,xs=null,!0):!1;default:return!1}}function Z7(t){return(t.mode&1)!==0&&(t.flags&128)===0}function e8(t){if(Sn){var e=xs;if(e){var n=e;if(!ZO(t,e)){if(Z7(t))throw Error(ye(418));e=tu(n.nextSibling);var r=ks;e&&ZO(t,e)?HF(r,n):(t.flags=t.flags&-4097|2,Sn=!1,ks=t)}}else{if(Z7(t))throw Error(ye(418));t.flags=t.flags&-4097|2,Sn=!1,ks=t}}}function eN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ks=t}function Lv(t){if(t!==ks)return!1;if(!Sn)return eN(t),Sn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!J7(t.type,t.memoizedProps)),e&&(e=xs)){if(Z7(t))throw VF(),Error(ye(418));for(;e;)HF(t,e),e=tu(e.nextSibling)}if(eN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xs=tu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xs=null}}else xs=ks?tu(t.stateNode.nextSibling):null;return!0}function VF(){for(var t=xs;t;)t=tu(t.nextSibling)}function g0(){xs=ks=null,Sn=!1}function QC(t){Co===null?Co=[t]:Co.push(t)}var ate=Ka.ReactCurrentBatchConfig;function Dp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,t))}return t}function Bv(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tN(t){var e=t._init;return e(t._payload)}function WF(t){function e(g,v){if(t){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=su(g,v),g.index=0,g.sibling=null,g}function s(g,v,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,w,S){return v===null||v.tag!==6?(v=uk(w,g.mode,S),v.return=g,v):(v=i(v,w),v.return=g,v)}function a(g,v,w,S){var _=w.type;return _===Cf?u(g,v,w.props.children,S,w.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Cc&&tN(_)===v.type)?(S=i(v,w.props),S.ref=Dp(g,v,w),S.return=g,S):(S=dw(w.type,w.key,w.props,null,g.mode,S),S.ref=Dp(g,v,w),S.return=g,S)}function c(g,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=hk(w,g.mode,S),v.return=g,v):(v=i(v,w.children||[]),v.return=g,v)}function u(g,v,w,S,_){return v===null||v.tag!==7?(v=Dh(w,g.mode,S,_),v.return=g,v):(v=i(v,w),v.return=g,v)}function h(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=uk(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Av:return w=dw(v.type,v.key,v.props,null,g.mode,w),w.ref=Dp(g,null,v),w.return=g,w;case Sf:return v=hk(v,g.mode,w),v.return=g,v;case Cc:var S=v._init;return h(g,S(v._payload),w)}if(sm(v)||Op(v))return v=Dh(v,g.mode,w,null),v.return=g,v;Bv(g,v)}return null}function d(g,v,w,S){var _=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(g,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Av:return w.key===_?a(g,v,w,S):null;case Sf:return w.key===_?c(g,v,w,S):null;case Cc:return _=w._init,d(g,v,_(w._payload),S)}if(sm(w)||Op(w))return _!==null?null:u(g,v,w,S,null);Bv(g,w)}return null}function f(g,v,w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,l(v,g,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Av:return g=g.get(S.key===null?w:S.key)||null,a(v,g,S,_);case Sf:return g=g.get(S.key===null?w:S.key)||null,c(v,g,S,_);case Cc:var C=S._init;return f(g,v,w,C(S._payload),_)}if(sm(S)||Op(S))return g=g.get(w)||null,u(v,g,S,_,null);Bv(v,S)}return null}function p(g,v,w,S){for(var _=null,C=null,T=v,I=v=0,L=null;T!==null&&I<w.length;I++){T.index>I?(L=T,T=null):L=T.sibling;var N=d(g,T,w[I],S);if(N===null){T===null&&(T=L);break}t&&T&&N.alternate===null&&e(g,T),v=s(N,v,I),C===null?_=N:C.sibling=N,C=N,T=L}if(I===w.length)return n(g,T),Sn&&ih(g,I),_;if(T===null){for(;I<w.length;I++)T=h(g,w[I],S),T!==null&&(v=s(T,v,I),C===null?_=T:C.sibling=T,C=T);return Sn&&ih(g,I),_}for(T=r(g,T);I<w.length;I++)L=f(T,g,I,w[I],S),L!==null&&(t&&L.alternate!==null&&T.delete(L.key===null?I:L.key),v=s(L,v,I),C===null?_=L:C.sibling=L,C=L);return t&&T.forEach(function($){return e(g,$)}),Sn&&ih(g,I),_}function m(g,v,w,S){var _=Op(w);if(typeof _!="function")throw Error(ye(150));if(w=_.call(w),w==null)throw Error(ye(151));for(var C=_=null,T=v,I=v=0,L=null,N=w.next();T!==null&&!N.done;I++,N=w.next()){T.index>I?(L=T,T=null):L=T.sibling;var $=d(g,T,N.value,S);if($===null){T===null&&(T=L);break}t&&T&&$.alternate===null&&e(g,T),v=s($,v,I),C===null?_=$:C.sibling=$,C=$,T=L}if(N.done)return n(g,T),Sn&&ih(g,I),_;if(T===null){for(;!N.done;I++,N=w.next())N=h(g,N.value,S),N!==null&&(v=s(N,v,I),C===null?_=N:C.sibling=N,C=N);return Sn&&ih(g,I),_}for(T=r(g,T);!N.done;I++,N=w.next())N=f(T,g,I,N.value,S),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?I:N.key),v=s(N,v,I),C===null?_=N:C.sibling=N,C=N);return t&&T.forEach(function(F){return e(g,F)}),Sn&&ih(g,I),_}function y(g,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Cf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Av:e:{for(var _=w.key,C=v;C!==null;){if(C.key===_){if(_=w.type,_===Cf){if(C.tag===7){n(g,C.sibling),v=i(C,w.props.children),v.return=g,g=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Cc&&tN(_)===C.type){n(g,C.sibling),v=i(C,w.props),v.ref=Dp(g,C,w),v.return=g,g=v;break e}n(g,C);break}else e(g,C);C=C.sibling}w.type===Cf?(v=Dh(w.props.children,g.mode,S,w.key),v.return=g,g=v):(S=dw(w.type,w.key,w.props,null,g.mode,S),S.ref=Dp(g,v,w),S.return=g,g=S)}return o(g);case Sf:e:{for(C=w.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(g,v.sibling),v=i(v,w.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=hk(w,g.mode,S),v.return=g,g=v}return o(g);case Cc:return C=w._init,y(g,v,C(w._payload),S)}if(sm(w))return p(g,v,w,S);if(Op(w))return m(g,v,w,S);Bv(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,w),v.return=g,g=v):(n(g,v),v=uk(w,g.mode,S),v.return=g,g=v),o(g)):n(g,v)}return y}var y0=WF(!0),qF=WF(!1),fx=Mu(null),px=null,If=null,ZC=null;function e_(){ZC=If=px=null}function t_(t){var e=fx.current;wn(fx),t._currentValue=e}function t8(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vf(t,e){px=t,ZC=If=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zi=!0),t.firstContext=null)}function Qs(t){var e=t._currentValue;if(ZC!==t)if(t={context:t,memoizedValue:e,next:null},If===null){if(px===null)throw Error(ye(308));If=t,px.dependencies={lanes:0,firstContext:t}}else If=If.next=t;return e}var Sh=null;function n_(t){Sh===null?Sh=[t]:Sh.push(t)}function UF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,n_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Da(t,r)}function Da(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _c=!1;function r_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _a(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Da(t,n)}return i=r.interleaved,i===null?(e.next=e,n_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Da(t,n)}function ow(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,HC(t,n)}}function nN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mx(t,e,n,r){var i=t.updateQueue;_c=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;o=0,u=c=a=null,l=s;do{var d=l.lane,f=l.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,m=l;switch(d=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ln({},h,d);break e;case 2:_c=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else f={eventTime:f,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=f,a=h):u=u.next=f,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(a=h),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yh|=o,t.lanes=o,t.memoizedState=h}}function rN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ye(191,i));i.call(r)}}}var Ty={},Ol=Mu(Ty),A1=Mu(Ty),T1=Mu(Ty);function Ch(t){if(t===Ty)throw Error(ye(174));return t}function i_(t,e){switch(dn(T1,e),dn(A1,t),dn(Ol,Ty),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:D7(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=D7(e,t)}wn(Ol),dn(Ol,e)}function v0(){wn(Ol),wn(A1),wn(T1)}function KF(t){Ch(T1.current);var e=Ch(Ol.current),n=D7(e,t.type);e!==n&&(dn(A1,t),dn(Ol,n))}function s_(t){A1.current===t&&(wn(Ol),wn(A1))}var In=Mu(0);function gx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ik=[];function o_(){for(var t=0;t<ik.length;t++)ik[t]._workInProgressVersionPrimary=null;ik.length=0}var lw=Ka.ReactCurrentDispatcher,sk=Ka.ReactCurrentBatchConfig,Jh=0,Dn=null,ar=null,vr=null,yx=!1,Mg=!1,M1=0,cte=0;function Vr(){throw Error(ye(321))}function l_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lo(t[n],e[n]))return!1;return!0}function a_(t,e,n,r,i,s){if(Jh=s,Dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lw.current=t===null||t.memoizedState===null?fte:pte,t=n(r,i),Mg){s=0;do{if(Mg=!1,M1=0,25<=s)throw Error(ye(301));s+=1,vr=ar=null,e.updateQueue=null,lw.current=mte,t=n(r,i)}while(Mg)}if(lw.current=vx,e=ar!==null&&ar.next!==null,Jh=0,vr=ar=Dn=null,yx=!1,e)throw Error(ye(300));return t}function c_(){var t=M1!==0;return M1=0,t}function ul(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Dn.memoizedState=vr=t:vr=vr.next=t,vr}function Zs(){if(ar===null){var t=Dn.alternate;t=t!==null?t.memoizedState:null}else t=ar.next;var e=vr===null?Dn.memoizedState:vr.next;if(e!==null)vr=e,ar=t;else{if(t===null)throw Error(ye(310));ar=t,t={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},vr===null?Dn.memoizedState=vr=t:vr=vr.next=t}return vr}function E1(t,e){return typeof e=="function"?e(t):e}function ok(t){var e=Zs(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=ar,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((Jh&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,Dn.lanes|=u,Yh|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,Lo(r,e.memoizedState)||(zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Dn.lanes|=s,Yh|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lk(t){var e=Zs(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Lo(s,e.memoizedState)||(zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function JF(){}function YF(t,e){var n=Dn,r=Zs(),i=e(),s=!Lo(r.memoizedState,i);if(s&&(r.memoizedState=i,zi=!0),r=r.queue,u_(ZF.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vr!==null&&vr.memoizedState.tag&1){if(n.flags|=2048,O1(9,QF.bind(null,n,r,i,e),void 0,null),xr===null)throw Error(ye(349));Jh&30||XF(n,e,i)}return i}function XF(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QF(t,e,n,r){e.value=n,e.getSnapshot=r,ez(e)&&tz(t)}function ZF(t,e,n){return n(function(){ez(e)&&tz(t)})}function ez(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lo(t,n)}catch{return!0}}function tz(t){var e=Da(t,1);e!==null&&Eo(e,t,1,-1)}function iN(t){var e=ul();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E1,lastRenderedState:t},e.queue=t,t=t.dispatch=dte.bind(null,Dn,t),[e.memoizedState,t]}function O1(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nz(){return Zs().memoizedState}function aw(t,e,n,r){var i=ul();Dn.flags|=t,i.memoizedState=O1(1|e,n,void 0,r===void 0?null:r)}function jb(t,e,n,r){var i=Zs();r=r===void 0?null:r;var s=void 0;if(ar!==null){var o=ar.memoizedState;if(s=o.destroy,r!==null&&l_(r,o.deps)){i.memoizedState=O1(e,n,s,r);return}}Dn.flags|=t,i.memoizedState=O1(1|e,n,s,r)}function sN(t,e){return aw(8390656,8,t,e)}function u_(t,e){return jb(2048,8,t,e)}function rz(t,e){return jb(4,2,t,e)}function iz(t,e){return jb(4,4,t,e)}function sz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oz(t,e,n){return n=n!=null?n.concat([t]):null,jb(4,4,sz.bind(null,e,t),n)}function h_(){}function lz(t,e){var n=Zs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&l_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function az(t,e){var n=Zs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&l_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cz(t,e,n){return Jh&21?(Lo(n,e)||(n=pF(),Dn.lanes|=n,Yh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zi=!0),t.memoizedState=n)}function ute(t,e){var n=Ut;Ut=n!==0&&4>n?n:4,t(!0);var r=sk.transition;sk.transition={};try{t(!1),e()}finally{Ut=n,sk.transition=r}}function uz(){return Zs().memoizedState}function hte(t,e,n){var r=iu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hz(t))dz(e,n);else if(n=UF(t,e,n,r),n!==null){var i=vi();Eo(n,t,r,i),fz(n,e,r)}}function dte(t,e,n){var r=iu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hz(t))dz(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Lo(l,o)){var a=e.interleaved;a===null?(i.next=i,n_(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=UF(t,e,i,r),n!==null&&(i=vi(),Eo(n,t,r,i),fz(n,e,r))}}function hz(t){var e=t.alternate;return t===Dn||e!==null&&e===Dn}function dz(t,e){Mg=yx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,HC(t,n)}}var vx={readContext:Qs,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},fte={readContext:Qs,useCallback:function(t,e){return ul().memoizedState=[t,e===void 0?null:e],t},useContext:Qs,useEffect:sN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,aw(4194308,4,sz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return aw(4194308,4,t,e)},useInsertionEffect:function(t,e){return aw(4,2,t,e)},useMemo:function(t,e){var n=ul();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ul();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hte.bind(null,Dn,t),[r.memoizedState,t]},useRef:function(t){var e=ul();return t={current:t},e.memoizedState=t},useState:iN,useDebugValue:h_,useDeferredValue:function(t){return ul().memoizedState=t},useTransition:function(){var t=iN(!1),e=t[0];return t=ute.bind(null,t[1]),ul().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dn,i=ul();if(Sn){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=e(),xr===null)throw Error(ye(349));Jh&30||XF(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sN(ZF.bind(null,r,s,t),[t]),r.flags|=2048,O1(9,QF.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ul(),e=xr.identifierPrefix;if(Sn){var n=ba,r=xa;n=(r&~(1<<32-Mo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=M1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cte++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pte={readContext:Qs,useCallback:lz,useContext:Qs,useEffect:u_,useImperativeHandle:oz,useInsertionEffect:rz,useLayoutEffect:iz,useMemo:az,useReducer:ok,useRef:nz,useState:function(){return ok(E1)},useDebugValue:h_,useDeferredValue:function(t){var e=Zs();return cz(e,ar.memoizedState,t)},useTransition:function(){var t=ok(E1)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:JF,useSyncExternalStore:YF,useId:uz,unstable_isNewReconciler:!1},mte={readContext:Qs,useCallback:lz,useContext:Qs,useEffect:u_,useImperativeHandle:oz,useInsertionEffect:rz,useLayoutEffect:iz,useMemo:az,useReducer:lk,useRef:nz,useState:function(){return lk(E1)},useDebugValue:h_,useDeferredValue:function(t){var e=Zs();return ar===null?e.memoizedState=t:cz(e,ar.memoizedState,t)},useTransition:function(){var t=lk(E1)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:JF,useSyncExternalStore:YF,useId:uz,unstable_isNewReconciler:!1};function vo(t,e){if(t&&t.defaultProps){e=Ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function n8(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hb={isMounted:function(t){return(t=t._reactInternals)?vd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vi(),i=iu(t),s=_a(r,i);s.payload=e,n!=null&&(s.callback=n),e=nu(t,s,i),e!==null&&(Eo(e,t,i,r),ow(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vi(),i=iu(t),s=_a(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=nu(t,s,i),e!==null&&(Eo(e,t,i,r),ow(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vi(),r=iu(t),i=_a(n,r);i.tag=2,e!=null&&(i.callback=e),e=nu(t,i,r),e!==null&&(Eo(e,t,r,n),ow(e,t,r))}};function oN(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!k1(n,r)||!k1(i,s):!0}function pz(t,e,n){var r=!1,i=pu,s=e.contextType;return typeof s=="object"&&s!==null?s=Qs(s):(i=qi(e)?Gh:ni.current,r=e.contextTypes,s=(r=r!=null)?m0(t,i):pu),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hb,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function lN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hb.enqueueReplaceState(e,e.state,null)}function r8(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},r_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qs(s):(s=qi(e)?Gh:ni.current,i.context=m0(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(n8(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Hb.enqueueReplaceState(i,i.state,null),mx(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function w0(t,e){try{var n="",r=e;do n+=VZ(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ak(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function i8(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gte=typeof WeakMap=="function"?WeakMap:Map;function mz(t,e,n){n=_a(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xx||(xx=!0,p8=r),i8(t,e)},n}function gz(t,e,n){n=_a(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){i8(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){i8(t,e),typeof r!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function aN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gte;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ote.bind(null,t,e,n),e.then(t,t))}function cN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_a(-1,1),e.tag=2,nu(n,e,1))),n.lanes|=1),t)}var yte=Ka.ReactCurrentOwner,zi=!1;function di(t,e,n,r){e.child=t===null?qF(e,null,n,r):y0(e,t.child,n,r)}function hN(t,e,n,r,i){n=n.render;var s=e.ref;return Vf(e,i),r=a_(t,e,n,r,s,i),n=c_(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(Sn&&n&&YC(e),e.flags|=1,di(t,e,r,i),e.child)}function dN(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!w_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yz(t,e,s,r,i)):(t=dw(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:k1,n(o,r)&&t.ref===e.ref)return La(t,e,i)}return e.flags|=1,t=su(s,r),t.ref=e.ref,t.return=e,e.child=t}function yz(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(k1(s,r)&&t.ref===e.ref)if(zi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(zi=!0);else return e.lanes=t.lanes,La(t,e,i)}return s8(t,e,n,r,i)}function vz(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(Rf,fs),fs|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dn(Rf,fs),fs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,dn(Rf,fs),fs|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,dn(Rf,fs),fs|=r;return di(t,e,i,n),e.child}function wz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function s8(t,e,n,r,i){var s=qi(n)?Gh:ni.current;return s=m0(e,s),Vf(e,i),n=a_(t,e,n,r,s,i),r=c_(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,La(t,e,i)):(Sn&&r&&YC(e),e.flags|=1,di(t,e,n,i),e.child)}function fN(t,e,n,r,i){if(qi(n)){var s=!0;ux(e)}else s=!1;if(Vf(e,i),e.stateNode===null)cw(t,e),pz(e,n,r),r8(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qs(c):(c=qi(n)?Gh:ni.current,c=m0(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&lN(e,o,r,c),_c=!1;var d=e.memoizedState;o.state=d,mx(e,r,o,i),a=e.memoizedState,l!==r||d!==a||Wi.current||_c?(typeof u=="function"&&(n8(e,n,u,r),a=e.memoizedState),(l=_c||oN(e,n,l,r,d,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GF(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:vo(e.type,l),o.props=c,h=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Qs(a):(a=qi(n)?Gh:ni.current,a=m0(e,a));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==a)&&lN(e,o,r,a),_c=!1,d=e.memoizedState,o.state=d,mx(e,r,o,i);var p=e.memoizedState;l!==h||d!==p||Wi.current||_c?(typeof f=="function"&&(n8(e,n,f,r),p=e.memoizedState),(c=_c||oN(e,n,c,r,d,p,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return o8(t,e,n,r,s,i)}function o8(t,e,n,r,i,s){wz(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&QO(e,n,!1),La(t,e,s);r=e.stateNode,yte.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=y0(e,t.child,null,s),e.child=y0(e,null,l,s)):di(t,e,l,s),e.memoizedState=r.state,i&&QO(e,n,!0),e.child}function xz(t){var e=t.stateNode;e.pendingContext?XO(t,e.pendingContext,e.pendingContext!==e.context):e.context&&XO(t,e.context,!1),i_(t,e.containerInfo)}function pN(t,e,n,r,i){return g0(),QC(i),e.flags|=256,di(t,e,n,r),e.child}var l8={dehydrated:null,treeContext:null,retryLane:0};function a8(t){return{baseLanes:t,cachePool:null,transitions:null}}function bz(t,e,n){var r=e.pendingProps,i=In.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),dn(In,i&1),t===null)return e8(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qb(o,r,0,null),t=Dh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=a8(n),e.memoizedState=l8,t):d_(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return vte(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=su(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=su(l,s):(s=Dh(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?a8(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=l8,r}return s=t.child,t=s.sibling,r=su(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function d_(t,e){return e=qb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $v(t,e,n,r){return r!==null&&QC(r),y0(e,t.child,null,n),t=d_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vte(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ak(Error(ye(422))),$v(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qb({mode:"visible",children:r.children},i,0,null),s=Dh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&y0(e,t.child,null,o),e.child.memoizedState=a8(o),e.memoizedState=l8,s);if(!(e.mode&1))return $v(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(ye(419)),r=ak(s,r,void 0),$v(t,e,o,r)}if(l=(o&t.childLanes)!==0,zi||l){if(r=xr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Da(t,i),Eo(r,t,i,-1))}return v_(),r=ak(Error(ye(421))),$v(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Nte.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,xs=tu(i.nextSibling),ks=e,Sn=!0,Co=null,t!==null&&(Ls[Bs++]=xa,Ls[Bs++]=ba,Ls[Bs++]=Kh,xa=t.id,ba=t.overflow,Kh=e),e=d_(e,r.children),e.flags|=4096,e)}function mN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),t8(t.return,e,n)}function ck(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function kz(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(di(t,e,r.children,n),r=In.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mN(t,n,e);else if(t.tag===19)mN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dn(In,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gx(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ck(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gx(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ck(e,!0,n,null,s);break;case"together":ck(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cw(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function La(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,n=su(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=su(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wte(t,e,n){switch(e.tag){case 3:xz(e),g0();break;case 5:KF(e);break;case 1:qi(e.type)&&ux(e);break;case 4:i_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;dn(fx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dn(In,In.current&1),e.flags|=128,null):n&e.child.childLanes?bz(t,e,n):(dn(In,In.current&1),t=La(t,e,n),t!==null?t.sibling:null);dn(In,In.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return kz(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),dn(In,In.current),r)break;return null;case 22:case 23:return e.lanes=0,vz(t,e,n)}return La(t,e,n)}var Sz,c8,Cz,_z;Sz=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c8=function(){};Cz=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ch(Ol.current);var s=null;switch(n){case"input":i=N7(t,i),r=N7(t,r),s=[];break;case"select":i=Ln({},i,{value:void 0}),r=Ln({},r,{value:void 0}),s=[];break;case"textarea":i=R7(t,i),r=R7(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ax)}L7(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(m1.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(m1.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&mn("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};_z=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lp(t,e){if(!Sn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xte(t,e,n){var r=e.pendingProps;switch(XC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(e),null;case 1:return qi(e.type)&&cx(),Wr(e),null;case 3:return r=e.stateNode,v0(),wn(Wi),wn(ni),o_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Co!==null&&(y8(Co),Co=null))),c8(t,e),Wr(e),null;case 5:s_(e);var i=Ch(T1.current);if(n=e.type,t!==null&&e.stateNode!=null)Cz(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ye(166));return Wr(e),null}if(t=Ch(Ol.current),Lv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[vl]=e,r[_1]=s,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(i=0;i<lm.length;i++)mn(lm[i],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":CO(r,s),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},mn("invalid",r);break;case"textarea":AO(r,s),mn("invalid",r)}L7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Dv(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Dv(r.textContent,l,t),i=["children",""+l]):m1.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":Tv(r),_O(r,s,!0);break;case"textarea":Tv(r),TO(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ax)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vl]=e,t[_1]=r,Sz(t,e,!1,!1),e.stateNode=t;e:{switch(o=B7(n,r),n){case"dialog":mn("cancel",t),mn("close",t),i=r;break;case"iframe":case"object":case"embed":mn("load",t),i=r;break;case"video":case"audio":for(i=0;i<lm.length;i++)mn(lm[i],t);i=r;break;case"source":mn("error",t),i=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),i=r;break;case"details":mn("toggle",t),i=r;break;case"input":CO(t,r),i=N7(t,r),mn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ln({},r,{value:void 0}),mn("invalid",t);break;case"textarea":AO(t,r),i=R7(t,r),mn("invalid",t);break;default:i=r}L7(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?nF(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&eF(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&g1(t,a):typeof a=="number"&&g1(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(m1.hasOwnProperty(s)?a!=null&&s==="onScroll"&&mn("scroll",t):a!=null&&LC(t,s,a,o))}switch(n){case"input":Tv(t),_O(t,r,!1);break;case"textarea":Tv(t),TO(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fu(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ff(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ff(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ax)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wr(e),null;case 6:if(t&&e.stateNode!=null)_z(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ye(166));if(n=Ch(T1.current),Ch(Ol.current),Lv(e)){if(r=e.stateNode,n=e.memoizedProps,r[vl]=e,(s=r.nodeValue!==n)&&(t=ks,t!==null))switch(t.tag){case 3:Dv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vl]=e,e.stateNode=r}return Wr(e),null;case 13:if(wn(In),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Sn&&xs!==null&&e.mode&1&&!(e.flags&128))VF(),g0(),e.flags|=98560,s=!1;else if(s=Lv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ye(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ye(317));s[vl]=e}else g0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wr(e),s=!1}else Co!==null&&(y8(Co),Co=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||In.current&1?ur===0&&(ur=3):v_())),e.updateQueue!==null&&(e.flags|=4),Wr(e),null);case 4:return v0(),c8(t,e),t===null&&S1(e.stateNode.containerInfo),Wr(e),null;case 10:return t_(e.type._context),Wr(e),null;case 17:return qi(e.type)&&cx(),Wr(e),null;case 19:if(wn(In),s=e.memoizedState,s===null)return Wr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Lp(s,!1);else{if(ur!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gx(t),o!==null){for(e.flags|=128,Lp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dn(In,In.current&1|2),e.child}t=t.sibling}s.tail!==null&&Un()>x0&&(e.flags|=128,r=!0,Lp(s,!1),e.lanes=4194304)}else{if(!r)if(t=gx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Sn)return Wr(e),null}else 2*Un()-s.renderingStartTime>x0&&n!==1073741824&&(e.flags|=128,r=!0,Lp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Un(),e.sibling=null,n=In.current,dn(In,r?n&1|2:n&1),e):(Wr(e),null);case 22:case 23:return y_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fs&1073741824&&(Wr(e),e.subtreeFlags&6&&(e.flags|=8192)):Wr(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function bte(t,e){switch(XC(e),e.tag){case 1:return qi(e.type)&&cx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return v0(),wn(Wi),wn(ni),o_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return s_(e),null;case 13:if(wn(In),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));g0()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wn(In),null;case 4:return v0(),null;case 10:return t_(e.type._context),null;case 22:case 23:return y_(),null;case 24:return null;default:return null}}var Fv=!1,Kr=!1,kte=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Pf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jn(t,e,r)}else n.current=null}function u8(t,e,n){try{n()}catch(r){jn(t,e,r)}}var gN=!1;function Ste(t,e){if(G7=sx,t=OF(),JC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==s||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===i&&(l=o),d===s&&++u===r&&(a=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(K7={focusedElem:t,selectionRange:n},sx=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:vo(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(S){jn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return p=gN,gN=!1,p}function Eg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&u8(e,n,s)}i=i.next}while(i!==r)}}function Vb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h8(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Az(t){var e=t.alternate;e!==null&&(t.alternate=null,Az(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vl],delete e[_1],delete e[X7],delete e[ste],delete e[ote])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tz(t){return t.tag===5||t.tag===3||t.tag===4}function yN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function d8(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ax));else if(r!==4&&(t=t.child,t!==null))for(d8(t,e,n),t=t.sibling;t!==null;)d8(t,e,n),t=t.sibling}function f8(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(f8(t,e,n),t=t.sibling;t!==null;)f8(t,e,n),t=t.sibling}var Er=null,bo=!1;function ic(t,e,n){for(n=n.child;n!==null;)Mz(t,e,n),n=n.sibling}function Mz(t,e,n){if(El&&typeof El.onCommitFiberUnmount=="function")try{El.onCommitFiberUnmount(Db,n)}catch{}switch(n.tag){case 5:Kr||Pf(n,e);case 6:var r=Er,i=bo;Er=null,ic(t,e,n),Er=r,bo=i,Er!==null&&(bo?(t=Er,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Er.removeChild(n.stateNode));break;case 18:Er!==null&&(bo?(t=Er,n=n.stateNode,t.nodeType===8?nk(t.parentNode,n):t.nodeType===1&&nk(t,n),x1(t)):nk(Er,n.stateNode));break;case 4:r=Er,i=bo,Er=n.stateNode.containerInfo,bo=!0,ic(t,e,n),Er=r,bo=i;break;case 0:case 11:case 14:case 15:if(!Kr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&u8(n,e,o),i=i.next}while(i!==r)}ic(t,e,n);break;case 1:if(!Kr&&(Pf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){jn(n,e,l)}ic(t,e,n);break;case 21:ic(t,e,n);break;case 22:n.mode&1?(Kr=(r=Kr)||n.memoizedState!==null,ic(t,e,n),Kr=r):ic(t,e,n);break;default:ic(t,e,n)}}function vN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kte),e.forEach(function(r){var i=Ite.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ao(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Er=l.stateNode,bo=!1;break e;case 3:Er=l.stateNode.containerInfo,bo=!0;break e;case 4:Er=l.stateNode.containerInfo,bo=!0;break e}l=l.return}if(Er===null)throw Error(ye(160));Mz(s,o,i),Er=null,bo=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){jn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ez(e,t),e=e.sibling}function Ez(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ao(e,t),Ko(t),r&4){try{Eg(3,t,t.return),Vb(3,t)}catch(m){jn(t,t.return,m)}try{Eg(5,t,t.return)}catch(m){jn(t,t.return,m)}}break;case 1:ao(e,t),Ko(t),r&512&&n!==null&&Pf(n,n.return);break;case 5:if(ao(e,t),Ko(t),r&512&&n!==null&&Pf(n,n.return),t.flags&32){var i=t.stateNode;try{g1(i,"")}catch(m){jn(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&X$(i,s),B7(l,o);var c=B7(l,s);for(o=0;o<a.length;o+=2){var u=a[o],h=a[o+1];u==="style"?nF(i,h):u==="dangerouslySetInnerHTML"?eF(i,h):u==="children"?g1(i,h):LC(i,u,h,c)}switch(l){case"input":I7(i,s);break;case"textarea":Q$(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ff(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ff(i,!!s.multiple,s.defaultValue,!0):Ff(i,!!s.multiple,s.multiple?[]:"",!1))}i[_1]=s}catch(m){jn(t,t.return,m)}}break;case 6:if(ao(e,t),Ko(t),r&4){if(t.stateNode===null)throw Error(ye(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){jn(t,t.return,m)}}break;case 3:if(ao(e,t),Ko(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{x1(e.containerInfo)}catch(m){jn(t,t.return,m)}break;case 4:ao(e,t),Ko(t);break;case 13:ao(e,t),Ko(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(m_=Un())),r&4&&vN(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Kr=(c=Kr)||u,ao(e,t),Kr=c):ao(e,t),Ko(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Fe=t,u=t.child;u!==null;){for(h=Fe=u;Fe!==null;){switch(d=Fe,f=d.child,d.tag){case 0:case 11:case 14:case 15:Eg(4,d,d.return);break;case 1:Pf(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){jn(r,n,m)}}break;case 5:Pf(d,d.return);break;case 22:if(d.memoizedState!==null){xN(h);continue}}f!==null?(f.return=d,Fe=f):xN(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=tF("display",o))}catch(m){jn(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){jn(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ao(e,t),Ko(t),r&4&&vN(t);break;case 21:break;default:ao(e,t),Ko(t)}}function Ko(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tz(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(g1(i,""),r.flags&=-33);var s=yN(t);f8(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=yN(t);d8(t,l,o);break;default:throw Error(ye(161))}}catch(a){jn(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cte(t,e,n){Fe=t,Oz(t)}function Oz(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var i=Fe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fv;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Kr;l=Fv;var c=Kr;if(Fv=o,(Kr=a)&&!c)for(Fe=i;Fe!==null;)o=Fe,a=o.child,o.tag===22&&o.memoizedState!==null?bN(i):a!==null?(a.return=o,Fe=a):bN(i);for(;s!==null;)Fe=s,Oz(s),s=s.sibling;Fe=i,Fv=l,Kr=c}wN(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Fe=s):wN(t)}}function wN(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kr||Vb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rN(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rN(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&x1(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}Kr||e.flags&512&&h8(e)}catch(d){jn(e,e.return,d)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function xN(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function bN(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vb(4,e)}catch(a){jn(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){jn(e,i,a)}}var s=e.return;try{h8(e)}catch(a){jn(e,s,a)}break;case 5:var o=e.return;try{h8(e)}catch(a){jn(e,o,a)}}}catch(a){jn(e,e.return,a)}if(e===t){Fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Fe=l;break}Fe=e.return}}var _te=Math.ceil,wx=Ka.ReactCurrentDispatcher,f_=Ka.ReactCurrentOwner,Ks=Ka.ReactCurrentBatchConfig,Dt=0,xr=null,Xn=null,$r=0,fs=0,Rf=Mu(0),ur=0,N1=null,Yh=0,Wb=0,p_=0,Og=null,Di=null,m_=0,x0=1/0,ha=null,xx=!1,p8=null,ru=null,zv=!1,Hc=null,bx=0,Ng=0,m8=null,uw=-1,hw=0;function vi(){return Dt&6?Un():uw!==-1?uw:uw=Un()}function iu(t){return t.mode&1?Dt&2&&$r!==0?$r&-$r:ate.transition!==null?(hw===0&&(hw=pF()),hw):(t=Ut,t!==0||(t=window.event,t=t===void 0?16:bF(t.type)),t):1}function Eo(t,e,n,r){if(50<Ng)throw Ng=0,m8=null,Error(ye(185));Cy(t,n,r),(!(Dt&2)||t!==xr)&&(t===xr&&(!(Dt&2)&&(Wb|=n),ur===4&&Dc(t,$r)),Ui(t,r),n===1&&Dt===0&&!(e.mode&1)&&(x0=Un()+500,zb&&Eu()))}function Ui(t,e){var n=t.callbackNode;aee(t,e);var r=ix(t,t===xr?$r:0);if(r===0)n!==null&&OO(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&OO(n),e===1)t.tag===0?lte(kN.bind(null,t)):zF(kN.bind(null,t)),rte(function(){!(Dt&6)&&Eu()}),n=null;else{switch(mF(r)){case 1:n=jC;break;case 4:n=dF;break;case 16:n=rx;break;case 536870912:n=fF;break;default:n=rx}n=$z(n,Nz.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Nz(t,e){if(uw=-1,hw=0,Dt&6)throw Error(ye(327));var n=t.callbackNode;if(Wf()&&t.callbackNode!==n)return null;var r=ix(t,t===xr?$r:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kx(t,r);else{e=r;var i=Dt;Dt|=2;var s=Pz();(xr!==t||$r!==e)&&(ha=null,x0=Un()+500,Rh(t,e));do try{Mte();break}catch(l){Iz(t,l)}while(!0);e_(),wx.current=s,Dt=i,Xn!==null?e=0:(xr=null,$r=0,e=ur)}if(e!==0){if(e===2&&(i=H7(t),i!==0&&(r=i,e=g8(t,i))),e===1)throw n=N1,Rh(t,0),Dc(t,r),Ui(t,Un()),n;if(e===6)Dc(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ate(i)&&(e=kx(t,r),e===2&&(s=H7(t),s!==0&&(r=s,e=g8(t,s))),e===1))throw n=N1,Rh(t,0),Dc(t,r),Ui(t,Un()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ye(345));case 2:sh(t,Di,ha);break;case 3:if(Dc(t,r),(r&130023424)===r&&(e=m_+500-Un(),10<e)){if(ix(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Y7(sh.bind(null,t,Di,ha),e);break}sh(t,Di,ha);break;case 4:if(Dc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Mo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_te(r/1960))-r,10<r){t.timeoutHandle=Y7(sh.bind(null,t,Di,ha),r);break}sh(t,Di,ha);break;case 5:sh(t,Di,ha);break;default:throw Error(ye(329))}}}return Ui(t,Un()),t.callbackNode===n?Nz.bind(null,t):null}function g8(t,e){var n=Og;return t.current.memoizedState.isDehydrated&&(Rh(t,e).flags|=256),t=kx(t,e),t!==2&&(e=Di,Di=n,e!==null&&y8(e)),t}function y8(t){Di===null?Di=t:Di.push.apply(Di,t)}function Ate(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lo(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dc(t,e){for(e&=~p_,e&=~Wb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mo(e),r=1<<n;t[n]=-1,e&=~r}}function kN(t){if(Dt&6)throw Error(ye(327));Wf();var e=ix(t,0);if(!(e&1))return Ui(t,Un()),null;var n=kx(t,e);if(t.tag!==0&&n===2){var r=H7(t);r!==0&&(e=r,n=g8(t,r))}if(n===1)throw n=N1,Rh(t,0),Dc(t,e),Ui(t,Un()),n;if(n===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sh(t,Di,ha),Ui(t,Un()),null}function g_(t,e){var n=Dt;Dt|=1;try{return t(e)}finally{Dt=n,Dt===0&&(x0=Un()+500,zb&&Eu())}}function Xh(t){Hc!==null&&Hc.tag===0&&!(Dt&6)&&Wf();var e=Dt;Dt|=1;var n=Ks.transition,r=Ut;try{if(Ks.transition=null,Ut=1,t)return t()}finally{Ut=r,Ks.transition=n,Dt=e,!(Dt&6)&&Eu()}}function y_(){fs=Rf.current,wn(Rf)}function Rh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nte(n)),Xn!==null)for(n=Xn.return;n!==null;){var r=n;switch(XC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cx();break;case 3:v0(),wn(Wi),wn(ni),o_();break;case 5:s_(r);break;case 4:v0();break;case 13:wn(In);break;case 19:wn(In);break;case 10:t_(r.type._context);break;case 22:case 23:y_()}n=n.return}if(xr=t,Xn=t=su(t.current,null),$r=fs=e,ur=0,N1=null,p_=Wb=Yh=0,Di=Og=null,Sh!==null){for(e=0;e<Sh.length;e++)if(n=Sh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Sh=null}return t}function Iz(t,e){do{var n=Xn;try{if(e_(),lw.current=vx,yx){for(var r=Dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yx=!1}if(Jh=0,vr=ar=Dn=null,Mg=!1,M1=0,f_.current=null,n===null||n.return===null){ur=1,N1=e,Xn=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=$r,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=cN(o);if(f!==null){f.flags&=-257,uN(f,o,l,s,e),f.mode&1&&aN(s,c,e),e=f,a=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(a),e.updateQueue=m}else p.add(a);break e}else{if(!(e&1)){aN(s,c,e),v_();break e}a=Error(ye(426))}}else if(Sn&&l.mode&1){var y=cN(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),uN(y,o,l,s,e),QC(w0(a,l));break e}}s=a=w0(a,l),ur!==4&&(ur=2),Og===null?Og=[s]:Og.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=mz(s,a,e);nN(s,g);break e;case 1:l=a;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ru===null||!ru.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=gz(s,l,e);nN(s,S);break e}}s=s.return}while(s!==null)}Dz(n)}catch(_){e=_,Xn===n&&n!==null&&(Xn=n=n.return);continue}break}while(!0)}function Pz(){var t=wx.current;return wx.current=vx,t===null?vx:t}function v_(){(ur===0||ur===3||ur===2)&&(ur=4),xr===null||!(Yh&268435455)&&!(Wb&268435455)||Dc(xr,$r)}function kx(t,e){var n=Dt;Dt|=2;var r=Pz();(xr!==t||$r!==e)&&(ha=null,Rh(t,e));do try{Tte();break}catch(i){Iz(t,i)}while(!0);if(e_(),Dt=n,wx.current=r,Xn!==null)throw Error(ye(261));return xr=null,$r=0,ur}function Tte(){for(;Xn!==null;)Rz(Xn)}function Mte(){for(;Xn!==null&&!ZZ();)Rz(Xn)}function Rz(t){var e=Bz(t.alternate,t,fs);t.memoizedProps=t.pendingProps,e===null?Dz(t):Xn=e,f_.current=null}function Dz(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bte(n,e),n!==null){n.flags&=32767,Xn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ur=6,Xn=null;return}}else if(n=xte(n,e,fs),n!==null){Xn=n;return}if(e=e.sibling,e!==null){Xn=e;return}Xn=e=t}while(e!==null);ur===0&&(ur=5)}function sh(t,e,n){var r=Ut,i=Ks.transition;try{Ks.transition=null,Ut=1,Ete(t,e,n,r)}finally{Ks.transition=i,Ut=r}return null}function Ete(t,e,n,r){do Wf();while(Hc!==null);if(Dt&6)throw Error(ye(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cee(t,s),t===xr&&(Xn=xr=null,$r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zv||(zv=!0,$z(rx,function(){return Wf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ks.transition,Ks.transition=null;var o=Ut;Ut=1;var l=Dt;Dt|=4,f_.current=null,Ste(t,n),Ez(n,t),Jee(K7),sx=!!G7,K7=G7=null,t.current=n,Cte(n),eee(),Dt=l,Ut=o,Ks.transition=s}else t.current=n;if(zv&&(zv=!1,Hc=t,bx=i),s=t.pendingLanes,s===0&&(ru=null),ree(n.stateNode),Ui(t,Un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xx)throw xx=!1,t=p8,p8=null,t;return bx&1&&t.tag!==0&&Wf(),s=t.pendingLanes,s&1?t===m8?Ng++:(Ng=0,m8=t):Ng=0,Eu(),null}function Wf(){if(Hc!==null){var t=mF(bx),e=Ks.transition,n=Ut;try{if(Ks.transition=null,Ut=16>t?16:t,Hc===null)var r=!1;else{if(t=Hc,Hc=null,bx=0,Dt&6)throw Error(ye(331));var i=Dt;for(Dt|=4,Fe=t.current;Fe!==null;){var s=Fe,o=s.child;if(Fe.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Fe=c;Fe!==null;){var u=Fe;switch(u.tag){case 0:case 11:case 15:Eg(8,u,s)}var h=u.child;if(h!==null)h.return=u,Fe=h;else for(;Fe!==null;){u=Fe;var d=u.sibling,f=u.return;if(Az(u),u===c){Fe=null;break}if(d!==null){d.return=f,Fe=d;break}Fe=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Fe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Fe=o;else e:for(;Fe!==null;){if(s=Fe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eg(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Fe=g;break e}Fe=s.return}}var v=t.current;for(Fe=v;Fe!==null;){o=Fe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Fe=w;else e:for(o=v;Fe!==null;){if(l=Fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vb(9,l)}}catch(_){jn(l,l.return,_)}if(l===o){Fe=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Fe=S;break e}Fe=l.return}}if(Dt=i,Eu(),El&&typeof El.onPostCommitFiberRoot=="function")try{El.onPostCommitFiberRoot(Db,t)}catch{}r=!0}return r}finally{Ut=n,Ks.transition=e}}return!1}function SN(t,e,n){e=w0(n,e),e=mz(t,e,1),t=nu(t,e,1),e=vi(),t!==null&&(Cy(t,1,e),Ui(t,e))}function jn(t,e,n){if(t.tag===3)SN(t,t,n);else for(;e!==null;){if(e.tag===3){SN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ru===null||!ru.has(r))){t=w0(n,t),t=gz(e,t,1),e=nu(e,t,1),t=vi(),e!==null&&(Cy(e,1,t),Ui(e,t));break}}e=e.return}}function Ote(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vi(),t.pingedLanes|=t.suspendedLanes&n,xr===t&&($r&n)===n&&(ur===4||ur===3&&($r&130023424)===$r&&500>Un()-m_?Rh(t,0):p_|=n),Ui(t,e)}function Lz(t,e){e===0&&(t.mode&1?(e=Ov,Ov<<=1,!(Ov&130023424)&&(Ov=4194304)):e=1);var n=vi();t=Da(t,e),t!==null&&(Cy(t,e,n),Ui(t,n))}function Nte(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lz(t,n)}function Ite(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(e),Lz(t,n)}var Bz;Bz=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wi.current)zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zi=!1,wte(t,e,n);zi=!!(t.flags&131072)}else zi=!1,Sn&&e.flags&1048576&&jF(e,dx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cw(t,e),t=e.pendingProps;var i=m0(e,ni.current);Vf(e,n),i=a_(null,e,r,t,i,n);var s=c_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(r)?(s=!0,ux(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,r_(e),i.updater=Hb,e.stateNode=i,i._reactInternals=e,r8(e,r,t,n),e=o8(null,e,r,!0,s,n)):(e.tag=0,Sn&&s&&YC(e),di(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cw(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Rte(r),t=vo(r,t),i){case 0:e=s8(null,e,r,t,n);break e;case 1:e=fN(null,e,r,t,n);break e;case 11:e=hN(null,e,r,t,n);break e;case 14:e=dN(null,e,r,vo(r.type,t),n);break e}throw Error(ye(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),s8(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),fN(t,e,r,i,n);case 3:e:{if(xz(e),t===null)throw Error(ye(387));r=e.pendingProps,s=e.memoizedState,i=s.element,GF(t,e),mx(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=w0(Error(ye(423)),e),e=pN(t,e,r,n,i);break e}else if(r!==i){i=w0(Error(ye(424)),e),e=pN(t,e,r,n,i);break e}else for(xs=tu(e.stateNode.containerInfo.firstChild),ks=e,Sn=!0,Co=null,n=qF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(g0(),r===i){e=La(t,e,n);break e}di(t,e,r,n)}e=e.child}return e;case 5:return KF(e),t===null&&e8(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,J7(r,i)?o=null:s!==null&&J7(r,s)&&(e.flags|=32),wz(t,e),di(t,e,o,n),e.child;case 6:return t===null&&e8(e),null;case 13:return bz(t,e,n);case 4:return i_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=y0(e,null,r,n):di(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),hN(t,e,r,i,n);case 7:return di(t,e,e.pendingProps,n),e.child;case 8:return di(t,e,e.pendingProps.children,n),e.child;case 12:return di(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,dn(fx,r._currentValue),r._currentValue=o,s!==null)if(Lo(s.value,o)){if(s.children===i.children&&!Wi.current){e=La(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=_a(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),t8(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ye(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),t8(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}di(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vf(e,n),i=Qs(i),r=r(i),e.flags|=1,di(t,e,r,n),e.child;case 14:return r=e.type,i=vo(r,e.pendingProps),i=vo(r.type,i),dN(t,e,r,i,n);case 15:return yz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),cw(t,e),e.tag=1,qi(r)?(t=!0,ux(e)):t=!1,Vf(e,n),pz(e,r,i),r8(e,r,i,n),o8(null,e,r,!0,t,n);case 19:return kz(t,e,n);case 22:return vz(t,e,n)}throw Error(ye(156,e.tag))};function $z(t,e){return hF(t,e)}function Pte(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(t,e,n,r){return new Pte(t,e,n,r)}function w_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rte(t){if(typeof t=="function")return w_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$C)return 11;if(t===FC)return 14}return 2}function su(t,e){var n=t.alternate;return n===null?(n=js(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dw(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")w_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cf:return Dh(n.children,i,s,e);case BC:o=8,i|=8;break;case T7:return t=js(12,n,e,i|2),t.elementType=T7,t.lanes=s,t;case M7:return t=js(13,n,e,i),t.elementType=M7,t.lanes=s,t;case E7:return t=js(19,n,e,i),t.elementType=E7,t.lanes=s,t;case K$:return qb(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U$:o=10;break e;case G$:o=9;break e;case $C:o=11;break e;case FC:o=14;break e;case Cc:o=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=js(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Dh(t,e,n,r){return t=js(7,t,r,e),t.lanes=n,t}function qb(t,e,n,r){return t=js(22,t,r,e),t.elementType=K$,t.lanes=n,t.stateNode={isHidden:!1},t}function uk(t,e,n){return t=js(6,t,null,e),t.lanes=n,t}function hk(t,e,n){return e=js(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dte(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q3(0),this.expirationTimes=q3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q3(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function x_(t,e,n,r,i,s,o,l,a){return t=new Dte(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=js(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},r_(s),t}function Lte(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fz(t){if(!t)return pu;t=t._reactInternals;e:{if(vd(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var n=t.type;if(qi(n))return FF(t,n,e)}return e}function zz(t,e,n,r,i,s,o,l,a){return t=x_(n,r,!0,t,i,s,o,l,a),t.context=Fz(null),n=t.current,r=vi(),i=iu(n),s=_a(r,i),s.callback=e??null,nu(n,s,i),t.current.lanes=i,Cy(t,i,r),Ui(t,r),t}function Ub(t,e,n,r){var i=e.current,s=vi(),o=iu(i);return n=Fz(n),e.context===null?e.context=n:e.pendingContext=n,e=_a(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nu(i,e,o),t!==null&&(Eo(t,i,o,s),ow(t,i,o)),o}function Sx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function CN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function b_(t,e){CN(t,e),(t=t.alternate)&&CN(t,e)}function Bte(){return null}var jz=typeof reportError=="function"?reportError:function(t){console.error(t)};function k_(t){this._internalRoot=t}Gb.prototype.render=k_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));Ub(t,e,null,null)};Gb.prototype.unmount=k_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xh(function(){Ub(null,t,null,null)}),e[Ra]=null}};function Gb(t){this._internalRoot=t}Gb.prototype.unstable_scheduleHydration=function(t){if(t){var e=vF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rc.length&&e!==0&&e<Rc[n].priority;n++);Rc.splice(n,0,t),n===0&&xF(t)}};function S_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _N(){}function $te(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Sx(o);s.call(c)}}var o=zz(e,r,t,0,null,!1,!1,"",_N);return t._reactRootContainer=o,t[Ra]=o.current,S1(t.nodeType===8?t.parentNode:t),Xh(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Sx(a);l.call(c)}}var a=x_(t,0,!1,null,null,!1,!1,"",_N);return t._reactRootContainer=a,t[Ra]=a.current,S1(t.nodeType===8?t.parentNode:t),Xh(function(){Ub(e,a,n,r)}),a}function Jb(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Sx(o);l.call(a)}}Ub(e,o,t,i)}else o=$te(n,e,t,i,r);return Sx(o)}gF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=om(e.pendingLanes);n!==0&&(HC(e,n|1),Ui(e,Un()),!(Dt&6)&&(x0=Un()+500,Eu()))}break;case 13:Xh(function(){var r=Da(t,1);if(r!==null){var i=vi();Eo(r,t,1,i)}}),b_(t,1)}};VC=function(t){if(t.tag===13){var e=Da(t,134217728);if(e!==null){var n=vi();Eo(e,t,134217728,n)}b_(t,134217728)}};yF=function(t){if(t.tag===13){var e=iu(t),n=Da(t,e);if(n!==null){var r=vi();Eo(n,t,e,r)}b_(t,e)}};vF=function(){return Ut};wF=function(t,e){var n=Ut;try{return Ut=t,e()}finally{Ut=n}};F7=function(t,e,n){switch(e){case"input":if(I7(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fb(r);if(!i)throw Error(ye(90));Y$(r),I7(r,i)}}}break;case"textarea":Q$(t,n);break;case"select":e=n.value,e!=null&&Ff(t,!!n.multiple,e,!1)}};sF=g_;oF=Xh;var Fte={usingClientEntryPoint:!1,Events:[Ay,Mf,Fb,rF,iF,g_]},Bp={findFiberByHostInstance:kh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zte={bundleType:Bp.bundleType,version:Bp.version,rendererPackageName:Bp.rendererPackageName,rendererConfig:Bp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cF(t),t===null?null:t.stateNode},findFiberByHostInstance:Bp.findFiberByHostInstance||Bte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jv.isDisabled&&jv.supportsFiber)try{Db=jv.inject(zte),El=jv}catch{}}Ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fte;Ts.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S_(e))throw Error(ye(200));return Lte(t,e,null,n)};Ts.createRoot=function(t,e){if(!S_(t))throw Error(ye(299));var n=!1,r="",i=jz;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=x_(t,1,!1,null,null,n,!1,r,i),t[Ra]=e.current,S1(t.nodeType===8?t.parentNode:t),new k_(e)};Ts.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=cF(e),t=t===null?null:t.stateNode,t};Ts.flushSync=function(t){return Xh(t)};Ts.hydrate=function(t,e,n){if(!Kb(e))throw Error(ye(200));return Jb(null,t,e,!0,n)};Ts.hydrateRoot=function(t,e,n){if(!S_(t))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jz;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zz(e,null,t,1,n??null,i,!1,s,o),t[Ra]=e.current,S1(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gb(e)};Ts.render=function(t,e,n){if(!Kb(e))throw Error(ye(200));return Jb(null,t,e,!1,n)};Ts.unmountComponentAtNode=function(t){if(!Kb(t))throw Error(ye(40));return t._reactRootContainer?(Xh(function(){Jb(null,null,t,!1,function(){t._reactRootContainer=null,t[Ra]=null})}),!0):!1};Ts.unstable_batchedUpdates=g_;Ts.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kb(n))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return Jb(t,e,n,!1,r)};Ts.version="18.3.1-next-f1338f8080-20240426";function Hz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hz)}catch(t){console.error(t)}}Hz(),H$.exports=Ts;var jte=H$.exports,Vz,AN=jte;Vz=AN.createRoot,AN.hydrateRoot;const Hte="modulepreload",Vte=function(t){return"/"+t},TN={},J=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(a=>{if(a=Vte(a),a in TN)return;TN[a]=!0;const c=a.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Hte,c||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},Wte=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>J(async()=>{const{default:r}=await Promise.resolve().then(()=>U0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class C_ extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class qte extends C_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ute extends C_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gte extends C_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var v8;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(v8||(v8={}));var Kte=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class Jte{constructor(e,{headers:n={},customFetch:r,region:i=v8.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Wte(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Kte(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let l={},{region:a}=n;a||(a=this.region),a&&a!=="any"&&(l["x-region"]=a);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:c}).catch(p=>{throw new qte(p)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Ute(u);if(!u.ok)throw new Gte(u);let d=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield u.json():d==="application/octet-stream"?f=yield u.blob():d==="text/event-stream"?f=u:d==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var Li={},__={},Yb={},My={},Xb={},Qb={},Yte=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},b0=Yte();const Xte=b0.fetch,Wz=b0.fetch.bind(b0),qz=b0.Headers,Qte=b0.Request,Zte=b0.Response,U0=Object.freeze(Object.defineProperty({__proto__:null,Headers:qz,Request:Qte,Response:Zte,default:Wz,fetch:Xte},Symbol.toStringTag,{value:"Module"})),ene=mZ(U0);var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0});let tne=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Zb.default=tne;var Uz=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qb,"__esModule",{value:!0});const nne=Uz(ene),rne=Uz(Zb);let ine=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=nne.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,a;let c=null,u=null,h=null,d=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");m&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await s.text();try{c=JSON.parse(m),Array.isArray(c)&&s.status===404&&(u=[],c=null,d=200,f="OK")}catch{s.status===404&&m===""?(d=204,f="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((a=c==null?void 0:c.details)===null||a===void 0)&&a.includes("0 rows"))&&(c=null,d=200,f="OK"),c&&this.shouldThrowOnError)throw new rne.default(c)}return{error:c,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,l,a;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=s==null?void 0:s.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Qb.default=ine;var sne=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xb,"__esModule",{value:!0});const one=sne(Qb);let lne=class extends one.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var l;const a=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xb.default=lne;var ane=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(My,"__esModule",{value:!0});const cne=ane(Xb);let une=class extends cne.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};My.default=une;var hne=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yb,"__esModule",{value:!0});const $p=hne(My);let dne=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new $p.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new $p.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new $p.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new $p.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new $p.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Yb.default=dne;var e5={},t5={};Object.defineProperty(t5,"__esModule",{value:!0});t5.version=void 0;t5.version="0.0.0-automated";Object.defineProperty(e5,"__esModule",{value:!0});e5.DEFAULT_HEADERS=void 0;const fne=t5;e5.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${fne.version}`};var Gz=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(__,"__esModule",{value:!0});const pne=Gz(Yb),mne=Gz(My),gne=e5;let yne=class Kz{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},gne.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new pne.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Kz(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let a;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",a=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new mne.default({method:o,url:l,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};__.default=yne;var G0=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Li,"__esModule",{value:!0});Li.PostgrestError=Li.PostgrestBuilder=Li.PostgrestTransformBuilder=Li.PostgrestFilterBuilder=Li.PostgrestQueryBuilder=Li.PostgrestClient=void 0;const Jz=G0(__);Li.PostgrestClient=Jz.default;const Yz=G0(Yb);Li.PostgrestQueryBuilder=Yz.default;const Xz=G0(My);Li.PostgrestFilterBuilder=Xz.default;const Qz=G0(Xb);Li.PostgrestTransformBuilder=Qz.default;const Zz=G0(Qb);Li.PostgrestBuilder=Zz.default;const ej=G0(Zb);Li.PostgrestError=ej.default;var vne=Li.default={PostgrestClient:Jz.default,PostgrestQueryBuilder:Yz.default,PostgrestFilterBuilder:Xz.default,PostgrestTransformBuilder:Qz.default,PostgrestBuilder:Zz.default,PostgrestError:ej.default};const{PostgrestClient:wne,PostgrestQueryBuilder:dTe,PostgrestFilterBuilder:fTe,PostgrestTransformBuilder:pTe,PostgrestBuilder:mTe,PostgrestError:gTe}=vne;let w8;typeof window>"u"?w8=require("ws"):w8=window.WebSocket;const xne=w8,bne="2.11.10",kne={"X-Client-Info":`realtime-js/${bne}`},Sne="1.0.0",tj=1e4,Cne=1e3;var qf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(qf||(qf={}));var hi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(hi||(hi={}));var ko;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ko||(ko={}));var x8;(function(t){t.websocket="websocket"})(x8||(x8={}));var yh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yh||(yh={}));class _ne{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+i));o=o+i;const a=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:c}}}let nj=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var an;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(an||(an={}));const MN=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Ane(o,t,e,i),s),{})},Ane=(t,e,n,r)=>{const i=e.find(l=>l.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?rj(s,o):b8(o)},rj=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return One(e,n)}switch(t){case an.bool:return Tne(e);case an.float4:case an.float8:case an.int2:case an.int4:case an.int8:case an.numeric:case an.oid:return Mne(e);case an.json:case an.jsonb:return Ene(e);case an.timestamp:return Nne(e);case an.abstime:case an.date:case an.daterange:case an.int4range:case an.int8range:case an.money:case an.reltime:case an.text:case an.time:case an.timestamptz:case an.timetz:case an.tsrange:case an.tstzrange:return b8(e);default:return b8(e)}},b8=t=>t,Tne=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Mne=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ene=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},One=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>rj(e,l))}return t},Nne=t=>typeof t=="string"?t.replace(" ","T"):t,ij=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dk{constructor(e,n,r={},i=tj){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var EN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(EN||(EN={}));class Ig{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ig.syncState(this.state,i,s,o),this.pendingDiffs.forEach(a=>{this.state=Ig.syncDiff(this.state,a,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ig.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),l={},a={};return this.map(s,(c,u)=>{o[c]||(a[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const d=u.map(y=>y.presence_ref),f=h.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),m=h.filter(y=>d.indexOf(y.presence_ref)<0);p.length>0&&(l[c]=p),m.length>0&&(a[c]=m)}else l[c]=u}),this.syncDiff(s,{joins:l,leaves:a},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,a)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(a),u.length>0){const h=e[l].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...d)}r(l,u,a)}),this.map(o,(l,a)=>{let c=e[l];if(!c)return;const u=a.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=c,i(l,c,a),c.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ON;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ON||(ON={}));var NN;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(NN||(NN={}));var da;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(da||(da={}));class A_{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=hi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dk(this,ko.join,this.params,this.timeout),this.rejoinTimer=new nj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hi.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ko.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ig(this),this.broadcastEndpointURL=ij(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(da.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(da.CLOSED));const a={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(da.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let m=0;m<f;m++){const y=d[m],{filter:{event:g,schema:v,table:w,filter:S}}=y,_=u&&u[m];if(_&&_.event===g&&_.schema===v&&_.table===w&&_.filter===S)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=hi.errored,e==null||e(da.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(da.SUBSCRIBED);return}}).receive("error",u=>{this.state=hi.errored,e==null||e(da.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(da.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,a;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((a=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||a===void 0)&&a.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=hi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ko.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new dk(this,ko.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new dk(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:c,join:u}=ko;if(r&&[l,a,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,n,r);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,m,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(d,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,m,y,g,v,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const S=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return S&&((m=n.ids)===null||m===void 0?void 0:m.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(v=(g=f==null?void 0:f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:m,table:y,commit_timestamp:g,type:v,errors:w}=p;d=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:g,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(d,r)})}_isClosed(){return this.state===hi.closed}_isJoined(){return this.state===hi.joined}_isJoining(){return this.state===hi.joining}_isLeaving(){return this.state===hi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&A_.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ko.close,{},e)}_onError(e){this._on(ko.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=MN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=MN(e.columns,e.old_record)),n}}const IN=()=>{},Ine=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pne{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=kne,this.params={},this.timeout=tj,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=IN,this.ref=0,this.logger=IN,this.conn=null,this.sendBuffer=[],this.serializer=new _ne,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>J(async()=>{const{default:a}=await Promise.resolve().then(()=>U0);return{default:a}},void 0).then(({default:a})=>a(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${x8.websocket}`,this.httpEndpoint=ij(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nj(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=xne),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Rne(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sne}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qf.connecting:return yh.Connecting;case qf.open:return yh.Open;case qf.closing:return yh.Closing;default:return yh.Closed}}isConnected(){return this.connectionState()===yh.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new A_(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(ko.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Cne,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ko.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ine],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Rne{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=qf.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class T_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Dne extends T_{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class k8 extends T_{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Lne=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const sj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>J(async()=>{const{default:r}=await Promise.resolve().then(()=>U0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Bne=()=>Lne(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield J(()=>Promise.resolve().then(()=>U0),void 0)).Response:Response}),S8=t=>{if(Array.isArray(t))return t.map(n=>S8(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=S8(r)}),e};var wd=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const fk=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$ne=(t,e,n)=>wd(void 0,void 0,void 0,function*(){const r=yield Bne();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new Dne(fk(i),t.status||500))}).catch(i=>{e(new k8(fk(i),i))}):e(new k8(fk(t),t))}),Fne=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Ey(t,e,n,r,i,s){return wd(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,Fne(e,r,i,s)).then(a=>{if(!a.ok)throw a;return r!=null&&r.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>$ne(a,l,r))})})}function Cx(t,e,n,r){return wd(this,void 0,void 0,function*(){return Ey(t,"GET",e,n,r)})}function Ac(t,e,n,r,i){return wd(this,void 0,void 0,function*(){return Ey(t,"POST",e,r,i,n)})}function zne(t,e,n,r,i){return wd(this,void 0,void 0,function*(){return Ey(t,"PUT",e,r,i,n)})}function jne(t,e,n,r){return wd(this,void 0,void 0,function*(){return Ey(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function oj(t,e,n,r,i){return wd(this,void 0,void 0,function*(){return Ey(t,"DELETE",e,r,i,n)})}var Oi=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const Hne={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},PN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vne{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=sj(i)}uploadOrUpdate(e,n,r,i){return Oi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},PN),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const a=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),a&&s.append("metadata",this.encodeMetadata(a))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,a&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:c,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(yr(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Oi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Oi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let a;const c=Object.assign({upsert:PN.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",c.cacheControl)):(a=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:u}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(a){if(yr(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,n){return Oi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Ac(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new T_("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(yr(r))return{data:null,error:r};throw r}})}update(e,n,r){return Oi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Oi(this,void 0,void 0,function*(){try{return{data:yield Ac(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(yr(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Oi(this,void 0,void 0,function*(){try{return{data:{path:(yield Ac(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(yr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Oi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ac(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(yr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Oi(this,void 0,void 0,function*(){try{const i=yield Ac(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(yr(i))return{data:null,error:i};throw i}})}download(e,n){return Oi(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Cx(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(yr(l))return{data:null,error:l};throw l}})}info(e){return Oi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Cx(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:S8(r),error:null}}catch(r){if(yr(r))return{data:null,error:r};throw r}})}exists(e){return Oi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield jne(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(yr(r)&&r instanceof k8){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});a!==""&&i.push(a);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${c}`)}}}remove(e){return Oi(this,void 0,void 0,function*(){try{return{data:yield oj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(yr(n))return{data:null,error:n};throw n}})}list(e,n,r){return Oi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Hne),n),{prefix:e||""});return{data:yield Ac(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(yr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Wne="2.7.1",qne={"X-Client-Info":`storage-js/${Wne}`};var Dd=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class Une{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},qne),n),this.fetch=sj(r)}listBuckets(){return Dd(this,void 0,void 0,function*(){try{return{data:yield Cx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(yr(e))return{data:null,error:e};throw e}})}getBucket(e){return Dd(this,void 0,void 0,function*(){try{return{data:yield Cx(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(yr(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Dd(this,void 0,void 0,function*(){try{return{data:yield Ac(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(yr(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Dd(this,void 0,void 0,function*(){try{return{data:yield zne(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(yr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Dd(this,void 0,void 0,function*(){try{return{data:yield Ac(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(yr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Dd(this,void 0,void 0,function*(){try{return{data:yield oj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(yr(n))return{data:null,error:n};throw n}})}}class Gne extends Une{constructor(e,n={},r){super(e,n,r)}from(e){return new Vne(this.url,this.headers,e,this.fetch)}}const Kne="2.50.0";let am="";typeof Deno<"u"?am="deno":typeof document<"u"?am="web":typeof navigator<"u"&&navigator.product==="ReactNative"?am="react-native":am="node";const Jne={"X-Client-Info":`supabase-js-${am}/${Kne}`},Yne={headers:Jne},Xne={schema:"public"},Qne={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zne={};var ere=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};const tre=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wz:e=fetch,(...n)=>e(...n)},nre=()=>typeof Headers>"u"?qz:Headers,rre=(t,e,n)=>{const r=tre(n),i=nre();return(s,o)=>ere(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var ire=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};function sre(t){return t.endsWith("/")?t:t+"/"}function ore(t,e){var n,r;const{db:i,auth:s,realtime:o,global:l}=t,{db:a,auth:c,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},a),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ire(this,void 0,void 0,function*(){return""})};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}const lj="2.70.0",Kd=30*1e3,C8=3,pk=C8*Kd,lre="http://localhost:9999",are="supabase.auth.token",cre={"X-Client-Info":`gotrue-js/${lj}`},_8="X-Supabase-Api-Version",aj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ure=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hre=6e5;class M_ extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function mt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dre extends M_{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function fre(t){return mt(t)&&t.name==="AuthApiError"}class cj extends M_{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ou extends M_{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class fc extends Ou{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pre(t){return mt(t)&&t.name==="AuthSessionMissingError"}class Hv extends Ou{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vv extends Ou{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wv extends Ou{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mre(t){return mt(t)&&t.name==="AuthImplicitGrantRedirectError"}class RN extends Ou{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class A8 extends Ou{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mk(t){return mt(t)&&t.name==="AuthRetryableFetchError"}class DN extends Ou{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Pg extends Ou{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),LN=` 	
\r=`.split(""),gre=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<LN.length;e+=1)t[LN[e].charCodeAt(0)]=-2;for(let e=0;e<_x.length;e+=1)t[_x[e].charCodeAt(0)]=e;return t})();function BN(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(_x[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(_x[r]),e.queuedBits-=6}}function uj(t,e,n){const r=gre[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $N(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{wre(o,r,n)};for(let o=0;o<t.length;o+=1)uj(t.charCodeAt(o),i,s);return e.join("")}function yre(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function vre(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}yre(r,e)}}function wre(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function xre(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)uj(t.charCodeAt(i),n,r);return new Uint8Array(e)}function bre(t){const e=[];return vre(t,n=>e.push(n)),new Uint8Array(e)}function kre(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>BN(i,n,r)),BN(null,n,r),e.join("")}function Sre(t){return Math.round(Date.now()/1e3)+t}function Cre(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const uo=()=>typeof window<"u"&&typeof document<"u",qu={tested:!1,writable:!1},Rg=()=>{if(!uo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qu.tested)return qu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),qu.tested=!0,qu.writable=!0}catch{qu.tested=!0,qu.writable=!1}return qu.writable};function _re(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const hj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>J(async()=>{const{default:r}=await Promise.resolve().then(()=>U0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Are=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",dj=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},qv=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Uv=async(t,e)=>{await t.removeItem(e)};class n5{constructor(){this.promise=new n5.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}n5.promiseConstructor=Promise;function gk(t){const e=t.split(".");if(e.length!==3)throw new Pg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ure.test(e[r]))throw new Pg("JWT not in base64url format");return{header:JSON.parse($N(e[0])),payload:JSON.parse($N(e[1])),signature:xre(e[2]),raw:{header:e[0],payload:e[1]}}}async function Tre(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Mre(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Ere(t){return("0"+t.toString(16)).substr(-2)}function Ore(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Ere).join("")}async function Nre(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Ire(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Nre(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ld(t,e,n=!1){const r=Ore();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await dj(t,`${e}-code-verifier`,i);const s=await Ire(r);return[s,r===s?"plain":"s256"]}const Pre=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rre(t){const e=t.headers.get(_8);if(!e||!e.match(Pre))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dre(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Lre(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bre=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bd(t){if(!Bre.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var $re=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const oh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Fre=[502,503,504];async function FN(t){var e;if(!Are(t))throw new A8(oh(t),0);if(Fre.includes(t.status))throw new A8(oh(t),t.status);let n;try{n=await t.json()}catch(s){throw new cj(oh(s),s)}let r;const i=Rre(t);if(i&&i.getTime()>=aj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new DN(oh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new fc}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new DN(oh(n),t.status,n.weak_password.reasons);throw new dre(oh(n),t.status||500,r)}const zre=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Tt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[_8]||(s[_8]=aj["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=await jre(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(a):{data:Object.assign({},a),error:null}}async function jre(t,e,n,r,i,s){const o=zre(e,r,i,s);let l;try{l=await t(n,Object.assign({},o))}catch(a){throw console.error(a),new A8(oh(a),0)}if(l.ok||await FN(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(a){await FN(a)}}function ra(t){var e;let n=null;qre(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Sre(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function zN(t){const e=ra(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lc(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Hre(t){return{data:t,error:null}}function Vre(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=$re(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function Wre(t){return t}function qre(t){return t.access_token&&t.refresh_token&&t.expires_in}const yk=["global","local","others"];var Ure=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Gre{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=hj(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=yk[0]){if(yk.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yk.join(", ")}`);try{return await Tt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Lc})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ure(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Vre,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(mt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Tt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lc})}catch(n){if(mt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,l,a;try{const c={nextPage:null,lastPage:0,total:0},u=await Tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Wre});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(a=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return f.length>0&&(f.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=m}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(mt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Bd(e);try{return await Tt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lc})}catch(n){if(mt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Bd(e);try{return await Tt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Lc})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Bd(e);try{return await Tt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Lc})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Bd(e.userId);try{const{data:n,error:r}=await Tt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Bd(e.userId),Bd(e.id);try{return{data:await Tt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}}}const Kre={getItem:t=>Rg()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Rg()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Rg()&&globalThis.localStorage.removeItem(t)}};function jN(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Jre(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $d={debug:!!(globalThis&&Rg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Yre extends fj{}async function Xre(t,e,n){$d.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$d.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){$d.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{$d.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw $d.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Yre(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($d.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Jre();const Qre={url:lre,storageKey:are,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cre,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function HN(t,e,n){return await n()}class I1{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=I1.nextInstanceID,I1.nextInstanceID+=1,this.instanceID>0&&uo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Qre),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Gre({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=hj(i.fetch),this.lock=i.lock||HN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:uo()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Xre:this.lock=HN,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Rg()?this.storage=Kre:(this.memoryStorage={},this.storage=jN(this.memoryStorage)):(this.memoryStorage={},this.storage=jN(this.memoryStorage)),uo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=_re(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),uo()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),mre(s)){const a=(e=s.details)===null||e===void 0?void 0:e.code;if(a==="identity_already_exists"||a==="identity_not_found"||a==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return mt(n)?{error:n}:{error:new cj("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ra}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(mt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Ld(this.storage,this.storageKey)),s=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:ra})}else if("phone"in e){const{phone:u,password:h,options:d}=e;s=await Tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ra})}else throw new Vv("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(mt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:l}=e;n=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zN})}else if("phone"in e){const{phone:s,password:o,options:l}=e;n=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zN})}else throw new Vv("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Hv}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,l,a,c,u,h,d,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:g,statement:v,options:w}=e;let S;if(uo())if(typeof g=="object")S=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const _=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let T;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")T=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)T=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)p=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),m=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:y,error:g}=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:kre(m)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ra});if(g)throw g;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Hv}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:g})}catch(y){if(mt(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await qv(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ra});if(await Uv(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Hv}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(mt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,l=await Tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ra}),{data:a,error:c}=l;return c?{data:{user:null,session:null},error:c}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Hv}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c})}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:l,options:a}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ld(this.storage,this.storageKey));const{error:h}=await Tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=a==null?void 0:a.data)!==null&&n!==void 0?n:{},create_user:(r=a==null?void 0:a.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:a}=e,{data:c,error:u}=await Tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=a==null?void 0:a.data)!==null&&i!==void 0?i:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Vv("You must provide either an email or phone number.")}catch(l){if(mt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ra});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,c=o.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(i){if(mt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Ld(this.storage,this.storageKey)),await Tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Hre})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new fc;const{error:i}=await Tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(mt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Tt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:l}=await Tt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Vv("You must provide either an email or phone number and a type")}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await qv(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pk:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(a,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(a,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lc}):await this._useSession(async n=>{var r,i,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fc}:await Tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Lc})})}catch(n){if(mt(n))return pre(n)&&(await this._removeSession(),await Uv(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new fc;const o=i.session;let l=null,a=null;this.flowType==="pkce"&&e.email!=null&&([l,a]=await Ld(this.storage,this.storageKey));const{data:c,error:u}=await Tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:a}),jwt:o.access_token,xform:Lc});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(mt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=gk(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:l,error:a}=await this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(mt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new fc;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(mt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!uo())throw new Wv("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wv(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new RN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wv("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new RN("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:a,token_type:c}=e;if(!s||!l||!o||!c)throw new Wv("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let d=u+h;a&&(d=parseInt(a));const f=d-u;f*1e3<=Kd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:m,error:y}=await this._getUser(s);if(y)throw y;const g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(mt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await qv(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(fre(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Uv(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Cre(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ld(this.storage,this.storageKey,!0));try{return await Tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(mt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,l,a,c,u;const{data:h,error:d}=s;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:!0});return await Tt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return uo()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(mt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Tt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Mre(async i=>(i>0&&await Tre(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ra})),(i,s)=>{const o=200*Math.pow(2,i);return s&&mk(s)&&Date.now()+o-r<Kd})}catch(r){if(this._debug(n,"error",r),mt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),uo()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await qv(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pk;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${pk}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),mk(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new fc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new n5;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new fc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),mt(s)){const o={session:null,error:s};return mk(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(a){s.push(a)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dj(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Uv(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&uo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Kd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Kd}ms, refresh threshold is ${C8} ticks`),i<=C8&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!uo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ld(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Tt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:c}=await Tt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(mt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await Tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(mt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Tt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(mt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=gk(i.access_token);let l=null;o.aal&&(l=o.aal);let a=l;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(a="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:a,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+hre>Date.now()))return r;const{data:i,error:s}=await Tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Pg("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Pg("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:a}}=gk(r);if(Dre(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const c=Lre(i.alg),u=await this.fetchJwk(i.kid,n),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,bre(`${l}.${a}`)))throw new Pg("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}}}I1.nextInstanceID=0;const Zre=I1;class eie extends Zre{constructor(e){super(e)}}var tie=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})};class nie{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=sre(e),a=new URL(l);this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:Xne,realtime:Zne,auth:Object.assign(Object.assign({},Qne),{storageKey:c}),global:Yne},h=ore(r??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=rre(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new wne(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Jte(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Gne(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return tie(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:l,debug:a},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eie({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:l,debug:a,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Pne(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rie=(t,e,n)=>new nie(t,e,n),iie="https://ogjrmhkmekihpvhowmmu.supabase.co",pj="sbp_700ce1a482dc3d4b7492b55889a8467106eff2c4",sie=()=>rie(iie,pj,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),Ht=sie(),fw=()=>!!pj,oie=Object.freeze(Object.defineProperty({__proto__:null,isSupabaseConfigured:fw,supabase:Ht},Symbol.toStringTag,{value:"Module"})),mj=Ae.createContext(void 0),xd=()=>{const t=Ae.useContext(mj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},lie=({children:t})=>{const[e,n]=Ae.useState(null),[r,i]=Ae.useState(!0),[s,o]=Ae.useState(null);Ae.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:{session:p},error:m}=await Ht.auth.getSession();if(m)throw m;p!=null&&p.user&&await a(p.user);const{data:{subscription:y}}=Ht.auth.onAuthStateChange(async(g,v)=>{var w;console.log("Auth state changed:",g,(w=v==null?void 0:v.user)==null?void 0:w.id),g==="SIGNED_OUT"?(console.log("User signed out, clearing user state"),n(null),o(null)):v!=null&&v.user?await a(v.user):n(null)});return i(!1),()=>y.unsubscribe()}catch(p){console.error("Auth initialization error:",p),o("Failed to initialize authentication"),i(!1)}},a=async p=>{var m,y;try{const{data:g,error:v}=await Ht.from("profiles").select("*").eq("id",p.id).single();if(v&&v.code==="PGRST116"){const w={id:p.id,name:((m=p.user_metadata)==null?void 0:m.name)||((y=p.email)==null?void 0:y.split("@")[0])||"User",color:c()},{error:S}=await Ht.from("profiles").insert([w]);if(S)throw S;n({...w,email:p.email||"",createdAt:new Date})}else{if(v)throw v;n({id:g.id,name:g.name,email:p.email||"",color:g.color,createdAt:new Date})}}catch(g){console.error("Error loading user profile:",g),o("Failed to load user profile")}},c=()=>{const p=["#6E56CF","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#FF8A80","#82B1FF","#B39DDB","#81C784"];return p[Math.floor(Math.random()*p.length)]},f={user:e,signUp:async(p,m,y)=>{i(!0),o(null);try{if(!p||!m||!y)throw new Error("All fields are required");if(m.length<6)throw new Error("Password must be at least 6 characters");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p))throw new Error("Please enter a valid email address");const{data:g,error:v}=await Ht.auth.signUp({email:p,password:m,options:{data:{name:y},emailRedirectTo:void 0}});if(v)throw v.message.includes("Email signups are disabled")?new Error("Account creation is temporarily disabled. Please contact support."):v.message.includes("User already registered")?new Error("An account with this email already exists. Please sign in instead."):v;g.session&&console.log("User signed up and logged in successfully")}catch(g){throw o(g.message||"Failed to create account"),g}finally{i(!1)}},signIn:async(p,m)=>{var y;i(!0),o(null);try{if(!p||!m)throw new Error("Email and password are required");const{data:g,error:v}=await Ht.auth.signInWithPassword({email:p,password:m});if(v)throw v.message.includes("Invalid login credentials")?new Error("Invalid email or password. Please check your credentials and try again."):v;console.log("User signed in successfully:",(y=g.user)==null?void 0:y.id)}catch(g){throw o(g.message||"Failed to sign in"),g}finally{i(!1)}},signOut:async()=>{i(!0),o(null);try{console.log("Signing out user..."),n(null);const{error:p}=await Ht.auth.signOut();p?console.error("Sign out error:",p):console.log("Successfully signed out from Supabase"),localStorage.removeItem("supabase.auth.token")}catch(p){console.error("Sign out error:",p)}finally{i(!1)}},loading:r,error:s};return b.jsx(mj.Provider,{value:f,children:t})},aie=({userId:t,roomId:e,isActive:n})=>{const r=Ae.useRef(null),i=Ae.useCallback(async(o=!0)=>{if(!(!t||!e))try{const{error:l}=await Ht.rpc("update_user_presence",{p_user_id:t,p_room_id:e,p_is_online:o});l&&console.warn("Failed to update presence:",l)}catch(l){console.warn("Error updating presence:",l)}},[t,e]),s=Ae.useCallback(async()=>{if(t)try{const{error:o}=await Ht.rpc("set_user_offline",{p_user_id:t});o&&console.warn("Failed to set offline:",o)}catch(o){console.warn("Error setting offline:",o)}},[t]);return Ae.useEffect(()=>{if(!t||!e||!n)return;console.log(" Starting simplified presence tracking for:",{userId:t,roomId:e}),i(!0),r.current=setInterval(()=>{document.visibilityState==="visible"&&i(!0)},3e4);const o=()=>{document.visibilityState==="visible"&&i(!0)},l=()=>{s()};return document.addEventListener("visibilitychange",o),window.addEventListener("beforeunload",l),()=>{r.current&&clearInterval(r.current),document.removeEventListener("visibilitychange",o),window.removeEventListener("beforeunload",l),s()}},[t,e,n,i,s]),{updatePresence:i,setOffline:s}},gj=Ae.createContext(void 0),E_=()=>{const t=Ae.useContext(gj);if(t===void 0)throw new Error("useChat must be used within a ChatProvider");return t},cie=({children:t})=>{var W;const{user:e}=xd(),[n,r]=Ae.useState(null),[i,s]=Ae.useState([]),[o,l]=Ae.useState(!1),[a,c]=Ae.useState(!1),u=Ae.useRef(null),h=Ae.useRef(null),d=Ae.useRef(null),f=Ae.useRef(null),p=Ae.useRef(null),m=Ae.useRef(null),y=Ae.useRef(new Set);aie({userId:(e==null?void 0:e.id)||null,roomId:(n==null?void 0:n.id)||null,isActive:!!n});const g=z=>({id:z.id,name:z.name,color:z.color,isOnline:!0}),v=e?g(e):null,w=((W=n==null?void 0:n.settings)==null?void 0:W.isAIMuted)||!1,S=async()=>{if(!n||!e){console.warn("Cannot toggle AI mute: no current room or user");return}try{console.log(" Toggling AI mute for room:",n.id);const{data:z,error:O}=await Ht.rpc("toggle_room_ai_mute",{p_room_id:n.id,p_user_id:e.id});if(O){console.error(" Failed to toggle AI mute:",O);return}console.log(" AI mute toggled successfully:",z)}catch(z){console.error(" Error toggling AI mute:",z)}},_=async z=>{try{const{data:O,error:ee}=await Ht.rpc("get_room_settings",{p_room_id:z});if(ee)return console.warn(`Failed to load room settings for ${z}:`,ee),{roomId:z,isAIMuted:!1};const X=O==null?void 0:O[0];return{roomId:z,isAIMuted:(X==null?void 0:X.is_ai_muted)||!1,aiMutedBy:X==null?void 0:X.ai_muted_by,aiMutedByName:X==null?void 0:X.ai_muted_by_name,aiMutedAt:X!=null&&X.ai_muted_at?new Date(X.ai_muted_at):void 0}}catch(O){return console.warn(`Error loading room settings for ${z}:`,O),{roomId:z,isAIMuted:!1}}},C=async z=>{try{console.log(" Loading participants with message-based presence for room:",z);const{data:O,error:ee}=await Ht.rpc("get_room_participants_with_presence",{p_room_id:z});if(ee)return console.warn(`Failed to load participants with presence for room ${z}:`,ee),[];const X=(O==null?void 0:O.map(E=>({id:E.user_id,name:E.name||"Unknown User",color:E.color||"#6B7280",isOnline:E.is_online||!1,lastSeen:E.last_seen?new Date(E.last_seen):void 0})))||[];return console.log(" Participants loaded with message-based presence:",X),X}catch(O){return console.warn(`Error loading participants with presence for room ${z}:`,O),[]}},T=async z=>{try{console.log(" Loading messages for room:",z);const{data:O,error:ee}=await Ht.from("messages").select("*").eq("room_id",z).order("created_at",{ascending:!0}).limit(100);if(ee)return console.error(`Error loading messages for room ${z}:`,ee),[];const X=(O==null?void 0:O.map(E=>{let xe=null;if(E.replying_to)if(typeof E.replying_to=="string")try{xe=JSON.parse(E.replying_to)}catch{console.warn("Failed to parse replying_to:",E.replying_to),xe=null}else typeof E.replying_to=="object"&&(xe=E.replying_to);return{id:E.id,roomId:E.room_id,userId:E.user_id||"unknown",userName:E.user_name||"Unknown User",userColor:E.user_color||"#6B7280",content:E.content||"",isAI:E.is_ai||!1,timestamp:new Date(E.created_at),replyingTo:xe}}))||[];return console.log(` Loaded ${X.length} messages for room ${z}`),X}catch(O){return console.error(`Error loading messages for room ${z}:`,O),[]}},I=(z,O)=>{for(let ee=O.length-1;ee>=0;ee--){const X=O[ee];if(!X.isAI&&(z.includes("@AI")||z.toLowerCase().includes("@ai")||X.content.includes("?")||X.content.toLowerCase().includes("how")||X.content.toLowerCase().includes("what")||X.content.toLowerCase().includes("why")||X.content.toLowerCase().includes("when")||X.content.toLowerCase().includes("where")||X.content.toLowerCase().includes("can you")||X.content.toLowerCase().includes("could you")||X.content.toLowerCase().includes("help")))return X}for(let ee=O.length-1;ee>=0;ee--){const X=O[ee];if(!X.isAI)return X}return null},L=async()=>{try{await N(),l(!0),console.log(" Chat connection initialized successfully")}catch(z){console.error(" Failed to initialize connection:",z),s([]),l(!0)}},N=async()=>{if(!(!e||!fw()))try{console.log(" Loading rooms for user:",e.id);const{data:z,error:O}=await Ht.from("room_participants").select(`
          room_id,
          rooms!inner(
            id,
            name,
            created_by,
            created_at
          )
        `).eq("user_id",e.id);if(O){console.error("Error loading participant data:",O);return}const ee=(z==null?void 0:z.map(E=>E.rooms).filter(Boolean))||[],X=await Promise.all(ee.map(async E=>{try{const xe=await C(E.id),U=await _(E.id),ue=await T(E.id);return{id:E.id,name:E.name,createdAt:new Date(E.created_at),participants:xe,settings:U,messages:ue}}catch(xe){return console.error("Error loading room data for room:",E.id,xe),{id:E.id,name:E.name,createdAt:new Date(E.created_at),participants:[],settings:{roomId:E.id,isAIMuted:!1},messages:[]}}}));console.log(" Processed rooms:",X),s(X)}catch(z){console.error(" Failed to load rooms from Supabase:",z),s([])}},$=z=>{F(),console.log(" Setting up real-time subscriptions for room:",z);const O=Ht.channel(`room-messages-${z}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`room_id=eq.${z}`},async E=>{console.log(" New message received via real-time:",E.new);let xe=null;if(E.new.replying_to)if(typeof E.new.replying_to=="string")try{xe=JSON.parse(E.new.replying_to)}catch{console.warn("Failed to parse replying_to in real-time:",E.new.replying_to),xe=null}else typeof E.new.replying_to=="object"&&(xe=E.new.replying_to);const U={id:E.new.id,roomId:E.new.room_id,userId:E.new.user_id||"unknown",userName:E.new.user_name||"Unknown User",userColor:E.new.user_color||"#6B7280",content:E.new.content||"",isAI:E.new.is_ai||!1,timestamp:new Date(E.new.created_at),replyingTo:xe};U.isAI&&(console.log(" AI message received, clearing responding state"),c(!1),m.current&&(clearTimeout(m.current),m.current=null)),y.current.delete(U.id),r(ve=>{if(ve&&ve.id===z){if(console.log(" Current messages before update:",ve.messages.length),console.log(" Adding new message:",{id:U.id,content:U.content.substring(0,50)}),ve.messages.some(_t=>_t.id===U.id))return console.log(" Message already exists, skipping duplicate"),ve;const st=[...ve.messages,U],vt={...ve,messages:st};return u.current=vt,console.log(" Message added to room state. Total messages:",st.length),vt}return ve}),console.log(" Refreshing participants after new message...");const ue=await C(z);r(ve=>{if(ve&&ve.id===z){const Oe={...ve,participants:ue};return u.current=Oe,console.log(" Participants refreshed after message. Online count:",ue.filter(st=>st.isOnline).length),Oe}return ve})}).subscribe(E=>{console.log("Messages subscription status:",E)}),ee=Ht.channel(`room-participants-${z}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"room_participants",filter:`room_id=eq.${z}`},async E=>{console.log("New participant joined via real-time:",E.new);const xe=await C(z);r(U=>{if(U&&U.id===z){const ue={...U,participants:xe};return u.current=ue,console.log("Updated participants list"),ue}return U})}).subscribe(E=>{console.log("Participants subscription status:",E)}),X=Ht.channel(`room-settings-${z}`).on("postgres_changes",{event:"*",schema:"public",table:"room_settings",filter:`room_id=eq.${z}`},async E=>{console.log(" Room settings changed via real-time:",E);const xe=await _(z);r(U=>{if(U&&U.id===z){const ue={...U,settings:xe};return u.current=ue,console.log(" Updated room settings:",xe),ue}return U})}).subscribe(E=>{console.log("Settings subscription status:",E)});h.current=O,d.current=ee,f.current=X,p.current&&clearInterval(p.current),p.current=setInterval(async()=>{if(u.current){console.log(" Periodic presence refresh for room:",z);const E=await C(z);r(xe=>{if(xe&&xe.id===z){const U={...xe,participants:E};return u.current=U,U}return xe})}},6e4)},F=()=>{h.current&&(Ht.removeChannel(h.current),h.current=null),d.current&&(Ht.removeChannel(d.current),d.current=null),f.current&&(Ht.removeChannel(f.current),f.current=null),p.current&&(clearInterval(p.current),p.current=null),m.current&&(clearTimeout(m.current),m.current=null)},ie=async(z,O)=>{try{if(!e)return console.error("No user found"),!1;console.log(" Joining room:",z,"for user:",e.name);const{data:ee,error:X}=await Ht.rpc("join_room_as_participant",{p_room_id:z,p_user_id:e.id});if(X||!ee)return console.error(" Failed to join room:",X),!1;const{data:E,error:xe}=await Ht.from("rooms").select("*").eq("id",z).single();if(xe||!E)return console.error(" Room not found:",xe),!1;const U=await C(z);console.log(" Participants loaded for room join:",U);const ue=await _(z),ve=await T(z),Oe={id:E.id,name:E.name,createdAt:new Date(E.created_at),participants:U,settings:ue,messages:ve};return console.log(" Room data loaded for join:",{id:Oe.id,name:Oe.name,participantCount:Oe.participants.length,onlineCount:Oe.participants.filter(st=>st.isOnline).length,messageCount:Oe.messages.length}),$(z),r(Oe),u.current=Oe,s(st=>st.find(_t=>_t.id===z)?st.map(_t=>_t.id===z?Oe:_t):[...st,Oe]),console.log(" Successfully joined room:",z),!0}catch(ee){return console.error(" Failed to join room:",ee),!1}},Z=async(z,O)=>{try{if(!e)throw new Error("User not authenticated");console.log(" Creating room:",z,"for user:",e.name);const ee=`room_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{data:X,error:E}=await Ht.rpc("create_room_with_participant",{p_room_id:ee,p_room_name:z,p_user_id:e.id});if(E||!X)throw console.error(" Failed to create room:",E),new Error(`Failed to create room: ${(E==null?void 0:E.message)||"Unknown error"}`);console.log(" Room created successfully:",ee);const xe={id:ee,name:z,participants:[g(e)],settings:{roomId:ee,isAIMuted:!1},messages:[],createdAt:new Date};s(U=>[...U,xe]),r(xe),u.current=xe,$(ee),console.log(" Room creation completed successfully")}catch(ee){throw console.error(" Failed to create room:",ee),ee}},Y=async z=>{if(!e||!n||!fw()){console.error(" Cannot send message: missing user, room, or Supabase config");return}try{console.log(" Sending message:",z,"to room:",n.id),console.log(" User details:",{id:e.id,name:e.name,color:e.color});const O=`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;y.current.add(O);const ee={id:O,roomId:n.id,userId:e.id,userName:e.name,userColor:e.color,content:z,isAI:!1,timestamp:new Date};r(xe=>{if(xe){const U={...xe,messages:[...xe.messages,ee]};return u.current=U,U}return xe});const{data:X,error:E}=await Ht.from("messages").insert({room_id:n.id,user_id:e.id,user_name:e.name,user_color:e.color,content:z,is_ai:!1}).select().single();if(E)throw console.error(" Failed to save message to Supabase:",E),console.error("Error details:",{code:E.code,message:E.message,details:E.details,hint:E.hint}),y.current.delete(O),r(xe=>{if(xe){const U={...xe,messages:xe.messages.filter(ue=>ue.id!==O)};return u.current=U,U}return xe}),E;if(console.log(" Message saved successfully:",X),X){y.current.delete(O);const xe={id:X.id,roomId:X.room_id,userId:X.user_id,userName:X.user_name,userColor:X.user_color,content:X.content,isAI:X.is_ai,timestamp:new Date(X.created_at)};r(U=>{if(U){const ue={...U,messages:U.messages.map(ve=>ve.id===O?xe:ve)};return u.current=ue,ue}return U})}!w&&(z.includes("@AI")||z.toLowerCase().includes("@ai"))?(console.log(" AI mention detected and AI is active for room, generating response..."),c(!0),m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{console.warn(" AI response timeout - clearing responding state"),c(!1)},25e3),setTimeout(async()=>{var xe,U;try{const{klusterAI:ue}=await J(async()=>{const{klusterAI:G}=await Promise.resolve().then(()=>eTe);return{klusterAI:G}},void 0);if(console.log(" Testing AI connection before generating response..."),!await ue.testConnection()){console.error(" AI service test failed"),c(!1),m.current&&(clearTimeout(m.current),m.current=null),await Ht.rpc("insert_ai_message",{p_room_id:n.id,p_content:"I'm having trouble connecting to my AI service right now. Please try mentioning @AI again in a moment!",p_user_name:"AI Assistant",p_user_color:"#8B5CF6"});return}console.log(" AI connection test passed, generating response...");const Oe=(((xe=u.current)==null?void 0:xe.messages)||[]).filter(G=>!G.id.startsWith("temp_")).slice(-10).map(G=>({role:G.isAI?"assistant":"user",content:`${G.userName}: ${G.content}`}));console.log(" Sending shared room context to AI:",Oe);const st=await ue.generateResponse(Oe,n.name);console.log(" AI response received:",st);const vt=((U=u.current)==null?void 0:U.messages)||[],_t=I(z,vt);let ln=null;_t&&(ln={userId:_t.userId,userName:_t.userName,content:_t.content.length>50?_t.content.substring(0,50)+"...":_t.content});const{data:R,error:B}=await Ht.rpc("insert_ai_message_with_reply",{p_room_id:n.id,p_content:st,p_user_name:"AI Assistant",p_user_color:"#8B5CF6",p_replying_to:ln?JSON.stringify(ln):null});B?(console.error(" Failed to save AI message:",B),await Ht.rpc("insert_ai_message",{p_room_id:n.id,p_content:"I'm having trouble responding right now. Please try mentioning @AI again!",p_user_name:"AI Assistant",p_user_color:"#8B5CF6"})):console.log(" AI response saved successfully:",R)}catch(ue){console.error(" AI response error:",ue),c(!1),m.current&&(clearTimeout(m.current),m.current=null);try{await Ht.rpc("insert_ai_message",{p_room_id:n.id,p_content:"I'm having trouble connecting right now. Please try mentioning @AI again in a moment!",p_user_name:"AI Assistant",p_user_color:"#8B5CF6"})}catch(ve){console.error(" Failed to send AI error message:",ve)}}},1500)):w&&(z.includes("@AI")||z.toLowerCase().includes("@ai"))&&console.log(" AI mention detected but AI is muted for this room - not responding")}catch(O){throw console.error(" Failed to send message:",O),O}},pe=()=>{if(n)try{console.log(" Leaving room:",n.id),F(),y.current.clear(),r(null),u.current=null,c(!1)}catch(z){console.error(" Failed to leave room:",z),r(null),u.current=null,c(!1)}};Ae.useEffect(()=>(e&&fw()&&L(),()=>{F(),y.current.clear()}),[e]);const de={currentRoom:n,rooms:i,isConnected:o,isAIMuted:w,isAIResponding:a,toggleAIMute:S,joinRoom:ie,createRoom:Z,sendMessage:Y,leaveRoom:pe,currentUser:v};return b.jsx(gj.Provider,{value:de,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hie=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),it=(t,e)=>{const n=Ae.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:a,...c},u)=>Ae.createElement("svg",{ref:u,...uie,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${hie(t)}`,l].join(" "),...c},[...e.map(([h,d])=>Ae.createElement(h,d)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=it("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const die=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fie=it("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=it("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=it("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=it("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pie=it("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mie=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gie=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yie=it("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vie=it("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wie=it("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xie=it("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=it("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=it("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=it("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=it("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=it("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=it("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=it("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=it("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=it("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ie=it("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aie=it("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=it("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=it("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=it("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mie=it("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=it("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oie=it("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nie=it("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iie=it("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pie=it("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rie=it("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Die=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lie=it("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bie=it("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=it("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=it("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=it("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=it("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=it("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ie=it("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fie=it("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),zie=({onSwitchToSignup:t})=>{const{signIn:e,loading:n,error:r}=xd(),[i,s]=Ae.useState({email:"",password:""}),[o,l]=Ae.useState(!1),[a,c]=Ae.useState(null),u=async d=>{if(d.preventDefault(),c(null),!i.email||!i.password){c("Please fill in all fields");return}try{await e(i.email,i.password)}catch{}},h=d=>{s(f=>({...f,[d.target.name]:d.target.value})),a&&c(null)};return b.jsxs("div",{children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 tracking-tight",children:"Welcome back"}),b.jsx("p",{className:"text-gray-600",children:"Sign in to continue your conversations"})]}),b.jsxs("form",{onSubmit:u,className:"space-y-6",children:[(r||a)&&b.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(O_,{className:"w-5 h-5 text-error-600 mt-0.5"}),b.jsx("p",{className:"text-error-700 text-sm font-medium",children:r||a})]})}),b.jsxs("div",{className:"space-y-5",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),b.jsxs("div",{className:"relative",children:[b.jsx(xj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),b.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:h,placeholder:"Enter your email",className:"input-field pl-11",required:!0})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),b.jsxs("div",{className:"relative",children:[b.jsx(I8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),b.jsx("input",{type:o?"text":"password",id:"password",name:"password",value:i.password,onChange:h,placeholder:"Enter your password",className:"input-field pl-11 pr-12",required:!0}),b.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:o?b.jsx(M8,{className:"w-5 h-5"}):b.jsx(E8,{className:"w-5 h-5"})})]})]})]}),b.jsx("button",{type:"submit",disabled:n,className:"w-full btn-primary py-3 flex items-center justify-center gap-2",children:n?b.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):b.jsxs(b.Fragment,{children:[b.jsx(_ie,{className:"w-5 h-5"}),"Sign In"]})})]}),b.jsx("div",{className:"mt-8 text-center",children:b.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",b.jsx("button",{onClick:t,className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors",children:"Create one now"})]})})]})},jie=({onSwitchToLogin:t})=>{const{signUp:e,loading:n,error:r}=xd(),[i,s]=Ae.useState({name:"",email:"",password:"",confirmPassword:""}),[o,l]=Ae.useState(!1),[a,c]=Ae.useState(!1),[u,h]=Ae.useState(null),d=async y=>{if(y.preventDefault(),h(null),!i.name||!i.email||!i.password||!i.confirmPassword){h("Please fill in all fields");return}if(i.password!==i.confirmPassword){h("Passwords do not match");return}if(i.password.length<6){h("Password must be at least 6 characters");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)){h("Please enter a valid email address");return}try{await e(i.email,i.password,i.name)}catch{}},f=y=>{s(g=>({...g,[y.target.name]:y.target.value})),u&&h(null)},m=(y=>y.length===0?{strength:0,label:"",color:"bg-gray-200"}:y.length<6?{strength:1,label:"Too short",color:"bg-error-500"}:y.length<8?{strength:2,label:"Fair",color:"bg-warning-500"}:y.length>=8&&/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(y)?{strength:4,label:"Strong",color:"bg-success-500"}:{strength:3,label:"Good",color:"bg-primary-500"})(i.password);return b.jsxs("div",{children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2 tracking-tight",children:"Join ChatMind"}),b.jsx("p",{className:"text-gray-600",children:"Start collaborating with intelligent conversations"})]}),b.jsxs("form",{onSubmit:d,className:"space-y-5",children:[(r||u)&&b.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-4",children:b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(O_,{className:"w-5 h-5 text-error-600 mt-0.5"}),b.jsx("p",{className:"text-error-700 text-sm",children:r||u})]})}),b.jsxs("div",{className:"space-y-5",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),b.jsxs("div",{className:"relative",children:[b.jsx(bj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),b.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:f,placeholder:"Enter your full name",className:"input-field pl-11",required:!0})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),b.jsxs("div",{className:"relative",children:[b.jsx(xj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),b.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:f,placeholder:"Enter your email",className:"input-field pl-11",required:!0})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),b.jsxs("div",{className:"relative",children:[b.jsx(I8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),b.jsx("input",{type:o?"text":"password",id:"password",name:"password",value:i.password,onChange:f,placeholder:"Create a password",className:"input-field pl-11 pr-12",required:!0}),b.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:o?b.jsx(M8,{className:"w-5 h-5"}):b.jsx(E8,{className:"w-5 h-5"})})]}),i.password&&b.jsxs("div",{className:"mt-3",children:[b.jsx("div",{className:"flex gap-1 mb-2",children:[1,2,3,4].map(y=>b.jsx("div",{className:`h-2 flex-1 rounded-full transition-all duration-300 ${y<=m.strength?m.color:"bg-gray-200"}`},y))}),b.jsx("p",{className:"text-xs text-gray-600 font-medium",children:m.label})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password"}),b.jsxs("div",{className:"relative",children:[b.jsx(I8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),b.jsx("input",{type:a?"text":"password",id:"confirmPassword",name:"confirmPassword",value:i.confirmPassword,onChange:f,placeholder:"Confirm your password",className:"input-field pl-11 pr-12",required:!0}),b.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:a?b.jsx(M8,{className:"w-5 h-5"}):b.jsx(E8,{className:"w-5 h-5"})}),i.confirmPassword&&i.password===i.confirmPassword&&b.jsx(vj,{className:"absolute right-11 top-1/2 transform -translate-y-1/2 w-5 h-5 text-success-500"})]})]})]}),b.jsx("button",{type:"submit",disabled:n,className:"w-full btn-primary py-3 flex items-center justify-center gap-2",children:n?b.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):b.jsxs(b.Fragment,{children:[b.jsx(Bie,{className:"w-5 h-5"}),"Create Account"]})})]}),b.jsx("div",{className:"mt-8 text-center",children:b.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",b.jsx("button",{onClick:t,className:"text-primary-600 hover:text-primary-700 font-semibold transition-colors",children:"Sign in"})]})})]})},Hie=()=>{const[t,e]=Ae.useState(!1),n=[{icon:Cie,title:" Brainstorming Ideas?",description:"Capture every spark of creativity, and let ChatMind summarize the best ones so your ideas don't fade away.",color:"from-primary-400 to-primary-500",bgColor:"bg-primary-50",borderColor:"border-primary-100"},{icon:kie,title:" Working Remotely?",description:"Collaborate across time zones  ChatMind keeps context alive with summaries and shared memory blocks.",color:"from-cyan-400 to-cyan-500",bgColor:"bg-cyan-50",borderColor:"border-cyan-100"},{icon:fie,title:" Learning Together?",description:"Study with friends or mentors  ChatMind tracks your questions, notes, and takeaways so everyone stays on the same page.",color:"from-emerald-400 to-emerald-500",bgColor:"bg-emerald-50",borderColor:"border-emerald-100"},{icon:Tie,title:" Planning a Trip?",description:"ChatMind keeps all your itinerary ideas, bookings, and decisions organized and remembered  even when your group chat gets messy.",color:"from-violet-400 to-violet-500",bgColor:"bg-violet-50",borderColor:"border-violet-100"},{icon:Eie,title:" Personal Journalling?",description:"Think aloud with AI, reflect, and return  ChatMind remembers your thoughts and helps you connect the dots over time.",color:"from-amber-400 to-amber-500",bgColor:"bg-amber-50",borderColor:"border-amber-100"}],r=[{icon:T8,title:"AI-Powered Memory",description:"Never lose track of important conversations with intelligent summaries and context preservation.",color:"text-primary-600"},{icon:$ie,title:"Seamless Integration",description:"Works with your existing workflow and adapts to your team's collaboration style.",color:"text-cyan-600"},{icon:Pie,title:"Enterprise Security",description:"Bank-level encryption and privacy controls keep your conversations secure.",color:"text-emerald-600"}];return b.jsx("div",{className:"min-h-screen bg-gray-50",children:b.jsxs("div",{className:"relative",children:[b.jsx("section",{className:"relative overflow-hidden bg-gradient-to-br from-gray-50 via-white to-primary-50 py-16 lg:py-24",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"grid lg:grid-cols-5 gap-12 lg:gap-16 items-center",children:[b.jsxs("div",{className:"lg:col-span-3 text-center lg:text-left",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-8 border border-primary-200",children:[b.jsx(Rie,{className:"w-4 h-4"}),"AI-Powered Team Collaboration"]}),b.jsxs("h1",{className:"text-4xl lg:text-5xl xl:text-6xl font-bold text-gray-900 mb-6 leading-tight tracking-tight",children:["Welcome to"," ",b.jsx("span",{className:"text-primary-600",children:"ChatMind"})]}),b.jsx("p",{className:"text-xl lg:text-2xl text-gray-600 mb-8 leading-relaxed max-w-2xl font-light",children:"A collaborative AI chatroom with shared knowledge that transforms how teams communicate and remember."}),b.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-16",children:[b.jsxs("button",{onClick:()=>e(!1),className:"btn-primary text-lg px-8 py-4 shadow-gentle hover:shadow-md transform hover:scale-105",children:["Get started free",b.jsx(yj,{className:"w-5 h-5 ml-2"})]}),b.jsx("button",{onClick:()=>e(!0),className:"btn-secondary text-lg px-8 py-4",children:"Sign in"})]}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8",children:r.map((i,s)=>b.jsxs("div",{className:"text-center lg:text-left",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-white rounded-xl shadow-subtle border border-gray-200 mb-4",children:b.jsx(i.icon,{className:`w-6 h-6 ${i.color}`})}),b.jsx("h3",{className:"font-semibold text-gray-900 mb-2 text-lg",children:i.title}),b.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:i.description})]},s))})]}),b.jsxs("div",{className:"lg:col-span-2 relative",children:[b.jsx("div",{className:"card p-8 max-w-md mx-auto shadow-gentle",children:t?b.jsx(zie,{onSwitchToSignup:()=>e(!1)}):b.jsx(jie,{onSwitchToLogin:()=>e(!0)})}),b.jsx("div",{className:"absolute -top-6 -right-6 w-24 h-24 bg-primary-100 rounded-full opacity-60 blur-xl"}),b.jsx("div",{className:"absolute -bottom-6 -left-6 w-32 h-32 bg-cyan-100 rounded-full opacity-40 blur-xl"})]})]})})}),b.jsx("section",{className:"py-20 lg:py-28 bg-white",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"text-center mb-16 lg:mb-20",children:[b.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6 tracking-tight",children:"Perfect for Every Team Need"}),b.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Whether you're brainstorming, learning, or planning, ChatMind AI adapts to your workflow and keeps your conversations organized and accessible."})]}),b.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((i,s)=>b.jsxs("div",{className:"card p-8 card-hover group",children:[b.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${i.color} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-gentle`,children:b.jsx(i.icon,{className:"w-8 h-8 text-white"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 tracking-tight",children:i.title}),b.jsx("p",{className:"text-gray-600 leading-relaxed",children:i.description})]},s))}),b.jsxs("div",{className:"mt-20 grid md:grid-cols-3 gap-8",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:b.jsx(Sie,{className:"w-8 h-8 text-white"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Smart Organization"}),b.jsx("p",{className:"text-gray-600",children:"Automatically categorize and summarize conversations for easy retrieval and reference."})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-cyan-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:b.jsx(Die,{className:"w-8 h-8 text-white"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Focused Discussions"}),b.jsx("p",{className:"text-gray-600",children:"Keep conversations on track with AI-powered context awareness and topic threading."})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:b.jsx(vj,{className:"w-8 h-8 text-white"})}),b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Time-Saving"}),b.jsx("p",{className:"text-gray-600",children:"Reduce meeting time and email chains with persistent, searchable conversation history."})]})]})]})}),b.jsx("footer",{className:"py-12 lg:py-16 bg-gray-900 text-white",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-6 md:mb-0",children:[b.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-xl flex items-center justify-center",children:b.jsx("span",{className:"text-white font-bold text-lg",children:"C"})}),b.jsx("span",{className:"text-2xl font-bold",children:"ChatMind"})]}),b.jsxs("div",{className:"text-gray-400 text-center md:text-right",children:[b.jsx("p",{className:"text-lg",children:" 2025 ChatMind. Intelligent collaboration for modern teams."}),b.jsx("p",{className:"text-sm mt-2",children:"Built with enterprise-grade security and privacy in mind."})]})]})})}),b.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[b.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-primary-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30"}),b.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-cyan-100 rounded-full mix-blend-multiply filter blur-3xl opacity-20"})]})]})})},Vie=()=>b.jsx(Hie,{}),Wie=({children:t})=>{const{user:e,loading:n}=xd();return n?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-gentle",children:b.jsx("span",{className:"text-white font-bold text-2xl",children:"C"})}),b.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-600",children:"Loading ChatMind..."})]})}):e?b.jsx(b.Fragment,{children:t}):b.jsx(Vie,{})},qie=({options:t,selectedIndex:e,onSelect:n,position:r,visible:i})=>{const s=Ae.useRef(null);if(Ae.useEffect(()=>{if(i&&s.current){const a=s.current.children[e+1];a&&a.scrollIntoView({block:"nearest",behavior:"smooth"})}},[e,i]),!i||t.length===0)return null;const o=a=>a.split(" ").map(c=>c[0]).join("").toUpperCase(),l=a=>a.type==="ai"?"AI":a.name.toLowerCase().replace(/\s+/g,"");return b.jsxs("div",{ref:s,className:"fixed z-50 card py-1 min-w-48 max-w-64 max-h-48 overflow-y-auto scrollbar-thin",style:{top:Math.max(16,r.top),left:r.left},onClick:a=>a.stopPropagation(),children:[b.jsx("div",{className:"px-3 py-2 text-xs font-medium text-gray-500 border-b border-gray-100 bg-gray-50",children:"People & AI"}),t.map((a,c)=>b.jsxs("button",{onClick:()=>n(a),className:`w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-gray-50 transition-colors ${c===e?"bg-indigo-50 border-r-2 border-indigo-500":""}`,children:[a.type==="ai"?b.jsx("div",{className:"avatar bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-gentle",children:b.jsx(ou,{className:"w-4 h-4 text-white"})}):b.jsx("div",{className:"avatar shadow-gentle",style:{backgroundColor:a.color||"#6B7280"},children:o(a.name)}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-medium text-gray-900 truncate",children:a.name}),a.type==="ai"&&b.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-medium border border-indigo-200",children:"AI"})]}),b.jsxs("div",{className:"text-xs text-gray-500",children:["@",l(a)]})]})]},a.id)),t.length===0&&b.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"}),b.jsx("div",{className:"px-3 py-1 text-xs text-gray-400 border-t border-gray-100 mt-1 bg-gray-50",children:" navigate  Enter/Tab select  Esc cancel"})]})},Uie=({participants:t,isAIMuted:e})=>{const[n,r]=Ae.useState({isOpen:!1,query:"",options:[],selectedIndex:0,position:{top:0,left:0},mentionStart:-1}),i=Ae.useCallback(()=>{const d=[];return e||d.push({id:"ai",name:"AI Assistant",type:"ai"}),t.forEach(f=>{d.push({id:f.id,name:f.name,type:"user",color:f.color})}),d},[t,e]),s=Ae.useCallback(d=>{const f=i();if(!d.trim())return f;const p=d.toLowerCase().trim();return f.filter(m=>{const y=m.name.toLowerCase(),g=y.replace(/\s+/g,"");return y.includes(p)||g.includes(p)||y.startsWith(p)||g.startsWith(p)})},[i]),o=Ae.useCallback((d,f,p)=>{let m=-1;for(let w=f-1;w>=0;w--)if(d[w]==="@"){if(w===0||/\s/.test(d[w-1])){m=w;break}}else if(/\s/.test(d[w]))break;if(m===-1){r(w=>({...w,isOpen:!1}));return}const y=d.slice(m+1,f);if(y.includes(" ")){r(w=>({...w,isOpen:!1}));return}const g=s(y),v=l(p);r({isOpen:!0,query:y,options:g,selectedIndex:0,position:v,mentionStart:m})},[s]),l=d=>{const f=d.getBoundingClientRect(),p=window.getComputedStyle(d),m=parseInt(p.paddingLeft)||0;return{top:f.top-200-8,left:Math.max(16,Math.min(f.left+m,window.innerWidth-250))}},a=Ae.useCallback((d,f,p)=>{if(n.mentionStart===-1)return f;let m;d.type==="ai"?m="@AI ":m=`@${d.name.toLowerCase().replace(/\s+/g,"")} `;const y=f.slice(0,n.mentionStart),g=f.slice(p),v=y+m+g,w=n.mentionStart+m.length;return r(S=>({...S,isOpen:!1})),{newText:v,newCursorPosition:w}},[n.mentionStart]),c=Ae.useCallback(d=>{r(f=>{if(!f.isOpen||f.options.length===0)return f;let p;return d==="up"?p=f.selectedIndex>0?f.selectedIndex-1:f.options.length-1:p=f.selectedIndex<f.options.length-1?f.selectedIndex+1:0,{...f,selectedIndex:p}})},[]),u=Ae.useCallback(()=>{r(d=>({...d,isOpen:!1}))},[]),h=Ae.useCallback(()=>!n.isOpen||n.options.length===0?null:n.options[n.selectedIndex],[n]);return Ae.useEffect(()=>{const d=()=>{n.isOpen&&u()};return document.addEventListener("click",d),()=>document.removeEventListener("click",d)},[n.isOpen,u]),{mentionState:n,detectMention:o,selectMention:a,navigateMentions:c,closeMentions:u,getSelectedOption:h}},Gie=()=>b.jsx("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl px-4 py-3 max-w-xs shadow-subtle",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"text-sm font-medium text-indigo-700",children:"AI is thinking"}),b.jsxs("div",{className:"typing-dots",children:[b.jsx("div",{className:"typing-dot"}),b.jsx("div",{className:"typing-dot"}),b.jsx("div",{className:"typing-dot"})]})]})}),Kie=({participants:t,currentUser:e,isAIMuted:n,isAITyping:r,onClose:i})=>{const s=c=>c.split(" ").map(u=>u[0]).join("").toUpperCase(),o=c=>{if(!c)return"Unknown";const h=new Date().getTime()-c.getTime(),d=Math.floor(h/(1e3*60));if(d<1)return"Just now";if(d<60)return`${d}m ago`;const f=Math.floor(d/60);if(f<24)return`${f}h ago`;const p=Math.floor(f/24);return p<7?`${p}d ago`:c.toLocaleDateString()},l=t.filter(c=>c.isOnline),a=t.filter(c=>!c.isOnline);return b.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col shadow-subtle",children:[b.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(k0,{className:"w-5 h-5 text-indigo-600"}),b.jsxs("h3",{className:"font-semibold text-gray-900",children:["People (",t.length+(n?0:1),")"]})]}),b.jsx("button",{onClick:i,className:"btn-ghost p-1",title:"Close sidebar",children:b.jsx(mw,{className:"w-4 h-4"})})]})}),b.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:[!n&&b.jsxs("div",{className:"p-4 border-b border-gray-100 bg-indigo-50",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"avatar-lg bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-gentle",children:b.jsx(ou,{className:"w-5 h-5 text-white"})}),r&&b.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full flex items-center justify-center",children:b.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-medium text-gray-900",children:"AI Assistant"}),b.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-medium border border-indigo-200",children:"AI"})]}),b.jsx("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:r?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"presence-typing"}),b.jsx("span",{className:"text-amber-600 font-medium",children:"Thinking..."})]}):b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"presence-online"}),b.jsx("span",{children:"Active  Ready to help ALL participants"})]})})]}),b.jsx("div",{className:"flex items-center gap-1",children:b.jsx(kj,{className:"w-4 h-4 text-green-600",title:"AI is active for this room - ALL participants can interact"})})]}),b.jsxs("div",{className:"mt-3 bg-indigo-100 border border-indigo-200 rounded-lg p-3",children:[b.jsx("p",{className:"text-xs text-indigo-800 font-medium",children:" AI Access: ALL room participants can mention @AI for assistance"}),b.jsx("p",{className:"text-xs text-indigo-700 mt-1",children:"The AI has shared context for the entire room conversation"})]})]}),n&&b.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"avatar-lg bg-gray-400 shadow-gentle",children:b.jsx(ou,{className:"w-5 h-5 text-white"})}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"font-medium text-gray-600",children:"AI Assistant"}),b.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full font-medium border border-gray-300",children:"MUTED"})]}),b.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[b.jsx("div",{className:"presence-offline"}),b.jsx("span",{children:"Muted for this room"})]})]}),b.jsx("div",{className:"flex items-center gap-1",children:b.jsx(P8,{className:"w-4 h-4 text-gray-400",title:"AI is muted for this room"})})]})}),l.length>0&&b.jsxs("div",{className:"p-4",children:[b.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[b.jsx("div",{className:"presence-online"}),"Online  ",l.length]}),b.jsx("div",{className:"space-y-3",children:l.map(c=>{const u=c.id===e.id;return b.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"avatar-lg shadow-gentle",style:{backgroundColor:c.color},children:s(c.name)}),b.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("div",{className:"flex items-center gap-2",children:b.jsxs("span",{className:`font-medium truncate ${u?"text-indigo-700":"text-gray-900"}`,children:[c.name,u&&b.jsx("span",{className:"text-xs text-indigo-600 font-medium ml-1",children:"(You)"})]})}),b.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[b.jsx(R8,{className:"w-3 h-3"}),b.jsx("span",{children:"Active now  Can interact with AI"})]})]}),u&&b.jsx("div",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full font-medium border border-indigo-200",children:"You"})]},c.id)})})]}),a.length>0&&b.jsxs("div",{className:"p-4 border-t border-gray-100",children:[b.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[b.jsx("div",{className:"presence-offline"}),"Offline  ",a.length]}),b.jsx("div",{className:"space-y-3",children:a.map(c=>{const u=c.id===e.id;return b.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg opacity-60 hover:bg-gray-50 transition-colors",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"avatar-lg shadow-gentle",style:{backgroundColor:c.color},children:s(c.name)}),b.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gray-400 border-2 border-white rounded-full flex items-center justify-center",children:b.jsx(Sj,{className:"w-2 h-2 text-white"})})]}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("div",{className:"flex items-center gap-2",children:b.jsxs("span",{className:`font-medium truncate ${u?"text-indigo-700":"text-gray-900"}`,children:[c.name,u&&b.jsx("span",{className:"text-xs text-indigo-600 font-medium ml-1",children:"(You)"})]})}),b.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[b.jsx(wj,{className:"w-3 h-3"}),b.jsx("span",{children:o(c.lastSeen)})]})]}),u&&b.jsx("div",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full font-medium border border-indigo-200",children:"You"})]},c.id)})})]}),b.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Room Info"}),b.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"Total members:"}),b.jsx("span",{className:"font-medium",children:t.length})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"Online now:"}),b.jsx("span",{className:"font-medium status-online",children:l.length})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"AI Assistant:"}),b.jsx("span",{className:`font-medium ${n?"status-offline":"status-online"}`,children:n?"Muted for room":"Active for ALL participants"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"Real-time sync:"}),b.jsx("span",{className:"font-medium status-online",children:"Connected"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"AI Context:"}),b.jsx("span",{className:"font-medium status-online",children:"Shared room memory"})]})]})]})]})]})};var Cj=typeof global=="object"&&global&&global.Object===Object&&global,Jie=typeof self=="object"&&self&&self.Object===Object&&self,K0=Cj||Jie||Function("return this")(),Ax=K0.Symbol,_j=Object.prototype,Yie=_j.hasOwnProperty,Xie=_j.toString,Fp=Ax?Ax.toStringTag:void 0;function Qie(t){var e=Yie.call(t,Fp),n=t[Fp];try{t[Fp]=void 0;var r=!0}catch{}var i=Xie.call(t);return r&&(e?t[Fp]=n:delete t[Fp]),i}var Zie=Object.prototype,ese=Zie.toString;function tse(t){return ese.call(t)}var nse="[object Null]",rse="[object Undefined]",WN=Ax?Ax.toStringTag:void 0;function r5(t){return t==null?t===void 0?rse:nse:WN&&WN in Object(t)?Qie(t):tse(t)}function Oy(t){return t!=null&&typeof t=="object"}var D8=Array.isArray;function Ba(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Aj(t){return t}var ise="[object AsyncFunction]",sse="[object Function]",ose="[object GeneratorFunction]",lse="[object Proxy]";function N_(t){if(!Ba(t))return!1;var e=r5(t);return e==sse||e==ose||e==ise||e==lse}var wk=K0["__core-js_shared__"],qN=function(){var t=/[^.]+$/.exec(wk&&wk.keys&&wk.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ase(t){return!!qN&&qN in t}var cse=Function.prototype,use=cse.toString;function hse(t){if(t!=null){try{return use.call(t)}catch{}try{return t+""}catch{}}return""}var dse=/[\\^$.*+?()[\]{}|]/g,fse=/^\[object .+?Constructor\]$/,pse=Function.prototype,mse=Object.prototype,gse=pse.toString,yse=mse.hasOwnProperty,vse=RegExp("^"+gse.call(yse).replace(dse,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wse(t){if(!Ba(t)||ase(t))return!1;var e=N_(t)?vse:fse;return e.test(hse(t))}function xse(t,e){return t==null?void 0:t[e]}function I_(t,e){var n=xse(t,e);return wse(n)?n:void 0}var UN=Object.create,bse=function(){function t(){}return function(e){if(!Ba(e))return{};if(UN)return UN(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Tj(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function kse(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Sse=800,Cse=16,_se=Date.now;function Ase(t){var e=0,n=0;return function(){var r=_se(),i=Cse-(r-n);if(n=r,i>0){if(++e>=Sse)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Tse(t){return function(){return t}}var Tx=function(){try{var t=I_(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Mse=Tx?function(t,e){return Tx(t,"toString",{configurable:!0,enumerable:!1,value:Tse(e),writable:!0})}:Aj,Ese=Ase(Mse),Ose=9007199254740991,Nse=/^(?:0|[1-9]\d*)$/;function Mj(t,e){var n=typeof t;return e=e??Ose,!!e&&(n=="number"||n!="symbol"&&Nse.test(t))&&t>-1&&t%1==0&&t<e}function P_(t,e,n){e=="__proto__"&&Tx?Tx(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function i5(t,e){return t===e||t!==t&&e!==e}var Ise=Object.prototype,Pse=Ise.hasOwnProperty;function Rse(t,e,n){var r=t[e];(!(Pse.call(t,e)&&i5(r,n))||n===void 0&&!(e in t))&&P_(t,e,n)}function Dse(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],a=void 0;a===void 0&&(a=t[l]),i?P_(n,l,a):Rse(n,l,a)}return n}var GN=Math.max;function Lse(t,e,n){return e=GN(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=GN(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),Tj(t,this,l)}}function Ej(t,e){return Ese(Lse(t,e,Aj),t+"")}var Bse=9007199254740991;function Oj(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Bse}function R_(t){return t!=null&&Oj(t.length)&&!N_(t)}function $se(t,e,n){if(!Ba(n))return!1;var r=typeof e;return(r=="number"?R_(n)&&Mj(e,n.length):r=="string"&&e in n)?i5(n[e],t):!1}function Fse(t){return Ej(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&$se(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}var zse=Object.prototype;function Nj(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||zse;return t===n}function jse(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Hse="[object Arguments]";function KN(t){return Oy(t)&&r5(t)==Hse}var Ij=Object.prototype,Vse=Ij.hasOwnProperty,Wse=Ij.propertyIsEnumerable,L8=KN(function(){return arguments}())?KN:function(t){return Oy(t)&&Vse.call(t,"callee")&&!Wse.call(t,"callee")};function qse(){return!1}var Pj=typeof exports=="object"&&exports&&!exports.nodeType&&exports,JN=Pj&&typeof module=="object"&&module&&!module.nodeType&&module,Use=JN&&JN.exports===Pj,YN=Use?K0.Buffer:void 0,Gse=YN?YN.isBuffer:void 0,Rj=Gse||qse,Kse="[object Arguments]",Jse="[object Array]",Yse="[object Boolean]",Xse="[object Date]",Qse="[object Error]",Zse="[object Function]",eoe="[object Map]",toe="[object Number]",noe="[object Object]",roe="[object RegExp]",ioe="[object Set]",soe="[object String]",ooe="[object WeakMap]",loe="[object ArrayBuffer]",aoe="[object DataView]",coe="[object Float32Array]",uoe="[object Float64Array]",hoe="[object Int8Array]",doe="[object Int16Array]",foe="[object Int32Array]",poe="[object Uint8Array]",moe="[object Uint8ClampedArray]",goe="[object Uint16Array]",yoe="[object Uint32Array]",gn={};gn[coe]=gn[uoe]=gn[hoe]=gn[doe]=gn[foe]=gn[poe]=gn[moe]=gn[goe]=gn[yoe]=!0;gn[Kse]=gn[Jse]=gn[loe]=gn[Yse]=gn[aoe]=gn[Xse]=gn[Qse]=gn[Zse]=gn[eoe]=gn[toe]=gn[noe]=gn[roe]=gn[ioe]=gn[soe]=gn[ooe]=!1;function voe(t){return Oy(t)&&Oj(t.length)&&!!gn[r5(t)]}function woe(t){return function(e){return t(e)}}var Dj=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Dg=Dj&&typeof module=="object"&&module&&!module.nodeType&&module,xoe=Dg&&Dg.exports===Dj,xk=xoe&&Cj.process,XN=function(){try{var t=Dg&&Dg.require&&Dg.require("util").types;return t||xk&&xk.binding&&xk.binding("util")}catch{}}(),QN=XN&&XN.isTypedArray,Lj=QN?woe(QN):voe;function boe(t,e){var n=D8(t),r=!n&&L8(t),i=!n&&!r&&Rj(t),s=!n&&!r&&!i&&Lj(t),o=n||r||i||s,l=o?jse(t.length,String):[],a=l.length;for(var c in t)o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Mj(c,a))||l.push(c);return l}function koe(t,e){return function(n){return t(e(n))}}function Soe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Coe=Object.prototype,_oe=Coe.hasOwnProperty;function Aoe(t){if(!Ba(t))return Soe(t);var e=Nj(t),n=[];for(var r in t)r=="constructor"&&(e||!_oe.call(t,r))||n.push(r);return n}function Bj(t){return R_(t)?boe(t):Aoe(t)}var P1=I_(Object,"create");function Toe(){this.__data__=P1?P1(null):{},this.size=0}function Moe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Eoe="__lodash_hash_undefined__",Ooe=Object.prototype,Noe=Ooe.hasOwnProperty;function Ioe(t){var e=this.__data__;if(P1){var n=e[t];return n===Eoe?void 0:n}return Noe.call(e,t)?e[t]:void 0}var Poe=Object.prototype,Roe=Poe.hasOwnProperty;function Doe(t){var e=this.__data__;return P1?e[t]!==void 0:Roe.call(e,t)}var Loe="__lodash_hash_undefined__";function Boe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=P1&&e===void 0?Loe:e,this}function Qh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qh.prototype.clear=Toe;Qh.prototype.delete=Moe;Qh.prototype.get=Ioe;Qh.prototype.has=Doe;Qh.prototype.set=Boe;function $oe(){this.__data__=[],this.size=0}function s5(t,e){for(var n=t.length;n--;)if(i5(t[n][0],e))return n;return-1}var Foe=Array.prototype,zoe=Foe.splice;function joe(t){var e=this.__data__,n=s5(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():zoe.call(e,n,1),--this.size,!0}function Hoe(t){var e=this.__data__,n=s5(e,t);return n<0?void 0:e[n][1]}function Voe(t){return s5(this.__data__,t)>-1}function Woe(t,e){var n=this.__data__,r=s5(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ja(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ja.prototype.clear=$oe;Ja.prototype.delete=joe;Ja.prototype.get=Hoe;Ja.prototype.has=Voe;Ja.prototype.set=Woe;var $j=I_(K0,"Map");function qoe(){this.size=0,this.__data__={hash:new Qh,map:new($j||Ja),string:new Qh}}function Uoe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function o5(t,e){var n=t.__data__;return Uoe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Goe(t){var e=o5(this,t).delete(t);return this.size-=e?1:0,e}function Koe(t){return o5(this,t).get(t)}function Joe(t){return o5(this,t).has(t)}function Yoe(t,e){var n=o5(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function J0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}J0.prototype.clear=qoe;J0.prototype.delete=Goe;J0.prototype.get=Koe;J0.prototype.has=Joe;J0.prototype.set=Yoe;var Fj=koe(Object.getPrototypeOf,Object),Xoe="[object Object]",Qoe=Function.prototype,Zoe=Object.prototype,zj=Qoe.toString,ele=Zoe.hasOwnProperty,tle=zj.call(Object);function nle(t){if(!Oy(t)||r5(t)!=Xoe)return!1;var e=Fj(t);if(e===null)return!0;var n=ele.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&zj.call(n)==tle}function rle(){this.__data__=new Ja,this.size=0}function ile(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function sle(t){return this.__data__.get(t)}function ole(t){return this.__data__.has(t)}var lle=200;function ale(t,e){var n=this.__data__;if(n instanceof Ja){var r=n.__data__;if(!$j||r.length<lle-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new J0(r)}return n.set(t,e),this.size=n.size,this}function Y0(t){var e=this.__data__=new Ja(t);this.size=e.size}Y0.prototype.clear=rle;Y0.prototype.delete=ile;Y0.prototype.get=sle;Y0.prototype.has=ole;Y0.prototype.set=ale;var jj=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ZN=jj&&typeof module=="object"&&module&&!module.nodeType&&module,cle=ZN&&ZN.exports===jj,eI=cle?K0.Buffer:void 0;eI&&eI.allocUnsafe;function ule(t,e){return t.slice()}var tI=K0.Uint8Array;function hle(t){var e=new t.constructor(t.byteLength);return new tI(e).set(new tI(t)),e}function dle(t,e){var n=hle(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function fle(t){return typeof t.constructor=="function"&&!Nj(t)?bse(Fj(t)):{}}function ple(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),l=o.length;l--;){var a=o[++i];if(n(s[a],a,s)===!1)break}return e}}var mle=ple();function B8(t,e,n){(n!==void 0&&!i5(t[e],n)||n===void 0&&!(e in t))&&P_(t,e,n)}function gle(t){return Oy(t)&&R_(t)}function $8(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function yle(t){return Dse(t,Bj(t))}function vle(t,e,n,r,i,s,o){var l=$8(t,n),a=$8(e,n),c=o.get(a);if(c){B8(t,n,c);return}var u=s?s(l,a,n+"",t,e,o):void 0,h=u===void 0;if(h){var d=D8(a),f=!d&&Rj(a),p=!d&&!f&&Lj(a);u=a,d||f||p?D8(l)?u=l:gle(l)?u=kse(l):f?(h=!1,u=ule(a)):p?(h=!1,u=dle(a)):u=[]:nle(a)||L8(a)?(u=l,L8(l)?u=yle(l):(!Ba(l)||N_(l))&&(u=fle(a))):h=!1}h&&(o.set(a,u),i(u,a,r,s,o),o.delete(a)),B8(t,n,u)}function D_(t,e,n,r,i){t!==e&&mle(e,function(s,o){if(i||(i=new Y0),Ba(s))vle(t,e,o,n,D_,r,i);else{var l=r?r($8(t,o),s,o+"",t,e,i):void 0;l===void 0&&(l=s),B8(t,o,l)}},Bj)}function Hj(t,e,n,r,i,s){return Ba(t)&&Ba(e)&&(s.set(e,t),D_(t,e,void 0,Hj,s),s.delete(e)),t}var wle=Fse(function(t,e,n,r){D_(t,e,n,r)}),xle=Ej(function(t){return t.push(void 0,Hj),Tj(wle,void 0,t)});const ble=1024;let kle=0,Hs=class{constructor(e,n){this.from=e,this.to=n}};class Ct{constructor(e={}){this.id=kle++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=As.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Ct.closedBy=new Ct({deserialize:t=>t.split(" ")});Ct.openedBy=new Ct({deserialize:t=>t.split(" ")});Ct.group=new Ct({deserialize:t=>t.split(" ")});Ct.isolate=new Ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ct.contextHash=new Ct({perNode:!0});Ct.lookAhead=new Ct({perNode:!0});Ct.mounted=new Ct({perNode:!0});class R1{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Ct.mounted.id]}}const Sle=Object.create(null);let As=class Vj{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):Sle,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Vj(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Ct.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}};As.none=new As("",Object.create(null),0,8);class L_{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new As(r.name,i,r.id,r.flags):r)}return new L_(n)}}const Gv=new WeakMap,nI=new WeakMap;var Pn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Pn||(Pn={}));class fn{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=R1.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Mx(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Gv.get(this)||this.topNode,s=new Mx(i);return s.moveTo(e,n),Gv.set(this,s._tree),s}get topNode(){return new Zr(this,0,0,null)}resolve(e,n=0){let r=D1(Gv.get(this)||this.topNode,e,n,!1);return Gv.set(this,r),r}resolveInner(e,n=0){let r=D1(nI.get(this)||this.topNode,e,n,!0);return nI.set(this,r),r}resolveStack(e,n=0){return Ale(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,l=(o&Pn.IncludeAnonymous)>0;for(let a=this.cursor(o|Pn.IncludeAnonymous);;){let c=!1;if(a.from<=s&&a.to>=i&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:F_(As.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new fn(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new fn(As.none,n,r,i)))}static build(e){return Tle(e)}}fn.empty=new fn(As.none,[],[],0);class B_{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new B_(this.buffer,this.index)}}class mu{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return As.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(Wj(s,i,o[a+1],o[a+2])&&(l=a,r>0));a=o[a+3]);return l}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=i[l++],s[a++]=i[l++]-r;let c=s[a++]=i[l++]-r;s[a++]=i[l++]-e,o=Math.max(o,c)}return new mu(s,o,this.set)}}function Wj(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function D1(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Zr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Pn.IgnoreOverlays;if(r)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Zr&&o.index<0&&((i=l.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class qj{cursor(e=0){return new Mx(this,e)}getChild(e,n=null,r=null){let i=rI(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return rI(this,e,n,r)}resolve(e,n=0){return D1(this,e,n,!1)}resolveInner(e,n=0){return D1(this,e,n,!0)}matchContext(e){return F8(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Zr extends qj{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=n>0?l.length:-1;e!=c;e+=n){let u=l[e],h=a[e]+o.from;if(Wj(i,r,h,h+u.length)){if(u instanceof mu){if(s&Pn.ExcludeBuffers)continue;let d=u.findChild(0,u.buffer.length,n,r-h,i);if(d>-1)return new kl(new Cle(o,u,e,h),null,d)}else if(s&Pn.IncludeAnonymous||!u.type.isAnonymous||$_(u)){let d;if(!(s&Pn.IgnoreMounts)&&(d=R1.get(u))&&!d.overlay)return new Zr(d.tree,h,e,o);let f=new Zr(u,h,e,o);return s&Pn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&Pn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Pn.IgnoreOverlays)&&(i=R1.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:l}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new Zr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rI(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function F8(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class Cle{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class kl extends qj{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new kl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Pn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new kl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new kl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new kl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new fn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Uj(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Zr&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new _le(i,n)}class _le{constructor(e,n){this.heads=e,this.node=n}get next(){return Uj(this.heads)}}function Ale(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Zr?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=R1.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Zr(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(D1(l,e,n,!1))}}return i?Uj(i):r}class Mx{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Zr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Zr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Pn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Pn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let l=r._tree.children[s];if(this.mode&Pn.IncludeAnonymous||l instanceof mu||!l.type.isAnonymous||$_(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new kl(this.buffer,n,this.stack[i]);return this.bufferNode=new kl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return F8(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return F8(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function $_(t){return t.children.some(e=>e instanceof mu||!e.type.isAnonymous||$_(e))}function Tle(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=ble,reused:s=[],minRepeatType:o=r.types.length}=t,l=Array.isArray(n)?new B_(n,n.length):n,a=r.types,c=0,u=0;function h(_,C,T,I,L,N){let{id:$,start:F,end:ie,size:Z}=l,Y=u,pe=c;for(;Z<0;)if(l.next(),Z==-1){let ee=s[$];T.push(ee),I.push(F-_);return}else if(Z==-3){c=$;return}else if(Z==-4){u=$;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let de=a[$],W,z,O=F-_;if(ie-F<=i&&(z=y(l.pos-C,L))){let ee=new Uint16Array(z.size-z.skip),X=l.pos-z.size,E=ee.length;for(;l.pos>X;)E=g(z.start,ee,E);W=new mu(ee,ie-z.start,r),O=z.start-_}else{let ee=l.pos-Z;l.next();let X=[],E=[],xe=$>=o?$:-1,U=0,ue=ie;for(;l.pos>ee;)xe>=0&&l.id==xe&&l.size>=0?(l.end<=ue-i&&(p(X,E,F,U,l.end,ue,xe,Y,pe),U=X.length,ue=l.end),l.next()):N>2500?d(F,ee,X,E):h(F,ee,X,E,xe,N+1);if(xe>=0&&U>0&&U<X.length&&p(X,E,F,U,F,ue,xe,Y,pe),X.reverse(),E.reverse(),xe>-1&&U>0){let ve=f(de,pe);W=F_(de,X,E,0,X.length,0,ie-F,ve,ve)}else W=m(de,X,E,ie-F,Y-ie,pe)}T.push(W),I.push(O)}function d(_,C,T,I){let L=[],N=0,$=-1;for(;l.pos>C;){let{id:F,start:ie,end:Z,size:Y}=l;if(Y>4)l.next();else{if($>-1&&ie<$)break;$<0&&($=Z-i),L.push(F,ie,Z),N++,l.next()}}if(N){let F=new Uint16Array(N*4),ie=L[L.length-2];for(let Z=L.length-3,Y=0;Z>=0;Z-=3)F[Y++]=L[Z],F[Y++]=L[Z+1]-ie,F[Y++]=L[Z+2]-ie,F[Y++]=Y;T.push(new mu(F,L[2]-ie,r)),I.push(ie-_)}}function f(_,C){return(T,I,L)=>{let N=0,$=T.length-1,F,ie;if($>=0&&(F=T[$])instanceof fn){if(!$&&F.type==_&&F.length==L)return F;(ie=F.prop(Ct.lookAhead))&&(N=I[$]+F.length+ie)}return m(_,T,I,L,N,C)}}function p(_,C,T,I,L,N,$,F,ie){let Z=[],Y=[];for(;_.length>I;)Z.push(_.pop()),Y.push(C.pop()+T-L);_.push(m(r.types[$],Z,Y,N-L,F-N,ie)),C.push(L-T)}function m(_,C,T,I,L,N,$){if(N){let F=[Ct.contextHash,N];$=$?[F].concat($):[F]}if(L>25){let F=[Ct.lookAhead,L];$=$?[F].concat($):[F]}return new fn(_,C,T,I,$)}function y(_,C){let T=l.fork(),I=0,L=0,N=0,$=T.end-i,F={size:0,start:0,skip:0};e:for(let ie=T.pos-_;T.pos>ie;){let Z=T.size;if(T.id==C&&Z>=0){F.size=I,F.start=L,F.skip=N,N+=4,I+=4,T.next();continue}let Y=T.pos-Z;if(Z<0||Y<ie||T.start<$)break;let pe=T.id>=o?4:0,de=T.start;for(T.next();T.pos>Y;){if(T.size<0)if(T.size==-3)pe+=4;else break e;else T.id>=o&&(pe+=4);T.next()}L=de,I+=Z,N+=pe}return(C<0||I==_)&&(F.size=I,F.start=L,F.skip=N),F.size>4?F:void 0}function g(_,C,T){let{id:I,start:L,end:N,size:$}=l;if(l.next(),$>=0&&I<o){let F=T;if($>4){let ie=l.pos-($-4);for(;l.pos>ie;)T=g(_,C,T)}C[--T]=F,C[--T]=N-_,C[--T]=L-_,C[--T]=I}else $==-3?c=I:$==-4&&(u=I);return T}let v=[],w=[];for(;l.pos>0;)h(t.start||0,t.bufferStart||0,v,w,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:v.length?w[0]+v[0].length:0;return new fn(a[t.topID],v.reverse(),w.reverse(),S)}const iI=new WeakMap;function gw(t,e){if(!t.isAnonymous||e instanceof mu||e.type!=t)return 1;let n=iI.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof fn)){n=1;break}n+=gw(t,r)}iI.set(e,n)}return n}function F_(t,e,n,r,i,s,o,l,a){let c=0;for(let p=r;p<i;p++)c+=gw(t,e[p]);let u=Math.ceil(c*1.5/8),h=[],d=[];function f(p,m,y,g,v){for(let w=y;w<g;){let S=w,_=m[w],C=gw(t,p[w]);for(w++;w<g;w++){let T=gw(t,p[w]);if(C+T>=u)break;C+=T}if(w==S+1){if(C>u){let T=p[S];f(T.children,T.positions,0,T.children.length,m[S]+v);continue}h.push(p[S])}else{let T=m[w-1]+p[w-1].length-_;h.push(F_(t,p,m,S,w,_,T,null,a))}d.push(_+v-s)}}return f(e,n,r,i,0),(l||a)(h,d,o)}class wTe{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof kl?this.setBuffer(e.context.buffer,e.index,n):e instanceof Zr&&this.map.set(e.tree,n)}get(e){return e instanceof kl?this.getBuffer(e.context.buffer,e.index):e instanceof Zr?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Aa{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Aa(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<n.length?n[l]:null,h=u?u.fromA:1e9;if(h-a>=r)for(;o&&o.from<h;){let d=o;if(a>=d.from||h<=d.to||c){let f=Math.max(d.from,a)-c,p=Math.min(d.to,h)-c;d=f>=p?null:new Aa(f,p,d.tree,d.offset+c,l>0,!!u)}if(d&&i.push(d),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return i}}let Gj=class{startParse(e,n,r){return typeof e=="string"&&(e=new Mle(e)),r=r?r.length?r.map(i=>new Hs(i.from,i.to)):[new Hs(0,0)]:[new Hs(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class Mle{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function bTe(t){return(e,n,r,i)=>new Ole(e,t,n,r,i)}class sI{constructor(e,n,r,i,s){this.parser=e,this.parse=n,this.overlay=r,this.target=i,this.from=s}}function oI(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class Ele{constructor(e,n,r,i,s,o,l){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const z8=new Ct({perNode:!0});class Ole{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new fn(r.type,r.children,r.positions,r.length,r.propValues.concat([[z8,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[Ct.mounted.id]=new R1(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new Ple(this.fragments),n=null,r=null,i=new Mx(new Zr(this.baseTree,this.ranges[0].from,0,null),Pn.IncludeAnonymous|Pn.IgnoreMounts);e:for(let s,o;;){let l=!0,a;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)l=!1;else if(e.hasNode(i)){if(n){let c=n.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,d=u.to+c.pos;h>=i.from&&d<=i.to&&!n.ranges.some(f=>f.from<d&&f.to>h)&&n.ranges.push({from:h,to:d})}}l=!1}else if(r&&(o=Nle(r.ranges,i.from,i.to)))l=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||Ile(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")n=new Ele(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,n);else{let u=cI(this.ranges,s.overlay||(i.from<i.to?[new Hs(i.from,i.to)]:[]));u.length&&oI(u),(u.length||!s.overlay)&&this.inner.push(new sI(s.parser,u.length?s.parser.startParse(this.input,uI(c,u),u):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new Hs(h.from-i.from,h.to-i.from)):null,i.tree,u.length?u[0].from:i.from)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):l=!1}}else if(n&&(a=n.predicate(i))&&(a===!0&&(a=new Hs(i.from,i.to)),a.from<a.to)){let c=n.ranges.length-1;c>=0&&n.ranges[c].to==a.from?n.ranges[c]={from:n.ranges[c].from,to:a.to}:n.ranges.push(a)}if(l&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let c=cI(this.ranges,n.ranges);c.length&&(oI(c),this.inner.splice(n.index,0,new sI(n.parser,n.parser.startParse(this.input,uI(n.mounts,c),c),n.ranges.map(u=>new Hs(u.from-n.start,u.to-n.start)),n.target,c[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function Nle(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function lI(t,e,n,r,i,s){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),i.push(o-s)}}function Ile(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(r),o=i.children[s],l=o.buffer,a=[s];function c(u,h,d,f,p,m){let y=n[m],g=[],v=[];lI(o,u,y,g,v,f);let w=l[y+1],S=l[y+2];a.push(g.length);let _=m?c(y+4,l[y+3],o.set.types[l[y]],w,S-w,m-1):e.toTree();return g.push(_),v.push(w-f),lI(o,l[y+3],h,g,v,f),new fn(d,g,v,p)}i.children[s]=c(0,l.length,As.none,0,o.length,n.length-1);for(let u of a){let h=t.tree.children[u],d=t.tree.positions[u];t.yield(new Zr(h,d+t.from,u,t._tree))}}class aI{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(Pn.IncludeAnonymous|Pn.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,Pn.IgnoreOverlays|Pn.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof fn)n=n.children[0];else break}return!1}}class Ple{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(z8))!==null&&n!==void 0?n:r.to,this.inner=new aI(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(z8))!==null&&e!==void 0?e:n.to,this.inner=new aI(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(Ct.mounted);if(o&&o.parser==n)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&i.push({frag:a,pos:s.from-a.offset,mount:o})}}}return i}}function cI(t,e){let n=null,r=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,l=t[i].from;for(;s<r.length;s++){let a=r[s];if(a.from>=l)break;a.to<=o||(n||(r=n=e.slice()),a.from<o?(n[s]=new Hs(a.from,o),a.to>l&&n.splice(s+1,0,new Hs(l,a.to))):a.to>l?n[s--]=new Hs(l,a.to):n.splice(s--,1))}}return r}function Rle(t,e,n,r){let i=0,s=0,o=!1,l=!1,a=-1e9,c=[];for(;;){let u=i==t.length?1e9:o?t[i].to:t[i].from,h=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let d=Math.max(a,n),f=Math.min(u,h,r);d<f&&c.push(new Hs(d,f))}if(a=Math.min(u,h),a==1e9)break;u==a&&(o?(o=!1,i++):o=!0),h==a&&(l?(l=!1,s++):l=!0)}return c}function uI(t,e){let n=[];for(let{pos:r,mount:i,frag:s}of t){let o=r+(i.overlay?i.overlay[0].from:0),l=o+i.tree.length,a=Math.max(s.from,o),c=Math.min(s.to,l);if(i.overlay){let u=i.overlay.map(d=>new Hs(d.from+r,d.to+r)),h=Rle(e,u,a,c);for(let d=0,f=a;;d++){let p=d==h.length,m=p?c:h[d].from;if(m>f&&n.push(new Aa(f,m,i.tree,-o,s.from>=f||s.openStart,s.to<=m||s.openEnd)),p)break;f=h[d].to}}else n.push(new Aa(a,c,i.tree,-o,s.from>=o||s.openStart,s.to<=l||s.openEnd))}return n}let j8=[],Kj=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?Kj:j8).push(n=n+t[e])})();function Dle(t){if(t<768)return!1;for(let e=0,n=j8.length;;){let r=e+n>>1;if(t<j8[r])n=r;else if(t>=Kj[r])e=r+1;else return!0;if(e==n)return!1}}function hI(t){return t>=127462&&t<=127487}const dI=8205;function Lle(t,e,n=!0,r=!0){return(n?Jj:Ble)(t,e,r)}function Jj(t,e,n){if(e==t.length)return e;e&&Yj(t.charCodeAt(e))&&Xj(t.charCodeAt(e-1))&&e--;let r=bk(t,e);for(e+=fI(r);e<t.length;){let i=bk(t,e);if(r==dI||i==dI||n&&Dle(i))e+=fI(i),r=i;else if(hI(i)){let s=0,o=e-2;for(;o>=0&&hI(bk(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Ble(t,e,n){for(;e>0;){let r=Jj(t,e-2,n);if(r<e)return r;e--}return 0}function bk(t,e){let n=t.charCodeAt(e);if(!Xj(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Yj(r)?(n-55296<<10)+(r-56320)+65536:n}function Yj(t){return t>=56320&&t<57344}function Xj(t){return t>=55296&&t<56320}function fI(t){return t<65536?1:2}let $t=class Qj{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=S0(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),yw.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=S0(this,e,n);let r=[];return this.decompose(e,n,r,0),yw.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Lg(this),s=new Lg(e);for(let o=n,l=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(l+=i.value.length,i.done||l>=r)return!0}}iter(e=1){return new Lg(this,e)}iterRange(e,n=this.length){return new Zj(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new eH(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Qj.empty:e.length<=32?new qn(e):yw.from(qn.split(e,[]))}};class qn extends $t{constructor(e,n=$le(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],l=i+o.length;if((n?r:l)>=e)return new Fle(i,l,r,o);i=l+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new qn(pI(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),l=vw(s.text,o.text.slice(),0,s.length);if(l.length<=32)r.push(new qn(l,o.length+s.length));else{let a=l.length>>1;r.push(new qn(l.slice(0,a)),new qn(l.slice(a)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof qn))return super.replace(e,n,r);[e,n]=S0(this,e,n);let i=vw(this.text,vw(r.text,pI(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new qn(i,s):yw.from(qn.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=S0(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(i+=r),e<a&&n>s&&(i+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new qn(r,i)),r=[],i=-1);return i>-1&&n.push(new qn(r,i)),n}}let yw=class Jd extends $t{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],l=i+o.length,a=r+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,r,i);i=l+1,r=a+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let c=i&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!c?r.push(l):l.decompose(e-o,n-o,r,c)}o=a+1}}replace(e,n,r){if([e,n]=S0(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,r),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[i]=a,new Jd(u,this.length-(n-e)+r.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=S0(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(i+=r),e<a&&n>o&&(i+=l.sliceString(e-o,n-o,r)),o=a+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Jd))return 0;let r=0,[i,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==l)return r;let a=this.children[i],c=e.children[s];if(a!=c)return r+a.scanIdentical(c,n);r+=a.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let p of e)p.flatten(f);return new qn(f,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,l=[],a=0,c=-1,u=[];function h(f){let p;if(f.lines>s&&f instanceof Jd)for(let m of f.children)h(m);else f.lines>o&&(a>o||!a)?(d(),l.push(f)):f instanceof qn&&a&&(p=u[u.length-1])instanceof qn&&f.lines+p.lines<=32?(a+=f.lines,c+=f.length+1,u[u.length-1]=new qn(p.text.concat(f.text),p.length+1+f.length)):(a+f.lines>i&&d(),a+=f.lines,c+=f.length+1,u.push(f))}function d(){a!=0&&(l.push(u.length==1?u[0]:Jd.from(u,c)),c=-1,a=u.length=0)}for(let f of e)h(f);return d(),l.length==1?l[0]:new Jd(l,n)}};$t.empty=new qn([""],0);function $le(t){let e=-1;for(let n of t)e+=n.length+1;return e}function vw(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let l=t[s],a=i+l.length;a>=n&&(a>r&&(l=l.slice(0,r-i)),i<n&&(l=l.slice(n-i)),o?(e[e.length-1]+=l,o=!1):e.push(l)),i=a+1}return e}function pI(t,e,n){return vw(t,[""],e,n)}class Lg{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof qn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,l=i instanceof qn?i.text.length:i.children.length;if(o==(n>0?l:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof qn){let a=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=i.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof qn?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Zj{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Lg(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class eH{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&($t.prototype[Symbol.iterator]=function(){return this.iter()},Lg.prototype[Symbol.iterator]=Zj.prototype[Symbol.iterator]=eH.prototype[Symbol.iterator]=function(){return this});class Fle{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function S0(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Br(t,e,n=!0,r=!0){return Lle(t,e,n,r)}function zle(t){return t>=56320&&t<57344}function jle(t){return t>=55296&&t<56320}function Bi(t,e){let n=t.charCodeAt(e);if(!jle(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return zle(r)?(n-55296<<10)+(r-56320)+65536:n}function z_(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function wl(t){return t<65536?1:2}const H8=/\r\n?|\n/;var Lr=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Lr||(Lr={}));class Nl{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){V8(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Nl(e)}composeDesc(e){return this.empty?e:e.empty?this:tH(this,e)}mapDesc(e,n=!1){return e.empty?this:W8(this,e,n)}mapPos(e,n=-1,r=Lr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=i+l;if(a<0){if(c>e)return s+(e-i);s+=l}else{if(r!=Lr.Simple&&c>=e&&(r==Lr.TrackDel&&i<e&&c>e||r==Lr.TrackBefore&&i<e||r==Lr.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!l)return e==i||n<0?s:s+a;s+=a}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],l=i+s;if(o>=0&&i<=n&&l>=e)return i<e&&l>n?"cover":!0;i=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nl(e)}static create(e){return new Nl(e)}}class cr extends Nl{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return V8(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return W8(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],l=n[i+1];if(l>=0){n[i]=l,n[i+1]=o;let a=i>>1;for(;r.length<a;)r.push($t.empty);r.push(o?e.slice(s,s+o):$t.empty)}s+=o}return new cr(n,r)}compose(e){return this.empty?e:e.empty?this:tH(this,e,!0)}map(e,n=!1){return e.empty?this:W8(this,e,n,!0)}iterChanges(e,n=!1){V8(this,e,n)}get desc(){return Nl.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new L1(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);Gr(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Gr(n,u,h),h>0&&Vc(r,n,s.text),s.forward(u),l+=u}let c=e[o++];for(;l<c;){if(s.done)break e;let u=Math.min(s.len,c-l);Gr(n,u,-1),Gr(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new cr(n,r),filtered:Nl.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!i.length)return;o<n&&Gr(i,n-o,-1);let h=new cr(i,s);l=l?l.compose(h.map(l)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof cr){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:h,to:d=h,insert:f}=u;if(h>d||h<0||d>n)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${n})`);let p=f?typeof f=="string"?$t.of(f.split(r||H8)):f:$t.empty,m=p.length;if(h==d&&m==0)return;h<o&&a(),h>o&&Gr(i,h-o,-1),Gr(i,d-h,m),Vc(s,i,p),o=d}}return c(e),a(!l),l}static empty(e){return new cr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push($t.empty);r[i]=$t.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new cr(n,r)}static createSet(e,n){return new cr(e,n)}}function Gr(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Vc(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push($t.empty);t.push(n)}}function V8(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)i+=l,s+=l;else{let c=i,u=s,h=$t.empty;for(;c+=l,u+=a,a&&r&&(h=h.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function W8(t,e,n,r=!1){let i=[],s=r?[]:null,o=new L1(t),l=new L1(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);Gr(i,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let c=l.len;for(Gr(i,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(Gr(i,0,o.ins),s&&Vc(s,i,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let h=Math.min(u,l.len);c+=h,u-=h,l.forward(h)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;Gr(i,c,a<o.i?o.ins:0),s&&a<o.i&&Vc(s,i,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return s?cr.createSet(i,s):Nl.create(i);throw new Error("Mismatched change set lengths")}}}function tH(t,e,n=!1){let r=[],i=n?[]:null,s=new L1(t),o=new L1(e);for(let l=!1;;){if(s.done&&o.done)return i?cr.createSet(r,i):Nl.create(r);if(s.ins==0)Gr(r,s.len,0,l),s.next();else if(o.len==0&&!o.done)Gr(r,0,o.ins,l),i&&Vc(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Gr(r,a,u,l),i&&u&&Vc(i,r,o.text)}else o.ins==-1?(Gr(r,s.off?0:s.len,a,l),i&&Vc(i,r,s.textBit(a))):(Gr(r,s.off?0:s.len,o.off?0:o.ins,l),i&&!o.off&&Vc(i,r,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||r.length>c),s.forward2(a),o.forward(a)}}}}class L1{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?$t.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?$t.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}let Kv=class q8{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new q8(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return oe.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return oe.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return oe.range(e.anchor,e.head)}static create(e,n,r){return new q8(e,n,r)}};class oe{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:oe.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new oe([this.main],0)}addRange(e,n=!0){return oe.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,oe.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new oe(e.ranges.map(n=>Kv.fromJSON(n)),e.main)}static single(e,n=e){return new oe([oe.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return oe.normalized(e.slice(),n);r=s.to}return new oe(e,n)}static cursor(e,n=0,r,i){return Kv.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Kv.create(n,e,48|s):Kv.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?oe.range(a,l):oe.range(l,a))}}return new oe(e,n)}}function nH(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let j_=0;class Re{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=j_++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Re(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:H_),!!e.static,e.enables)}of(e){return new ww([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ww(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ww(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function H_(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class ww{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=j_++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?c=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,d){if(a&&d.docChanged||c&&(d.docChanged||d.selection)||U8(h,u)){let f=r(h);if(l?!mI(f,h.values[o],i):!i(f,h.values[o]))return h.values[o]=f,1}return 0},reconfigure:(h,d)=>{let f,p=d.config.address[s];if(p!=null){let m=Ex(d,p);if(this.dependencies.every(y=>y instanceof Re?d.facet(y)===h.facet(y):y instanceof Cr?d.field(y,!1)==h.field(y,!1):!0)||(l?mI(f=r(h),m,i):i(f=r(h),m)))return h.values[o]=m,0}else f=r(h);return h.values[o]=f,1}}}}function mI(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function U8(t,e){let n=!1;for(let r of e)Bg(t,r)&1&&(n=!0);return n}function Hle(t,e,n){let r=n.map(a=>t[a.id]),i=n.map(a=>a.type),s=r.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let c=[];for(let u=0;u<r.length;u++){let h=Ex(a,r[u]);if(i[u]==2)for(let d of h)c.push(d);else c.push(h)}return e.combine(c)}return{create(a){for(let c of r)Bg(a,c);return a.values[o]=l(a),1},update(a,c){if(!U8(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=U8(a,r),h=c.config.facets[e.id],d=c.facet(e);if(h&&!u&&H_(n,h))return a.values[o]=d,0;let f=l(a);return e.compare(f,d)?(a.values[o]=d,0):(a.values[o]=f,1)}}}const Jv=Re.define({static:!0});class Cr{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Cr(j_++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Jv).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Jv),o=i.facet(Jv),l;return(l=s.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(r.values[n]=l.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,Jv.of({field:this,create:e})]}get extension(){return this}}const vh={lowest:4,low:3,default:2,high:1,highest:0};function zp(t){return e=>new rH(e,t)}const Nu={highest:zp(vh.highest),high:zp(vh.high),default:zp(vh.default),low:zp(vh.low),lowest:zp(vh.lowest)};class rH{constructor(e,n){this.inner=e,this.prec=n}}class C0{of(e){return new G8(this,e)}reconfigure(e){return C0.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class G8{constructor(e,n){this.compartment=e,this.inner=n}}let gI=class iH{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let d of Vle(e,n,o))d instanceof Cr?i.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let l=Object.create(null),a=[],c=[];for(let d of i)l[d.id]=c.length<<1,c.push(f=>d.slot(f));let u=r==null?void 0:r.config.facets;for(let d in s){let f=s[d],p=f[0].facet,m=u&&u[d]||[];if(f.every(y=>y.type==0))if(l[p.id]=a.length<<1|1,H_(m,f))a.push(r.facet(p));else{let y=p.combine(f.map(g=>g.value));a.push(r&&p.compare(y,r.facet(p))?r.facet(p):y)}else{for(let y of f)y.type==0?(l[y.id]=a.length<<1|1,a.push(y.value)):(l[y.id]=c.length<<1,c.push(g=>y.dynamicSlot(g)));l[p.id]=c.length<<1,c.push(y=>Hle(y,p,f))}}let h=c.map(d=>d(l));return new iH(e,o,h,l,a,s)}};function Vle(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,l){let a=i.get(o);if(a!=null){if(a<=l)return;let c=r[a].indexOf(o);c>-1&&r[a].splice(c,1),o instanceof G8&&n.delete(o.compartment)}if(i.set(o,l),Array.isArray(o))for(let c of o)s(c,l);else if(o instanceof G8){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,l)}else if(o instanceof rH)s(o.inner,o.prec);else if(o instanceof Cr)r[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof ww)r[l].push(o),o.facet.extensions&&s(o.facet.extensions,vh.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,l)}}return s(t,vh.default),r.reduce((o,l)=>o.concat(l))}function Bg(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Ex(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const sH=Re.define(),K8=Re.define({combine:t=>t.some(e=>e),static:!0}),oH=Re.define({combine:t=>t.length?t[0]:void 0,static:!0}),lH=Re.define(),aH=Re.define(),cH=Re.define(),uH=Re.define({combine:t=>t.length?t[0]:!1});class Ya{constructor(e,n){this.type=e,this.value=n}static define(){return new Wle}}class Wle{of(e){return new Ya(this,e)}}class qle{constructor(e){this.map=e}of(e){return new ft(this,e)}}class ft{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ft(this.type,n)}is(e){return this.type==e}static define(e={}){return new qle(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}ft.reconfigure=ft.define();ft.appendConfig=ft.define();let wi=class cm{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&nH(r,n.newLength),s.some(l=>l.type==cm.time)||(this.annotations=s.concat(cm.time.of(Date.now())))}static create(e,n,r,i,s,o){return new cm(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(cm.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}};wi.time=Ya.define();wi.userEvent=Ya.define();wi.addToHistory=Ya.define();wi.remote=Ya.define();function Ule(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function hH(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=cr.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:ft.mapEffects(t.effects,i).concat(ft.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function J8(t,e,n){let r=e.selection,i=Uf(e.annotations);return e.userEvent&&(i=i.concat(wi.userEvent.of(e.userEvent))),{changes:e.changes instanceof cr?e.changes:cr.of(e.changes||[],n,t.facet(oH)),selection:r&&(r instanceof oe?r:oe.single(r.anchor,r.head)),effects:Uf(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function dH(t,e,n){let r=J8(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=hH(r,J8(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=wi.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Kle(n?Gle(i):i)}function Gle(t){let e=t.startState,n=!0;for(let i of e.facet(lH)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Ule(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=cr.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=wi.create(e,i,t.selection&&t.selection.map(s),ft.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(aH);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof wi?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof wi?t=s[0]:t=dH(e,Uf(s),!1)}return t}function Kle(t){let e=t.startState,n=e.facet(cH),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=hH(r,J8(e,s,t.changes.newLength),!0))}return r==t?t:wi.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Jle=[];function Uf(t){return t==null?Jle:Array.isArray(t)?t:[t]}var Cn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Cn||(Cn={}));const Yle=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Y8;try{Y8=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Xle(t){if(Y8)return Y8.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Yle.test(n)))return!0}return!1}function Qle(t){return e=>{if(!/\S/.test(e))return Cn.Space;if(Xle(e))return Cn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Cn.Word;return Cn.Other}}let _n=class ho{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Bg(this,l<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Bg(this,r),Ex(this,r)}update(...e){return dH(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let l of e.effects)l.is(C0.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,c)=>i.set(c,a)),n=null),i.set(l.value.compartment,l.value.extension)):l.is(ft.reconfigure)?(n=null,r=l.value):l.is(ft.appendConfig)&&(n=null,r=Uf(r).concat(l.value));let s;n?s=e.startState.values.slice():(n=gI.resolve(r,i,this),s=new ho(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(K8)?e.newSelection:e.newSelection.asSingle();new ho(n,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:oe.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Uf(r.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),c=this.changes(a.changes),u=c.map(i);for(let d=0;d<l;d++)s[d]=s[d].map(u);let h=i.mapDesc(c,!0);s.push(a.range.map(h)),i=i.compose(u),o=ft.mapEffects(o,u).concat(ft.mapEffects(Uf(a.effects),h))}return{changes:i,selection:oe.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof cr?e:cr.of(e,this.doc.length,this.facet(ho.lineSeparator))}toText(e){return $t.of(e.split(this.facet(ho.lineSeparator)||H8))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Bg(this,n),Ex(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Cr&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],l=e[s];i.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ho.create({doc:e.doc,selection:oe.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=gI.resolve(e.extensions||[],new Map),r=e.doc instanceof $t?e.doc:$t.of((e.doc||"").split(n.staticFacet(ho.lineSeparator)||H8)),i=e.selection?e.selection instanceof oe?e.selection:oe.single(e.selection.anchor,e.selection.head):oe.single(0);return nH(i,r.length),n.staticFacet(K8)||(i=i.asSingle()),new ho(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ho.tabSize)}get lineBreak(){return this.facet(ho.lineSeparator)||`
`}get readOnly(){return this.facet(uH)}phrase(e,...n){for(let r of this.facet(ho.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(sH))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Qle(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,l=e-r;for(;o>0;){let a=Br(n,o,!1);if(s(n.slice(a,o))!=Cn.Word)break;o=a}for(;l<i;){let a=Br(n,l);if(s(n.slice(l,a))!=Cn.Word)break;l=a}return o==l?null:oe.range(o+r,l+r)}};_n.allowMultipleSelections=K8;_n.tabSize=Re.define({combine:t=>t.length?t[0]:4});_n.lineSeparator=oH;_n.readOnly=uH;_n.phrases=Re.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});_n.languageData=sH;_n.changeFilter=lH;_n.transactionFilter=aH;_n.transactionExtender=cH;C0.reconfigure=ft.define();function jl(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],l=r[s];if(l===void 0)r[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Zh{eq(e){return this==e}range(e,n=e){return B1.create(e,n,this)}}Zh.prototype.startSide=Zh.prototype.endSide=0;Zh.prototype.point=!1;Zh.prototype.mapMode=Lr.TrackDel;class B1{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new B1(e,n,r)}}function X8(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class V_{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,l=s.length;;){if(o==l)return o;let a=o+l>>1,c=s[a]-e||(r?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,h=this.to[a]+e,d,f;if(u==h){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(d=f=p,c.startSide!=c.endSide&&(f=n.mapPos(u,c.endSide),f<d)))continue}else if(d=n.mapPos(u,c.startSide),f=n.mapPos(h,c.endSide),d>f||d==f&&c.startSide>0&&c.endSide<=0)continue;(f-d||c.endSide-c.startSide)<0||(o<0&&(o=d),c.point&&(l=Math.max(l,f-d)),r.push(c),i.push(d-o),s.push(f-o))}return{mapped:r.length?new V_(i,s,r,l):null,pos:o}}}class Rt{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Rt(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(X8)),this.isEmpty)return n.length?Rt.of(n):this;let l=new fH(this,null,-1).goto(0),a=0,c=[],u=new $a;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let h=n[a++];u.addInner(h.from,h.to,h.value)||c.push(h)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||i>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||i>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(B1.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Rt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)i=Math.max(i,a.maxPoint),n.push(a),r.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:h}=a.map(l,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new Rt(r,n,s||Rt.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return $1.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return $1.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=yI(o,l,r),c=new jp(o,a,s),u=new jp(l,a,s);r.iterGaps((h,d,f)=>vI(c,h,u,d,f,i)),r.empty&&r.length==0&&vI(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=yI(s,o),a=new jp(s,l,0).goto(r),c=new jp(o,l,0).goto(r);for(;;){if(a.to!=c.to||!Q8(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>i)return!0;a.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new jp(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);i.point(l,c,o.point,u,h,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(i.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>r)return a+(o.point&&o.to>r?1:0);l=o.to,o.next()}}static of(e,n=!1){let r=new $a;for(let i of e instanceof B1?[e]:n?Zle(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Rt.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Rt.empty;i=i.nextLayer)n=new Rt(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}Rt.empty=new Rt([],[],null,-1);function Zle(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(X8(e,r)>0)return t.slice().sort(X8);e=r}return t}Rt.empty.nextLayer=Rt.empty;class $a{finishChunk(e){this.chunks.push(new V_(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new $a)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Rt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Rt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function yI(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=r.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class fH{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class $1{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new fH(o,n,r,s));return i.length==1?i[0]:new $1(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)kk(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)kk(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),kk(this.heap,0)}}}function kk(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class jp{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=$1.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Yv(this.active,e),Yv(this.activeTo,e),Yv(this.activeRank,e),this.minActive=wI(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Xv(this.active,n,r),Xv(this.activeTo,n,i),Xv(this.activeRank,n,s),e&&Xv(e,n,this.cursor.from),this.minActive=wI(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Yv(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function vI(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,l=r,a=r-e;for(;;){let c=t.to+a-n.to,u=c||t.endSide-n.endSide,h=u<0?t.to+a:n.to,d=Math.min(h,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Q8(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,d,t.point,n.point):d>l&&!Q8(t.active,n.active)&&s.compareRange(l,d,t.active,n.active),h>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),l=h,u<=0&&t.next(),u>=0&&n.next()}}function Q8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Yv(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Xv(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function wI(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function X0(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Br(t,i));return r}function Z8(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Br(t,i)}return r===!0?-1:t.length}const eS="",xI=typeof Symbol>"u"?"__"+eS:Symbol.for(eS),tS=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),bI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class gu{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&l==null)return a.push(o[0]+";");for(let f in l){let p=l[f];if(/&/.test(f))s(f.split(/,\s*/).map(m=>o.map(y=>m.replace(/&/,y))).reduce((m,y)=>m.concat(y)),p,a);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(i(f),p,u,d)}else p!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||d)&&a.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=bI[xI]||1;return bI[xI]=e+1,eS+e.toString(36)}static mount(e,n,r){let i=e[tS],s=r&&r.nonce;i?s&&i.setNonce(s):i=new eae(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let kI=new Map;class eae{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=kI.get(r);if(s)return e[tS]=s;this.sheet=new i.CSSStyleSheet,kI.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[tS]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),r)for(let c=0;c<l.rules.length;c++)r.insertRule(l.rules[c],i++)}else{for(;s<a;)i+=this.modules[s++].rules.length;i+=l.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Fa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},F1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tae=typeof navigator<"u"&&/Mac/.test(navigator.platform),nae=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Pr=0;Pr<10;Pr++)Fa[48+Pr]=Fa[96+Pr]=String(Pr);for(var Pr=1;Pr<=24;Pr++)Fa[Pr+111]="F"+Pr;for(var Pr=65;Pr<=90;Pr++)Fa[Pr]=String.fromCharCode(Pr+32),F1[Pr]=String.fromCharCode(Pr);for(var Sk in Fa)F1.hasOwnProperty(Sk)||(F1[Sk]=Fa[Sk]);function pH(t){var e=tae&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||nae&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?F1:Fa)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Zt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)mH(t,arguments[e]);return t}function mH(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)mH(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function z1(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function nS(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function xw(t,e){if(!e.anchorNode)return!1;try{return nS(t,e.anchorNode)}catch{return!1}}function j1(t){return t.nodeType==3?td(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function $g(t,e,n,r){return n?SI(t,e,n,r,-1)||SI(t,e,n,r,1):!1}function ed(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Ox(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function SI(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Rl(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=ed(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?Rl(t):0}else return!1}}function Rl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function l5(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function rae(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function gH(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function iae(t,e,n,r,i,s,o,l){let a=t.ownerDocument,c=a.defaultView||window;for(let u=t,h=!1;u&&!h;)if(u.nodeType==1){let d,f=u==a.body,p=1,m=1;if(f)d=rae(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();({scaleX:p,scaleY:m}=gH(u,v)),d={left:v.left,right:v.left+u.clientWidth*p,top:v.top,bottom:v.top+u.clientHeight*m}}let y=0,g=0;if(i=="nearest")e.top<d.top?(g=e.top-(d.top+o),n>0&&e.bottom>d.bottom+g&&(g=e.bottom-d.bottom+o)):e.bottom>d.bottom&&(g=e.bottom-d.bottom+o,n<0&&e.top-g<d.top&&(g=e.top-(d.top+o)));else{let v=e.bottom-e.top,w=d.bottom-d.top;g=(i=="center"&&v<=w?e.top+v/2-w/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-w+o)-d.top}if(r=="nearest"?e.left<d.left?(y=e.left-(d.left+s),n>0&&e.right>d.right+y&&(y=e.right-d.right+s)):e.right>d.right&&(y=e.right-d.right+s,n<0&&e.left<d.left+y&&(y=e.left-(d.left+s))):y=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==l?e.left-s:e.right-(d.right-d.left)+s)-d.left,y||g)if(f)c.scrollBy(y,g);else{let v=0,w=0;if(g){let S=u.scrollTop;u.scrollTop+=g/m,w=(u.scrollTop-S)*m}if(y){let S=u.scrollLeft;u.scrollLeft+=y/p,v=(u.scrollLeft-S)*p}e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w},v&&Math.abs(v-y)<1&&(r="nearest"),w&&Math.abs(w-g)<1&&(i="nearest")}if(f)break;(e.top<d.top||e.bottom>d.bottom||e.left<d.left||e.right>d.right)&&(e={left:Math.max(e.left,d.left),right:Math.min(e.right,d.right),top:Math.max(e.top,d.top),bottom:Math.min(e.bottom,d.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function sae(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class oae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Rl(n):0),r,Math.min(e.focusOffset,r?Rl(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Fd=null;function yH(t){if(t.setActive)return t.setActive();if(Fd)return t.focus(Fd);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Fd==null?{get preventScroll(){return Fd={preventScroll:!0},!0}}:void 0),!Fd){Fd=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let CI;function td(t,e,n=e){let r=CI||(CI=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Gf(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function lae(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function vH(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function aae(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Rl(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=Rl(n))}else{if(n==t)return!0;r=ed(n),n=n.parentNode}}function wH(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function xH(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Rl(n)}else if(n.parentNode&&!Ox(n))r=ed(n),n=n.parentNode;else return null}}function bH(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Ox(n))r=ed(n)+1,n=n.parentNode;else return null}}class Xr{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Xr(e.parentNode,ed(e),n)}static after(e,n){return new Xr(e.parentNode,ed(e)+1,n)}}const W_=[];class nn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let l=nn.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=_I(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=_I(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=Rl(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!nn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,l=-1;for(let a=0,c=r,u=r;a<this.children.length;a++){let h=this.children[a],d=c+h.length;if(c<e&&d>n)return h.domBoundsAround(e,n,c);if(d>=e&&i==-1&&(i=a,s=c),c>n&&h.dom.parentNode==this.dom){o=a,l=u;break}u=d,c=d+h.breakAfter}return{from:s,to:l<0?r+this.length:l,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=W_){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new kH(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}nn.prototype.breakAfter=0;function _I(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class kH{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function SH(t,e,n,r,i,s,o,l,a){let{children:c}=t,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,d=h?h.breakAfter:o;if(!(e==r&&u&&!o&&!d&&s.length<2&&u.merge(n,i,s.length?h:null,n==0,l,a))){if(r<c.length){let f=c[r];f&&(i<f.length||f.breakAfter&&(h!=null&&h.breakAfter))?(e==r&&(f=f.split(i),i=0),!d&&h&&f.merge(0,i,h,!0,0,a)?s[s.length-1]=f:((i||f.children.length&&!f.children[0].length)&&f.merge(0,i,null,!1,0,a),s.push(f))):f!=null&&f.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,l,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),a=s.length?0:l;else if(c[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,l,a)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function CH(t,e,n,r,i,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),h=e-n;for(let d of r)h+=d.length;t.length+=h,SH(t,c,u,l,a,r,0,i,s)}let $i=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},rS=typeof document<"u"?document:{documentElement:{style:{}}};const iS=/Edge\/(\d+)/.exec($i.userAgent),_H=/MSIE \d/.test($i.userAgent),sS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($i.userAgent),a5=!!(_H||sS||iS),AI=!a5&&/gecko\/(\d+)/i.test($i.userAgent),Ck=!a5&&/Chrome\/(\d+)/.exec($i.userAgent),TI="webkitFontSmoothing"in rS.documentElement.style,AH=!a5&&/Apple Computer/.test($i.vendor),MI=AH&&(/Mobile\/\w+/.test($i.userAgent)||$i.maxTouchPoints>2);var Be={mac:MI||/Mac/.test($i.platform),windows:/Win/.test($i.platform),linux:/Linux|X11/.test($i.platform),ie:a5,ie_version:_H?rS.documentMode||6:sS?+sS[1]:iS?+iS[1]:0,gecko:AI,gecko_version:AI?+(/Firefox\/(\d+)/.exec($i.userAgent)||[0,0])[1]:0,chrome:!!Ck,chrome_version:Ck?+Ck[1]:0,ios:MI,android:/Android\b/.test($i.userAgent),webkit:TI,safari:AH,webkit_version:TI?+(/\bAppleWebKit\/(\d+)/.exec($i.userAgent)||[0,0])[1]:0,tabSize:rS.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const cae=256;class Bo extends nn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Bo)||this.length-(n-e)+r.length>cae||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Bo(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Xr(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return uae(this.dom,e,n)}}class za extends nn{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(vH(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof za&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(CH(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let l of this.children){let a=r+l.length;a>e&&n.push(r<e?l.split(e-r):l),i<0&&r>=e&&(i=s),r=a,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new za(this.mark,n,o)}domAtPos(e){return TH(this,e)}coordsAt(e,n){return EH(this,e,n)}}function uae(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Be.chrome||Be.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let l=td(t,i,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return Be.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?l5(a,o<0):a||null}class Wc extends nn{static create(e,n,r){return new Wc(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Wc.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof Wc)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Wc&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return $t.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):$t.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Xr.before(this.dom):Xr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?i.length-1:0;s=i[l],!(e>0?l==0:l==i.length-1||s.top<s.bottom);l+=o?-1:1);return l5(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _0 extends nn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof _0&&e.side==this.side}split(){return new _0(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Xr.before(this.dom):Xr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return $t.empty}get isHidden(){return!0}}Bo.prototype.children=Wc.prototype.children=_0.prototype.children=W_;function TH(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Xr(n,0)}function MH(t,e,n){let r,{children:i}=t;n>0&&e instanceof za&&i.length&&(r=i[i.length-1])instanceof za&&r.mark.eq(e.mark)?MH(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function EH(t,e,n){let r=null,i=-1,s=null,o=-1;function l(c,u){for(let h=0,d=0;h<c.children.length&&d<=u;h++){let f=c.children[h],p=d+f.length;p>=u&&(f.children.length?l(f,u-d):(!s||s.isHidden&&(n>0||dae(s,f)))&&(p>u||d==p&&f.getSide()>0)?(s=f,o=u-d):(d<u||d==p&&f.getSide()<0&&!f.isHidden)&&(r=f,i=u-d)),d=p}}l(t,e);let a=(n<0?r:s)||r||s;return a?a.coordsAt(Math.max(0,a==r?i:o),n):hae(t)}function hae(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=j1(e);return n[n.length-1]||null}function dae(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function oS(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const EI=Object.create(null);function Nx(t,e,n){if(t==e)return!0;t||(t=EI),e||(e=EI);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function lS(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function fae(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}let Xa=class{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}};var xi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(xi||(xi={}));let Qe=class extends Zh{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Ny(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new yu(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=OH(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new yu(e,r,i,n,e.widget||null,!0)}static line(e){return new Iy(e)}static set(e,n=!1){return Rt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};Qe.none=Rt.empty;class Ny extends Qe{constructor(e){let{start:n,end:r}=OH(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Ny&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Nx(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Ny.prototype.point=!1;class Iy extends Qe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Iy&&this.spec.class==e.spec.class&&Nx(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Iy.prototype.mapMode=Lr.TrackBefore;Iy.prototype.point=!0;class yu extends Qe{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Lr.TrackBefore:Lr.TrackAfter:Lr.TrackDel}get type(){return this.startSide!=this.endSide?xi.WidgetRange:this.startSide<=0?xi.WidgetBefore:xi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof yu&&pae(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}yu.prototype.point=!0;function OH(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function pae(t,e){return t==e||!!(t&&e&&t.compare(e))}function bw(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class Yn extends nn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof Yn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),CH(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new Yn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Nx(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){MH(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=oS(n,this.attrs||{})),r&&(this.attrs=oS({class:r},this.attrs||{}))}domAtPos(e){return TH(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(vH(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(lS(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&nn.get(i)instanceof za;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=nn.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Be.ios||!this.children.some(s=>s instanceof Bo))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Bo)||/[^ -~]/.test(r.text))return null;let i=j1(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=EH(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Yn&&this.children.length==0&&e.children.length==0&&Nx(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof Yn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Ta extends nn{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Ta)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Xr.before(this.dom):Xr.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Ta(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return W_}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):$t.empty}domBoundsAround(){return null}become(e){return e instanceof Ta&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof aS?null:l5(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class aS extends Xa{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Fg{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ta&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Yn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Qv(new _0(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ta)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(Qv(new Bo(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof yu){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(r instanceof yu)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ta(r.widget||A0.block,l,r));else{let a=Wc.create(r.widget||A0.inline,l,l?0:r.startSide),c=this.atCursorPos&&!a.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!a.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(Qv(new _0(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(Qv(a,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new Fg(e,n,r,s);return o.openEnd=Rt.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Qv(t,e){for(let n of e)t=new za(n,[t],t.length);return t}class A0 extends Xa{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}A0.inline=new A0("span");A0.block=new A0("div");var xn=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(xn||(xn={}));const nd=xn.LTR,q_=xn.RTL;function NH(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const mae=NH("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),gae=NH("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),cS=Object.create(null),Jo=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);cS[e]=n,cS[n]=-e}function IH(t){return t<=247?mae[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?gae[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const yae=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class qc{get dir(){return this.level%2?q_:nd}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==r)return o;(s<0||(i!=0?i<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function PH(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!PH(r.inner,i.inner))return!1}return!0}const en=[];function vae(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,l=s<r.length?r[s].from:n,a=s?256:i;for(let c=o,u=a,h=a;c<l;c++){let d=IH(t.charCodeAt(c));d==512?d=u:d==8&&h==4&&(d=16),en[c]=d==4?2:d,d&7&&(h=d),u=d}for(let c=o,u=a,h=a;c<l;c++){let d=en[c];if(d==128)c<l-1&&u==en[c+1]&&u&24?d=en[c]=u:en[c]=256;else if(d==64){let f=c+1;for(;f<l&&en[f]==64;)f++;let p=c&&u==8||f<n&&en[f]==8?h==1?1:8:256;for(let m=c;m<f;m++)en[m]=p;c=f-1}else d==8&&h==1&&(en[c]=1);u=d,d&7&&(h=d)}}}function wae(t,e,n,r,i){let s=i==1?2:1;for(let o=0,l=0,a=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let h=c,d,f,p;h<u;h++)if(f=cS[d=t.charCodeAt(h)])if(f<0){for(let m=l-3;m>=0;m-=3)if(Jo[m+1]==-f){let y=Jo[m+2],g=y&2?i:y&4?y&1?s:i:0;g&&(en[h]=en[Jo[m]]=g),l=m;break}}else{if(Jo.length==189)break;Jo[l++]=h,Jo[l++]=d,Jo[l++]=a}else if((p=en[h])==2||p==1){let m=p==i;a=m?0:1;for(let y=l-3;y>=0;y-=3){let g=Jo[y+2];if(g&2)break;if(m)Jo[y+2]|=2;else{if(g&4)break;Jo[y+2]|=4}}}}}function xae(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,l=i<n.length?n[i].from:e;for(let a=o;a<l;){let c=en[a];if(c==256){let u=a+1;for(;;)if(u==l){if(i==n.length)break;u=n[i++].to,l=i<n.length?n[i].from:e}else if(en[u]==256)u++;else break;let h=s==1,d=(u<e?en[u]:r)==1,f=h==d?h?1:2:r;for(let p=u,m=i,y=m?n[m-1].to:t;p>a;)p==y&&(p=n[--m].from,y=m?n[m-1].to:t),en[--p]=f;a=u}else s=c,a++}}}function uS(t,e,n,r,i,s,o){let l=r%2?2:1;if(r%2==i%2)for(let a=e,c=0;a<n;){let u=!0,h=!1;if(c==s.length||a<s[c].from){let m=en[a];m!=l&&(u=!1,h=m==16)}let d=!u&&l==1?[]:null,f=u?r:r+1,p=a;e:for(;;)if(c<s.length&&p==s[c].from){if(h)break e;let m=s[c];if(!u)for(let y=m.to,g=c+1;;){if(y==n)break e;if(g<s.length&&s[g].from==y)y=s[g++].to;else{if(en[y]==l)break e;break}}if(c++,d)d.push(m);else{m.from>a&&o.push(new qc(a,m.from,f));let y=m.direction==nd!=!(f%2);hS(t,y?r+1:r,i,m.inner,m.from,m.to,o),a=m.to}p=m.to}else{if(p==n||(u?en[p]!=l:en[p]==l))break;p++}d?uS(t,a,p,r+1,i,d,o):a<p&&o.push(new qc(a,p,f)),a=p}else for(let a=n,c=s.length;a>e;){let u=!0,h=!1;if(!c||a>s[c-1].to){let m=en[a-1];m!=l&&(u=!1,h=m==16)}let d=!u&&l==1?[]:null,f=u?r:r+1,p=a;e:for(;;)if(c&&p==s[c-1].to){if(h)break e;let m=s[--c];if(!u)for(let y=m.from,g=c;;){if(y==e)break e;if(g&&s[g-1].to==y)y=s[--g].from;else{if(en[y-1]==l)break e;break}}if(d)d.push(m);else{m.to<a&&o.push(new qc(m.to,a,f));let y=m.direction==nd!=!(f%2);hS(t,y?r+1:r,i,m.inner,m.from,m.to,o),a=m.from}p=m.from}else{if(p==e||(u?en[p-1]!=l:en[p-1]==l))break;p--}d?uS(t,p,a,r+1,i,d,o):p<a&&o.push(new qc(p,a,f)),a=p}}function hS(t,e,n,r,i,s,o){let l=e%2?2:1;vae(t,i,s,r,l),wae(t,i,s,r,l),xae(i,s,r,l),uS(t,i,s,e,n,r,o)}function bae(t,e,n){if(!t)return[new qc(0,0,e==q_?1:0)];if(e==nd&&!n.length&&!yae.test(t))return RH(t.length);if(n.length)for(;t.length>en.length;)en[en.length]=256;let r=[],i=e==nd?0:1;return hS(t,i,i,n,0,t.length,r),r}function RH(t){return[new qc(0,t,0)]}let DH="";function kae(t,e,n,r,i){var s;let o=r.head-t.from,l=qc.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),a=e[l],c=a.side(i,n);if(o==c){let d=l+=i?1:-1;if(d<0||d>=e.length)return null;a=e[l=d],o=a.side(!i,n),c=a.side(i,n)}let u=Br(t.text,o,a.forward(i,n));(u<a.from||u>a.to)&&(u=c),DH=t.text.slice(Math.min(o,u),Math.max(o,u));let h=l==(i?e.length-1:0)?null:e[l+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<a.level?oe.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):oe.cursor(u+t.from,a.forward(i,n)?-1:1,a.level)}function Sae(t,e,n){for(let r=e;r<n;r++){let i=IH(t.charCodeAt(r));if(i==1)return nd;if(i==2||i==4)return q_}return nd}const LH=Re.define(),BH=Re.define(),$H=Re.define(),FH=Re.define(),dS=Re.define(),zH=Re.define(),jH=Re.define(),U_=Re.define(),G_=Re.define(),HH=Re.define({combine:t=>t.some(e=>e)}),VH=Re.define({combine:t=>t.some(e=>e)}),WH=Re.define();class Kf{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Kf(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Kf(oe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Zv=ft.define({map:(t,e)=>t.map(e)}),qH=ft.define();function ji(t,e,n){let r=t.facet(FH);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const va=Re.define({combine:t=>t.length?t[0]:!0});let Cae=0;const Df=Re.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class tr{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Df.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Df.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new tr(Cae++,e,r,i,l=>{let a=[];return o&&a.push(H1.of(c=>{let u=c.plugin(l);return u?o(u):Qe.none})),s&&a.push(s(l)),a})}static fromClass(e,n){return tr.define((r,i)=>new e(r,i),n)}}class _k{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(ji(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){ji(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){ji(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const UH=Re.define(),K_=Re.define(),H1=Re.define(),GH=Re.define(),J_=Re.define(),KH=Re.define();function OI(t,e){let n=t.state.facet(KH);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return Rt.spans(r,e.from,e.to,{point(){},span(s,o,l,a){let c=s-e.from,u=o-e.from,h=i;for(let d=l.length-1;d>=0;d--,a--){let f=l[d].spec.bidiIsolate,p;if(f==null&&(f=Sae(e.text,c,u)),a>0&&h.length&&(p=h[h.length-1]).to==c&&p.direction==f)p.to=u,h=p.inner;else{let m={from:c,to:u,direction:f,inner:[]};h.push(m),h=m.inner}}}}),i}const JH=Re.define();function Y_(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(JH)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const um=Re.define();class Js{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Js(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,l=0;;i++){let a=i==e.length?null:e[i],c=o-l,u=a?a.fromB:1e9;for(;s<n.length&&n[s]<u;){let h=n[s],d=n[s+1],f=Math.max(l,h),p=Math.min(u,d);if(f<=p&&new Js(f+c,p+c,f,p).addToSet(r),d>u)break;s+=2}if(!a)return r;new Js(a.fromA,a.toA,a.fromB,a.toB).addToSet(r),o=a.toA,l=a.toB}}}class Ix{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=cr.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,l,a)=>i.push(new Js(s,o,l,a))),this.changedRanges=i}static create(e,n,r){return new Ix(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class NI extends nn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Qe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Yn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Js(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Nae(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Aae(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new Js(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Be.ie||Be.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=Eae(o,l,e.changes);return r=Js.extendWithRanges(r,a),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Be.chrome||Be.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ta&&o.widget instanceof aS&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let l=o>=0?i[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:h}=l,d,f,p,m;if(r&&r.range.fromB<h&&r.range.toB>u){let S=Fg.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),_=Fg.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);f=S.breakAtStart,p=S.openStart,m=_.openEnd;let C=this.compositionView(r);_.breakAtStart?C.breakAfter=1:_.content.length&&C.merge(C.length,C.length,_.content[0],!1,_.openStart,0)&&(C.breakAfter=_.content[0].breakAfter,_.content.shift()),S.content.length&&C.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),d=S.content.concat(C).concat(_.content)}else({content:d,breakAtStart:f,openStart:p,openEnd:m}=Fg.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap));let{i:y,off:g}=s.findPos(c,1),{i:v,off:w}=s.findPos(a,-1);SH(this,v,w,y,g,d,f,p,m)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(qH)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Bo(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new za(i,[n],n.length);let r=new Yn;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=nn.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(va)||this.dom.tabIndex>-1)&&xw(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Be.gecko&&l.empty&&!this.hasComposition&&_ae(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=c=new Xr(h,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!$g(a.node,a.offset,u.anchorNode,u.anchorOffset)||!$g(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Be.android&&Be.chrome&&this.dom.contains(u.focusNode)&&Oae(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=z1(this.view.root);if(h)if(l.empty){if(Be.gecko){let d=Tae(a.node,a.offset);if(d&&d!=3){let f=(d==1?xH:bH)(a.node,a.offset);f&&(a=new Xr(f.node,f.offset))}}h.collapse(a.node,a.offset),l.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=l.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),d.setEnd(c.node,c.offset),d.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new Xr(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Xr(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&$g(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=z1(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=Yn.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=nn.get(n.childNodes[i]);s instanceof Yn&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=nn.get(n.childNodes[i]);s instanceof Yn&&(r=s.domAtPos(s.length))}return r?new Xr(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=nn.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Yn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!r||l instanceof Yn&&!(r instanceof Yn&&n>=0)))r=l,i=c;else if(r&&c==e&&a==e&&l instanceof Ta&&Math.abs(n)<2){if(l.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Yn))return null;for(;i.children.length;){let{i:l,off:a}=i.childPos(r,1);for(;;l++){if(l==i.children.length)return null;if((i=i.children[l]).length)break}r=a}if(!(i instanceof Bo))return null;let s=Br(i.text,r);if(s==r)return null;let o=td(i.dom,r,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==xn.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],d=c+h.length;if(d>i)break;if(c>=r){let f=h.dom.getBoundingClientRect();if(n.push(f.height),o){let p=h.dom.lastChild,m=p?j1(p):[];if(m.length){let y=m[m.length-1],g=a?y.right-f.left:f.right-y.left;g>l&&(l=g,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?xn.RTL:xn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Yn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=j1(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new kH(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let l=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Qe.replace({widget:new aS(l),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Qe.set(e)}updateDeco(){let e=1,n=this.view.state.facet(H1).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(GH).map((s,o)=>{let l=typeof s=="function";return l&&(r=!0),l?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(Rt.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(WH))try{if(c(this.view,e.range,e))return!0}catch(u){ji(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Y_(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;iae(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==xn.LTR)}}function _ae(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function YH(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=xH(n.focusNode,n.focusOffset),i=bH(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let l=nn.get(i.node);if(!l||l instanceof Bo&&l.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let a=nn.get(r.node);!a||a instanceof Bo&&a.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function Aae(t,e,n){let r=YH(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,l=i.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(r.from,r.to)!=l)return null;let a=e.invertedDesc,c=new Js(a.mapPos(s),a.mapPos(o),s,o),u=[];for(let h=i.parentNode;;h=h.parentNode){let d=nn.get(h);if(d instanceof za)u.push({node:h,deco:d.mark});else{if(d instanceof Yn||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:h};if(h!=t.contentDOM)u.push({node:h,deco:new Ny({inclusive:!0,attributes:fae(h),tagName:h.tagName.toLowerCase()})});else return null}}}function Tae(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Mae=class{constructor(){this.changes=[]}compareRange(e,n){bw(e,n,this.changes)}comparePoint(e,n){bw(e,n,this.changes)}boundChange(e){bw(e,e,this.changes)}};function Eae(t,e,n){let r=new Mae;return Rt.compare(t,e,n,r),r.changes}function Oae(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Nae(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function Iae(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return oe.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,l=s;n<0?o=Br(i.text,s,!1):l=Br(i.text,s);let a=r(i.text.slice(o,l));for(;o>0;){let c=Br(i.text,o,!1);if(r(i.text.slice(c,o))!=a)break;o=c}for(;l<i.length;){let c=Br(i.text,l);if(r(i.text.slice(l,c))!=a)break;l=c}return oe.range(o+i.from,l+i.from)}function Pae(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Rae(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ak(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function II(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function PI(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function fS(t,e,n){let r,i,s,o,l=!1,a,c,u,h;for(let p=t.firstChild;p;p=p.nextSibling){let m=j1(p);for(let y=0;y<m.length;y++){let g=m[y];i&&Ak(i,g)&&(g=II(PI(g,i.bottom),i.top));let v=Pae(e,g),w=Rae(n,g);if(v==0&&w==0)return p.nodeType==3?RI(p,e,n):fS(p,e,n);if(!r||o>w||o==w&&s>v){r=p,i=g,s=v,o=w;let S=w?n<g.top?-1:1:v?e<g.left?-1:1:0;l=!S||(S>0?y<m.length-1:y>0)}v==0?n>g.bottom&&(!u||u.bottom<g.bottom)?(a=p,u=g):n<g.top&&(!h||h.top>g.top)&&(c=p,h=g):u&&Ak(u,g)?u=PI(u,g.bottom):h&&Ak(h,g)&&(h=II(h,g.top))}}if(u&&u.bottom>=n?(r=a,i=u):h&&h.top<=n&&(r=c,i=h),!r)return{node:t,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return RI(r,d,n);if(l&&r.contentEditable!="false")return fS(r,d,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:f}}function RI(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let l=0;l<r;l++){let a=td(t,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let d=e>=(u.left+u.right)/2,f=d;if((Be.chrome||Be.gecko)&&td(t,l).getBoundingClientRect().left==u.right&&(f=!d),h<=0)return{node:t,offset:l+(f?1:0)};i=l+(f?1:0),s=h}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function XH(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:c}=t.viewState,{x:u,y:h}=e,d=h-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,_=!1;a=t.elementAtHeight(d),a.type!=xi.Text;)for(;d=r>0?a.bottom+S:a.top-S,!(d>=0&&d<=c);){if(_)return n?null:0;_=!0,r=-r}h=l+d;let f=a.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:DI(t,o,a,u,h);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:DI(t,o,a,u,h);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,y=m.elementFromPoint(u,h);y&&!t.contentDOM.contains(y)&&(y=null),y||(u=Math.max(o.left+1,Math.min(o.right-1,u)),y=m.elementFromPoint(u,h),y&&!t.contentDOM.contains(y)&&(y=null));let g,v=-1;if(y&&((i=t.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let S=p.caretPositionFromPoint(u,h);S&&({offsetNode:g,offset:v}=S)}else if(p.caretRangeFromPoint){let S=p.caretRangeFromPoint(u,h);S&&({startContainer:g,startOffset:v}=S,(!t.contentDOM.contains(g)||Be.safari&&Dae(g,v,u)||Be.chrome&&Lae(g,v,u))&&(g=void 0))}g&&(v=Math.min(Rl(g),v))}if(!g||!t.docView.dom.contains(g)){let S=Yn.find(t.docView,f);if(!S)return d>a.top+a.height/2?a.to:a.from;({node:g,offset:v}=fS(S.dom,u,h))}let w=t.docView.nearest(g);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=w.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(g,v)+w.posAtStart}function DI(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((i-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+Z8(o,s,t.state.tabSize)}function Dae(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return td(t,r-1,r).getBoundingClientRect().left>n}function Lae(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():td(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function pS(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==xi.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function Bae(t,e,n,r){let i=pS(t,e.head,e.assoc||-1),s=!r||i.type!=xi.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(i.from),a=t.posAtCoords({x:n==(l==xn.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return oe.cursor(a,n?-1:1)}return oe.cursor(n?i.to:i.from,n?-1:1)}function LI(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let l=e,a=null;;){let c=kae(i,s,o,l,n),u=DH;if(!c){if(i.number==(n?t.state.doc.lines:1))return l;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(a){if(!a(u))return l}else{if(!r)return c;a=r(u)}l=c}}function $ae(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==Cn.Space&&(i=o),i==o}}function Fae(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return oe.cursor(i,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-a.left),l=s<0?c.top:c.bottom;else{let f=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(i-f.from))),l=(s<0?f.top:f.bottom)+u}let h=a.left+o,d=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=l+(d+f)*s,m=XH(t,{x:h,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?m<i:m>i)){let y=t.docView.coordsForChar(m),g=!y||p<y.top?-1:1;return oe.cursor(m,g,void 0,o)}}}function kw(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=r||n||(e-s<o-e?-1:1);e=a<0?s:o,r=a}});if(!r)return e}}function Tk(t,e,n){let r=kw(t.state.facet(J_).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:oe.cursor(r,r<n.from?1:-1)}const hm="";class zae{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(_n.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=hm}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let l=nn.get(i),a=nn.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Ox(i))||Ox(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(l=i.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=nn.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(jae(e,r.node,r.offset)?n:0))}}function jae(t,e,n){for(;;){if(!e||n<Rl(e))return!1;if(e==t)return!0;n=ed(e)+1,e=e.parentNode}}class BI{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Hae{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let l=s||o?[]:qae(e),a=new zae(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Uae(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!nS(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!nS(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Be.ios||Be.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(a,c),d=Math.max(a,c),f=u.from-h,p=u.to-d;(f==0||f==1||h==0)&&(p==0||p==-1||d==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=oe.single(c,a)}}}function QH(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=i.from,c=null;(s===8||Be.android&&e.text.length<l-o)&&(a=i.to,c="end");let u=Wae(t.state.doc.sliceString(o,l,hm),e.text,a-o,c);u&&(Be.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==hm+hm&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:$t.of(e.text.slice(u.from,u.toB).split(hm))})}else r&&(!t.hasFocus&&t.state.facet(va)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Be.mac||Be.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=oe.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:$t.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:Be.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=oe.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:$t.of([" "])}),n)return X_(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:l}),!0}else return!1}function X_(t,e,n,r=-1){if(Be.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Be.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Gf(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Gf(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Gf(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=Vae(t,e,n));return t.state.facet(zH).some(a=>a(t,e.from,e.to,s,l))||t.dispatch(l()),!0}function Vae(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",a=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+a))}else{let l=i.changes(e),a=n&&n.main.to<=l.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,h=n&&YH(t,n.main.head);if(h){let p=e.insert.length-(e.to-e.from);u={from:h.from,to:h.to-p}}else u=t.state.doc.lineAt(s.head);let d=s.to-e.to,f=s.to-s.from;r=i.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:a||p.map(l)};let m=p.to-d,y=m-c.length;if(p.to-p.from!=f||t.state.sliceDoc(y,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let g=i.changes({from:y,to:m,insert:e.insert}),v=p.to-s.to;return{changes:g,range:a?oe.range(Math.max(0,a.anchor+v),Math.max(0,a.head+v)):p.map(g)}})}else r={changes:l,selection:a&&i.selection.replaceRange(a)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Wae(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(r=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function qae(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new BI(n,r)),(i!=n||s!=r)&&e.push(new BI(i,s))),e}function Uae(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?oe.single(n+e,r+e):null}let Gae=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Be.safari&&e.contentDOM.addEventListener("input",()=>null),Be.gecko&&cce(e.contentDOM.ownerDocument)}handleEvent(e){!tce(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Kae(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,l=r[s];l&&o!=!l.handlers.length&&(i.removeEventListener(s,this.handleEvent),l=null),l||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&eV.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Be.android&&Be.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Be.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=ZH.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Jae.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Gf(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Be.safari&&!Be.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function $I(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){ji(n.state,i)}}}function Kae(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let l in s){let a=s[l];a&&n(l).handlers.push($I(r.value,a))}if(o)for(let l in o){let a=o[l];a&&n(l).observers.push($I(r.value,a))}}for(let r in $o)n(r).handlers.push($o[r]);for(let r in eo)n(r).observers.push(eo[r]);return e}const ZH=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Jae="dthko",eV=[16,17,18,20,91,92,224,225],e2=6;function t2(t){return Math.max(0,t)*.7+8}function Yae(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Xae{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=sae(e.contentDOM),this.atoms=e.state.facet(J_).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(_n.allowMultipleSelections)&&Qae(e,n),this.dragging=ece(e,n)&&rV(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Yae(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Y_(this.view);e.clientX-a.left<=i+e2?n=-t2(i-e.clientX):e.clientX+a.right>=o-e2&&(n=t2(e.clientX-o)),e.clientY-a.top<=s+e2?r=-t2(s-e.clientY):e.clientY+a.bottom>=l-e2&&(r=t2(e.clientY-l)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=kw(this.atoms,i.from,0);o!=i.from&&(s=oe.cursor(o,-1))}else{let o=kw(this.atoms,i.from,-1),l=kw(this.atoms,i.to,1);(o!=i.from||l!=i.to)&&(s=oe.range(i.from==i.anchor?o:l,i.from==i.head?o:l))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?oe.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Qae(t,e){let n=t.state.facet(LH);return n.length?n[0](e):Be.mac?e.metaKey:e.ctrlKey}function Zae(t,e){let n=t.state.facet(BH);return n.length?n[0](e):Be.mac?!e.altKey:!e.ctrlKey}function ece(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=z1(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function tce(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=nn.get(n))&&r.ignoreEvent(e))return!1;return!0}const $o=Object.create(null),eo=Object.create(null),tV=Be.ie&&Be.ie_version<15||Be.ios&&Be.webkit_version<604;function nce(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),nV(t,n.value)},50)}function c5(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function nV(t,e){e=c5(t.state,U_,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(mS!=null&&n.selection.ranges.every(a=>a.empty)&&mS==s.toString()){let a=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let h=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:h},range:oe.cursor(c.from+h.length)}})}else o?r=n.changeByRange(a=>{let c=s.line(i++);return{changes:{from:a.from,to:a.to,insert:c.text},range:oe.cursor(a.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}eo.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};$o.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);eo.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};eo.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};$o.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet($H))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=sce(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new Xae(t,e,n,r)),r&&t.observer.ignore(()=>{yH(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function FI(t,e,n,r){if(r==1)return oe.cursor(e,n);if(r==2)return Iae(t.state,e,n);{let i=Yn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,l=i?i.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,oe.range(o,l)}}let zI=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function rce(t,e,n,r){let i=Yn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&zI(n,r,o))return-1;let l=i.coordsAt(s,1);return l&&zI(n,r,l)?1:o&&o.bottom>=r?-1:1}function jI(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:rce(t,n,e.clientX,e.clientY)}}const ice=Be.ie&&Be.ie_version<=11;let HI=null,VI=0,WI=0;function rV(t){if(!ice)return t.detail;let e=HI,n=WI;return HI=t,WI=Date.now(),VI=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(VI+1)%3:1}function sce(t,e){let n=jI(t,e),r=rV(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,l){let a=jI(t,s),c,u=FI(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!o){let h=FI(t,n.pos,n.bias,r),d=Math.min(h.from,u.from),f=Math.max(h.to,u.to);u=d<u.from?oe.range(d,f):oe.range(f,d)}return o?i.replaceRange(i.main.extend(u.from,u.to)):l&&r==1&&i.ranges.length>1&&(c=oce(i,a.pos))?c:l?i.addRange(u):oe.create([u])}}}function oce(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return oe.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}$o.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=oe.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",c5(t.state,G_,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};$o.dragend=t=>(t.inputState.draggedContent=null,!1);function qI(t,e,n,r){if(n=c5(t.state,U_,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&Zae(t,e)?{from:s.from,to:s.to}:null,l={from:i,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}$o.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&qI(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(r[o]=l.result),s()},l.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return qI(t,e,r,!0),!0}return!1};$o.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=tV?null:e.clipboardData;return n?(nV(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(nce(t),!1)};function lce(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function ace(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:c5(t,G_,e.join(t.lineBreak)),ranges:n,linewise:r}}let mS=null;$o.copy=$o.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=ace(t.state);if(!n&&!i)return!1;mS=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=tV?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(lce(t,n),!1)};const iV=Ya.define();function sV(t,e){let n=[];for(let r of t.facet(jH)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:iV.of(!0)}):null}function oV(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=sV(t.state,e);n?t.dispatch(n):t.update([])}},10)}eo.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),oV(t)};eo.blur=t=>{t.observer.clearSelectionRange(),oV(t)};eo.compositionstart=eo.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};eo.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Be.chrome&&Be.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};eo.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};$o.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),c=t.posAtDOM(l.endContainer,l.endOffset);return X_(t,{from:a,to:c,insert:t.state.toText(s)},null),!0}}let i;if(Be.chrome&&Be.android&&(i=ZH.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Be.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Be.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>eo.compositionend(t,e),20),!1};const UI=new Set;function cce(t){UI.has(t)||(UI.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const GI=["pre-wrap","normal","pre-line","break-spaces"];let T0=!1;function KI(){T0=!1}class uce{constructor(e){this.lineWrapping=e,this.doc=$t.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return GI.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let l=GI.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,a){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class hce{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class xl{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?xi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof yu?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new xl(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var vn=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(vn||(vn={}));const Sw=.001;class bi{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Sw&&(T0=!0),this.height=e)}replace(e,n,r){return bi.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let l=i.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:h}=i[l],d=s.lineAt(a,vn.ByPosNoHeight,r.setDoc(n),0,0),f=d.to>=c?d:s.lineAt(c,vn.ByPosNoHeight,r,0,0);for(h+=f.to-c,c=f.to;l>0&&d.from<=i[l-1].toA;)a=i[l-1].fromA,u=i[l-1].fromB,l--,a<d.from&&(d=s.lineAt(a,vn.ByPosNoHeight,r,0,0));u+=d.from-a,a=d.from;let p=Q_.build(r.setDoc(o),e,u,h);s=Px(s,s.replace(a,c,p))}return s.updateHeight(r,0)}static empty(){return new ps(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),r+=1+l.break,i-=l.size}else if(s>i*2){let l=e[r];l.break?e.splice(r,1,l.left,null,l.right):e.splice(r,1,l.left,l.right),r+=2+l.break,s-=l.size}else break;else if(i<s){let l=e[n++];l&&(i+=l.size)}else{let l=e[--r];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new dce(bi.of(e.slice(0,n)),o,bi.of(e.slice(r)))}}function Px(t,e){return t==e?t:(t.constructor!=e.constructor&&(T0=!0),e)}bi.prototype.size=1;class lV extends bi{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new xl(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ps extends lV{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new xl(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof ps||i instanceof Nr&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Nr?i=new ps(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):bi.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Nr extends bi{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:l}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),h=l+u.length*a,d=Math.max(r,e-h/2);return new xl(u.from,u.length,d,h,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/l))),{from:u,length:h}=n.doc.line(s+c);return new xl(u,h,r+l*c,l,0)}}lineAt(e,n,r,i,s){if(n==vn.ByHeight)return this.blockAt(e,r,i,s);if(n==vn.ByPosNoHeight){let{from:f,to:p}=r.doc.lineAt(e);return new xl(f,p-f,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=l+c.length*a,h=c.number-o,d=i+l*h+a*(c.from-s-h);return new xl(c.from,c.length,Math.max(i,Math.min(d,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(r,s);for(let u=e,h=i;u<=n;){let d=r.doc.lineAt(u);if(u==e){let p=d.number-l;h+=a*p+c*(e-s-p)}let f=a+c*d.length;o(new xl(d.from,d.length,h,f,0)),h+=f,u=d.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Nr?r[r.length-1]=new Nr(s.length+i):r.push(null,new Nr(i-1))}if(e>0){let s=r[0];s instanceof Nr?r[0]=new Nr(e+s.length):r.unshift(new Nr(e-1),null)}return bi.of(r)}decomposeLeft(e,n){n.push(new Nr(e-1),null)}decomposeRight(e,n){n.push(null,new Nr(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],l=Math.max(n,i.from),a=-1;for(i.from>n&&o.push(new Nr(i.from-n-1).updateHeight(e,n));l<=s&&i.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let h=i.heights[i.index++];a==-1?a=h:Math.abs(h-a)>=Sw&&(a=-2);let d=new ps(u,h);d.outdated=!1,o.push(d),l+=u+1}l<=s&&o.push(null,new Nr(s-l).updateHeight(e,l));let c=bi.of(o);return(a<0||Math.abs(c.height-this.height)>=Sw||Math.abs(a-this.heightMetrics(e,n).perLine)>=Sw)&&(T0=!0),Px(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class dce extends bi{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,l=s+this.left.length+this.break,a=n==vn.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=n==vn.ByPosNoHeight?vn.ByPosNoHeight:vn.ByPos;return a?c.join(this.right.lineAt(l,u,r,o,l)):this.left.lineAt(l,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let l=i+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,r,i,s,o),n>=a&&this.right.forEachLine(e,n,r,l,a,o);else{let c=this.lineAt(a,vn.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,l,a,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of r)s.push(l);if(e>0&&JI(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),JI(s,l)}return bi.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?bi.of(this.break?[e,null,n]:[e,n]):(this.left=Px(this.left,e),this.right=Px(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return i&&i.from<=n+s.length&&i.more?a=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=l+o.length&&i.more?a=o=o.updateHeight(e,l,r,i):o.updateHeight(e,l,r),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function JI(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Nr&&(r=t[e+1])instanceof Nr&&t.splice(e-1,3,new Nr(n.length+1+r.length))}const fce=5;class Q_{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof ps?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new ps(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new lV(o,i,r)):(o||s||i>=fce)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ps(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Nr(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ps)return e;let n=new ps(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof ps)&&!this.isCovered?this.nodes.push(new ps(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof ps&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Q_(r,e);return Rt.spans(n,r,i,s,0),s.finish(r)}}function pce(t,e,n){let r=new mce;return Rt.compare(t,e,n,r,0),r.changes}class mce{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&bw(e,n,this.changes,5)}}function gce(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let d=u.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),l=Math.max(l,d.top),a=Math.min(c==t.parentNode?i.innerHeight:a,d.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function yce(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function vce(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Mk{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Qe.replace({widget:new wce(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class wce extends Xa{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class YI{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=XI,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=xn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(K_).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new uce(n),this.stateDeco=e.facet(H1).filter(r=>typeof r!="function"),this.heightMap=bi.empty().applyChanges(this.stateDeco,$t.empty,this.heightOracle.setDoc(e.doc),[new Js(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qe.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new n2(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?XI:new Z_(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(dm(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(H1).filter(u=>typeof u!="function");let i=e.changedRanges,s=Js.extendWithRanges(i,pce(r,this.stateDeco,e?e.changes:cr.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);KI(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||T0)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(VH)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?xn.RTL:xn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:S,scaleY:_}=gH(n,l);(S>.005&&Math.abs(this.scaleX-S)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=S,this.scaleY=_,c|=16,o=a=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=wH(e.scrollDOM);let p=(this.printing?vce:gce)(n,this.paddingTop),m=p.top-this.pixelViewport.top,y=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget&&!yce(e.dom))return 0;let v=l.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:_,charWidth:C,textHeight:T}=e.docView.measureTextSize();o=_>0&&i.refresh(s,_,C,T,v/C,S),o&&(e.docView.minWidth=0,c|=16)}m>0&&y>0?u=Math.max(m,y):m<0&&y<0&&(u=Math.min(m,y)),KI();for(let _ of this.viewports){let C=_.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?bi.empty().applyChanges(this.stateDeco,$t.empty,this.heightOracle,[new Js(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new hce(_.from,C))}T0&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new n2(i.lineAt(o-r*1e3,vn.ByHeight,s,0,0).from,i.lineAt(l+(1-r)*1e3,vn.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,vn.ByPos,s,0,0),d;n.y=="center"?d=(h.top+h.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<a.from?d=h.top:d=h.bottom-u,a=new n2(i.lineAt(d-1e3/2,vn.ByHeight,s,0,0).from,i.lineAt(d+u+1e3/2,vn.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new n2(this.heightMap.lineAt(r,vn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,vn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,vn.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,vn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new Mk(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=xn.LTR&&!r)return[];let l=[],a=(u,h,d,f)=>{if(h-u<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let g of m)if(g>u&&g<h){a(u,g-10,d,f),a(g+10,h,d,f);return}let y=bce(e,g=>g.from>=d.from&&g.to<=d.to&&Math.abs(g.from-u)<s&&Math.abs(g.to-h)<s&&!m.some(v=>g.from<v&&g.to>v));if(!y){if(h<d.to&&n&&r&&n.visibleRanges.some(w=>w.from<=h&&w.to>=h)){let w=n.moveToLineBoundary(oe.cursor(h),!1,!0).head;w>u&&(h=w)}let g=this.gapSize(d,u,h,f),v=r||g<2e6?g:2e6;y=new Mk(u,h,g,v)}l.push(y)},c=u=>{if(u.length<o||u.type!=xi.Text)return;let h=xce(u.from,u.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,p;if(r){let m=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,g;if(d!=null){let v=i2(h,d),w=((this.visibleBottom-this.visibleTop)/2+m)/u.height;y=v-w,g=v+w}else y=(this.visibleTop-u.top-m)/u.height,g=(this.visibleBottom-u.top+m)/u.height;f=r2(h,y),p=r2(h,g)}else{let m=h.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,g=0;if(m>2e6)for(let C of e)C.from>=u.from&&C.from<u.to&&C.size!=C.displaySize&&C.from*this.heightOracle.charWidth+g<this.pixelViewport.left&&(g=C.size-C.displaySize);let v=this.pixelViewport.left+g,w=this.pixelViewport.right+g,S,_;if(d!=null){let C=i2(h,d),T=((w-v)/2+y)/m;S=C-T,_=C+T}else S=(v-y)/m,_=(w+y)/m;f=r2(h,S),p=r2(h,_)}f>u.from&&a(u.from,f,u,h),p<u.to&&a(p,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return l}gapSize(e,n,r,i){let s=i2(i,r)-i2(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Mk.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Qe.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Rt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],l=r[s];(o.from!=l.from||o.to!=l.to)&&(i|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||dm(this.heightMap.lineAt(e,vn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||dm(this.heightMap.lineAt(this.scaler.fromDOM(e),vn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return dm(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class n2{constructor(e,n){this.from=e,this.to=n}}function xce(t,e,n){let r=[],i=t,s=0;return Rt.spans(n,t,e,{span(){},point(o,l){o>i&&(r.push({from:i,to:o}),s+=o-i),i=l}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function r2({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],l=o-s;if(r<=l)return s+r;r-=l}}function i2(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function bce(t,e){for(let n of t)if(e(n))return n}const XI={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Z_{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:l,to:a})=>{let c=n.lineAt(l,vn.ByPos,e,0,0).top,u=n.lineAt(a,vn.ByPos,e,0,0).bottom;return i+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof Z_?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function dm(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new xl(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>dm(i,e)):t._content)}const s2=Re.define({combine:t=>t.join(" ")}),gS=Re.define({combine:t=>t.indexOf(!0)>-1}),yS=gu.newName(),aV=gu.newName(),cV=gu.newName(),uV={"&light":"."+aV,"&dark":"."+cV};function vS(t,e,n){return new gu(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const kce=vS("."+yS,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},uV),Sce={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ek=Be.ie&&Be.ie_version<=11;let Cce=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new oae,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Be.ie&&Be.ie_version<=11||Be.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Be.chrome&&Be.chrome_version<126)&&(this.editContext=new Ace(e),e.state.facet(va)&&(e.contentDOM.editContext=this.editContext.editContext)),Ek&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(va)?r.root.activeElement!=this.dom:!xw(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Be.ie&&Be.ie_version<=11||Be.android&&Be.chrome)&&!r.state.selection.main.empty&&i.focusNode&&$g(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=z1(e.root);if(!n)return!1;let r=Be.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&_ce(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=xw(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&aae(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Sce),Ek&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ek&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Gf(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&xw(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Hae(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=QH(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=QI(n,e.previousSibling||e.target.previousSibling,-1),i=QI(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(va)!=e.state.facet(va)&&(e.view.contentDOM.editContext=e.state.facet(va)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function QI(t,e,n){for(;e;){let r=nn.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function ZI(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return $g(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function _ce(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ZI(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?ZI(t,n):null}class Ace{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,l=this.toEditorPos(r.updateRangeStart),a=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:l,drifted:!1});let c={from:l,to:a,insert:$t.of(r.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=oe.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));u.main.eq(i)||e.dispatch({selection:u,userEvent:"select"});return}if((Be.mac||Be.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:l,to:a,insert:$t.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);X_(e,c,oe.single(this.toEditorPos(r.selectionStart,u),this.toEditorPos(r.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),l=this.toEditorPos(r.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(a<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;i.push(Qe.mark({attributes:{style:u}}).range(a,c))}}}e.dispatch({effects:qH.of(Qe.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=z1(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,c)=>{if(r)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,n+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}let $e=class wS{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||lae(e.parent)||document,this.viewState=new YI(e.state||_n.create(e)),e.scrollTo&&e.scrollTo.is(Zv)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Df).map(i=>new _k(i));for(let i of this.plugins)i.update(this);this.observer=new Cce(this),this.inputState=new Gae(this),this.inputState.ensureHandlers(this.plugins),this.docView=new NI(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof wi?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(d=>d.annotation(iV))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=sV(s,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(_n.phrases)!=this.state.facet(_n.phrases))return this.setState(s);i=Ix.create(this,s,e),i.flags|=l;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;h=new Kf(f.empty?f:oe.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(Zv)&&(h=f.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=Rx.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(um)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(s2)!=i.state.facet(s2)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(dS))try{d(i)}catch(f){ji(this.state,f,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!QH(this,u)&&c.force&&Gf(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new YI(e),this.plugins=e.facet(Df).map(r=>new _k(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new NI(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Df),r=e.state.facet(Df);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new _k(s));else{let l=this.plugins[o];l.mustUpdate=e,i.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){ji(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(wH(r))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);s=f.from,o=f.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(p){return ji(this.state,p),eP}}),h=Ix.create(this,this.state,[]),d=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=eP)try{let p=c[f];p.write&&p.write(u[f],this)}catch(p){ji(this.state,p)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=i+p,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(dS))l(n)}get themeClasses(){return yS+" "+(this.state.facet(gS)?cV:aV)+" "+this.state.facet(s2)}updateAttrs(){let e=tP(this,UH,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(va)?"true":"false",class:"cm-content",style:`${Be.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),tP(this,K_,n);let r=this.observer.ignore(()=>{let i=lS(this.contentDOM,this.contentAttrs,n),s=lS(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(wS.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(um);let e=this.state.facet(wS.cspNonce);gu.mount(this.root,this.styleModules.concat(kce).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Tk(this,e,LI(this,e,n,r))}moveByGroup(e,n){return Tk(this,e,LI(this,e,n,r=>$ae(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return oe.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return Bae(this,e,n,r)}moveVertically(e,n,r){return Tk(this,e,Fae(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),XH(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[qc.find(s,e-i.from,-1,n)];return l5(r,o.dir==xn.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(HH)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Tce)return RH(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||PH(s.isolates,r=OI(this,e))))return s.order;r||(r=OI(this,e));let i=bae(e.text,n,r);return this.bidiCache.push(new Rx(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Be.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{yH(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Zv.of(new Kf(typeof e=="number"?oe.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Zv.of(new Kf(oe.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return tr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return tr.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=gu.newName(),i=[s2.of(r),um.of(vS(`.${r}`,e))];return n&&n.dark&&i.push(gS.of(!0)),i}static baseTheme(e){return Nu.lowest(um.of(vS("."+yS,e,uV)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&nn.get(r)||nn.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}};$e.styleModule=um;$e.inputHandler=zH;$e.clipboardInputFilter=U_;$e.clipboardOutputFilter=G_;$e.scrollHandler=WH;$e.focusChangeEffect=jH;$e.perLineTextDirection=HH;$e.exceptionSink=FH;$e.updateListener=dS;$e.editable=va;$e.mouseSelectionStyle=$H;$e.dragMovesSelection=BH;$e.clickAddsSelectionRange=LH;$e.decorations=H1;$e.outerDecorations=GH;$e.atomicRanges=J_;$e.bidiIsolatedRanges=KH;$e.scrollMargins=JH;$e.darkTheme=gS;$e.cspNonce=Re.define({combine:t=>t.length?t[0]:""});$e.contentAttributes=K_;$e.editorAttributes=UH;$e.lineWrapping=$e.contentAttributes.of({class:"cm-lineWrapping"});$e.announce=ft.define();const Tce=4096,eP={};class Rx{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:xn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new Rx(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function tP(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&oS(o,n)}return n}const Mce=Be.mac?"mac":Be.windows?"win":Be.linux?"linux":"key";function Ece(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,l;for(let a=0;a<n.length-1;++a){const c=n[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),l&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function o2(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Oce=Nu.default($e.domEventHandlers({keydown(t,e){return dV(hV(e.state),t,e,"editor")}})),Q0=Re.define({enables:Oce}),nP=new WeakMap;function hV(t){let e=t.facet(Q0),n=nP.get(e);return n||nP.set(e,n=Pce(e.reduce((r,i)=>r.concat(i),[]))),n}function Nce(t,e,n){return dV(hV(t.state),e,t,n)}let Bc=null;const Ice=4e3;function Pce(t,e=Mce){let n=Object.create(null),r=Object.create(null),i=(o,l)=>{let a=r[o];if(a==null)r[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,c,u)=>{var h,d;let f=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(g=>Ece(g,e));for(let g=1;g<p.length;g++){let v=p.slice(0,g).join(" ");i(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[w=>{let S=Bc={view:w,prefix:v,scope:o};return setTimeout(()=>{Bc==S&&(Bc=null)},Ice),!0}]})}let m=p.join(" ");i(m,!1);let y=f[m]||(f[m]={preventDefault:!1,stopPropagation:!1,run:((d=(h=f._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});a&&y.run.push(a),c&&(y.preventDefault=!0),u&&(y.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in u)u[d].run.push(f=>h(f,xS))}let a=o[e]||o.key;if(a)for(let c of l)s(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}let xS=null;function dV(t,e,n,r){xS=e;let i=pH(e),s=Bi(i,0),o=wl(s)==i.length&&i!=" ",l="",a=!1,c=!1,u=!1;Bc&&Bc.view==n&&Bc.scope==r&&(l=Bc.prefix+" ",eV.indexOf(e.keyCode)<0&&(c=!0,Bc=null));let h=new Set,d=y=>{if(y){for(let g of y.run)if(!h.has(g)&&(h.add(g),g(n)))return y.stopPropagation&&(u=!0),!0;y.preventDefault&&(y.stopPropagation&&(u=!0),c=!0)}return!1},f=t[r],p,m;return f&&(d(f[l+o2(i,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Be.windows&&e.ctrlKey&&e.altKey)&&(p=Fa[e.keyCode])&&p!=i?(d(f[l+o2(p,e,!0)])||e.shiftKey&&(m=F1[e.keyCode])!=i&&m!=p&&d(f[l+o2(m,e,!1)]))&&(a=!0):o&&e.shiftKey&&d(f[l+o2(i,e,!0)])&&(a=!0),!a&&d(f._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),xS=null,a}class Py{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=fV(e);return[new Py(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Rce(e,n,r)}}function fV(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==xn.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function rP(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,l=t.posAtCoords({x:s.left+1,y:o}),a=t.posAtCoords({x:s.right-1,y:o});return l==null||a==null?r:{from:Math.max(r.from,Math.min(l,a)),to:Math.min(r.to,Math.max(l,a))}}function Rce(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==xn.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=fV(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=l.right-(u?parseInt(u.paddingRight):0),f=pS(t,r,1),p=pS(t,i,-1),m=f.type==xi.Text?f:null,y=p.type==xi.Text?p:null;if(m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=rP(t,r,1,m)),y&&(t.lineWrapping||p.widgetLineBreaks)&&(y=rP(t,i,-1,y)),m&&y&&m.from==y.from&&m.to==y.to)return v(w(n.from,n.to,m));{let _=m?w(n.from,null,m):S(f,!1),C=y?w(null,n.to,y):S(p,!0),T=[];return(m||f).to<(y||p).from-(m&&y?1:0)||f.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<C.top?T.push(g(h,_.bottom,d,C.top)):_.bottom<C.top&&t.elementAtHeight((_.bottom+C.top)/2).type==xi.Text&&(_.bottom=C.top=(_.bottom+C.top)/2),v(_).concat(T).concat(v(C))}function g(_,C,T,I){return new Py(e,_-a.left,C-a.top,T-_,I-C)}function v({top:_,bottom:C,horizontal:T}){let I=[];for(let L=0;L<T.length;L+=2)I.push(g(T[L],_,T[L+1],C));return I}function w(_,C,T){let I=1e9,L=-1e9,N=[];function $(Z,Y,pe,de,W){let z=t.coordsAtPos(Z,Z==T.to?-2:2),O=t.coordsAtPos(pe,pe==T.from?2:-2);!z||!O||(I=Math.min(z.top,O.top,I),L=Math.max(z.bottom,O.bottom,L),W==xn.LTR?N.push(s&&Y?h:z.left,s&&de?d:O.right):N.push(!s&&de?h:O.left,!s&&Y?d:z.right))}let F=_??T.from,ie=C??T.to;for(let Z of t.visibleRanges)if(Z.to>F&&Z.from<ie)for(let Y=Math.max(Z.from,F),pe=Math.min(Z.to,ie);;){let de=t.state.doc.lineAt(Y);for(let W of t.bidiSpans(de)){let z=W.from+de.from,O=W.to+de.from;if(z>=pe)break;O>Y&&$(Math.max(z,Y),_==null&&z<=F,Math.min(O,pe),C==null&&O>=ie,W.dir)}if(Y=de.to+1,Y>=pe)break}return N.length==0&&$(F,_==null,ie,C==null,t.textDirection),{top:I,bottom:L,horizontal:N}}function S(_,C){let T=l.top+(C?_.top:_.bottom);return{top:T,bottom:T,horizontal:[]}}}function Dce(t,e){return t.constructor==e.constructor&&t.eq(e)}class Lce{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Cw)!=e.state.facet(Cw)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(Cw);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!Dce(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Cw=Re.define();function pV(t){return[tr.define(e=>new Lce(e,t)),Cw.of(t)]}const V1=Re.define({combine(t){return jl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Bce(t={}){return[V1.of(t),$ce,Fce,zce,VH.of(!0)]}function mV(t){return t.startState.facet(V1)!=t.state.facet(V1)}const $ce=pV({above:!0,markers(t){let{state:e}=t,n=e.facet(V1),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=i.empty?i:oe.cursor(i.head,i.head>i.anchor?-1:1);for(let a of Py.forRange(t,o,l))r.push(a)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=mV(t);return n&&iP(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){iP(e.state,t)},class:"cm-cursorLayer"});function iP(t,e){e.style.animationDuration=t.facet(V1).cursorBlinkRate+"ms"}const Fce=pV({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Py.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||mV(t)},class:"cm-selectionLayer"}),zce=Nu.highest($e.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),gV=ft.define({map(t,e){return t==null?null:e.mapPos(t)}}),fm=Cr.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(gV)?r.value:n,t)}}),jce=tr.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(fm);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(fm)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(fm),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(fm)!=t&&this.view.dispatch({effects:gV.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Hce(){return[fm,jce]}function sP(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)i(o+l.index,l)}function Vce(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class Wce{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(l,a,c,u)=>i(u,c,c+l[0].length,l,a);else if(typeof r=="function")this.addMatch=(l,a,c,u)=>{let h=r(l,a,c);h&&u(c,c+l[0].length,h)};else if(r)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new $a,r=n.add.bind(n);for(let{from:i,to:s}of Vce(e,this.maxLength))sP(e.state.doc,this.regexp,i,s,(o,l)=>this.addMatch(l,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(r=Math.min(l,r),i=Math.max(a,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),l=Math.min(s.to,i);if(l>=o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(s.from,a.from),h=Math.min(s.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){h=l;break}}let d=[],f,p=(m,y,g)=>d.push(g.range(m,y));if(a==c)for(this.regexp.lastIndex=u-a.from;(f=this.regexp.exec(a.text))&&f.index<h-a.from;)this.addMatch(f,e,f.index+a.from,p);else sP(e.state.doc,this.regexp,u,h,(m,y)=>this.addMatch(y,e,m,p));n=n.update({filterFrom:u,filterTo:h,filter:(m,y)=>m<u||y>h,add:d})}}return n}}const bS=/x/.unicode!=null?"gu":"g",qce=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,bS),Uce={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ok=null;function Gce(){var t;if(Ok==null&&typeof document<"u"&&document.body){let e=document.body.style;Ok=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Ok||!1}const _w=Re.define({combine(t){let e=jl(t,{render:null,specialChars:qce,addSpecialChars:null});return(e.replaceTabs=!Gce())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,bS)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,bS)),e}});function Kce(t={}){return[_w.of(t),Jce()]}let oP=null;function Jce(){return oP||(oP=tr.fromClass(class{constructor(t){this.view=t,this.decorations=Qe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(_w)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Wce({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=Bi(e[0],0);if(s==9){let o=i.lineAt(r),l=n.state.tabSize,a=X0(o.text,l,r-o.from);return Qe.replace({widget:new Zce((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Qe.replace({widget:new Qce(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(_w);t.startState.facet(_w)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Yce="";function Xce(t){return t>=32?Yce:t==10?"":String.fromCharCode(9216+t)}class Qce extends Xa{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Xce(this.code),r=e.state.phrase("Control character")+" "+(Uce[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Zce extends Xa{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function eue(){return nue}const tue=Qe.line({class:"cm-activeLine"}),nue=tr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(tue.range(i.from)),e=i.from)}return Qe.set(n)}},{decorations:t=>t.decorations}),kS=2e3;function rue(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>kS||n.off>kS||e.col<0||n.col<0){let o=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=r;a<=i;a++){let c=t.doc.line(a);c.length<=l&&s.push(oe.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=r;a<=i;a++){let c=t.doc.line(a),u=Z8(c.text,o,t.tabSize,!0);if(u<0)s.push(oe.cursor(c.to));else{let h=Z8(c.text,l,t.tabSize);s.push(oe.range(c.from+u,c.from+h))}}}return s}function iue(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function lP(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>kS?-1:i==r.length?iue(t,e.clientX):X0(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function sue(t,e){let n=lP(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let l=lP(t,i);if(!l)return r;let a=rue(t.state,n,l);return a.length?o?oe.create(a.concat(r.ranges)):oe.create(a):r}}:null}function oue(t){let e=n=>n.altKey&&n.button==0;return $e.mouseSelectionStyle.of((n,r)=>e(r)?sue(n,r):null)}const lue={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},aue={style:"cursor: crosshair"};function cue(t={}){let[e,n]=lue[t.key||"Alt"],r=tr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,$e.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?aue:null})]}const Hp="-10000px";class yV{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(a=>a);if(i===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=n?[]:null;for(let a=0;a<s.length;a++){let c=s[a],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==c.create&&(u=h)}if(u<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let h=o[a]=this.tooltipViews[u];l&&(l[a]=n[u]),h.update&&h.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(r=a.destroy)===null||r===void 0||r.call(a));return n&&(l.forEach((a,c)=>n[c]=a),n.length=l.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function uue(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Nk=Re.define({combine:t=>{var e,n,r;return{position:Be.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||uue}}}),aP=new WeakMap,eA=tr.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Nk);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new yV(t,tA,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Nk);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=Hp,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Be.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Hp&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=Y_(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Nk).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,h=t.pos[l],d=t.size[l];if(!h||a.clip!==!1&&(h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1)){u.style.top=Hp;continue}let f=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,m=d.right-d.left,y=(e=aP.get(c))!==null&&e!==void 0?e:d.bottom-d.top,g=c.offset||due,v=this.view.textDirection==xn.LTR,w=d.width>r.right-r.left?v?r.left:r.right-d.width:v?Math.max(r.left,Math.min(h.left-(f?14:0)+g.x,r.right-m)):Math.min(Math.max(r.left,h.left-m+(f?14:0)-g.x),r.right-m),S=this.above[l];!a.strictSide&&(S?h.top-y-p-g.y<r.top:h.bottom+y+p+g.y>r.bottom)&&S==r.bottom-h.bottom>h.top-r.top&&(S=this.above[l]=!S);let _=(S?h.top-r.top:r.bottom-h.bottom)-p;if(_<y&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=Hp;continue}aP.set(c,y),u.style.height=(y=_)/s+"px"}else u.style.height&&(u.style.height="");let C=S?h.top-y-p-g.y:h.bottom+p+g.y,T=w+m;if(c.overlap!==!0)for(let I of o)I.left<T&&I.right>w&&I.top<C+y&&I.bottom>C&&(C=S?I.top-y-2-p:I.bottom+p+2);if(this.position=="absolute"?(u.style.top=(C-t.parent.top)/s+"px",cP(u,(w-t.parent.left)/i)):(u.style.top=C/s+"px",cP(u,w/i)),f){let I=h.left+(v?g.x:-g.x)-(w+14-7);f.style.left=I/i+"px"}c.overlap!==!0&&o.push({left:w,top:C,right:T,bottom:C+y}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Hp}},{eventObservers:{scroll(){this.maybeMeasure()}}});function cP(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const hue=$e.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),due={x:0,y:0},tA=Re.define({enables:[eA,hue]}),Dx=Re.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class u5{static create(e){return new u5(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new yV(e,Dx,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const fue=tA.compute([Dx],t=>{let e=t.facet(Dx);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:u5.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class pue{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof Wc)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let l=e.coordsAtPos(i);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=a&&a.dir==xn.RTL?-1:1;s=n.x<l.left?-c:c}let o=this.source(e,i,s);if(o!=null&&o.then){let l=this.pending={pos:i};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>ji(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(eA),n=e?e.manager.tooltips.findIndex(r=>r.create==u5.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!mue(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,l=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!gue(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const l2=4;function mue(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();i=Math.min(l.top,i),s=Math.max(l.bottom,s)}return e.clientX>=n-l2&&e.clientX<=r+l2&&e.clientY>=i-l2&&e.clientY<=s+l2}function gue(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,l)<i)return!1;let a=t.posAtCoords({x:r,y:i},!1);return a>=e&&a<=n}function yue(t,e={}){let n=ft.define(),r=Cr.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of i){let a=s.changes.mapPos(l.pos,-1,Lr.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(vue)&&(i=[]);return i},provide:i=>Dx.from(i)});return{active:r,extension:[r,tr.define(i=>new pue(i,t,r,n,e.hoverTime||300)),fue]}}function vV(t,e){let n=t.plugin(eA);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const vue=ft.define(),uP=Re.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function W1(t,e){let n=t.plugin(wV),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const wV=tr.fromClass(class{constructor(t){this.input=t.state.facet(q1),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(uP);this.top=new a2(t,!0,e.topContainer),this.bottom=new a2(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(uP);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new a2(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new a2(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(q1);if(n!=this.input){let r=n.filter(a=>a),i=[],s=[],o=[],l=[];for(let a of r){let c=this.specs.indexOf(a),u;c<0?(u=a(t.view),l.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>$e.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class a2{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=hP(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=hP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function hP(t){let e=t.nextSibling;return t.remove(),e}const q1=Re.define({enables:wV});class ja extends Zh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ja.prototype.elementClass="";ja.prototype.toDOM=void 0;ja.prototype.mapMode=Lr.TrackBefore;ja.prototype.startSide=ja.prototype.endSide=-1;ja.prototype.point=!0;const Aw=Re.define(),wue=Re.define(),xue={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Rt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},zg=Re.define();function bue(t){return[xV(),zg.of({...xue,...t})]}const dP=Re.define({combine:t=>t.some(e=>e)});function xV(t){return[kue]}const kue=tr.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(zg).map(e=>new pP(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(dP),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(dP)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Rt.iter(this.view.state.facet(Aw),this.view.viewport.from),r=[],i=this.gutters.map(s=>new Sue(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==xi.Text&&o){SS(n,r,l.from);for(let a of i)a.line(this.view,l,r);o=!1}else if(l.widget)for(let a of i)a.widget(this.view,l)}else if(s.type==xi.Text){SS(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(zg),n=t.state.facet(zg),r=t.docChanged||t.heightChanged||t.viewportChanged||!Rt.eq(t.startState.facet(Aw),t.state.facet(Aw),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new pP(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>$e.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==xn.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function fP(t){return Array.isArray(t)?t:[t]}function SS(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Sue{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Rt.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let l=new bV(e,o,s,r);i.elements.push(l),i.dom.appendChild(l.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];SS(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(wue)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class pP{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=i.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,l,i)&&i.preventDefault()});this.markers=fP(n.markers(e)),n.initialSpacer&&(this.spacer=new bV(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=fP(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Rt.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class bV{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Cue(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,c=!1;if(a){let u=a.elementClass;u&&(r+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(a)){l=h,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!a)break;a.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(a.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function Cue(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const _ue=Re.define(),Aue=Re.define(),Lf=Re.define({combine(t){return jl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(l,a,c)=>s(l,a,c)||o(l,a,c):o}return r}})}});class Ik extends ja{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Pk(t,e){return t.state.facet(Lf).formatNumber(e,t.state)}const Tue=zg.compute([Lf],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(_ue)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new Ik(Pk(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(Aue)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Lf)!=e.state.facet(Lf),initialSpacer(e){return new Ik(Pk(e,mP(e.state.doc.lines)))},updateSpacer(e,n){let r=Pk(n.view,mP(n.view.state.doc.lines));return r==e.number?e:new Ik(r)},domEventHandlers:t.facet(Lf).domEventHandlers}));function Mue(t={}){return[Lf.of(t),xV(),Tue]}function mP(t){let e=9;for(;e<t;)e=e*10+9;return e}const Eue=new class extends ja{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Oue=Aw.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(Eue.range(i)))}return Rt.of(e)});function Nue(){return Oue}let Iue=0;class $s{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=Iue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof $s&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let i=new $s(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new Lx(e);return r=>r.modified.indexOf(n)>-1?r:Lx.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let Pue=0;class Lx{constructor(e){this.name=e,this.instances=[],this.id=Pue++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(l=>l.base==e&&Rue(n,l.modified));if(r)return r;let i=[],s=new $s(e.name,i,e,n);for(let l of n)l.instances.push(s);let o=Due(n);for(let l of e.set)if(!l.modified.length)for(let a of o)i.push(Lx.get(l,a));return s}}function Rue(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function Due(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function Lue(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,l=i;for(let h=0;;){if(l=="..."&&h>0&&h+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let f=i[h++];if(h==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);l=i.slice(h)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+i);let u=new Bx(r,o,a>0?s.slice(0,a):null);e[c]=u.sort(e[c])}}return kV.add(e)}const kV=new Ct;class Bx{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Bx.empty=new Bx([],2,null);function SV(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let l of s)for(let a of l.set){let c=n[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function Bue(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function $ue(t,e,n,r=0,i=t.length){let s=new Fue(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class Fue{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:l,to:a}=e;if(l>=r||a<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=i,u=zue(e)||Bx.empty,h=Bue(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,l),c),u.opaque)return;let d=e.tree&&e.tree.prop(Ct.mounted);if(d&&d.overlay){let f=e.node.enter(d.overlay[0].from+l,1),p=this.highlighters.filter(y=>!y.scope||y.scope(d.tree.type)),m=e.firstChild();for(let y=0,g=l;;y++){let v=y<d.overlay.length?d.overlay[y]:null,w=v?v.from+l:a,S=Math.max(n,g),_=Math.min(r,w);if(S<_&&m)for(;e.from<_&&(this.highlightRange(e,S,_,i,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!v||w>r)break;g=v.to+l,g>n&&(this.highlightRange(f.cursor(),Math.max(n,v.from+l),Math.min(r,g),"",p),this.startSpan(Math.min(r,g),c))}m&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function zue(t){let e=t.type.prop(kV);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Me=$s.define,c2=Me(),Tc=Me(),gP=Me(Tc),yP=Me(Tc),Mc=Me(),u2=Me(Mc),Rk=Me(Mc),il=Me(),Uu=Me(il),Yo=Me(),Xo=Me(),CS=Me(),Vp=Me(CS),h2=Me(),te={comment:c2,lineComment:Me(c2),blockComment:Me(c2),docComment:Me(c2),name:Tc,variableName:Me(Tc),typeName:gP,tagName:Me(gP),propertyName:yP,attributeName:Me(yP),className:Me(Tc),labelName:Me(Tc),namespace:Me(Tc),macroName:Me(Tc),literal:Mc,string:u2,docString:Me(u2),character:Me(u2),attributeValue:Me(u2),number:Rk,integer:Me(Rk),float:Me(Rk),bool:Me(Mc),regexp:Me(Mc),escape:Me(Mc),color:Me(Mc),url:Me(Mc),keyword:Yo,self:Me(Yo),null:Me(Yo),atom:Me(Yo),unit:Me(Yo),modifier:Me(Yo),operatorKeyword:Me(Yo),controlKeyword:Me(Yo),definitionKeyword:Me(Yo),moduleKeyword:Me(Yo),operator:Xo,derefOperator:Me(Xo),arithmeticOperator:Me(Xo),logicOperator:Me(Xo),bitwiseOperator:Me(Xo),compareOperator:Me(Xo),updateOperator:Me(Xo),definitionOperator:Me(Xo),typeOperator:Me(Xo),controlOperator:Me(Xo),punctuation:CS,separator:Me(CS),bracket:Vp,angleBracket:Me(Vp),squareBracket:Me(Vp),paren:Me(Vp),brace:Me(Vp),content:il,heading:Uu,heading1:Me(Uu),heading2:Me(Uu),heading3:Me(Uu),heading4:Me(Uu),heading5:Me(Uu),heading6:Me(Uu),contentSeparator:Me(il),list:Me(il),quote:Me(il),emphasis:Me(il),strong:Me(il),link:Me(il),monospace:Me(il),strikethrough:Me(il),inserted:Me(),deleted:Me(),changed:Me(),invalid:Me(),meta:h2,documentMeta:Me(h2),annotation:Me(h2),processingInstruction:Me(h2),definition:$s.defineModifier("definition"),constant:$s.defineModifier("constant"),function:$s.defineModifier("function"),standard:$s.defineModifier("standard"),local:$s.defineModifier("local"),special:$s.defineModifier("special")};for(let t in te){let e=te[t];e instanceof $s&&(e.name=t)}SV([{tag:te.link,class:"tok-link"},{tag:te.heading,class:"tok-heading"},{tag:te.emphasis,class:"tok-emphasis"},{tag:te.strong,class:"tok-strong"},{tag:te.keyword,class:"tok-keyword"},{tag:te.atom,class:"tok-atom"},{tag:te.bool,class:"tok-bool"},{tag:te.url,class:"tok-url"},{tag:te.labelName,class:"tok-labelName"},{tag:te.inserted,class:"tok-inserted"},{tag:te.deleted,class:"tok-deleted"},{tag:te.literal,class:"tok-literal"},{tag:te.string,class:"tok-string"},{tag:te.number,class:"tok-number"},{tag:[te.regexp,te.escape,te.special(te.string)],class:"tok-string2"},{tag:te.variableName,class:"tok-variableName"},{tag:te.local(te.variableName),class:"tok-variableName tok-local"},{tag:te.definition(te.variableName),class:"tok-variableName tok-definition"},{tag:te.special(te.variableName),class:"tok-variableName2"},{tag:te.definition(te.propertyName),class:"tok-propertyName tok-definition"},{tag:te.typeName,class:"tok-typeName"},{tag:te.namespace,class:"tok-namespace"},{tag:te.className,class:"tok-className"},{tag:te.macroName,class:"tok-macroName"},{tag:te.propertyName,class:"tok-propertyName"},{tag:te.operator,class:"tok-operator"},{tag:te.comment,class:"tok-comment"},{tag:te.meta,class:"tok-meta"},{tag:te.invalid,class:"tok-invalid"},{tag:te.punctuation,class:"tok-punctuation"}]);var Dk;const _h=new Ct;function CV(t){return Re.define({combine:t?e=>e.concat(t):void 0})}const jue=new Ct;class Vs{constructor(e,n,r=[],i=""){this.data=e,this.name=i,_n.prototype.hasOwnProperty("tree")||Object.defineProperty(_n.prototype,"tree",{get(){return zr(this)}}),this.parser=n,this.extension=[vu.of(this),_n.languageData.of((s,o,l)=>{let a=vP(s,o,l),c=a.type.prop(_h);if(!c)return[];let u=s.facet(c),h=a.type.prop(jue);if(h){let d=a.resolve(o-a.from,l);for(let f of h)if(f.test(d,s)){let p=s.facet(f.facet);return f.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return vP(e,n,r).type.prop(_h)==this.data}findRegions(e){let n=e.facet(vu);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(_h)==this.data){r.push({from:o,to:o+s.length});return}let l=s.prop(Ct.mounted);if(l){if(l.tree.prop(_h)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+o,to:a.to+o});else r.push({from:o,to:o+s.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+o),r.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof fn&&i(c,s.positions[a]+o)}};return i(zr(e),0),r}get allowsNesting(){return!0}}Vs.setState=ft.define();function vP(t,e,n){let r=t.facet(vu),i=zr(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Pn.ExcludeBuffers))s.type.isTop&&(i=s);return i}class _S extends Vs{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=CV(e.languageData);return new _S(n,e.parser.configure({props:[_h.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new _S(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function zr(t){let e=t.field(Vs.state,!1);return e?e.tree:fn.empty}class Hue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Wp=null,AS=class TS{constructor(e,n,r=[],i,s,o,l,a){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new TS(e,n,[],fn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Hue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=fn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Aa.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Aa.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Wp;Wp=this;try{return e()}finally{Wp=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=wP(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,h,d)=>a.push({fromA:c,toA:u,fromB:h,toB:d})),r=Aa.applyChanges(r,a),i=fn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&l.push({from:u,to:h})}}}return new TS(this.parser,n,r,i,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=wP(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Gj{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let a=Wp;if(a){for(let c of i)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new fn(As.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Wp}};function wP(t,e,n){return Aa.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class M0{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new M0(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=AS.create(e.facet(vu).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new M0(r)}}Vs.state=Cr.define({create:M0.init,update(t,e){for(let n of e.effects)if(n.is(Vs.setState))return n.value;return e.startState.facet(vu)!=e.state.facet(vu)?M0.init(e.state):t.apply(e)}});let _V=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(_V=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Lk=typeof navigator<"u"&&(!((Dk=navigator.scheduling)===null||Dk===void 0)&&Dk.isInputPending)?()=>navigator.scheduling.isInputPending():null,Vue=tr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Vs.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Vs.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=_V(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(Vs.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Lk?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<i&&r.doc.length>i+1e3,a=s.context.work(()=>Lk&&Lk()||Date.now()>o,i+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Vs.setState.of(new M0(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>ji(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),vu=Re.define({combine(t){return t.length?t[0]:null},enables:t=>[Vs.state,Vue,$e.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Wue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class K{constructor(e,n,r,i,s,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new K(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(s=>s==n))return i;if(r)for(let i of e)for(let s of i.alias){let o=n.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+s.length])))return i}return null}}const que=Re.define(),h5=Re.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function rd(t){let e=t.facet(h5);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function U1(t,e){let n="",r=t.tabSize,i=t.facet(h5)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function nA(t,e){t instanceof _n&&(t=new d5(t));for(let r of t.state.facet(que)){let i=r(t,e);if(i!==void 0)return i}let n=zr(t.state);return n.length>=e?Uue(t,n,e):null}class d5{constructor(e,n={}){this.state=e,this.options=n,this.unit=rd(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return X0(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const AV=new Ct;function Uue(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return TV(r,t,n)}function TV(t,e,n){for(let r=t;r;r=r.next){let i=Kue(r.node);if(i)return i(rA.create(e,n,r))}return 0}function Gue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Kue(t){let e=t.type.prop(AV);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Ct.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>MV(o,!0,1,void 0,s&&!Gue(o)?i.from:void 0)}return t.parent==null?Jue:null}function Jue(){return 0}class rA extends d5{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new rA(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Yue(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return TV(this.context.next,this.base,this.pos)}}function Yue(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Xue(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}l=a.to}}function MTe({closing:t,align:e=!0,units:n=1}){return r=>MV(r,e,n,t)}function MV(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=r&&s.slice(o,o+r.length)==r||i==t.pos+o,a=e?Xue(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const ETe=t=>t.baseIndent;function OTe({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const Que=200;function Zue(){return _n.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+Que)return t;let s=n.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let h=nA(o,u.from);if(h==null)continue;let d=/^\s*/.exec(u.text)[0],f=U1(o,h);d!=f&&a.push({from:u.from,to:u.from+d.length,insert:f})}return a.length?[t,{changes:a,sequential:!0}]:t})}const ehe=Re.define(),the=new Ct;function NTe(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function nhe(t,e,n){let r=zr(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let l=o.node;if(l.to<=n||l.from>n)continue;if(s&&l.from<e)break;let a=l.type.prop(the);if(a&&(l.to<r.length-50||r.length==t.doc.length||!rhe(l))){let c=a(l,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function rhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function $x(t,e,n){for(let r of t.facet(ehe)){let i=r(t,e,n);if(i)return i}return nhe(t,e,n)}function EV(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const f5=ft.define({map:EV}),Ry=ft.define({map:EV});function OV(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const id=Cr.define({create(){return Qe.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(f5)&&!ihe(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(PV),i=r?Qe.replace({widget:new hhe(r(e.state,n.value))}):xP;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Ry)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>$e.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(xP.range(r,i))}return Qe.set(e,!0)}});function Fx(t,e,n){var r;let i=null;return(r=t.field(id,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function ihe(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function NV(t,e){return t.field(id,!1)?e:e.concat(ft.appendConfig.of(RV()))}const she=t=>{for(let e of OV(t)){let n=$x(t.state,e.from,e.to);if(n)return t.dispatch({effects:NV(t.state,[f5.of(n),IV(t,n)])}),!0}return!1},ohe=t=>{if(!t.state.field(id,!1))return!1;let e=[];for(let n of OV(t)){let r=Fx(t.state,n.from,n.to);r&&e.push(Ry.of(r),IV(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function IV(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return $e.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const lhe=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=$x(e,i.from,i.to);s&&n.push(f5.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:NV(t.state,n)}),!!n.length},ahe=t=>{let e=t.state.field(id,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Ry.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},che=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:she},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ohe},{key:"Ctrl-Alt-[",run:lhe},{key:"Ctrl-Alt-]",run:ahe}],uhe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},PV=Re.define({combine(t){return jl(t,uhe)}});function RV(t){return[id,phe]}function DV(t,e){let{state:n}=t,r=n.facet(PV),i=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=Fx(t.state,l.from,l.to);a&&t.dispatch({effects:Ry.of(a)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const xP=Qe.replace({widget:new class extends Xa{toDOM(t){return DV(t,null)}}});class hhe extends Xa{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return DV(e,this.value)}}const dhe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Bk extends ja{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function fhe(t={}){let e={...dhe,...t},n=new Bk(e,!0),r=new Bk(e,!1),i=tr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(vu)!=o.state.facet(vu)||o.startState.field(id,!1)!=o.state.field(id,!1)||zr(o.startState)!=zr(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new $a;for(let a of o.viewportLineBlocks){let c=Fx(o.state,a.from,a.to)?r:$x(o.state,a.from,a.to)?n:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:s}=e;return[i,bue({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(i))===null||l===void 0?void 0:l.markers)||Rt.empty},initialSpacer(){return new Bk(e,!1)},domEventHandlers:{...s,click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let c=Fx(o.state,l.from,l.to);if(c)return o.dispatch({effects:Ry.of(c)}),!0;let u=$x(o.state,l.from,l.to);return u?(o.dispatch({effects:f5.of(u)}),!0):!1}}}),RV()]}const phe=$e.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Dy{constructor(e,n){this.specs=e;let r;function i(l){let a=gu.newName();return(r||(r=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof Vs?l=>l.prop(_h)==o.data:o?l=>l==o:void 0,this.style=SV(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=r?new gu(r):null,this.themeType=n.themeType}static define(e,n){return new Dy(e,n||{})}}const MS=Re.define(),LV=Re.define({combine(t){return t.length?[t[0]]:null}});function $k(t){let e=t.facet(MS);return e.length?e:t.facet(LV)}function BV(t,e){let n=[ghe],r;return t instanceof Dy&&(t.module&&n.push($e.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(LV.of(t)):r?n.push(MS.computeN([$e.darkTheme],i=>i.facet($e.darkTheme)==(r=="dark")?[t]:[])):n.push(MS.of(t)),n}class mhe{constructor(e){this.markCache=Object.create(null),this.tree=zr(e.state),this.decorations=this.buildDeco(e,$k(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=zr(e.state),r=$k(e.state),i=r!=$k(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Qe.none;let r=new $a;for(let{from:i,to:s}of e.visibleRanges)$ue(this.tree,n,(o,l,a)=>{r.add(o,l,this.markCache[a]||(this.markCache[a]=Qe.mark({class:a})))},i,s);return r.finish()}}const ghe=Nu.high(tr.fromClass(mhe,{decorations:t=>t.decorations})),yhe=Dy.define([{tag:te.meta,color:"#404740"},{tag:te.link,textDecoration:"underline"},{tag:te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strong,fontWeight:"bold"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.keyword,color:"#708"},{tag:[te.atom,te.bool,te.url,te.contentSeparator,te.labelName],color:"#219"},{tag:[te.literal,te.inserted],color:"#164"},{tag:[te.string,te.deleted],color:"#a11"},{tag:[te.regexp,te.escape,te.special(te.string)],color:"#e40"},{tag:te.definition(te.variableName),color:"#00f"},{tag:te.local(te.variableName),color:"#30a"},{tag:[te.typeName,te.namespace],color:"#085"},{tag:te.className,color:"#167"},{tag:[te.special(te.variableName),te.macroName],color:"#256"},{tag:te.definition(te.propertyName),color:"#00c"},{tag:te.comment,color:"#940"},{tag:te.invalid,color:"#f00"}]),vhe=$e.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),$V=1e4,FV="()[]{}",zV=Re.define({combine(t){return jl(t,{afterCursor:!0,brackets:FV,maxScanDistance:$V,renderMatch:bhe})}}),whe=Qe.mark({class:"cm-matchingBracket"}),xhe=Qe.mark({class:"cm-nonmatchingBracket"});function bhe(t){let e=[],n=t.matched?whe:xhe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const khe=Cr.define({create(){return Qe.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(zV);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Sl(e.state,i.head,-1,r)||i.head>0&&Sl(e.state,i.head-1,1,r)||r.afterCursor&&(Sl(e.state,i.head,1,r)||i.head<e.state.doc.length&&Sl(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Qe.set(n,!0)},provide:t=>$e.decorations.from(t)}),She=[khe,vhe];function Che(t={}){return[zV.of(t),She]}const _he=new Ct;function ES(t,e,n){let r=t.prop(e<0?Ct.openedBy:Ct.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function OS(t){let e=t.type.prop(_he);return e?e(t.node):t}function Sl(t,e,n,r={}){let i=r.maxScanDistance||$V,s=r.brackets||FV,o=zr(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let c=ES(a.type,n,s);if(c&&a.from<a.to){let u=OS(a);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Ahe(t,e,n,a,u,c,s)}}return The(t,e,n,o,l.type,i,s)}function Ahe(t,e,n,r,i,s,o){let l=r.parent,a={from:i.from,to:i.to},c=0,u=l==null?void 0:l.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let h=OS(u);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(ES(u.type,n,o))c++;else if(ES(u.type,-n,o)){if(c==0){let h=OS(u);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function The(t,e,n,r,i,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=s;){let f=u.value;n<0&&(d+=f.length);let p=e+d*n;for(let m=n>0?0:f.length-1,y=n>0?f.length:-1;m!=y;m+=n){let g=o.indexOf(f[m]);if(!(g<0||r.resolveInner(p+m,1).type!=i))if(g%2==0==n>0)h++;else{if(h==1)return{start:c,end:{from:p+m,to:p+m+1},matched:g>>1==a>>1};h--}}n>0&&(d+=f.length)}return u.done?{start:c,matched:!1}:null}function bP(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=i;for(let o=r;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class jV{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=bP(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:bP(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=o=>r?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return i(s)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function Mhe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Ehe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||oA,mergeTokens:t.mergeTokens!==!1}}function Ehe(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const kP=new WeakMap;class iA extends Vs{constructor(e){let n=CV(e.languageData),r=Mhe(e),i,s=new class extends Gj{createParse(o,l,a){return new Nhe(i,o,l,a)}};super(n,s,[],e.name),this.topNode=Rhe(n,this),i=this,this.streamParser=r,this.stateAfter=new Ct({perNode:!0}),this.tokenTable=e.tokenTable?new qV(r.tokenTable):Phe}static define(e){return new iA(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=kP.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=sA(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(i?(o=i.state,s=i.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let a=e.state.doc.lineAt(s),c=Math.min(e.pos,a.to);if(a.length){let u=r?r(a.from):-1,h=new jV(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;h.pos<c-a.from;)VV(this.streamParser.token,h,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=a.to+1}let l=e.lineAt(e.pos);return r&&n==null&&kP.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function sA(t,e,n,r,i){let s=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=n+e.positions[o],c=l instanceof fn&&a<i&&sA(t,l,a,r,i);if(c)return c}return null}function HV(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<r&&l instanceof fn){if(!(a=HV(t,l,n-o,r-o,i)))break;return i?new fn(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function Ohe(t,e,n,r,i){for(let s of e){let o=s.from+(s.openStart?25:0),l=s.to-(s.openEnd?25:0),a=o<=n&&l>n&&sA(t,s.tree,0-s.offset,n,l),c;if(a&&a.pos<=r&&(c=HV(t,s.tree,n+s.offset,a.pos+s.offset,!1)))return{state:a.state,tree:c}}return{state:t.streamParser.startState(i?rd(i):4),tree:fn.empty}}class Nhe{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let s=AS.get(),o=i[0].from,{state:l,tree:a}=Ohe(e,r,o,this.to,s==null?void 0:s.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&i.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(rd(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=AS.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let s=this.ranges[i].to;if(s>=r||(n=n.slice(0,s-(r-n.length)),i++,i==this.ranges.length))break;let o=this.ranges[i].from,l=this.lineAfter(o);n+=l,r=o+l.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,s=e+n;if(r>0?i>s:i>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let s=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let l=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,s+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=r:this.chunk.push(e,n,r,s),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:s}=this.lang,o=new jV(n,e?e.state.tabSize:4,e?rd(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=VV(s.token,o,this.state);if(l&&(i=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=fn.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ihe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new fn(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new fn(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function VV(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const oA=Object.create(null),G1=[As.none],Ihe=new L_(G1),SP=[],CP=Object.create(null),WV=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])WV[t]=UV(oA,e);class qV{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),WV)}resolve(e){return e?this.table[e]||(this.table[e]=UV(this.extra,e)):0}}const Phe=new qV(oA);function Fk(t,e){SP.indexOf(t)>-1||(SP.push(t),console.warn(e))}function UV(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=t[c]||te[c];u?typeof u=="function"?a.length?a=a.map(u):Fk(c,`Modifier ${c} used at start of tag`):a.length?Fk(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:Fk(c,`Unknown highlighting tag ${c}`)}for(let c of a)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(l=>l.id),s=CP[i];if(s)return s.id;let o=CP[i]=As.define({id:G1.length,name:r,props:[Lue({[r]:n})]});return G1.push(o),o.id}function Rhe(t,e){let n=As.define({id:G1.length,name:"Document",props:[_h.add(()=>t),AV.add(()=>r=>e.getIndent(r))],top:!0});return G1.push(n),n}xn.RTL,xn.LTR;function le(t){return new Wue(iA.define(t))}function sc(t){return J(()=>import("./index-BJgMrJwo.js"),__vite__mapDeps([0,1])).then(e=>e.sql({dialect:e[t]}))}const Dhe=[K.of({name:"C",extensions:["c","h","ino"],load(){return J(()=>import("./index-LiBuWs57.js"),__vite__mapDeps([2,1])).then(t=>t.cpp())}}),K.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return J(()=>import("./index-LiBuWs57.js"),__vite__mapDeps([2,1])).then(t=>t.cpp())}}),K.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return sc("Cassandra")}}),K.of({name:"CSS",extensions:["css"],load(){return J(()=>import("./index-w89rgx4U.js"),__vite__mapDeps([3,1])).then(t=>t.css())}}),K.of({name:"Go",extensions:["go"],load(){return J(()=>import("./index-DIQS817y.js"),__vite__mapDeps([4,1])).then(t=>t.go())}}),K.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return J(()=>import("./index-B8LX-azg.js"),__vite__mapDeps([5,1,3,6])).then(t=>t.html())}}),K.of({name:"Java",extensions:["java"],load(){return J(()=>import("./index-B42i7u7Q.js"),__vite__mapDeps([7,1])).then(t=>t.java())}}),K.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return J(()=>import("./index-Dvrh98v1.js"),__vite__mapDeps([6,1])).then(t=>t.javascript())}}),K.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return J(()=>import("./index-CTif6t2_.js"),__vite__mapDeps([8,1])).then(t=>t.json())}}),K.of({name:"JSX",extensions:["jsx"],load(){return J(()=>import("./index-Dvrh98v1.js"),__vite__mapDeps([6,1])).then(t=>t.javascript({jsx:!0}))}}),K.of({name:"LESS",extensions:["less"],load(){return J(()=>import("./index-CFLDM0Lw.js"),__vite__mapDeps([9,3,1])).then(t=>t.less())}}),K.of({name:"Liquid",extensions:["liquid"],load(){return J(()=>import("./index-DQFSKSCW.js"),__vite__mapDeps([10,5,1,3,6])).then(t=>t.liquid())}}),K.of({name:"MariaDB SQL",load(){return sc("MariaSQL")}}),K.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return J(()=>import("./index-xuwkZbcd.js"),__vite__mapDeps([11,5,1,3,6])).then(t=>t.markdown())}}),K.of({name:"MS SQL",load(){return sc("MSSQL")}}),K.of({name:"MySQL",load(){return sc("MySQL")}}),K.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return J(()=>import("./index-ZGgHnaAl.js"),__vite__mapDeps([12,1,5,3,6])).then(t=>t.php())}}),K.of({name:"PLSQL",extensions:["pls"],load(){return sc("PLSQL")}}),K.of({name:"PostgreSQL",load(){return sc("PostgreSQL")}}),K.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return J(()=>import("./index-Dq3XqoNM.js"),__vite__mapDeps([13,1])).then(t=>t.python())}}),K.of({name:"Rust",extensions:["rs"],load(){return J(()=>import("./index-Ba-ywiUv.js"),__vite__mapDeps([14,1])).then(t=>t.rust())}}),K.of({name:"Sass",extensions:["sass"],load(){return J(()=>import("./index-C2uN0b2d.js"),__vite__mapDeps([15,1,3])).then(t=>t.sass({indented:!0}))}}),K.of({name:"SCSS",extensions:["scss"],load(){return J(()=>import("./index-C2uN0b2d.js"),__vite__mapDeps([15,1,3])).then(t=>t.sass())}}),K.of({name:"SQL",extensions:["sql"],load(){return sc("StandardSQL")}}),K.of({name:"SQLite",load(){return sc("SQLite")}}),K.of({name:"TSX",extensions:["tsx"],load(){return J(()=>import("./index-Dvrh98v1.js"),__vite__mapDeps([6,1])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),K.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return J(()=>import("./index-Dvrh98v1.js"),__vite__mapDeps([6,1])).then(t=>t.javascript({typescript:!0}))}}),K.of({name:"WebAssembly",extensions:["wat","wast"],load(){return J(()=>import("./index-DnNFbPGw.js"),__vite__mapDeps([16,1])).then(t=>t.wast())}}),K.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return J(()=>import("./index-B1qBHFx7.js"),__vite__mapDeps([17,1])).then(t=>t.xml())}}),K.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return J(()=>import("./index-BjJOlgmo.js"),__vite__mapDeps([18,1])).then(t=>t.yaml())}}),K.of({name:"APL",extensions:["dyalog","apl"],load(){return J(()=>import("./apl-B4CMkyY2.js"),[]).then(t=>le(t.apl))}}),K.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return J(()=>import("./asciiarmor-Df11BRmG.js"),[]).then(t=>le(t.asciiArmor))}}),K.of({name:"ASN.1",extensions:["asn","asn1"],load(){return J(()=>import("./asn1-CGOzndHr.js"),[]).then(t=>le(t.asn1({})))}}),K.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return J(()=>import("./asterisk-B-8jnY81.js"),[]).then(t=>le(t.asterisk))}}),K.of({name:"Brainfuck",extensions:["b","bf"],load(){return J(()=>import("./brainfuck-C4LP7Hcl.js"),[]).then(t=>le(t.brainfuck))}}),K.of({name:"Cobol",extensions:["cob","cpy"],load(){return J(()=>import("./cobol-XrqhtCFE.js"),[]).then(t=>le(t.cobol))}}),K.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.csharp))}}),K.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return J(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>le(t.clojure))}}),K.of({name:"ClojureScript",extensions:["cljs"],load(){return J(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>le(t.clojure))}}),K.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return J(()=>import("./css-BnMrqG3P.js"),[]).then(t=>le(t.gss))}}),K.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return J(()=>import("./cmake-BQqOBYOt.js"),[]).then(t=>le(t.cmake))}}),K.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return J(()=>import("./coffeescript-S37ZYGWr.js"),[]).then(t=>le(t.coffeeScript))}}),K.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return J(()=>import("./commonlisp-DBKNyK5s.js"),[]).then(t=>le(t.commonLisp))}}),K.of({name:"Cypher",extensions:["cyp","cypher"],load(){return J(()=>import("./cypher-C_CwsFkJ.js"),[]).then(t=>le(t.cypher))}}),K.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return J(()=>import("./python-BuPzkPfP.js"),[]).then(t=>le(t.cython))}}),K.of({name:"Crystal",extensions:["cr"],load(){return J(()=>import("./crystal-SjHAIU92.js"),[]).then(t=>le(t.crystal))}}),K.of({name:"D",extensions:["d"],load(){return J(()=>import("./d-pRatUO7H.js"),[]).then(t=>le(t.d))}}),K.of({name:"Dart",extensions:["dart"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.dart))}}),K.of({name:"diff",extensions:["diff","patch"],load(){return J(()=>import("./diff-DbItnlRl.js"),[]).then(t=>le(t.diff))}}),K.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return J(()=>import("./dockerfile-BU1Ap__c.js"),__vite__mapDeps([19,20])).then(t=>le(t.dockerFile))}}),K.of({name:"DTD",extensions:["dtd"],load(){return J(()=>import("./dtd-DF_7sFjM.js"),[]).then(t=>le(t.dtd))}}),K.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return J(()=>import("./dylan-DwRh75JA.js"),[]).then(t=>le(t.dylan))}}),K.of({name:"EBNF",load(){return J(()=>import("./ebnf-CDyGwa7X.js"),[]).then(t=>le(t.ebnf))}}),K.of({name:"ECL",extensions:["ecl"],load(){return J(()=>import("./ecl-Cabwm37j.js"),[]).then(t=>le(t.ecl))}}),K.of({name:"edn",extensions:["edn"],load(){return J(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>le(t.clojure))}}),K.of({name:"Eiffel",extensions:["e"],load(){return J(()=>import("./eiffel-CnydiIhH.js"),[]).then(t=>le(t.eiffel))}}),K.of({name:"Elm",extensions:["elm"],load(){return J(()=>import("./elm-vLlmbW-K.js"),[]).then(t=>le(t.elm))}}),K.of({name:"Erlang",extensions:["erl"],load(){return J(()=>import("./erlang-BNw1qcRV.js"),[]).then(t=>le(t.erlang))}}),K.of({name:"Esper",load(){return J(()=>import("./sql-C4g8LzGK.js"),[]).then(t=>le(t.esper))}}),K.of({name:"Factor",extensions:["factor"],load(){return J(()=>import("./factor-BPndPnYX.js"),__vite__mapDeps([21,20])).then(t=>le(t.factor))}}),K.of({name:"FCL",load(){return J(()=>import("./fcl-Kvtd6kyn.js"),[]).then(t=>le(t.fcl))}}),K.of({name:"Forth",extensions:["forth","fth","4th"],load(){return J(()=>import("./forth-Ffai-XNe.js"),[]).then(t=>le(t.forth))}}),K.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return J(()=>import("./fortran-DYz_wnZ1.js"),[]).then(t=>le(t.fortran))}}),K.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return J(()=>import("./mllike-C_8OmSiT.js"),[]).then(t=>le(t.fSharp))}}),K.of({name:"Gas",extensions:["s"],load(){return J(()=>import("./gas-Bneqetm1.js"),[]).then(t=>le(t.gas))}}),K.of({name:"Gherkin",extensions:["feature"],load(){return J(()=>import("./gherkin-heZmZLOM.js"),[]).then(t=>le(t.gherkin))}}),K.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return J(()=>import("./groovy-D9Dt4D0W.js"),[]).then(t=>le(t.groovy))}}),K.of({name:"Haskell",extensions:["hs"],load(){return J(()=>import("./haskell-BWDZoCOh.js"),[]).then(t=>le(t.haskell))}}),K.of({name:"Haxe",extensions:["hx"],load(){return J(()=>import("./haxe-pv4rovob.js"),[]).then(t=>le(t.haxe))}}),K.of({name:"HXML",extensions:["hxml"],load(){return J(()=>import("./haxe-pv4rovob.js"),[]).then(t=>le(t.hxml))}}),K.of({name:"HTTP",load(){return J(()=>import("./http-DBlCnlav.js"),[]).then(t=>le(t.http))}}),K.of({name:"IDL",extensions:["pro"],load(){return J(()=>import("./idl-BEugSyMb.js"),[]).then(t=>le(t.idl))}}),K.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return J(()=>import("./javascript-iSgyE4tI.js"),[]).then(t=>le(t.jsonld))}}),K.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load(){return J(()=>import("./jinja2-C4DGRd-O.js"),[]).then(t=>le(t.jinja2))}}),K.of({name:"Julia",extensions:["jl"],load(){return J(()=>import("./julia-DuME0IfC.js"),[]).then(t=>le(t.julia))}}),K.of({name:"Kotlin",extensions:["kt","kts"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.kotlin))}}),K.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return J(()=>import("./livescript-k3uCVVjK.js"),[]).then(t=>le(t.liveScript))}}),K.of({name:"Lua",extensions:["lua"],load(){return J(()=>import("./lua-BgMRiT3U.js"),[]).then(t=>le(t.lua))}}),K.of({name:"mIRC",extensions:["mrc"],load(){return J(()=>import("./mirc-CjQqDB4T.js"),[]).then(t=>le(t.mirc))}}),K.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return J(()=>import("./mathematica-DTrFuWx2.js"),[]).then(t=>le(t.mathematica))}}),K.of({name:"Modelica",extensions:["mo"],load(){return J(()=>import("./modelica-Dc1JOy9r.js"),[]).then(t=>le(t.modelica))}}),K.of({name:"MUMPS",extensions:["mps"],load(){return J(()=>import("./mumps-BT43cFF4.js"),[]).then(t=>le(t.mumps))}}),K.of({name:"Mbox",extensions:["mbox"],load(){return J(()=>import("./mbox-CNhZ1qSd.js"),[]).then(t=>le(t.mbox))}}),K.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return J(()=>import("./nginx-DdIZxoE0.js"),[]).then(t=>le(t.nginx))}}),K.of({name:"NSIS",extensions:["nsh","nsi"],load(){return J(()=>import("./nsis-ClDXqMnM.js"),__vite__mapDeps([22,20])).then(t=>le(t.nsis))}}),K.of({name:"NTriples",extensions:["nt","nq"],load(){return J(()=>import("./ntriples-BfvgReVJ.js"),[]).then(t=>le(t.ntriples))}}),K.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.objectiveC))}}),K.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.objectiveCpp))}}),K.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return J(()=>import("./mllike-C_8OmSiT.js"),[]).then(t=>le(t.oCaml))}}),K.of({name:"Octave",extensions:["m"],load(){return J(()=>import("./octave-Ck1zUtKM.js"),[]).then(t=>le(t.octave))}}),K.of({name:"Oz",extensions:["oz"],load(){return J(()=>import("./oz-BzwKVEFT.js"),[]).then(t=>le(t.oz))}}),K.of({name:"Pascal",extensions:["p","pas"],load(){return J(()=>import("./pascal--L3eBynH.js"),[]).then(t=>le(t.pascal))}}),K.of({name:"Perl",extensions:["pl","pm"],load(){return J(()=>import("./perl-CdXCOZ3F.js"),[]).then(t=>le(t.perl))}}),K.of({name:"Pig",extensions:["pig"],load(){return J(()=>import("./pig-CevX1Tat.js"),[]).then(t=>le(t.pig))}}),K.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return J(()=>import("./powershell-CFHJl5sT.js"),[]).then(t=>le(t.powerShell))}}),K.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return J(()=>import("./properties-C78fOPTZ.js"),[]).then(t=>le(t.properties))}}),K.of({name:"ProtoBuf",extensions:["proto"],load(){return J(()=>import("./protobuf-ChK-085T.js"),[]).then(t=>le(t.protobuf))}}),K.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return J(()=>import("./pug-BmUsPMDj.js"),__vite__mapDeps([23,24])).then(t=>le(t.pug))}}),K.of({name:"Puppet",extensions:["pp"],load(){return J(()=>import("./puppet-DMA9R1ak.js"),[]).then(t=>le(t.puppet))}}),K.of({name:"Q",extensions:["q"],load(){return J(()=>import("./q-ZnEupP5q.js"),[]).then(t=>le(t.q))}}),K.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return J(()=>import("./r-DUYO_cvP.js"),[]).then(t=>le(t.r))}}),K.of({name:"RPM Changes",load(){return J(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>le(t.rpmChanges))}}),K.of({name:"RPM Spec",extensions:["spec"],load(){return J(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>le(t.rpmSpec))}}),K.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return J(()=>import("./ruby-B2Rjki9n.js"),[]).then(t=>le(t.ruby))}}),K.of({name:"SAS",extensions:["sas"],load(){return J(()=>import("./sas-B4kiWyti.js"),[]).then(t=>le(t.sas))}}),K.of({name:"Scala",extensions:["scala"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.scala))}}),K.of({name:"Scheme",extensions:["scm","ss"],load(){return J(()=>import("./scheme-C41bIUwD.js"),[]).then(t=>le(t.scheme))}}),K.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return J(()=>import("./shell-CjFT_Tl9.js"),[]).then(t=>le(t.shell))}}),K.of({name:"Sieve",extensions:["siv","sieve"],load(){return J(()=>import("./sieve-C3Gn_uJK.js"),[]).then(t=>le(t.sieve))}}),K.of({name:"Smalltalk",extensions:["st"],load(){return J(()=>import("./smalltalk-CnHTOXQT.js"),[]).then(t=>le(t.smalltalk))}}),K.of({name:"Solr",load(){return J(()=>import("./solr-DehyRSwq.js"),[]).then(t=>le(t.solr))}}),K.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return J(()=>import("./mllike-C_8OmSiT.js"),[]).then(t=>le(t.sml))}}),K.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return J(()=>import("./sparql-DkYu6x3z.js"),[]).then(t=>le(t.sparql))}}),K.of({name:"Spreadsheet",alias:["excel","formula"],load(){return J(()=>import("./spreadsheet-BCZA_wO0.js"),[]).then(t=>le(t.spreadsheet))}}),K.of({name:"Squirrel",extensions:["nut"],load(){return J(()=>import("./clike-wD8xDpL-.js"),[]).then(t=>le(t.squirrel))}}),K.of({name:"Stylus",extensions:["styl"],load(){return J(()=>import("./stylus-B533Al4x.js"),[]).then(t=>le(t.stylus))}}),K.of({name:"Swift",extensions:["swift"],load(){return J(()=>import("./swift-BzpIVaGY.js"),[]).then(t=>le(t.swift))}}),K.of({name:"sTeX",load(){return J(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>le(t.stex))}}),K.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return J(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>le(t.stex))}}),K.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return J(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>le(t.verilog))}}),K.of({name:"Tcl",extensions:["tcl"],load(){return J(()=>import("./tcl-DVfN8rqt.js"),[]).then(t=>le(t.tcl))}}),K.of({name:"Textile",extensions:["textile"],load(){return J(()=>import("./textile-CnDTJFAw.js"),[]).then(t=>le(t.textile))}}),K.of({name:"TiddlyWiki",load(){return J(()=>import("./tiddlywiki-DO-Gjzrf.js"),[]).then(t=>le(t.tiddlyWiki))}}),K.of({name:"Tiki wiki",load(){return J(()=>import("./tiki-DGYXhP31.js"),[]).then(t=>le(t.tiki))}}),K.of({name:"TOML",extensions:["toml"],load(){return J(()=>import("./toml-BXUEaScT.js"),[]).then(t=>le(t.toml))}}),K.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return J(()=>import("./troff-wAsdV37c.js"),[]).then(t=>le(t.troff))}}),K.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return J(()=>import("./ttcn-CiGrtVSZ.js"),[]).then(t=>le(t.ttcn))}}),K.of({name:"TTCN_CFG",extensions:["cfg"],load(){return J(()=>import("./ttcn-cfg-BIkV9KBc.js"),[]).then(t=>le(t.ttcnCfg))}}),K.of({name:"Turtle",extensions:["ttl"],load(){return J(()=>import("./turtle-B1tBg_DP.js"),[]).then(t=>le(t.turtle))}}),K.of({name:"Web IDL",extensions:["webidl"],load(){return J(()=>import("./webidl-ZXfAyPTL.js"),[]).then(t=>le(t.webIDL))}}),K.of({name:"VB.NET",extensions:["vb"],load(){return J(()=>import("./vb-CmGdzxic.js"),[]).then(t=>le(t.vb))}}),K.of({name:"VBScript",extensions:["vbs"],load(){return J(()=>import("./vbscript-BuJXcnF6.js"),[]).then(t=>le(t.vbScript))}}),K.of({name:"Velocity",extensions:["vtl"],load(){return J(()=>import("./velocity-D8B20fx6.js"),[]).then(t=>le(t.velocity))}}),K.of({name:"Verilog",extensions:["v"],load(){return J(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>le(t.verilog))}}),K.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return J(()=>import("./vhdl-lSbBsy5d.js"),[]).then(t=>le(t.vhdl))}}),K.of({name:"XQuery",extensions:["xy","xquery"],load(){return J(()=>import("./xquery-CQfU5ijd.js"),[]).then(t=>le(t.xQuery))}}),K.of({name:"Yacas",extensions:["ys"],load(){return J(()=>import("./yacas-BJ4BC0dw.js"),[]).then(t=>le(t.yacas))}}),K.of({name:"Z80",extensions:["z80"],load(){return J(()=>import("./z80-Hz9HOZM7.js"),[]).then(t=>le(t.z80))}}),K.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return J(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>le(t.mscgen))}}),K.of({name:"X",extensions:["xu"],load(){return J(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>le(t.xu))}}),K.of({name:"MsGenny",extensions:["msgenny"],load(){return J(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>le(t.msgenny))}}),K.of({name:"Vue",extensions:["vue"],load(){return J(()=>import("./index-DI0ipZim.js"),__vite__mapDeps([25,5,1,3,6])).then(t=>t.vue())}}),K.of({name:"Angular Template",load(){return J(()=>import("./index-B7xSQ30h.js"),__vite__mapDeps([26,5,1,3,6])).then(t=>t.angular())}})],Lhe="#e5c07b",_P="#e06c75",Bhe="#56b6c2",$he="#ffffff",Tw="#abb2bf",NS="#7d8799",Fhe="#61afef",zhe="#98c379",AP="#d19a66",jhe="#c678dd",Hhe="#21252b",TP="#2c313a",MP="#282c34",zk="#353a42",Vhe="#3E4451",EP="#528bff",Whe=$e.theme({"&":{color:Tw,backgroundColor:MP},".cm-content":{caretColor:EP},".cm-cursor, .cm-dropCursor":{borderLeftColor:EP},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Vhe},".cm-panels":{backgroundColor:Hhe,color:Tw},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:MP,color:NS,border:"none"},".cm-activeLineGutter":{backgroundColor:TP},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:zk},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:zk,borderBottomColor:zk},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:TP,color:Tw}}},{dark:!0}),qhe=Dy.define([{tag:te.keyword,color:jhe},{tag:[te.name,te.deleted,te.character,te.propertyName,te.macroName],color:_P},{tag:[te.function(te.variableName),te.labelName],color:Fhe},{tag:[te.color,te.constant(te.name),te.standard(te.name)],color:AP},{tag:[te.definition(te.name),te.separator],color:Tw},{tag:[te.typeName,te.className,te.number,te.changed,te.annotation,te.modifier,te.self,te.namespace],color:Lhe},{tag:[te.operator,te.operatorKeyword,te.url,te.escape,te.regexp,te.link,te.special(te.string)],color:Bhe},{tag:[te.meta,te.comment],color:NS},{tag:te.strong,fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.link,color:NS,textDecoration:"underline"},{tag:te.heading,fontWeight:"bold",color:_P},{tag:[te.atom,te.bool,te.special(te.variableName)],color:AP},{tag:[te.processingInstruction,te.string,te.inserted],color:zhe},{tag:te.invalid,color:$he}]),Uhe=[Whe,BV(qhe)];function Or(t){this.content=t}Or.prototype={constructor:Or,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Or(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Or(n)},addToStart:function(t,e){return new Or([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Or(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Or(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Or.from(t),t.size?new Or(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Or.from(t),t.size?new Or(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Or.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Or.from=function(t){if(t instanceof Or)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Or(e)};function GV(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=GV(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function KV(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=KV(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}let Ce=class ci{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ci(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new ci(r,i)}cutByIndex(e,n){return e==n?ci.empty:e==0&&n==this.content.length?this:new ci(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new ci(i,s)}addToStart(e){return new ci([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ci(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return GV(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return KV(this,e,n,r)}findIndex(e,n=-1){if(e==0)return d2(0,e);if(e==this.size)return d2(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?d2(r+1,o):d2(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ci.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ci(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ci.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ci(n||e,r)}static from(e){if(!e)return ci.empty;if(e instanceof ci)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ci([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Ce.empty=new Ce([],0);const jk={index:0,offset:0};function d2(t,e){return jk.index=t,jk.offset=e,jk}function zx(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!zx(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!zx(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}class bt{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zx(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return bt.none;if(e instanceof bt)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}bt.none=[];class jx extends Error{}let Pe=class Yd{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=YV(this.content,e+this.openStart,n);return r&&new Yd(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Yd(JV(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Yd.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Yd(Ce.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Yd(e,r,i)}};Pe.empty=new Pe(Ce.empty,0,0);function JV(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(JV(s.content,e-i-1,n-i-1)))}function YV(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let l=YV(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function Ghe(t,e,n){if(n.openStart>t.depth)throw new jx("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new jx("Inconsistent open depths");return XV(t,e,n,0)}function XV(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=XV(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Bh(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=Khe(n,t);return Bh(s,ZV(t,o,l,e,r))}else return Bh(s,Hx(t,e,r))}function QV(t,e){if(!e.type.compatibleContent(t.type))throw new jx("Cannot join "+e.type.name+" onto "+t.type.name)}function IS(t,e,n){let r=t.node(n);return QV(r,e.node(n)),r}function Lh(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function jg(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Lh(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Lh(i.child(l),r);e&&e.depth==n&&e.textOffset&&Lh(e.nodeBefore,r)}function Bh(t,e){return t.type.checkContent(e),t.copy(e)}function ZV(t,e,n,r,i){let s=t.depth>i&&IS(t,e,i+1),o=r.depth>i&&IS(n,r,i+1),l=[];return jg(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(QV(s,o),Lh(Bh(s,ZV(t,e,n,r,i+1)),l)):(s&&Lh(Bh(s,Hx(t,e,i+1)),l),jg(e,n,i,l),o&&Lh(Bh(o,Hx(n,r,i+1)),l)),jg(r,null,i,l),new Ce(l)}function Hx(t,e,n){let r=[];if(jg(null,t,n,r),t.depth>n){let i=IS(t,e,n+1);Lh(Bh(i,Hx(t,e,n+1)),r)}return jg(e,null,n,r),new Ce(r)}function Khe(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ce.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class K1{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return bt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new eW(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new K1(n,r,s)}static resolveCached(e,n){let r=OP.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else OP.set(e,r=new Jhe);let i=r.elts[r.i]=K1.resolve(e,n);return r.i=(r.i+1)%Yhe,i}}class Jhe{constructor(){this.elts=[],this.i=0}}const Yhe=12,OP=new WeakMap;class eW{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Xhe=Object.create(null);let Ma=class PS{constructor(e,n,r,i=bt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ce.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&zx(this.attrs,n||e.defaultAttrs||Xhe)&&bt.sameSet(this.marks,r||bt.none)}copy(e=null){return e==this.content?this:new PS(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new PS(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Pe.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new Pe(c,i.depth-o,s.depth-o)}replace(e,n,r){return Ghe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return K1.resolveCached(this,e)}resolveNoCache(e){return K1.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),tW(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ce.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=bt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!bt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ce.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Ma.prototype.text=void 0;let Qhe=class RS extends Ma{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tW(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new RS(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new RS(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function tW(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class sd{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Zhe(e,n);if(r.next==null)return sd.empty;let i=nW(r);r.next&&r.err("Unexpected trailing text");let s=ode(sde(i));return lde(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return Ce.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,l.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}sd.empty=new sd(!0);class Zhe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function nW(t){let e=[];do e.push(ede(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ede(t){let e=[];do e.push(tde(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function tde(t){let e=ide(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=nde(t,e);else break;return e}function NP(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function nde(t,e){let n=NP(t),r=n;return t.eat(",")&&(t.next!="}"?r=NP(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function rde(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function ide(t){if(t.eat("(")){let e=nW(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=rde(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function sde(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function rW(t,e){return e-t}function IP(t,e){let n=[];return r(e),n.sort(rW);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function ode(t){let e=Object.create(null);return n(IP(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);IP(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new sd(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(rW);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function lde(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function iW(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function sW(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function oW(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function lW(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new cde(t,r,e[r]);return n}let Vx=class aW{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=lW(e,r.attrs),this.defaultAttrs=iW(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==sd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:sW(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ma(this,this.computeAttrs(e),Ce.from(n),bt.setFrom(r))}createChecked(e=null,n,r){return n=Ce.from(n),this.checkContent(n),new Ma(this,this.computeAttrs(e),n,bt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ce.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ce.empty,!0);return s?new Ma(this,e,n.append(s),bt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){oW(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:bt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new aW(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ade(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class cde{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ade(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class p5{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=lW(e,i.attrs),this.excluded=null;let s=iW(this.attrs);this.instance=s?new bt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new bt(this,sW(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new p5(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){oW(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class cW{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Or.from(e.nodes),n.marks=Or.from(e.marks||{}),this.nodes=Vx.compile(this.spec.nodes,this),this.marks=p5.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=sd.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?PP(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:PP(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Qhe(r,r.defaultAttrs,e,bt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ma.fromJSON(this,e)}markFromJSON(e){return bt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function PP(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function ude(t){return t.tag!=null}function hde(t){return t.style!=null}class od{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(ude(i))this.tags.push(i);else if(hde(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new DP(this,n,!1);return r.addAll(e,bt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new DP(this,n,!0);return r.addAll(e,bt.none,n.from,n.to),Pe.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(pde(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=LP(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=LP(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new od(e,od.schemaRules(e)))}}const uW={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},dde={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},hW={ol:!0,ul:!0},J1=1,DS=2,Hg=4;function RP(t,e,n){return e!=null?(e?J1:0)|(e==="full"?DS:0):t&&t.whitespace=="pre"?J1|DS:n&~Hg}class f2{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=bt.none,this.match=s||(o&Hg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ce.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&J1)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ce.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!uW.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class DP{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=RP(null,n.preserveWhitespace,0)|(r?Hg:0);i?s=new f2(i.type,i.attrs,bt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new f2(null,null,bt.none,!0,null,o):s=new f2(e.schema.topNodeType,null,bt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&DS?"full":this.localPreserveWS||(i.options&J1)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;hW.hasOwnProperty(o)&&this.parser.normalizeLists&&fde(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:dde.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(uW.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let h=a&&a.skip?n:this.readStyles(e,n);h&&this.addAll(e,h),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,s=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=bt.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):BP(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=RP(e,s,o.options);o.options&Hg&&o.content.length==0&&(l|=Hg);let a=bt.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):BP(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new f2(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=J1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function fde(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&hW.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function pde(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function LP(t){let e={};for(let n in t)e[n]=t[n];return e}function BP(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class bd{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Hk(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Mw(Hk(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Mw(Hk(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Mw(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new bd(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=$P(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return $P(e.marks)}}function $P(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Hk(t){return t.document||window.document}const FP=new WeakMap;function mde(t){let e=FP.get(t);return e===void 0&&FP.set(t,e=gde(t)),e}function gde(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Mw(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=mde(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let h in c)if(c[h]!=null){let d=h.indexOf(" ");d>0?a.setAttributeNS(h.slice(0,d),h.slice(d+1),c[h]):a.setAttribute(h,c[h])}}for(let h=u;h<e.length;h++){let d=e[h];if(d===0){if(h<e.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:p}=Mw(t,d,n,r);if(a.appendChild(f),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const dW=65535,fW=Math.pow(2,16);function yde(t,e){return t+e*fW}function zP(t){return t&dW}function vde(t){return(t-(t&dW))/fW}const pW=1,mW=2,Ew=4,gW=8;class LS{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&gW)>0}get deletedBefore(){return(this.delInfo&(pW|Ew))>0}get deletedAfter(){return(this.delInfo&(mW|Ew))>0}get deletedAcross(){return(this.delInfo&Ew)>0}}class ys{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ys.empty)return ys.empty}recover(e){let n=0,r=zP(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+vde(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],h=a+c;if(e<=h){let d=c?e==a?-1:e==h?1:n:n,f=a+i+(d<0?0:u);if(r)return f;let p=e==(n<0?a:h)?null:yde(l/3,e-a),m=e==a?mW:e==h?pW:Ew;return(n<0?e!=a:e!=h)&&(m|=gW),new LS(f,m,p)}i+=u-c}return r?e+i:new LS(e+i,0,null)}touches(e,n){let r=0,i=zP(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new ys(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ys.empty:new ys(e<0?[0,-e,0]:[0,0,e])}}ys.empty=new ys([]);class Y1{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Y1(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Y1;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new LS(e,i,null)}}const Vk=Object.create(null);class ri{getMap(){return ys.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Vk[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Vk)throw new RangeError("Duplicate use of step JSON ID "+e);return Vk[e]=n,n.prototype.jsonID=e,n}}class Zn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Zn(e,null)}static fail(e){return new Zn(null,e)}static fromReplace(e,n,r,i){try{return Zn.ok(e.replace(n,r,i))}catch(s){if(s instanceof jx)return Zn.fail(s.message);throw s}}}function lA(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(lA(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ce.fromArray(r)}class ka extends ri{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Pe(lA(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Zn.fromReplace(e,this.from,this.to,s)}invert(){return new Cl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ka(n.pos,r.pos,this.mark)}merge(e){return e instanceof ka&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ka(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ka(n.from,n.to,e.markFromJSON(n.mark))}}ri.jsonID("addMark",ka);class Cl extends ri{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Pe(lA(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Zn.fromReplace(e,this.from,this.to,r)}invert(){return new ka(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Cl(n.pos,r.pos,this.mark)}merge(e){return e instanceof Cl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Cl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Cl(n.from,n.to,e.markFromJSON(n.mark))}}ri.jsonID("removeMark",Cl);class Uc extends ri{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Zn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Zn.fromReplace(e,this.pos,this.pos+1,new Pe(Ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Uc(this.pos,n.marks[i]);return new Uc(this.pos,this.mark)}}return new ld(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Uc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Uc(n.pos,e.markFromJSON(n.mark))}}ri.jsonID("addNodeMark",Uc);class ld extends ri{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Zn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Zn.fromReplace(e,this.pos,this.pos+1,new Pe(Ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Uc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ld(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ld(n.pos,e.markFromJSON(n.mark))}}ri.jsonID("removeNodeMark",ld);class Rr extends ri{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&BS(e,this.from,this.to)?Zn.fail("Structure replace would overwrite content"):Zn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ys([this.from,this.to-this.from,this.slice.size])}invert(e){return new Rr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Rr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Rr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Pe.empty:new Pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Rr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Pe.empty:new Pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Rr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Rr(n.from,n.to,Pe.fromJSON(e,n.slice),!!n.structure)}}ri.jsonID("replace",Rr);class ei extends ri{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(BS(e,this.from,this.gapFrom)||BS(e,this.gapTo,this.to)))return Zn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Zn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Zn.fromReplace(e,this.from,this.to,r):Zn.fail("Content does not fit in gap")}getMap(){return new ys([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ei(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new ei(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ei(n.from,n.to,n.gapFrom,n.gapTo,Pe.fromJSON(e,n.slice),n.insert,!!n.structure)}}ri.jsonID("replaceAround",ei);function BS(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function wde(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let h=a.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+a.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new Cl(d,f,h[m])));l&&l.to==d?l.to=f:s.push(l=new ka(d,f,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function xde(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof p5){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let h=a[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Cl(o.from,o.to,o.style)))}function aA(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,h=r.matchType(c.type);if(!h)o.push(new Rr(l,u,Pe.empty));else{r=h;for(let d=0;d<c.marks.length;d++)n.allowsMarkType(c.marks[d].type)||t.step(new Cl(l,u,c.marks[d]));if(i&&c.isText&&n.whitespace!="pre"){let d,f=/\r?\n|\r/g,p;for(;d=f.exec(c.text);)p||(p=new Pe(Ce.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Rr(l+d.index,l+d.index+d[0].length,p))}}l=u}if(!r.validEnd){let a=r.fillBefore(Ce.empty,!0);t.replace(l,l,new Pe(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function bde(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function m5(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!bde(i,s,o))break}return null}function kde(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=Ce.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=Ce.from(r.node(p).copy(u)),h++):a--;let d=Ce.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=Ce.from(i.node(p).copy(d)),f++):c++;t.step(new ei(a,c,o,l,new Pe(u.append(d),h,f),u.size-h,!0))}function cA(t,e,n=null,r=t){let i=Sde(t,e),s=i&&Cde(r,e);return s?i.map(jP).concat({type:e,attrs:n}).concat(s.map(jP)):null}function jP(t){return{type:t,attrs:null}}function Sde(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Cde(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function _de(t,e,n){let r=Ce.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ce.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new ei(i,s,i,s,new Pe(r,0,0),n.length,!0))}function Ade(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&Tde(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&vW(t,o,l,s),aA(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),h=u.map(l,1),d=u.map(l+o.nodeSize,1);return t.step(new ei(h,d,h+1,d-1,new Pe(Ce.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&yW(t,o,l,s),!1}})}function yW(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function vW(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Tde(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Mde(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ei(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Pe(Ce.from(o),0,0),1,!0))}function Vg(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function Ede(t,e,n=1,r){let i=t.doc.resolve(e),s=Ce.empty,o=Ce.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=Ce.from(i.node(l).copy(s));let u=r&&r[c];o=Ce.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new Rr(e,e,new Pe(s.append(o),n,n),!0))}function g5(t,e){let n=t.resolve(e),r=n.index();return Nde(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Ode(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Nde(t,e){return!!(t&&e&&!t.isLeaf&&Ode(t,e))}function Ide(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",h=!!o.contentMatch.matchType(i);u&&!h?r=!1:!u&&h&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);vW(t,u.node(),u.before(),l)}o.inlineContent&&aA(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Rr(c,a.map(e+n,-1),Pe.empty,!0)),r===!0){let u=t.doc.resolve(c);yW(t,u.node(),u.before(),t.steps.length)}return t}function Pde(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function wW(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let h=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(a,a,h[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function uA(t,e,n=e,r=Pe.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return xW(i,s,r)?new Rr(e,n,r):new Rde(i,s,r).fit()}function xW(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Rde{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ce.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ce.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new Pe(s,o,l);return e>-1?new ei(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Rr(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Wk(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Ce.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Wk(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Pe(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Wk(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Pe(pm(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Pe(pm(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),y=h.matchType(m.type);if(!y)break;c++,(c>1||a==0||m.content.size)&&(h=y,u.push(bW(m.mark(d.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?f:-1)))}let p=c==l.childCount;p||(f=-1),this.placed=mm(this.placed,n,Ce.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,y=l;m<f;m++){let g=y.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),y=g.content}this.unplaced=p?e==0?Pe.empty:new Pe(pm(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new Pe(pm(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!qk(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=qk(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=qk(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=mm(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=mm(this.placed,this.depth,Ce.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ce.empty,!0);n.childCount&&(this.placed=mm(this.placed,this.frontier.length,n))}}function pm(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(pm(t.firstChild.content,e-1,n)))}function mm(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(mm(t.lastChild.content,e-1,n)))}function Wk(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function bW(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,bW(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ce.empty,!0)))),t.copy(r)}function qk(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!Dde(n,s.content,o)?l:null}function Dde(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Lde(t){return t.spec.defining||t.spec.definingForContent}function Bde(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(xW(i,s,r))return t.step(new Rr(e,n,r));let o=SW(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?l=d:i.before(d)==f&&o.splice(1,0,-d)}let a=o.indexOf(l),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=Lde(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(l)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let y=o[(m+a)%o.length],g=!0;y<0&&(g=!1,y=-y);let v=i.node(y-1),w=i.index(y-1);if(v.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(y),g?s.after(y):n,new Pe(kW(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function kW(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(kW(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ce.empty,!0))}return t}function $de(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Pde(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Pe(Ce.from(r),0,0))}function Fde(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=SW(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function SW(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Jf extends ri{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Zn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Zn.fromReplace(e,this.pos,this.pos+1,new Pe(Ce.from(i),0,n.isLeaf?0:1))}getMap(){return ys.empty}invert(e){return new Jf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Jf(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jf(n.pos,n.attr,n.value)}}ri.jsonID("attr",Jf);class X1 extends ri{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Zn.ok(r)}getMap(){return ys.empty}invert(e){return new X1(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new X1(n.attr,n.value)}}ri.jsonID("docAttr",X1);let E0=class extends Error{};E0=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};E0.prototype=Object.create(Error.prototype);E0.prototype.constructor=E0;E0.prototype.name="TransformError";class CW{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Y1}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new E0(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Pe.empty){let i=uA(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Pe(Ce.from(r),0,0))}delete(e,n){return this.replace(e,n,Pe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Bde(this,e,n,r),this}replaceRangeWith(e,n,r){return $de(this,e,n,r),this}deleteRange(e,n){return Fde(this,e,n),this}lift(e,n){return kde(this,e,n),this}join(e,n=1){return Ide(this,e,n),this}wrap(e,n){return _de(this,e,n),this}setBlockType(e,n=e,r,i=null){return Ade(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Mde(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Jf(e,n,r)),this}setDocAttribute(e,n){return this.step(new X1(e,n)),this}addNodeMark(e,n){return this.step(new Uc(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof bt)n.isInSet(r.marks)&&this.step(new ld(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ld(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return Ede(this,e,n,r),this}addMark(e,n,r){return wde(this,e,n,r),this}removeMark(e,n,r){return xde(this,e,n,r),this}clearIncompatible(e,n,r){return aA(this,e,n,r),this}}const Uk=Object.create(null);class ct{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new _W(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Pe.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?Pe.empty:n),l==0&&WP(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),WP(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new qe(e):Xd(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Xd(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Xd(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Gi(e.node(0))}static atStart(e){return Xd(e,e,0,0,1)||new Gi(e)}static atEnd(e){return Xd(e,e,e.content.size,e.childCount,-1)||new Gi(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Uk[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Uk)throw new RangeError("Duplicate use of selection JSON ID "+e);return Uk[e]=n,n.prototype.jsonID=e,n}getBookmark(){return qe.between(this.$anchor,this.$head).getBookmark()}}ct.prototype.visible=!0;class _W{constructor(e,n){this.$from=e,this.$to=n}}let HP=!1;function VP(t){!HP&&!t.parent.inlineContent&&(HP=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class qe extends ct{constructor(e,n=e){VP(e),VP(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ct.near(r);let i=e.resolve(n.map(this.anchor));return new qe(i.parent.inlineContent?i:r,r)}replace(e,n=Pe.empty){if(super.replace(e,n),n==Pe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof qe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new y5(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=ct.findFrom(n,r,!0)||ct.findFrom(n,-r,!0);if(s)n=s.$head;else return ct.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ct.findFrom(e,-r,!0)||ct.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new qe(e,n)}}ct.jsonID("text",qe);class y5{constructor(e,n){this.anchor=e,this.head=n}map(e){return new y5(e.map(this.anchor),e.map(this.head))}resolve(e){return qe.between(e.resolve(this.anchor),e.resolve(this.head))}}class tt extends ct{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?ct.near(s):new tt(s)}content(){return new Pe(Ce.from(this.node),0,0)}eq(e){return e instanceof tt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new hA(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new tt(e.resolve(n.anchor))}static create(e,n){return new tt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}tt.prototype.visible=!1;ct.jsonID("node",tt);class hA{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new y5(r,r):new hA(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&tt.isSelectable(r)?new tt(n):ct.near(n)}}class Gi extends ct{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Pe.empty){if(n==Pe.empty){e.delete(0,e.doc.content.size);let r=ct.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Gi(e)}map(e){return new Gi(e)}eq(e){return e instanceof Gi}getBookmark(){return zde}}ct.jsonID("all",Gi);const zde={map(){return this},resolve(t){return new Gi(t)}};function Xd(t,e,n,r,i,s=!1){if(e.inlineContent)return qe.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&tt.isSelectable(l))return tt.create(t,n-(i<0?l.nodeSize:0))}else{let a=Xd(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function WP(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Rr||i instanceof ei))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(ct.near(t.doc.resolve(o),n))}const qP=1,p2=2,UP=4;class jde extends CW{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|qP)&~p2,this.storedMarks=null,this}get selectionSet(){return(this.updated&qP)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=p2,this}ensureMarks(e){return bt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&p2)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~p2,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||bt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(ct.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UP,this}get scrolledIntoView(){return(this.updated&UP)>0}}function GP(t,e){return!e||!t?t:t.bind(e)}class gm{constructor(e,n,r){this.name=e,this.init=GP(n.init,r),this.apply=GP(n.apply,r)}}const Hde=[new gm("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new gm("selection",{init(t,e){return t.selection||ct.atStart(e.doc)},apply(t){return t.selection}}),new gm("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new gm("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Gk{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Hde.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new gm(r.key,r.spec.state,r))})}}class Ah{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ah(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new jde(this)}static create(e){let n=new Gk(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ah(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Gk(this.schema,e.plugins),r=n.fields,i=new Ah(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Gk(e.schema,e.plugins),s=new Ah(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ma.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=ct.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function AW(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=AW(i,e,{})),n[r]=i}return n}class An{constructor(e){this.spec=e,this.props={},e.props&&AW(e.props,this,this.props),this.key=e.key?e.key.key:TW("plugin")}getState(e){return e[this.key]}}const Kk=Object.create(null);function TW(t){return t in Kk?t+"$"+ ++Kk[t]:(Kk[t]=0,t+"$")}class $n{constructor(e="key"){this.key=TW(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}class Ji{constructor(e,n,r={}){this.match=e,this.match=e,this.handler=typeof n=="string"?Vde(n):n,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function Vde(t){return function(e,n,r,i){let s=t;if(n[1]){let o=n[0].lastIndexOf(n[1]);s+=n[0].slice(o+n[1].length),r+=o;let l=r-i;l>0&&(s=n[0].slice(o-l,o)+s,r=i)}return e.tr.insertText(s,r,i)}}const Wde=(t,e)=>{let n=t.plugins;for(let r=0;r<n.length;r++){let i=n[r],s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){let o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a--)o.step(l.steps[a].invert(l.docs[a]));if(s.text){let a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to);e(o)}return!0}}return!1};new Ji(/--$/,"",{inCodeMark:!1});new Ji(/\.\.\.$/,"",{inCodeMark:!1});new Ji(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"",{inCodeMark:!1});new Ji(/"$/,"",{inCodeMark:!1});new Ji(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"",{inCodeMark:!1});new Ji(/'$/,"",{inCodeMark:!1});function dA(t,e,n=null,r){return new Ji(t,(i,s,o,l)=>{let a=n instanceof Function?n(s):n,c=i.tr.delete(o,l),u=c.doc.resolve(o),h=u.blockRange(),d=h&&cA(h,e,a);if(!d)return null;c.wrap(h,d);let f=c.doc.resolve(o-1).nodeBefore;return f&&f.type==e&&g5(c.doc,o-1)&&(!r||r(s,f))&&c.join(o-1),c})}function fA(t,e,n=null){return new Ji(t,(r,i,s,o)=>{let l=r.doc.resolve(s),a=n instanceof Function?n(i):n;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),e)?r.tr.delete(s,o).setBlockType(s,s,e,a):null})}var Yi=(t=>(t.docTypeError="docTypeError",t.contextNotFound="contextNotFound",t.timerNotFound="timerNotFound",t.ctxCallOutOfScope="ctxCallOutOfScope",t.createNodeInParserFail="createNodeInParserFail",t.stackOverFlow="stackOverFlow",t.parserMatchError="parserMatchError",t.serializerMatchError="serializerMatchError",t.getAtomFromSchemaFail="getAtomFromSchemaFail",t.expectDomTypeError="expectDomTypeError",t.callCommandBeforeEditorView="callCommandBeforeEditorView",t.missingRootElement="missingRootElement",t.missingNodeInSchema="missingNodeInSchema",t.missingMarkInSchema="missingMarkInSchema",t.ctxNotBind="ctxNotBind",t.missingYjsDoc="missingYjsDoc",t))(Yi||{});class Es extends Error{constructor(e,n){super(n),this.name="MilkdownError",this.code=e}}const qde=(t,e)=>typeof e=="function"?"[Function]":e,v5=t=>JSON.stringify(t,qde);function Ude(t){return new Es(Yi.docTypeError,`Doc type error, unsupported type: ${v5(t)}`)}function Gde(t){return new Es(Yi.contextNotFound,`Context "${t}" not found, do you forget to inject it?`)}function Kde(t){return new Es(Yi.timerNotFound,`Timer "${t}" not found, do you forget to record it?`)}function pA(){return new Es(Yi.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function Jde(t,e,n){const i=`Cannot create node for ${"name"in t?t.name:t}`,s=u=>{if(u==null)return"null";if(Array.isArray(u))return`[${u.map(s).join(", ")}]`;if(typeof u=="object")return"toJSON"in u&&typeof u.toJSON=="function"?JSON.stringify(u.toJSON()):"spec"in u?JSON.stringify(u.spec):JSON.stringify(u);if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")return JSON.stringify(u);if(typeof u=="function")return`[Function: ${u.name||"anonymous"}]`;try{return String(u)}catch{return"[Unserializable]"}},o=["[Description]",i],l=["[Attributes]",e],a=["[Content]",(n??[]).map(u=>u?typeof u=="object"&&"type"in u?`${u}`:s(u):"null")],c=[o,l,a].reduce((u,[h,d])=>{const f=`${h}: ${s(d)}.`;return u.concat(f)},[]);return new Es(Yi.createNodeInParserFail,c.join(`
`))}function MW(){return new Es(Yi.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function Yde(t){return new Es(Yi.parserMatchError,`Cannot match target parser for node: ${v5(t)}.`)}function Xde(t){return new Es(Yi.serializerMatchError,`Cannot match target serializer for node: ${v5(t)}.`)}function Qde(t,e){return new Es(Yi.getAtomFromSchemaFail,`Cannot get ${t}: ${e} from schema.`)}function Vo(t){return new Es(Yi.expectDomTypeError,`Expect to be a dom, but get: ${v5(t)}.`)}function Jk(){return new Es(Yi.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function Zde(t){return new Es(Yi.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${t}" in schema.`)}function efe(t){return new Es(Yi.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${t}" in schema.`)}const wu=typeof navigator<"u"?navigator:null,KP=typeof document<"u"?document:null,Iu=wu&&wu.userAgent||"",$S=/Edge\/(\d+)/.exec(Iu),EW=/MSIE \d/.exec(Iu),FS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Iu),w5=!!(EW||FS||$S),tfe=EW?document.documentMode:FS?+FS[1]:$S?+$S[1]:0,OW=!w5&&/gecko\/(\d+)/i.test(Iu),nfe=OW&&+(/Firefox\/(\d+)/.exec(Iu)||[0,0])[1],zS=!w5&&/Chrome\/(\d+)/.exec(Iu),rfe=!!zS,ife=zS?+zS[1]:0,NW=!w5&&!!wu&&/Apple Computer/.test(wu.vendor),IW=NW&&(/Mobile\/\w+/.test(Iu)||!!wu&&wu.maxTouchPoints>2),sfe=IW||(wu?/Mac/.test(wu.platform):!1),ofe=/Android \d/.test(Iu),PW=!!KP&&"webkitFontSmoothing"in KP.documentElement.style,lfe=PW?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var m2=Object.freeze({__proto__:null,android:ofe,chrome:rfe,chrome_version:ife,gecko:OW,gecko_version:nfe,ie:w5,ie_version:tfe,ios:IW,mac:sfe,safari:NW,webkit:PW,webkit_version:lfe});function Yk(t,e,n,r,i,s){if(t.composing)return!1;const o=t.state,l=o.doc.resolve(e);if(l.parent.type.spec.code)return!1;const a=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,void 0,"")+r;for(let c of i){const u=c,h=u.match.exec(a),d=h&&h[0]&&u.handler(o,h,e-(h[0].length-r.length),n);if(d)return u.undoable!==!1&&d.setMeta(s,{transform:d,from:e,to:n,text:r}),t.dispatch(d),!0}return!1}const afe=new $n("MILKDOWN_CUSTOM_INPUTRULES");function cfe({rules:t}){const e=new An({key:afe,isInputRules:!0,state:{init(){return null},apply(n,r){const i=n.getMeta(this);return i||(n.selectionSet||n.docChanged?null:r)}},props:{handleTextInput(n,r,i,s){return Yk(n,r,i,s,t,e)},handleDOMEvents:{compositionend:n=>(setTimeout(()=>{const{$cursor:r}=n.state.selection;r&&Yk(n,r.pos,r.pos,"",t,e)}),!1)},handleKeyDown(n,r){if(r.key!=="Enter")return!1;const{$cursor:i}=n.state.selection;return i?Yk(n,i.pos,i.pos,`
`,t,e):!1}}});return e}function Ly(t,e,n={}){return new Ji(t,(r,i,s,o)=>{var l,a,c,u;const{tr:h}=r,d=i.length;let f=i[d-1],p=i[0],m=[],y=o;const g={group:f,fullMatch:p,start:s,end:o},v=(l=n.updateCaptured)==null?void 0:l.call(n,g);if(Object.assign(g,v),{group:f,fullMatch:p,start:s,end:o}=g,p===null||(f==null?void 0:f.trim())==="")return null;if(f){const w=p.search(/\S/),S=s+p.indexOf(f),_=S+f.length;m=(a=h.storedMarks)!=null?a:[],_<o&&h.delete(_,o),S>s&&h.delete(s+w,S),y=s+w+f.length;const C=(c=n.getAttr)==null?void 0:c.call(n,i);h.addMark(s,y,e.create(C)),h.setStoredMarks(m),(u=n.beforeDispatch)==null||u.call(n,{match:i,start:s,end:o,tr:h})}return h})}function ufe(t,e,n={}){return new Ji(t,(r,i,s,o)=>{var l,a,c;const{tr:u}=r;let h=i[1],d=i[0];const f={group:h,fullMatch:d,start:s,end:o},p=(l=n.updateCaptured)==null?void 0:l.call(n,f);if(Object.assign(f,p),{group:h,fullMatch:d,start:s,end:o}=f,d===null||!h||h.trim()==="")return null;const m=(a=n.getAttr)==null?void 0:a.call(n,i),y=e.createAndFill(m);return y&&(u.replaceRangeWith(e.isBlock?u.doc.resolve(s).before():s,o,y),(c=n.beforeDispatch)==null||c.call(n,{match:[d,h??""],start:s,end:o,tr:u})),u})}var hfe=Object.defineProperty,dfe=Object.defineProperties,ffe=Object.getOwnPropertyDescriptors,JP=Object.getOwnPropertySymbols,pfe=Object.prototype.hasOwnProperty,mfe=Object.prototype.propertyIsEnumerable,YP=(t,e,n)=>e in t?hfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gfe=(t,e)=>{for(var n in e||(e={}))pfe.call(e,n)&&YP(t,n,e[n]);if(JP)for(var n of JP(e))mfe.call(e,n)&&YP(t,n,e[n]);return t},yfe=(t,e)=>dfe(t,ffe(e));function XP(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function x5(t,e,n){const i=t.state.doc.content.size,s=XP(e,0,i),o=XP(n,0,i),l=t.coordsAtPos(s),a=t.coordsAtPos(o,-1),c=Math.min(l.top,a.top),u=Math.max(l.bottom,a.bottom),h=Math.min(l.left,a.left),d=Math.max(l.right,a.right),f=d-h,p=u-c,g={top:c,bottom:u,left:h,right:d,width:f,height:p,x:h,y:c};return yfe(gfe({},g),{toJSON:()=>g})}function b5(t){return Object.assign(Object.create(t),t).setTime(Date.now())}function vfe(t,e){return Array.isArray(t)&&t.includes(e.type)||e.type===t}function wfe(t){if(t.content.childCount===1){const e=t.content.firstChild;if((e==null?void 0:e.type.name)==="text"&&e.marks.length===0)return e;if((e==null?void 0:e.type.name)==="paragraph"&&e.childCount===1){const n=e.firstChild;if((n==null?void 0:n.type.name)==="text"&&n.marks.length===0)return n}}return!1}function Il(t){return e=>{for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r)){const i=e.before(n),s=e.after(n);return{from:i,to:s,node:r}}}}}function xfe(t,e){return Il(n=>n.type===e)(t)}function bfe(t,e){const n=e.nodes[t];if(!n)throw Qde("node",t);return n}function mA(t){return e=>{for(let n=e.depth;n>0;n--){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}}function kfe(t){return e=>mA(t)(e.$from)}function Sfe(t,e){if(!(t instanceof tt))return;const{node:n,$from:r}=t;if(vfe(e,n))return{node:n,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const RW=(t,e)=>{const{selection:n,doc:r}=t;if(n instanceof tt)return{hasNode:n.node.type===e,pos:n.from,target:n.node};const{from:i,to:s}=n;let o=!1,l=-1,a=null;return r.nodesBetween(i,s,(c,u)=>a?!1:c.type===e?(o=!0,l=u,a=c,!1):!0),{hasNode:o,pos:l,target:a}};var DW=t=>{throw TypeError(t)},LW=(t,e,n)=>e.has(t)||DW("Cannot "+n),Ke=(t,e,n)=>(LW(t,e,"read from private field"),n?n.call(t):e.get(t)),Hn=(t,e,n)=>e.has(t)?DW("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Bt=(t,e,n,r)=>(LW(t,e,"write to private field"),e.set(t,n),n),sl,pc,ym,Ow,Nw,Iw,Qd,vm,lh,wm,xm,bm,mc,gc,Pw,fo,Zd,ah,km,yc,Sm,Rw;class BW{constructor(){this.sliceMap=new Map,this.get=e=>{const n=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);if(!n){const r=typeof e=="string"?e:e.name;throw Gde(r)}return n},this.remove=e=>{const n=typeof e=="string"?[...this.sliceMap.values()].find(r=>r.type.name===e):this.sliceMap.get(e.id);n&&this.sliceMap.delete(n.type.id)},this.has=e=>typeof e=="string"?[...this.sliceMap.values()].some(n=>n.type.name===e):this.sliceMap.has(e.id)}}class Cfe{constructor(e,n,r){Hn(this,sl),Hn(this,pc),Hn(this,ym),Bt(this,sl,[]),Bt(this,ym,()=>{Ke(this,sl).forEach(i=>i(Ke(this,pc)))}),this.set=i=>{Bt(this,pc,i),Ke(this,ym).call(this)},this.get=()=>Ke(this,pc),this.update=i=>{Bt(this,pc,i(Ke(this,pc))),Ke(this,ym).call(this)},this.type=r,Bt(this,pc,n),e.set(r.id,this)}on(e){return Ke(this,sl).push(e),()=>{Bt(this,sl,Ke(this,sl).filter(n=>n!==e))}}once(e){const n=this.on(r=>{e(r),n()});return n}off(e){Bt(this,sl,Ke(this,sl).filter(n=>n!==e))}offAll(){Bt(this,sl,[])}}sl=new WeakMap;pc=new WeakMap;ym=new WeakMap;class _fe{constructor(e,n){this.id=Symbol(`Context-${n}`),this.name=n,this._defaultValue=e,this._typeInfo=()=>{throw pA()}}create(e,n=this._defaultValue){return new Cfe(e,n,this)}}const Pt=(t,e)=>new _fe(t,e);class Afe{constructor(e,n,r){Hn(this,Ow),Hn(this,Nw),Hn(this,Iw),Hn(this,Qd),Hn(this,vm),Hn(this,lh),Hn(this,wm),Hn(this,xm),Hn(this,bm),Bt(this,Qd,new Set),Bt(this,vm,new Set),Bt(this,lh,new Map),Bt(this,wm,new Map),this.read=()=>({metadata:Ke(this,Ow),injectedSlices:[...Ke(this,Qd)].map(i=>({name:typeof i=="string"?i:i.name,value:Ke(this,xm).call(this,i)})),consumedSlices:[...Ke(this,vm)].map(i=>({name:typeof i=="string"?i:i.name,value:Ke(this,xm).call(this,i)})),recordedTimers:[...Ke(this,lh)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:Ke(this,bm).call(this,i)})),waitTimers:[...Ke(this,wm)].map(([i,{duration:s}])=>({name:i.name,duration:s,status:Ke(this,bm).call(this,i)}))}),this.onRecord=i=>{Ke(this,lh).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{Ke(this,lh).delete(i)},this.onDone=i=>{const s=Ke(this,lh).get(i);s&&(s.duration=Date.now()-s.start)},this.onWait=(i,s)=>{const o=Date.now();s.finally(()=>{Ke(this,wm).set(i,{duration:Date.now()-o})}).catch(console.error)},this.onInject=i=>{Ke(this,Qd).add(i)},this.onRemove=i=>{Ke(this,Qd).delete(i)},this.onUse=i=>{Ke(this,vm).add(i)},Bt(this,xm,i=>Ke(this,Nw).get(i).get()),Bt(this,bm,i=>Ke(this,Iw).get(i).status),Bt(this,Nw,e),Bt(this,Iw,n),Bt(this,Ow,r)}}Ow=new WeakMap;Nw=new WeakMap;Iw=new WeakMap;Qd=new WeakMap;vm=new WeakMap;lh=new WeakMap;wm=new WeakMap;xm=new WeakMap;bm=new WeakMap;const Tfe=class $W{constructor(e,n,r){Hn(this,mc),Hn(this,gc),Hn(this,Pw),Hn(this,fo),this.produce=i=>i&&Object.keys(i).length?new $W(Ke(this,mc),Ke(this,gc),{...i}):this,this.inject=(i,s)=>{var o;const l=i.create(Ke(this,mc).sliceMap);return s!=null&&l.set(s),(o=Ke(this,fo))==null||o.onInject(i),this},this.remove=i=>{var s;return Ke(this,mc).remove(i),(s=Ke(this,fo))==null||s.onRemove(i),this},this.record=i=>{var s;return i.create(Ke(this,gc).store),(s=Ke(this,fo))==null||s.onRecord(i),this},this.clearTimer=i=>{var s;return Ke(this,gc).remove(i),(s=Ke(this,fo))==null||s.onClear(i),this},this.isInjected=i=>Ke(this,mc).has(i),this.isRecorded=i=>Ke(this,gc).has(i),this.use=i=>{var s;return(s=Ke(this,fo))==null||s.onUse(i),Ke(this,mc).get(i)},this.get=i=>this.use(i).get(),this.set=(i,s)=>this.use(i).set(s),this.update=(i,s)=>this.use(i).update(s),this.timer=i=>Ke(this,gc).get(i),this.done=i=>{var s;this.timer(i).done(),(s=Ke(this,fo))==null||s.onDone(i)},this.wait=i=>{var s;const o=this.timer(i).start();return(s=Ke(this,fo))==null||s.onWait(i,o),o},this.waitTimers=async i=>{await Promise.all(this.get(i).map(s=>this.wait(s)))},Bt(this,mc,e),Bt(this,gc,n),Bt(this,Pw,r),r&&Bt(this,fo,new Afe(e,n,r))}get meta(){return Ke(this,Pw)}get inspector(){return Ke(this,fo)}};mc=new WeakMap;gc=new WeakMap;Pw=new WeakMap;fo=new WeakMap;let Mfe=Tfe;class Efe{constructor(){this.store=new Map,this.get=e=>{const n=this.store.get(e.id);if(!n)throw Kde(e.name);return n},this.remove=e=>{this.store.delete(e.id)},this.has=e=>this.store.has(e.id)}}class Ofe{constructor(e,n){Hn(this,Zd),Hn(this,ah),Hn(this,km),Hn(this,yc),Hn(this,Sm),Hn(this,Rw),Bt(this,Zd,null),Bt(this,ah,null),Bt(this,yc,"pending"),this.start=()=>(Ke(this,Zd)??Bt(this,Zd,new Promise((r,i)=>{Bt(this,ah,s=>{s instanceof CustomEvent&&s.detail.id===Ke(this,km)&&(Bt(this,yc,"resolved"),Ke(this,Sm).call(this),s.stopImmediatePropagation(),r())}),Ke(this,Rw).call(this,()=>{Ke(this,yc)==="pending"&&Bt(this,yc,"rejected"),Ke(this,Sm).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),Bt(this,yc,"pending"),addEventListener(this.type.name,Ke(this,ah))})),Ke(this,Zd)),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:Ke(this,km)}});dispatchEvent(r)},Bt(this,Sm,()=>{Ke(this,ah)&&removeEventListener(this.type.name,Ke(this,ah))}),Bt(this,Rw,r=>{setTimeout(()=>{r()},this.type.timeout)}),Bt(this,km,Symbol(n.name)),this.type=n,e.set(n.id,this)}get status(){return Ke(this,yc)}}Zd=new WeakMap;ah=new WeakMap;km=new WeakMap;yc=new WeakMap;Sm=new WeakMap;Rw=new WeakMap;class Nfe{constructor(e,n=3e3){this.create=r=>new Ofe(r,this),this.id=Symbol(`Timer-${e}`),this.name=e,this.timeout=n}}const Pu=(t,e=3e3)=>new Nfe(t,e),Ife={};function gA(t,e){const n=Ife,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return FW(t,r,i)}function FW(t,e,n){if(Pfe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return QP(t.children,e,n)}return Array.isArray(t)?QP(t,e,n):""}function QP(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=FW(t[i],e,n);return r.join("")}function Pfe(t){return!!(t&&typeof t=="object")}const ZP=document.createElement("i");function yA(t){const e="&"+t+";";ZP.innerHTML=e;const n=ZP.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ss(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Fs(t,e){return t.length>0?(Ss(t,t.length,0,e),t):e}const eR={}.hasOwnProperty;function zW(t){const e={};let n=-1;for(;++n<t.length;)Rfe(e,t[n]);return e}function Rfe(t,e){let n;for(n in e){const i=(eR.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){eR.call(i,o)||(i[o]=[]);const l=s[o];Dfe(i[o],Array.isArray(l)?l:l?[l]:[])}}}function Dfe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ss(t,0,0,r)}function jW(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Oo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const mi=Ru(/[A-Za-z]/),Hi=Ru(/[\dA-Za-z]/),Lfe=Ru(/[#-'*+\--9=?A-Z^-~]/);function Wx(t){return t!==null&&(t<32||t===127)}const jS=Ru(/\d/),Bfe=Ru(/[\dA-Fa-f]/),$fe=Ru(/[!-/:-@[-`{-~]/);function Ue(t){return t!==null&&t<-2}function rn(t){return t!==null&&(t<0||t===32)}function Mt(t){return t===-2||t===-1||t===32}const k5=Ru(new RegExp("\\p{P}|\\p{S}","u")),ad=Ru(/\s/);function Ru(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function St(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(a){return Mt(a)?(t.enter(n),l(a)):e(a)}function l(a){return Mt(a)&&s++<i?(t.consume(a),l):(t.exit(n),e(a))}}const Ffe={tokenize:zfe};function zfe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),St(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const a=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=a),n=a,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ue(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const jfe={tokenize:Hfe},tR={tokenize:Vfe};function Hfe(t){const e=this,n=[];let r=0,i,s,o;return l;function l(w){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,a,c)(w)}return c(w)}function a(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&v();const S=e.events.length;let _=S,C;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){C=e.events[_][1].end;break}g(r);let T=S;for(;T<e.events.length;)e.events[T][1].end={...C},T++;return Ss(e.events,_+1,0,e.events.slice(S)),e.events.length=T,c(w)}return l(w)}function c(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(tR,u,h)(w)}function u(w){return i&&v(),g(r),d(w)}function h(w){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(w)}function d(w){return e.containerState={},t.attempt(tR,f,p)(w)}function f(w){return r++,n.push([e.currentConstruct,e.containerState]),d(w)}function p(w){if(w===null){i&&v(),g(0),t.consume(w);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(w)}function m(w){if(w===null){y(t.exit("chunkFlow"),!0),g(0),t.consume(w);return}return Ue(w)?(t.consume(w),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(w),m)}function y(w,S){const _=e.sliceStream(w);if(S&&_.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(_),e.parser.lazy[w.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const T=e.events.length;let I=T,L,N;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(L){N=e.events[I][1].end;break}L=!0}for(g(r),C=T;C<e.events.length;)e.events[C][1].end={...N},C++;Ss(e.events,I+1,0,e.events.slice(T)),e.events.length=C}}function g(w){let S=n.length;for(;S-- >w;){const _=n[S];e.containerState=_[1],_[0].exit.call(e,t)}n.length=w}function v(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Vfe(t,e,n){return St(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function O0(t){if(t===null||rn(t)||ad(t))return 1;if(k5(t))return 2}function S5(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const HS={name:"attention",resolveAll:Wfe,tokenize:qfe};function Wfe(t,e){let n=-1,r,i,s,o,l,a,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;a=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},d={...t[n][1].start};nR(h,-a),nR(d,a),o={type:a>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},l={type:a>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:d},s={type:a>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:a>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[r][1].end={...o.start},t[n][1].start={...l.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Fs(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Fs(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Fs(c,S5(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Fs(c,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Fs(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Ss(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function qfe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=O0(r);let s;return o;function o(a){return s=a,t.enter("attentionSequence"),l(a)}function l(a){if(a===s)return t.consume(a),l;const c=t.exit("attentionSequence"),u=O0(a),h=!u||u===2&&i||n.includes(a),d=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!d)),c._close=!!(s===42?d:d&&(u||!h)),e(a)}}function nR(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Ufe={name:"autolink",tokenize:Gfe};function Gfe(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return mi(f)?(t.consume(f),o):f===64?n(f):c(f)}function o(f){return f===43||f===45||f===46||Hi(f)?(r=1,l(f)):c(f)}function l(f){return f===58?(t.consume(f),r=0,a):(f===43||f===45||f===46||Hi(f))&&r++<32?(t.consume(f),l):(r=0,c(f))}function a(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||Wx(f)?n(f):(t.consume(f),a)}function c(f){return f===64?(t.consume(f),u):Lfe(f)?(t.consume(f),c):n(f)}function u(f){return Hi(f)?h(f):n(f)}function h(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):d(f)}function d(f){if((f===45||Hi(f))&&r++<63){const p=f===45?d:h;return t.consume(f),p}return n(f)}}const By={partial:!0,tokenize:Kfe};function Kfe(t,e,n){return r;function r(s){return Mt(s)?St(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ue(s)?e(s):n(s)}}const HW={continuation:{tokenize:Yfe},exit:Xfe,name:"blockQuote",tokenize:Jfe};function Jfe(t,e,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Mt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Yfe(t,e,n){const r=this;return i;function i(o){return Mt(o)?St(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(HW,e,n)(o)}}function Xfe(t){t.exit("blockQuote")}const VW={name:"characterEscape",tokenize:Qfe};function Qfe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return $fe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const WW={name:"characterReference",tokenize:Zfe};function Zfe(t,e,n){const r=this;let i=0,s,o;return l;function l(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),a}function a(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Hi,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Bfe,u):(t.enter("characterReferenceValue"),s=7,o=jS,u(h))}function u(h){if(h===59&&i){const d=t.exit("characterReferenceValue");return o===Hi&&!yA(r.sliceSerialize(d))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const rR={partial:!0,tokenize:t0e},iR={concrete:!0,name:"codeFenced",tokenize:e0e};function e0e(t,e,n){const r=this,i={partial:!0,tokenize:_};let s=0,o=0,l;return a;function a(C){return c(C)}function c(C){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,l=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===l?(o++,t.consume(C),u):o<3?n(C):(t.exit("codeFencedFenceSequence"),Mt(C)?St(t,h,"whitespace")(C):h(C))}function h(C){return C===null||Ue(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(rR,m,S)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||Ue(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):Mt(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),St(t,f,"whitespace")(C)):C===96&&C===l?n(C):(t.consume(C),d)}function f(C){return C===null||Ue(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||Ue(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===l?n(C):(t.consume(C),p)}function m(C){return t.attempt(i,S,y)(C)}function y(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),g}function g(C){return s>0&&Mt(C)?St(t,v,"linePrefix",s+1)(C):v(C)}function v(C){return C===null||Ue(C)?t.check(rR,m,S)(C):(t.enter("codeFlowValue"),w(C))}function w(C){return C===null||Ue(C)?(t.exit("codeFlowValue"),v(C)):(t.consume(C),w)}function S(C){return t.exit("codeFenced"),e(C)}function _(C,T,I){let L=0;return N;function N(Y){return C.enter("lineEnding"),C.consume(Y),C.exit("lineEnding"),$}function $(Y){return C.enter("codeFencedFence"),Mt(Y)?St(C,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):F(Y)}function F(Y){return Y===l?(C.enter("codeFencedFenceSequence"),ie(Y)):I(Y)}function ie(Y){return Y===l?(L++,C.consume(Y),ie):L>=o?(C.exit("codeFencedFenceSequence"),Mt(Y)?St(C,Z,"whitespace")(Y):Z(Y)):I(Y)}function Z(Y){return Y===null||Ue(Y)?(C.exit("codeFencedFence"),T(Y)):I(Y)}}}function t0e(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Xk={name:"codeIndented",tokenize:r0e},n0e={partial:!0,tokenize:i0e};function r0e(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),St(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?a(c):Ue(c)?t.attempt(n0e,o,a)(c):(t.enter("codeFlowValue"),l(c))}function l(c){return c===null||Ue(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),l)}function a(c){return t.exit("codeIndented"),e(c)}}function i0e(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ue(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):St(t,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Ue(o)?i(o):n(o)}}const s0e={name:"codeText",previous:l0e,resolve:o0e,tokenize:a0e};function o0e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function l0e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function a0e(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),l(h)}function l(h){return h===96?(t.consume(h),r++,l):(t.exit("codeTextSequence"),a(h))}function a(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),a):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):Ue(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),a):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Ue(h)?(t.exit("codeTextData"),a(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class c0e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&qp(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),qp(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),qp(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);qp(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);qp(this.left,n.reverse())}}}function qp(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function qW(t){const e={};let n=-1,r,i,s,o,l,a,c;const u=new c0e(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(a=r[1]._tokenizer.events,s=0,s<a.length&&a[s][1].type==="lineEndingBlank"&&(s+=2),s<a.length&&a[s][1].type==="content"))for(;++s<a.length&&a[s][1].type!=="content";)a[s][1].type==="chunkText"&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,u0e(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(r),u.splice(i,n-i+1,l))}}return Ss(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function u0e(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,a=[],c={};let u,h,d=-1,f=n,p=0,m=0;const y=[m];for(;f;){for(;t.get(++i)[1]!==f;);s.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++d<l.length;)l[d][0]==="exit"&&l[d-1][0]==="enter"&&l[d][1].type===l[d-1][1].type&&l[d][1].start.line!==l[d][1].end.line&&(m=d+1,y.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),d=y.length;d--;){const g=l.slice(y[d],y[d+1]),v=s.pop();a.push([v,v+g.length-1]),t.splice(v,2,g)}for(a.reverse(),d=-1;++d<a.length;)c[p+a[d][0]]=p+a[d][1],p+=a[d][1]-a[d][0]-1;return c}const h0e={resolve:f0e,tokenize:p0e},d0e={partial:!0,tokenize:m0e};function f0e(t){return qW(t),t}function p0e(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Ue(l)?t.check(d0e,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function m0e(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),St(t,s,"linePrefix")}function s(o){if(o===null||Ue(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function UW(t,e,n,r,i,s,o,l,a){const c=a||Number.POSITIVE_INFINITY;let u=0;return h;function h(g){return g===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(g),t.exit(s),d):g===null||g===32||g===41||Wx(g)?n(g):(t.enter(r),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),m(g))}function d(g){return g===62?(t.enter(s),t.consume(g),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(t.exit("chunkString"),t.exit(l),d(g)):g===null||g===60||Ue(g)?n(g):(t.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(t.consume(g),f):f(g)}function m(g){return!u&&(g===null||g===41||rn(g))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(r),e(g)):u<c&&g===40?(t.consume(g),u++,m):g===41?(t.consume(g),u--,m):g===null||g===32||g===40||Wx(g)?n(g):(t.consume(g),g===92?y:m)}function y(g){return g===40||g===41||g===92?(t.consume(g),m):m(g)}}function GW(t,e,n,r,i,s){const o=this;let l=0,a;return c;function c(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),u}function u(f){return l>999||f===null||f===91||f===93&&!a||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):Ue(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||Ue(f)||l++>999?(t.exit("chunkString"),u(f)):(t.consume(f),a||(a=!Mt(f)),f===92?d:h)}function d(f){return f===91||f===92||f===93?(t.consume(f),l++,h):h(f)}}function KW(t,e,n,r,i,s){let o;return l;function l(d){return d===34||d===39||d===40?(t.enter(r),t.enter(i),t.consume(d),t.exit(i),o=d===40?41:d,a):n(d)}function a(d){return d===o?(t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):(t.enter(s),c(d))}function c(d){return d===o?(t.exit(s),a(o)):d===null?n(d):Ue(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),St(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===o||d===null||Ue(d)?(t.exit("chunkString"),c(d)):(t.consume(d),d===92?h:u)}function h(d){return d===o||d===92?(t.consume(d),u):u(d)}}function Wg(t,e){let n;return r;function r(i){return Ue(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Mt(i)?St(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const g0e={name:"definition",tokenize:v0e},y0e={partial:!0,tokenize:w0e};function v0e(t,e,n){const r=this;let i;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return GW.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return i=Oo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),a):n(f)}function a(f){return rn(f)?Wg(t,c)(f):c(f)}function c(f){return UW(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(y0e,h,h)(f)}function h(f){return Mt(f)?St(t,d,"whitespace")(f):d(f)}function d(f){return f===null||Ue(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function w0e(t,e,n){return r;function r(l){return rn(l)?Wg(t,i)(l):n(l)}function i(l){return KW(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Mt(l)?St(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Ue(l)?e(l):n(l)}}const x0e={name:"hardBreakEscape",tokenize:b0e};function b0e(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Ue(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const k0e={name:"headingAtx",resolve:S0e,tokenize:C0e};function S0e(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ss(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function C0e(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||rn(u)?(t.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(t.enter("atxHeadingSequence"),a(u)):u===null||Ue(u)?(t.exit("atxHeading"),e(u)):Mt(u)?St(t,l,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function a(u){return u===35?(t.consume(u),a):(t.exit("atxHeadingSequence"),l(u))}function c(u){return u===null||u===35||rn(u)?(t.exit("atxHeadingText"),l(u)):(t.consume(u),c)}}const _0e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sR=["pre","script","style","textarea"],A0e={concrete:!0,name:"htmlFlow",resolveTo:E0e,tokenize:O0e},T0e={partial:!0,tokenize:I0e},M0e={partial:!0,tokenize:N0e};function E0e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function O0e(t,e,n){const r=this;let i,s,o,l,a;return c;function c(E){return u(E)}function u(E){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(E),h}function h(E){return E===33?(t.consume(E),d):E===47?(t.consume(E),s=!0,m):E===63?(t.consume(E),i=3,r.interrupt?e:O):mi(E)?(t.consume(E),o=String.fromCharCode(E),y):n(E)}function d(E){return E===45?(t.consume(E),i=2,f):E===91?(t.consume(E),i=5,l=0,p):mi(E)?(t.consume(E),i=4,r.interrupt?e:O):n(E)}function f(E){return E===45?(t.consume(E),r.interrupt?e:O):n(E)}function p(E){const xe="CDATA[";return E===xe.charCodeAt(l++)?(t.consume(E),l===xe.length?r.interrupt?e:F:p):n(E)}function m(E){return mi(E)?(t.consume(E),o=String.fromCharCode(E),y):n(E)}function y(E){if(E===null||E===47||E===62||rn(E)){const xe=E===47,U=o.toLowerCase();return!xe&&!s&&sR.includes(U)?(i=1,r.interrupt?e(E):F(E)):_0e.includes(o.toLowerCase())?(i=6,xe?(t.consume(E),g):r.interrupt?e(E):F(E)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(E):s?v(E):w(E))}return E===45||Hi(E)?(t.consume(E),o+=String.fromCharCode(E),y):n(E)}function g(E){return E===62?(t.consume(E),r.interrupt?e:F):n(E)}function v(E){return Mt(E)?(t.consume(E),v):N(E)}function w(E){return E===47?(t.consume(E),N):E===58||E===95||mi(E)?(t.consume(E),S):Mt(E)?(t.consume(E),w):N(E)}function S(E){return E===45||E===46||E===58||E===95||Hi(E)?(t.consume(E),S):_(E)}function _(E){return E===61?(t.consume(E),C):Mt(E)?(t.consume(E),_):w(E)}function C(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(t.consume(E),a=E,T):Mt(E)?(t.consume(E),C):I(E)}function T(E){return E===a?(t.consume(E),a=null,L):E===null||Ue(E)?n(E):(t.consume(E),T)}function I(E){return E===null||E===34||E===39||E===47||E===60||E===61||E===62||E===96||rn(E)?_(E):(t.consume(E),I)}function L(E){return E===47||E===62||Mt(E)?w(E):n(E)}function N(E){return E===62?(t.consume(E),$):n(E)}function $(E){return E===null||Ue(E)?F(E):Mt(E)?(t.consume(E),$):n(E)}function F(E){return E===45&&i===2?(t.consume(E),pe):E===60&&i===1?(t.consume(E),de):E===62&&i===4?(t.consume(E),ee):E===63&&i===3?(t.consume(E),O):E===93&&i===5?(t.consume(E),z):Ue(E)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(T0e,X,ie)(E)):E===null||Ue(E)?(t.exit("htmlFlowData"),ie(E)):(t.consume(E),F)}function ie(E){return t.check(M0e,Z,X)(E)}function Z(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),Y}function Y(E){return E===null||Ue(E)?ie(E):(t.enter("htmlFlowData"),F(E))}function pe(E){return E===45?(t.consume(E),O):F(E)}function de(E){return E===47?(t.consume(E),o="",W):F(E)}function W(E){if(E===62){const xe=o.toLowerCase();return sR.includes(xe)?(t.consume(E),ee):F(E)}return mi(E)&&o.length<8?(t.consume(E),o+=String.fromCharCode(E),W):F(E)}function z(E){return E===93?(t.consume(E),O):F(E)}function O(E){return E===62?(t.consume(E),ee):E===45&&i===2?(t.consume(E),O):F(E)}function ee(E){return E===null||Ue(E)?(t.exit("htmlFlowData"),X(E)):(t.consume(E),ee)}function X(E){return t.exit("htmlFlow"),e(E)}}function N0e(t,e,n){const r=this;return i;function i(o){return Ue(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function I0e(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(By,e,n)}}const P0e={name:"htmlText",tokenize:R0e};function R0e(t,e,n){const r=this;let i,s,o;return l;function l(O){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(O),a}function a(O){return O===33?(t.consume(O),c):O===47?(t.consume(O),_):O===63?(t.consume(O),w):mi(O)?(t.consume(O),I):n(O)}function c(O){return O===45?(t.consume(O),u):O===91?(t.consume(O),s=0,p):mi(O)?(t.consume(O),v):n(O)}function u(O){return O===45?(t.consume(O),f):n(O)}function h(O){return O===null?n(O):O===45?(t.consume(O),d):Ue(O)?(o=h,de(O)):(t.consume(O),h)}function d(O){return O===45?(t.consume(O),f):h(O)}function f(O){return O===62?pe(O):O===45?d(O):h(O)}function p(O){const ee="CDATA[";return O===ee.charCodeAt(s++)?(t.consume(O),s===ee.length?m:p):n(O)}function m(O){return O===null?n(O):O===93?(t.consume(O),y):Ue(O)?(o=m,de(O)):(t.consume(O),m)}function y(O){return O===93?(t.consume(O),g):m(O)}function g(O){return O===62?pe(O):O===93?(t.consume(O),g):m(O)}function v(O){return O===null||O===62?pe(O):Ue(O)?(o=v,de(O)):(t.consume(O),v)}function w(O){return O===null?n(O):O===63?(t.consume(O),S):Ue(O)?(o=w,de(O)):(t.consume(O),w)}function S(O){return O===62?pe(O):w(O)}function _(O){return mi(O)?(t.consume(O),C):n(O)}function C(O){return O===45||Hi(O)?(t.consume(O),C):T(O)}function T(O){return Ue(O)?(o=T,de(O)):Mt(O)?(t.consume(O),T):pe(O)}function I(O){return O===45||Hi(O)?(t.consume(O),I):O===47||O===62||rn(O)?L(O):n(O)}function L(O){return O===47?(t.consume(O),pe):O===58||O===95||mi(O)?(t.consume(O),N):Ue(O)?(o=L,de(O)):Mt(O)?(t.consume(O),L):pe(O)}function N(O){return O===45||O===46||O===58||O===95||Hi(O)?(t.consume(O),N):$(O)}function $(O){return O===61?(t.consume(O),F):Ue(O)?(o=$,de(O)):Mt(O)?(t.consume(O),$):L(O)}function F(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),i=O,ie):Ue(O)?(o=F,de(O)):Mt(O)?(t.consume(O),F):(t.consume(O),Z)}function ie(O){return O===i?(t.consume(O),i=void 0,Y):O===null?n(O):Ue(O)?(o=ie,de(O)):(t.consume(O),ie)}function Z(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||rn(O)?L(O):(t.consume(O),Z)}function Y(O){return O===47||O===62||rn(O)?L(O):n(O)}function pe(O){return O===62?(t.consume(O),t.exit("htmlTextData"),t.exit("htmlText"),e):n(O)}function de(O){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),W}function W(O){return Mt(O)?St(t,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):z(O)}function z(O){return t.enter("htmlTextData"),o(O)}}const vA={name:"labelEnd",resolveAll:$0e,resolveTo:F0e,tokenize:z0e},D0e={tokenize:j0e},L0e={tokenize:H0e},B0e={tokenize:V0e};function $0e(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Ss(t,0,t.length,n),t}function F0e(t,e){let n=t.length,r=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const a={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",a,e],["enter",c,e]],l=Fs(l,t.slice(s+1,s+r+3)),l=Fs(l,[["enter",u,e]]),l=Fs(l,S5(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),l=Fs(l,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),l=Fs(l,t.slice(o+1)),l=Fs(l,[["exit",a,e]]),Ss(t,s,t.length,l),t}function z0e(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(d){return s?s._inactive?h(d):(o=r.parser.defined.includes(Oo(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelEnd"),a):n(d)}function a(d){return d===40?t.attempt(D0e,u,o?u:h)(d):d===91?t.attempt(L0e,u,o?c:h)(d):o?u(d):h(d)}function c(d){return t.attempt(B0e,u,h)(d)}function u(d){return e(d)}function h(d){return s._balanced=!0,n(d)}}function j0e(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return rn(h)?Wg(t,s)(h):s(h)}function s(h){return h===41?u(h):UW(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return rn(h)?Wg(t,a)(h):u(h)}function l(h){return n(h)}function a(h){return h===34||h===39||h===40?KW(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return rn(h)?Wg(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function H0e(t,e,n){const r=this;return i;function i(l){return GW.call(r,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Oo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function V0e(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const W0e={name:"labelStartImage",resolveAll:vA.resolveAll,tokenize:q0e};function q0e(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const U0e={name:"labelStartLink",resolveAll:vA.resolveAll,tokenize:G0e};function G0e(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Qk={name:"lineEnding",tokenize:K0e};function K0e(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),St(t,e,"linePrefix")}}const Dw={name:"thematicBreak",tokenize:J0e};function J0e(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,l(c)}function l(c){return c===i?(t.enter("thematicBreakSequence"),a(c)):r>=3&&(c===null||Ue(c))?(t.exit("thematicBreak"),e(c)):n(c)}function a(c){return c===i?(t.consume(c),r++,a):(t.exit("thematicBreakSequence"),Mt(c)?St(t,l,"whitespace")(c):l(c))}}const Ni={continuation:{tokenize:Z0e},exit:tpe,name:"list",tokenize:Q0e},Y0e={partial:!0,tokenize:npe},X0e={partial:!0,tokenize:epe};function Q0e(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:jS(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Dw,n,c)(f):c(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(f)}return n(f)}function a(f){return jS(f)&&++o<10?(t.consume(f),a):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(By,r.interrupt?n:u,t.attempt(Y0e,d,h))}function u(f){return r.containerState.initialBlankLine=!0,s++,d(f)}function h(f){return Mt(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),d):n(f)}function d(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function Z0e(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(By,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,St(t,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Mt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(X0e,e,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,St(t,t.attempt(Ni,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function epe(t,e,n){const r=this;return St(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function tpe(t){t.exit(this.containerState.type)}function npe(t,e,n){const r=this;return St(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Mt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const oR={name:"setextUnderline",resolveTo:rpe,tokenize:ipe};function rpe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function ipe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===i?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),Mt(c)?St(t,a,"lineSuffix")(c):a(c))}function a(c){return c===null||Ue(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const spe={tokenize:ope};function ope(t){const e=this,n=t.attempt(By,r,t.attempt(this.parser.constructs.flowInitial,i,St(t,t.attempt(this.parser.constructs.flow,i,t.attempt(h0e,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const lpe={resolveAll:YW()},ape=JW("string"),cpe=JW("text");function JW(t){return{resolveAll:YW(t==="text"?upe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(u){return c(u)?s(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),a}function a(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),a)}function c(u){if(u===null)return!0;const h=i[u];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function YW(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function upe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,l=0,a;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(c===-2)a=!0,l++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const c={type:n===t.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const hpe={42:Ni,43:Ni,45:Ni,48:Ni,49:Ni,50:Ni,51:Ni,52:Ni,53:Ni,54:Ni,55:Ni,56:Ni,57:Ni,62:HW},dpe={91:g0e},fpe={[-2]:Xk,[-1]:Xk,32:Xk},ppe={35:k0e,42:Dw,45:[oR,Dw],60:A0e,61:oR,95:Dw,96:iR,126:iR},mpe={38:WW,92:VW},gpe={[-5]:Qk,[-4]:Qk,[-3]:Qk,33:W0e,38:WW,42:HS,60:[Ufe,P0e],91:U0e,92:[x0e,VW],93:vA,95:HS,96:s0e},ype={null:[HS,lpe]},vpe={null:[42,95]},wpe={null:[]},xpe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:vpe,contentInitial:dpe,disable:wpe,document:hpe,flow:ppe,flowInitial:fpe,insideSpan:ype,string:mpe,text:gpe},Symbol.toStringTag,{value:"Module"}));function bpe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const a={attempt:T(_),check:T(C),consume:v,enter:w,exit:S,interrupt:T(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:t,previous:null,sliceSerialize:d,sliceStream:f,write:h};let u=e.tokenize.call(c,a);return e.resolveAll&&s.push(e),c;function h($){return o=Fs(o,$),y(),o[o.length-1]!==null?[]:(I(e,0),c.events=S5(s,c.events,c),c.events)}function d($,F){return Spe(f($),F)}function f($){return kpe(o,$)}function p(){const{_bufferIndex:$,_index:F,line:ie,column:Z,offset:Y}=r;return{_bufferIndex:$,_index:F,line:ie,column:Z,offset:Y}}function m($){i[$.line]=$.column,N()}function y(){let $;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for($=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===$&&r._bufferIndex<F.length;)g(F.charCodeAt(r._bufferIndex));else g(F)}}function g($){u=u($)}function v($){Ue($)?(r.line++,r.column=1,r.offset+=$===-3?2:1,N()):$!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=$}function w($,F){const ie=F||{};return ie.type=$,ie.start=p(),c.events.push(["enter",ie,c]),l.push(ie),ie}function S($){const F=l.pop();return F.end=p(),c.events.push(["exit",F,c]),F}function _($,F){I($,F.from)}function C($,F){F.restore()}function T($,F){return ie;function ie(Z,Y,pe){let de,W,z,O;return Array.isArray(Z)?X(Z):"tokenize"in Z?X([Z]):ee(Z);function ee(ue){return ve;function ve(Oe){const st=Oe!==null&&ue[Oe],vt=Oe!==null&&ue.null,_t=[...Array.isArray(st)?st:st?[st]:[],...Array.isArray(vt)?vt:vt?[vt]:[]];return X(_t)(Oe)}}function X(ue){return de=ue,W=0,ue.length===0?pe:E(ue[W])}function E(ue){return ve;function ve(Oe){return O=L(),z=ue,ue.partial||(c.currentConstruct=ue),ue.name&&c.parser.constructs.disable.null.includes(ue.name)?U():ue.tokenize.call(F?Object.assign(Object.create(c),F):c,a,xe,U)(Oe)}}function xe(ue){return $(z,O),Y}function U(ue){return O.restore(),++W<de.length?E(de[W]):pe}}}function I($,F){$.resolveAll&&!s.includes($)&&s.push($),$.resolve&&Ss(c.events,F,c.events.length-F,$.resolve(c.events.slice(F),c)),$.resolveTo&&(c.events=$.resolveTo(c.events,c))}function L(){const $=p(),F=c.previous,ie=c.currentConstruct,Z=c.events.length,Y=Array.from(l);return{from:Z,restore:pe};function pe(){r=$,c.previous=F,c.currentConstruct=ie,c.events.length=Z,l=Y,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function kpe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function Spe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function Cpe(t){const r={constructs:zW([xpe,...(t||{}).extensions||[]]),content:i(Ffe),defined:[],document:i(jfe),flow:i(spe),lazy:{},string:i(ape),text:i(cpe)};return r;function i(s){return o;function o(l){return bpe(r,s,l)}}}function _pe(t){for(;!qW(t););return t}const lR=/[\0\t\n\r]/g;function Ape(){let t=1,e="",n=!0,r;return i;function i(s,o,l){const a=[];let c,u,h,d,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(lR.lastIndex=h,c=lR.exec(s),d=c&&c.index!==void 0?c.index:s.length,f=s.charCodeAt(d),!c){e=s.slice(h);break}if(f===10&&h===d&&r)a.push(-3),r=void 0;else switch(r&&(a.push(-5),r=void 0),h<d&&(a.push(s.slice(h,d)),t+=d-h),f){case 0:{a.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,a.push(-2);t++<u;)a.push(-1);break}case 10:{a.push(-4),t=1;break}default:r=!0,t=1}h=d+1}return l&&(r&&a.push(-5),e&&a.push(e),a.push(null)),a}}const Tpe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function XW(t){return t.replace(Tpe,Mpe)}function Mpe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return jW(n.slice(s?2:1),s?16:10)}return yA(n)||t}function qg(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?aR(t.position):"start"in t||"end"in t?aR(t):"line"in t||"column"in t?VS(t):""}function VS(t){return cR(t&&t.line)+":"+cR(t&&t.column)}function aR(t){return VS(t&&t.start)+"-"+VS(t&&t.end)}function cR(t){return t&&typeof t=="number"?t:1}const QW={}.hasOwnProperty;function Epe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Ope(n)(_pe(Cpe(n).document().write(Ape()(t,e,!0))))}function Ope(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ke),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(G),blockQuote:s(vt),characterEscape:L,characterReference:L,codeFenced:s(_t),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(_t,o),codeText:s(ln,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(R),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(B),hardBreakEscape:s(ce),hardBreakTrailing:s(ce),htmlFlow:s(se,o),htmlFlowData:L,htmlText:s(se,o),htmlTextData:L,image:s(ae),label:o,link:s(ke),listItem:s(be),listItemValue:d,listOrdered:s(Se,h),listUnordered:s(Se),paragraph:s(fe),reference:E,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(G),strong:s(Ve),thematicBreak:s(De)},exit:{atxHeading:a(),atxHeadingSequence:_,autolink:a(),autolinkEmail:st,autolinkProtocol:Oe,blockQuote:a(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:ue,characterReference:ve,codeFenced:a(y),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:N,codeIndented:a(g),codeText:a(Y),codeTextData:N,data:N,definition:a(),definitionDestinationString:S,definitionLabelString:v,definitionTitleString:w,emphasis:a(),hardBreakEscape:a(F),hardBreakTrailing:a(F),htmlFlow:a(ie),htmlFlowData:N,htmlText:a(Z),htmlTextData:N,image:a(de),label:z,labelText:W,lineEnding:$,link:a(pe),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:xe,resourceDestinationString:O,resourceTitleString:ee,resource:X,setextHeading:a(I),setextHeadingLineSequence:T,setextHeadingText:C,strong:a(),thematicBreak:a()}};ZW(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(V){let ne={type:"root",children:[]};const Ee={stack:[ne],tokenStack:[],config:e,enter:l,exit:c,buffer:o,resume:u,data:n},Ie=[];let lt=-1;for(;++lt<V.length;)if(V[lt][1].type==="listOrdered"||V[lt][1].type==="listUnordered")if(V[lt][0]==="enter")Ie.push(lt);else{const Ot=Ie.pop();lt=i(V,Ot,lt)}for(lt=-1;++lt<V.length;){const Ot=e[V[lt][0]];QW.call(Ot,V[lt][1].type)&&Ot[V[lt][1].type].call(Object.assign({sliceSerialize:V[lt][2].sliceSerialize},Ee),V[lt][1])}if(Ee.tokenStack.length>0){const Ot=Ee.tokenStack[Ee.tokenStack.length-1];(Ot[1]||uR).call(Ee,void 0,Ot[0])}for(ne.position={start:oc(V.length>0?V[0][1].start:{line:1,column:1,offset:0}),end:oc(V.length>0?V[V.length-2][1].end:{line:1,column:1,offset:0})},lt=-1;++lt<e.transforms.length;)ne=e.transforms[lt](ne)||ne;return ne}function i(V,ne,Ee){let Ie=ne-1,lt=-1,Ot=!1,Yt,Ft,bn,pr;for(;++Ie<=Ee;){const Nt=V[Ie];switch(Nt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Nt[0]==="enter"?lt++:lt--,pr=void 0;break}case"lineEndingBlank":{Nt[0]==="enter"&&(Yt&&!pr&&!lt&&!bn&&(bn=Ie),pr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pr=void 0}if(!lt&&Nt[0]==="enter"&&Nt[1].type==="listItemPrefix"||lt===-1&&Nt[0]==="exit"&&(Nt[1].type==="listUnordered"||Nt[1].type==="listOrdered")){if(Yt){let kn=Ie;for(Ft=void 0;kn--;){const _r=V[kn];if(_r[1].type==="lineEnding"||_r[1].type==="lineEndingBlank"){if(_r[0]==="exit")continue;Ft&&(V[Ft][1].type="lineEndingBlank",Ot=!0),_r[1].type="lineEnding",Ft=kn}else if(!(_r[1].type==="linePrefix"||_r[1].type==="blockQuotePrefix"||_r[1].type==="blockQuotePrefixWhitespace"||_r[1].type==="blockQuoteMarker"||_r[1].type==="listItemIndent"))break}bn&&(!Ft||bn<Ft)&&(Yt._spread=!0),Yt.end=Object.assign({},Ft?V[Ft][1].start:Nt[1].end),V.splice(Ft||Ie,0,["exit",Yt,Nt[2]]),Ie++,Ee++}if(Nt[1].type==="listItemPrefix"){const kn={type:"listItem",_spread:!1,start:Object.assign({},Nt[1].start),end:void 0};Yt=kn,V.splice(Ie,0,["enter",kn,Nt[2]]),Ie++,Ee++,bn=void 0,pr=!0}}}return V[ne][1]._spread=Ot,Ee}function s(V,ne){return Ee;function Ee(Ie){l.call(this,V(Ie),Ie),ne&&ne.call(this,Ie)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(V,ne,Ee){this.stack[this.stack.length-1].children.push(V),this.stack.push(V),this.tokenStack.push([ne,Ee||void 0]),V.position={start:oc(ne.start),end:void 0}}function a(V){return ne;function ne(Ee){V&&V.call(this,Ee),c.call(this,Ee)}}function c(V,ne){const Ee=this.stack.pop(),Ie=this.tokenStack.pop();if(Ie)Ie[0].type!==V.type&&(ne?ne.call(this,V,Ie[0]):(Ie[1]||uR).call(this,V,Ie[0]));else throw new Error("Cannot close `"+V.type+"` ("+qg({start:V.start,end:V.end})+"): its not open");Ee.position.end=oc(V.end)}function u(){return gA(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(V){if(this.data.expectingFirstListItemValue){const ne=this.stack[this.stack.length-2];ne.start=Number.parseInt(this.sliceSerialize(V),10),this.data.expectingFirstListItemValue=void 0}}function f(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.lang=V}function p(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.meta=V}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.value=V.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.value=V.replace(/(\r?\n|\r)$/g,"")}function v(V){const ne=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=ne,Ee.identifier=Oo(this.sliceSerialize(V)).toLowerCase()}function w(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.title=V}function S(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.url=V}function _(V){const ne=this.stack[this.stack.length-1];if(!ne.depth){const Ee=this.sliceSerialize(V).length;ne.depth=Ee}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function T(V){const ne=this.stack[this.stack.length-1];ne.depth=this.sliceSerialize(V).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function L(V){const Ee=this.stack[this.stack.length-1].children;let Ie=Ee[Ee.length-1];(!Ie||Ie.type!=="text")&&(Ie=_e(),Ie.position={start:oc(V.start),end:void 0},Ee.push(Ie)),this.stack.push(Ie)}function N(V){const ne=this.stack.pop();ne.value+=this.sliceSerialize(V),ne.position.end=oc(V.end)}function $(V){const ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=ne.children[ne.children.length-1];Ee.position.end=oc(V.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ne.type)&&(L.call(this,V),N.call(this,V))}function F(){this.data.atHardBreak=!0}function ie(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.value=V}function Z(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.value=V}function Y(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.value=V}function pe(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const ne=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=ne,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function de(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const ne=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=ne,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function W(V){const ne=this.sliceSerialize(V),Ee=this.stack[this.stack.length-2];Ee.label=XW(ne),Ee.identifier=Oo(ne).toLowerCase()}function z(){const V=this.stack[this.stack.length-1],ne=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const Ie=V.children;Ee.children=Ie}else Ee.alt=ne}function O(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.url=V}function ee(){const V=this.resume(),ne=this.stack[this.stack.length-1];ne.title=V}function X(){this.data.inReference=void 0}function E(){this.data.referenceType="collapsed"}function xe(V){const ne=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=ne,Ee.identifier=Oo(this.sliceSerialize(V)).toLowerCase(),this.data.referenceType="full"}function U(V){this.data.characterReferenceType=V.type}function ue(V){const ne=this.sliceSerialize(V),Ee=this.data.characterReferenceType;let Ie;Ee?(Ie=jW(ne,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ie=yA(ne);const lt=this.stack[this.stack.length-1];lt.value+=Ie}function ve(V){const ne=this.stack.pop();ne.position.end=oc(V.end)}function Oe(V){N.call(this,V);const ne=this.stack[this.stack.length-1];ne.url=this.sliceSerialize(V)}function st(V){N.call(this,V);const ne=this.stack[this.stack.length-1];ne.url="mailto:"+this.sliceSerialize(V)}function vt(){return{type:"blockquote",children:[]}}function _t(){return{type:"code",lang:null,meta:null,value:""}}function ln(){return{type:"inlineCode",value:""}}function R(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function B(){return{type:"emphasis",children:[]}}function G(){return{type:"heading",depth:0,children:[]}}function ce(){return{type:"break"}}function se(){return{type:"html",value:""}}function ae(){return{type:"image",title:null,url:"",alt:null}}function ke(){return{type:"link",title:null,url:"",children:[]}}function Se(V){return{type:"list",ordered:V.type==="listOrdered",start:null,spread:V._spread,children:[]}}function be(V){return{type:"listItem",spread:V._spread,checked:null,children:[]}}function fe(){return{type:"paragraph",children:[]}}function Ve(){return{type:"strong",children:[]}}function _e(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function oc(t){return{line:t.line,column:t.column,offset:t.offset}}function ZW(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?ZW(t,r):Npe(t,r)}}function Npe(t,e){let n;for(n in e)if(QW.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function uR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+qg({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+qg({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+qg({start:e.start,end:e.end})+") is still open")}function WS(t){const e=this;e.parser=n;function n(r){return Epe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}const hR={}.hasOwnProperty;function Ipe(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const l=r.handlers;if(i&&hR.call(i,t)){const a=String(i[t]);o=hR.call(l,a)?l[a]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Ppe={}.hasOwnProperty;function eq(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)eq(t,e.extensions[n]);for(r in e)if(Ppe.call(e,r))switch(r){case"extensions":break;case"unsafe":{dR(t[r],e[r]);break}case"join":{dR(t[r],e[r]);break}case"handlers":{Rpe(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function dR(t,e){e&&t.push(...e)}function Rpe(t,e){e&&Object.assign(t,e)}function Dpe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Lpe);return i(),o}function Lpe(t,e,n){return">"+(n?"":" ")+t}function tq(t,e){return fR(t,e.inConstruct,!0)&&!fR(t,e.notInConstruct,!1)}function fR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function pR(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&tq(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function nq(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function qS(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Bpe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function $pe(t,e,n,r){const i=Bpe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(qS(t,n)){const h=n.enter("codeIndented"),d=n.indentLines(s,Fpe);return h(),d}const l=n.createTracker(r),a=i.repeat(Math.max(nq(s,i)+1,3)),c=n.enter("codeFenced");let u=l.move(a);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=l.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...l.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=l.move(" "),u+=l.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...l.current()})),h()}return u+=l.move(`
`),s&&(u+=l.move(s+`
`)),u+=l.move(a),c(),u}function Fpe(t,e,n){return(n?"":"    ")+t}function wA(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function zpe(t,e,n,r){const i=wA(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const a=n.createTracker(r);let c=a.move("[");return c+=a.move(n.safe(n.associationId(t),{before:c,after:"]",...a.current()})),c+=a.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=a.move(" "+i),c+=a.move(n.safe(t.title,{before:c,after:i,...a.current()})),c+=a.move(i),l()),o(),c}function jpe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function xu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function qx(t,e,n){const r=O0(t),i=O0(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}rq.peek=Hpe;function rq(t,e,n,r){const i=jpe(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(i);let a=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const c=a.charCodeAt(0),u=qx(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(a=xu(c)+a.slice(1));const h=a.charCodeAt(a.length-1),d=qx(r.after.charCodeAt(0),h,i);d.inside&&(a=a.slice(0,-1)+xu(h));const f=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},l+a+f}function Hpe(t,e,n){return n.options.emphasis||"*"}const C5=function(t){if(t==null)return Upe;if(typeof t=="function")return _5(t);if(typeof t=="object")return Array.isArray(t)?Vpe(t):Wpe(t);if(typeof t=="string")return qpe(t);throw new Error("Expected function, string, or object as test")};function Vpe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=C5(t[n]);return _5(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Wpe(t){const e=t;return _5(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function qpe(t){return _5(e);function e(n){return n&&n.type===t}}function _5(t){return e;function e(n,r,i){return!!(Gpe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Upe(){return!0}function Gpe(t){return t!==null&&typeof t=="object"&&"type"in t}const iq=[],Kpe=!0,US=!1,GS="skip";function xA(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=C5(i),o=r?-1:1;l(t,void 0,[])();function l(a,c,u){const h=a&&typeof a=="object"?a:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(a.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=iq,p,m,y;if((!e||s(a,c,u[u.length-1]||void 0))&&(f=Jpe(n(a,u)),f[0]===US))return f;if("children"in a&&a.children){const g=a;if(g.children&&f[0]!==GS)for(m=(r?g.children.length:-1)+o,y=u.concat(g);m>-1&&m<g.children.length;){const v=g.children[m];if(p=l(v,m,y)(),p[0]===US)return p;m=typeof p[1]=="number"?p[1]:m+o}}return f}}}function Jpe(t){return Array.isArray(t)?t:typeof t=="number"?[Kpe,t]:t==null?iq:[t]}function Du(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),xA(t,s,l,i);function l(a,c){const u=c[c.length-1],h=u?u.children.indexOf(a):void 0;return o(a,h,u)}}function sq(t,e){let n=!1;return Du(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,US}),!!((!t.depth||t.depth<3)&&gA(t)&&(e.options.setext||n))}function Ype(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(sq(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),d=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),a=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=xu(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),a(),l(),c}oq.peek=Xpe;function oq(t){return t.value||""}function Xpe(){return"<"}lq.peek=Qpe;function lq(t,e,n,r){const i=wA(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const a=n.createTracker(r);let c=a.move("![");return c+=a.move(n.safe(t.alt,{before:c,after:"]",...a.current()})),c+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=a.move(" "+i),c+=a.move(n.safe(t.title,{before:c,after:i,...a.current()})),c+=a.move(i),l()),c+=a.move(")"),o(),c}function Qpe(){return"!"}aq.peek=Zpe;function aq(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let a=l.move("![");const c=n.safe(t.alt,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?a+=l.move(h+"]"):i==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function Zpe(){return"!"}cq.peek=eme;function cq(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let a;if(o.atBreak)for(;a=l.exec(r);){let c=a.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(a.index+1)}}return i+r+i}function eme(){return"`"}function uq(t,e){const n=gA(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}hq.peek=tme;function hq(t,e,n,r){const i=wA(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,a;if(uq(t,n)){const u=n.stack;n.stack=[],l=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),l(),n.stack=u,h}l=n.enter("link"),a=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(a=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),a()),c+=o.move(")"),l(),c}function tme(t,e,n){return uq(t,n)?"<":"["}dq.peek=nme;function dq(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let a=l.move("[");const c=n.containerPhrasing(t,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?a+=l.move(h+"]"):i==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function nme(){return"["}function bA(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function rme(t){const e=bA(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function ime(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function fq(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function sme(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?ime(n):bA(n);const l=t.ordered?o==="."?")":".":rme(n);let a=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(a=!0),fq(n)===o&&u){let h=-1;for(;++h<t.children.length;){const d=t.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(o=l),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function ome(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function lme(t,e,n,r){const i=ome(n);let s=n.bulletCurrent||bA(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const a=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,l.current()),u);return a(),c;function u(h,d,f){return d?(f?"":" ".repeat(o))+h:(f?s:s+" ".repeat(o-s.length))+h}}function ame(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const cme=C5(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ume(t,e,n,r){return(t.children.some(function(o){return cme(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function hme(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}pq.peek=dme;function pq(t,e,n,r){const i=hme(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(i+i);let a=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const c=a.charCodeAt(0),u=qx(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(a=xu(c)+a.slice(1));const h=a.charCodeAt(a.length-1),d=qx(r.after.charCodeAt(0),h,i);d.inside&&(a=a.slice(0,-1)+xu(h));const f=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:u.outside},l+a+f}function dme(t,e,n){return n.options.strong||"*"}function fme(t,e,n,r){return n.safe(t.value,r)}function pme(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function mme(t,e,n){const r=(fq(n)+(n.options.ruleSpaces?" ":"")).repeat(pme(n));return n.options.ruleSpaces?r.slice(0,-1):r}const kA={blockquote:Dpe,break:pR,code:$pe,definition:zpe,emphasis:rq,hardBreak:pR,heading:Ype,html:oq,image:lq,imageReference:aq,inlineCode:cq,link:hq,linkReference:dq,list:sme,listItem:lme,paragraph:ame,root:ume,strong:pq,text:fme,thematicBreak:mme},gme=[yme];function yme(t,e,n,r){if(e.type==="code"&&qS(e,r)&&(t.type==="list"||t.type===e.type&&qS(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&sq(e,r))?void 0:n.spread?1:0}const Gu=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],vme=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Gu},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Gu},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Gu},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Gu},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Gu},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Gu},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Gu},{atBreak:!0,character:"~"}];function wme(t){return t.label||!t.identifier?t.label||"":XW(t.identifier)}function xme(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function bme(t,e,n){const r=e.indexStack,i=t.children||[],s=[];let o=-1,l=n.before,a;r.push(-1);let c=e.createTracker(n);for(;++o<i.length;){const u=i[o];let h;if(r[r.length-1]=o,o+1<i.length){let p=e.handle.handlers[i[o+1].type];p&&p.peek&&(p=p.peek),h=p?p(i[o+1],t,e,{before:"",after:"",...c.current()}).charAt(0):""}else h=n.after;s.length>0&&(l==="\r"||l===`
`)&&u.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),l=" ",c=e.createTracker(n),c.move(s.join("")));let d=e.handle(u,t,e,{...c.current(),after:h,before:l});a&&a===d.slice(0,1)&&(d=xu(a.charCodeAt(0))+d.slice(1));const f=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,a=void 0,f&&(s.length>0&&f.before&&l===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+xu(l.charCodeAt(0))),f.after&&(a=h)),c.move(d),s.push(d),l=d.slice(-1)}return r.pop(),s.join("")}function kme(t,e,n){const r=e.indexStack,i=t.children||[],s=e.createTracker(n),o=[];let l=-1;for(r.push(-1);++l<i.length;){const a=i[l];r[r.length-1]=l,o.push(s.move(e.handle(a,t,e,{before:`
`,after:`
`,...s.current()}))),a.type!=="list"&&(e.bulletLastUsed=void 0),l<i.length-1&&o.push(s.move(Sme(a,i[l+1],t,e)))}return r.pop(),o.join("")}function Sme(t,e,n,r){let i=r.join.length;for(;i--;){const s=r.join[i](t,e,n,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}const Cme=/\r?\n|\r/g;function _me(t,e){const n=[];let r=0,i=0,s;for(;s=Cme.exec(t);)o(t.slice(r,s.index)),n.push(s[0]),r=s.index+s[0].length,i++;return o(t.slice(r)),n.join("");function o(l){n.push(e(l,i,!l))}}function Ame(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),i=[],s=[],o={};let l=-1;for(;++l<t.unsafe.length;){const u=t.unsafe[l];if(!tq(t.stack,u))continue;const h=t.compilePattern(u);let d;for(;d=h.exec(r);){const f="before"in u||!!u.atBreak,p="after"in u,m=d.index+(f?d[1].length:0);i.includes(m)?(o[m].before&&!f&&(o[m].before=!1),o[m].after&&!p&&(o[m].after=!1)):(i.push(m),o[m]={before:f,after:p})}}i.sort(Tme);let a=n.before?n.before.length:0;const c=r.length-(n.after?n.after.length:0);for(l=-1;++l<i.length;){const u=i[l];u<a||u>=c||u+1<c&&i[l+1]===u+1&&o[u].after&&!o[u+1].before&&!o[u+1].after||i[l-1]===u-1&&o[u].before&&!o[u-1].before&&!o[u-1].after||(a!==u&&s.push(mR(r.slice(a,u),"\\")),a=u,/[!-/:-@[-`{-~]/.test(r.charAt(u))&&(!n.encode||!n.encode.includes(r.charAt(u)))?s.push("\\"):(s.push(xu(r.charCodeAt(u))),a++))}return s.push(mR(r.slice(a,c),n.after)),s.join("")}function Tme(t,e){return t-e}function mR(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],s=t+e;let o=-1,l=0,a;for(;a=n.exec(s);)r.push(a.index);for(;++o<r.length;)l!==r[o]&&i.push(t.slice(l,r[o])),i.push("\\"),l=r[o];return i.push(t.slice(l)),i.join("")}function Mme(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,i=n.line||1,s=n.column||1;return{move:a,current:o,shift:l};function o(){return{now:{line:i,column:s},lineShift:r}}function l(c){r+=c}function a(c){const u=c||"",h=u.split(/\r?\n|\r/g),d=h[h.length-1];return i+=h.length-1,s=h.length===1?s+d.length:1+d.length+r,u}}function Eme(t,e){const n=e||{},r={associationId:wme,containerPhrasing:Pme,containerFlow:Rme,createTracker:Mme,compilePattern:xme,enter:s,handlers:{...kA},handle:void 0,indentLines:_me,indexStack:[],join:[...gme],options:{},safe:Dme,stack:[],unsafe:[...vme]};eq(r,n),r.options.tightDefinitions&&r.join.push(Ime),r.handle=Ipe("type",{invalid:Ome,unknown:Nme,handlers:r.handlers});let i=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function s(o){return r.stack.push(o),l;function l(){r.stack.pop()}}}function Ome(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function Nme(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function Ime(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function Pme(t,e){return bme(t,this,e)}function Rme(t,e){return kme(t,this,e)}function Dme(t,e){return Ame(this,t,e)}function KS(t){const e=this;e.compiler=n;function n(r){return Eme(r,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}}function gR(t){if(t)throw t}var Lw=Object.prototype.hasOwnProperty,mq=Object.prototype.toString,yR=Object.defineProperty,vR=Object.getOwnPropertyDescriptor,wR=function(e){return typeof Array.isArray=="function"?Array.isArray(e):mq.call(e)==="[object Array]"},xR=function(e){if(!e||mq.call(e)!=="[object Object]")return!1;var n=Lw.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Lw.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Lw.call(e,i)},bR=function(e,n){yR&&n.name==="__proto__"?yR(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},kR=function(e,n){if(n==="__proto__")if(Lw.call(e,n)){if(vR)return vR(e,n).value}else return;return e[n]},Lme=function t(){var e,n,r,i,s,o,l=arguments[0],a=1,c=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},a=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});a<c;++a)if(e=arguments[a],e!=null)for(n in e)r=kR(l,n),i=kR(e,n),l!==i&&(u&&i&&(xR(i)||(s=wR(i)))?(s?(s=!1,o=r&&wR(r)?r:[]):o=r&&xR(r)?r:{},bR(l,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&bR(l,{name:n,newValue:i}));return l};const Zk=EC(Lme);function JS(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Bme(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(a,...c){const u=t[++s];let h=-1;if(a){o(a);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?$me(u,l)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function $me(t,e){let n;return r;function r(...o){const l=t.length>o.length;let a;l&&o.push(i);try{a=t.apply(this,o)}catch(c){const u=c;if(l&&n)throw u;return i(u)}l||(a&&a.then&&typeof a.then=="function"?a.then(s,i):a instanceof Error?i(a):s(a))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}class Xi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const a=r.indexOf(":");a===-1?s.ruleId=r:(s.source=r.slice(0,a),s.ruleId=r.slice(a+1))}if(!s.place&&s.ancestors&&s.ancestors){const a=s.ancestors[s.ancestors.length-1];a&&(s.place=a.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=qg(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Xi.prototype.file="";Xi.prototype.name="";Xi.prototype.reason="";Xi.prototype.message="";Xi.prototype.stack="";Xi.prototype.column=void 0;Xi.prototype.line=void 0;Xi.prototype.ancestors=void 0;Xi.prototype.cause=void 0;Xi.prototype.fatal=void 0;Xi.prototype.place=void 0;Xi.prototype.ruleId=void 0;Xi.prototype.source=void 0;const hl={basename:Fme,dirname:zme,extname:jme,join:Hme,sep:"/"};function Fme(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');$y(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function zme(t){if($y(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function jme(t){$y(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Hme(...t){let e=-1,n;for(;++e<t.length;)$y(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Vme(n)}function Vme(t){$y(t);const e=t.codePointAt(0)===47;let n=Wme(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Wme(t,e){let n="",r=0,i=-1,s=0,o=-1,l,a;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(a=n.lastIndexOf("/"),a!==n.length-1){a<0?(n="",r=0):(n=n.slice(0,a),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function $y(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const qme={cwd:Ume};function Ume(){return"/"}function YS(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Gme(t){if(typeof t=="string")t=new URL(t);else if(!YS(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Kme(t)}function Kme(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const e6=["history","path","basename","stem","extname","dirname"];class Jme{constructor(e){let n;e?YS(e)?n={path:e}:typeof e=="string"||Yme(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":qme.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<e6.length;){const s=e6[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)e6.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?hl.basename(this.path):void 0}set basename(e){n6(e,"basename"),t6(e,"basename"),this.path=hl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?hl.dirname(this.path):void 0}set dirname(e){SR(this.basename,"dirname"),this.path=hl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?hl.extname(this.path):void 0}set extname(e){if(t6(e,"extname"),SR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){YS(e)&&(e=Gme(e)),n6(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?hl.basename(this.path,this.extname):void 0}set stem(e){n6(e,"stem"),t6(e,"stem"),this.path=hl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Xi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function t6(t,e){if(t&&t.includes(hl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+hl.sep+"`")}function n6(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function SR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Yme(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Xme=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Qme={}.hasOwnProperty;class SA extends Xme{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Bme()}copy(){const e=new SA;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Zk(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(s6("data",this.frozen),this.namespace[e]=n,this):Qme.call(this.namespace,e)&&this.namespace[e]||void 0:e?(s6("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=g2(e),r=this.parser||this.Parser;return r6("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),r6("process",this.parser||this.Parser),i6("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=g2(e),a=r.parse(l);r.run(a,l,function(u,h,d){if(u||!h||!d)return c(u);const f=h,p=r.stringify(f,d);ege(p)?d.value=p:d.result=p,c(u,d)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),r6("processSync",this.parser||this.Parser),i6("processSync",this.compiler||this.Compiler),this.process(e,i),_R("processSync","process",n),r;function i(s,o){n=!0,gR(s),r=o}}run(e,n,r){CR(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const a=g2(n);i.run(e,a,c);function c(u,h,d){const f=h||e;u?l(u):o?o(f):r(void 0,f,d)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),_R("runSync","run",r),i;function s(o,l){gR(o),i=l,r=!0}}stringify(e,n){this.freeze();const r=g2(n),i=this.compiler||this.Compiler;return i6("stringify",i),CR(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(s6("use",this.frozen),e!=null)if(typeof e=="function")a(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")a(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;a(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(i.settings=Zk(!0,i.settings,c.settings))}function l(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function a(c,u){let h=-1,d=-1;for(;++h<r.length;)if(r[h][0]===c){d=h;break}if(d===-1)r.push([c,...u]);else if(u.length>0){let[f,...p]=u;const m=r[d][1];JS(m)&&JS(f)&&(f=Zk(!0,m,f)),r[d]=[c,f,...p]}}}}const XS=new SA().freeze();function r6(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function i6(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function s6(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function CR(t){if(!JS(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function _R(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function g2(t){return Zme(t)?t:new Jme(t)}function Zme(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ege(t){return typeof t=="string"||tge(t)}function tge(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}var gq=t=>{throw TypeError(t)},yq=(t,e,n)=>e.has(t)||gq("Cannot "+n),kt=(t,e,n)=>(yq(t,e,"read from private field"),n?n.call(t):e.get(t)),Jn=(t,e,n)=>e.has(t)?gq("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),yn=(t,e,n,r)=>(yq(t,e,"write to private field"),e.set(t,n),n),ol,Cm,Bw,$w,Fw,_m,Am,ia,Tm,zw,jw,Mm,Hw,Em,Vw,Ww,ef,ch,qw,Om;class vq{}class wq{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=e=>{var n;(n=this.top())==null||n.push(e)},this.open=e=>{this.elements.push(e)},this.close=()=>{const e=this.elements.pop();if(!e)throw MW();return e}}}class CA extends vq{constructor(e,n,r){super(),this.type=e,this.content=n,this.attrs=r}push(e,...n){this.content.push(e,...n)}pop(){return this.content.pop()}static create(e,n,r){return new CA(e,n,r)}}const QS=class extends wq{constructor(e){super(),Jn(this,ol),Jn(this,Cm),Jn(this,Bw),Jn(this,$w),Jn(this,Fw),Jn(this,_m),Jn(this,Am),yn(this,ol,bt.none),yn(this,Cm,n=>n.isText),yn(this,Bw,(n,r)=>{if(kt(this,Cm).call(this,n)&&kt(this,Cm).call(this,r)&&bt.sameSet(n.marks,r.marks))return this.schema.text(n.text+r.text,n.marks)}),yn(this,$w,n=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(n));if(!r)throw Yde(n);return r}),yn(this,Fw,n=>{const r=kt(this,$w).call(this,n);r.spec.parseMarkdown.runner(this,n,r)}),this.injectRoot=(n,r,i)=>(this.openNode(r,i),this.next(n.children),this),this.openNode=(n,r)=>(this.open(CA.create(n,[],r)),this),yn(this,_m,()=>{yn(this,ol,bt.none);const n=this.close();return kt(this,Am).call(this,n.type,n.attrs,n.content)}),this.closeNode=()=>{try{kt(this,_m).call(this)}catch(n){console.error(n)}return this},yn(this,Am,(n,r,i)=>{const s=n.createAndFill(r,i,kt(this,ol));if(!s)throw Jde(n,r,i);return this.push(s),s}),this.addNode=(n,r,i)=>{try{kt(this,Am).call(this,n,r,i)}catch(s){console.error(s)}return this},this.openMark=(n,r)=>{const i=n.create(r);return yn(this,ol,i.addToSet(kt(this,ol))),this},this.closeMark=n=>(yn(this,ol,n.removeFromSet(kt(this,ol))),this),this.addText=n=>{try{const r=this.top();if(!r)throw MW();const i=r.pop(),s=this.schema.text(n,kt(this,ol));if(!i)return r.push(s),this;const o=kt(this,Bw).call(this,i,s);return o?(r.push(o),this):(r.push(i,s),this)}catch(r){return console.error(r),this}},this.build=()=>{let n;do n=kt(this,_m).call(this);while(this.size());return n},this.next=(n=[])=>([n].flat().forEach(r=>kt(this,Fw).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(n,r)=>{const i=n.runSync(n.parse(r),r);return this.next(i),this},this.schema=e}};ol=new WeakMap;Cm=new WeakMap;Bw=new WeakMap;$w=new WeakMap;Fw=new WeakMap;_m=new WeakMap;Am=new WeakMap;QS.create=(t,e)=>{const n=new QS(t);return r=>(n.run(e,r),n.toDoc())};let nge=QS;const ZS=class extends vq{constructor(e,n,r,i={}){super(),this.type=e,this.children=n,this.value=r,this.props=i,this.push=(s,...o)=>{this.children||(this.children=[]),this.children.push(s,...o)},this.pop=()=>{var s;return(s=this.children)==null?void 0:s.pop()}}};ZS.create=(t,e,n,r={})=>new ZS(t,e,n,r);let AR=ZS;const rge=t=>Object.prototype.hasOwnProperty.call(t,"size"),e9=class extends wq{constructor(e){super(),Jn(this,ia),Jn(this,Tm),Jn(this,zw),Jn(this,jw),Jn(this,Mm),Jn(this,Hw),Jn(this,Em),Jn(this,Vw),Jn(this,Ww),Jn(this,ef),Jn(this,ch),Jn(this,qw),Jn(this,Om),yn(this,ia,bt.none),yn(this,Tm,n=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(n));if(!r)throw Xde(n.type);return r}),yn(this,zw,n=>kt(this,Tm).call(this,n).spec.toMarkdown.runner(this,n)),yn(this,jw,(n,r)=>kt(this,Tm).call(this,n).spec.toMarkdown.runner(this,n,r)),yn(this,Mm,n=>{const{marks:r}=n,i=l=>l.type.spec.priority??50;[...r].sort((l,a)=>i(l)-i(a)).every(l=>!kt(this,jw).call(this,l,n))&&kt(this,zw).call(this,n),r.forEach(l=>kt(this,Om).call(this,l))}),yn(this,Hw,(n,r)=>{var i;if(n.type===r||((i=n.children)==null?void 0:i.length)!==1)return n;const s=c=>{var u;if(c.type===r)return c;if(((u=c.children)==null?void 0:u.length)!==1)return null;const[h]=c.children;return h?s(h):null},o=s(n);if(!o)return n;const l=o.children?[...o.children]:void 0,a={...n,children:l};return a.children=l,o.children=[a],o}),yn(this,Em,n=>{const{children:r}=n;return r&&(n.children=r.reduce((i,s,o)=>{if(o===0)return[s];const l=i.at(-1);if(l&&l.isMark&&s.isMark){s=kt(this,Hw).call(this,s,l.type);const{children:a,...c}=s,{children:u,...h}=l;if(s.type===l.type&&a&&u&&JSON.stringify(c)===JSON.stringify(h)){const d={...h,children:[...u,...a]};return i.slice(0,-1).concat(kt(this,Em).call(this,d))}}return i.concat(s)},[])),n}),yn(this,Vw,n=>{const r={...n.props,type:n.type};return n.children&&(r.children=n.children),n.value&&(r.value=n.value),r}),this.openNode=(n,r,i)=>(this.open(AR.create(n,void 0,r,i)),this),yn(this,Ww,(n,r)=>{let i="",s="";const o=n.children;let l=-1,a=-1;const c=h=>{h&&h.forEach((d,f)=>{d.type==="text"&&d.value&&(l<0&&(l=f),a=f)})};if(o){c(o);const h=o==null?void 0:o[a],d=o==null?void 0:o[l];h&&h.value.endsWith(" ")&&(s=h.value.match(/ +$/)[0],h.value=h.value.trimEnd()),d&&d.value.startsWith(" ")&&(i=d.value.match(/^ +/)[0],d.value=d.value.trimStart())}i.length&&kt(this,ch).call(this,"text",void 0,i);const u=r();return s.length&&kt(this,ch).call(this,"text",void 0,s),u}),yn(this,ef,(n=!1)=>{const r=this.close(),i=()=>kt(this,ch).call(this,r.type,r.children,r.value,r.props);return n?kt(this,Ww).call(this,r,i):i()}),this.closeNode=()=>(kt(this,ef).call(this),this),yn(this,ch,(n,r,i,s)=>{const o=AR.create(n,r,i,s),l=kt(this,Em).call(this,kt(this,Vw).call(this,o));return this.push(l),l}),this.addNode=(n,r,i,s)=>(kt(this,ch).call(this,n,r,i,s),this),yn(this,qw,(n,r,i,s)=>n.isInSet(kt(this,ia))?this:(yn(this,ia,n.addToSet(kt(this,ia))),this.openNode(r,i,{...s,isMark:!0}))),yn(this,Om,n=>{n.isInSet(kt(this,ia))&&(yn(this,ia,n.type.removeFromSet(kt(this,ia))),kt(this,ef).call(this,!0))}),this.withMark=(n,r,i,s)=>(kt(this,qw).call(this,n,r,i,s),this),this.closeMark=n=>(kt(this,Om).call(this,n),this),this.build=()=>{let n=null;do n=kt(this,ef).call(this);while(this.size());return n},this.next=n=>rge(n)?(n.forEach(r=>{kt(this,Mm).call(this,r)}),this):(kt(this,Mm).call(this,n),this),this.toString=n=>n.stringify(this.build()),this.run=n=>(this.next(n),this),this.schema=e}};ia=new WeakMap;Tm=new WeakMap;zw=new WeakMap;jw=new WeakMap;Mm=new WeakMap;Hw=new WeakMap;Em=new WeakMap;Vw=new WeakMap;Ww=new WeakMap;ef=new WeakMap;ch=new WeakMap;qw=new WeakMap;Om=new WeakMap;e9.create=(t,e)=>{const n=new e9(t);return r=>(n.run(r),n.toString(e))};let ige=e9;const _A=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function sge(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const xq=(t,e,n)=>{let r=sge(t,n);if(!r)return!1;let i=kq(r);if(!i){let o=r.blockRange(),l=o&&m5(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(_q(t,i,e,-1))return!0;if(r.parent.content.size==0&&(N0(s,"end")||tt.isSelectable(s)))for(let o=r.depth;;o--){let l=uA(t.doc,r.before(o),r.after(o),Pe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(N0(s,"end")?ct.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):tt.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function N0(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const bq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=kq(r)}let o=s&&s.nodeBefore;return!o||!tt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(tt.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function kq(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function oge(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const lge=(t,e,n)=>{let r=oge(t,n);if(!r)return!1;let i=Sq(r);if(!i)return!1;let s=i.nodeAfter;if(_q(t,i,e,1))return!0;if(r.parent.content.size==0&&(N0(s,"start")||tt.isSelectable(s))){let o=uA(t.doc,r.before(),r.after(),Pe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(N0(s,"start")?ct.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):tt.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},age=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Sq(r)}let o=s&&s.nodeAfter;return!o||!tt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(tt.create(t.doc,s.pos)).scrollIntoView()),!0)};function Sq(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const cge=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function AA(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Cq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=AA(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(ct.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},uge=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Gi||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=AA(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(qe.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},hge=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Vg(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&m5(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function dge(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof tt&&e.selection.node.isBlock)return!r.parentOffset||!Vg(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){a=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),l=AA(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(a&&l?{type:l}:null),o=f;break}else{if(f==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof qe||e.selection instanceof Gi)&&u.deleteSelection();let h=u.mapping.map(r.pos),d=Vg(u.doc,h,s.length,s);if(d||(s[0]=l?{type:l}:null,d=Vg(u.doc,h,s.length,s)),!d)return!1;if(u.split(h,s.length,s),!a&&c&&r.node(o).type!=l){let f=u.mapping.map(r.before(o)),p=u.doc.resolve(f);l&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const fge=dge(),pge=(t,e)=>(e&&e(t.tr.setSelection(new Gi(t.doc))),!0);function mge(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||g5(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function _q(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&mge(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=Ce.empty;for(let g=o.length-1;g>=0;g--)p=Ce.from(o[g].create(null,p));p=Ce.from(i.copy(p));let m=t.tr.step(new ei(e.pos-1,f,e.pos,f,new Pe(p,1,0),o.length,!0)),y=m.doc.resolve(f+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&g5(m.doc,y.pos)&&m.join(y.pos),n(m.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:ct.findFrom(e,1),h=u&&u.$from.blockRange(u.$to),d=h&&m5(h);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(h,d).scrollIntoView()),!0;if(c&&N0(s,"start",!0)&&N0(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let m=s,y=1;for(;!m.isTextblock;m=m.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,m.content)){if(n){let g=Ce.empty;for(let w=p.length-1;w>=0;w--)g=Ce.from(p[w].copy(g));let v=t.tr.step(new ei(e.pos-p.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new Pe(g,p.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function Aq(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(qe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const gge=Aq(-1),yge=Aq(1);function TA(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&cA(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Q1(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}function vge(t,e,n,r){for(let i=0;i<e.length;i++){let{$from:s,$to:o}=e[i],l=s.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(s.pos,o.pos,(a,c)=>{if(l||!r)return!1;l=a.inlineContent&&a.type.allowsMarkType(n)}),l)return!0}return!1}function A5(t,e=null,n){let r=n!==!1;return function(i,s){let{empty:o,$cursor:l,ranges:a}=i.selection;if(o&&!l||!vge(i.doc,a,t,r))return!1;if(s)if(l)t.isInSet(i.storedMarks||l.marks())?s(i.tr.removeStoredMark(t)):s(i.tr.addStoredMark(t.create(e)));else{let c,u=i.tr;c=!a.some(h=>i.doc.rangeHasMark(h.$from.pos,h.$to.pos,t));for(let h=0;h<a.length;h++){let{$from:d,$to:f}=a[h];if(!c)u.removeMark(d.pos,f.pos,t);else{let p=d.pos,m=f.pos,y=d.nodeAfter,g=f.nodeBefore,v=y&&y.isText?/^\s*/.exec(y.text)[0].length:0,w=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;p+v<m&&(p+=v,m-=w),u.addMark(p,m,t.create(e))}}s(u.scrollIntoView())}return!0}}function Fy(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let o6=Fy(_A,xq,bq),TR=Fy(_A,lge,age);const ga={Enter:Fy(cge,uge,hge,fge),"Mod-Enter":Cq,Backspace:o6,"Mod-Backspace":o6,"Shift-Backspace":o6,Delete:TR,"Mod-Delete":TR,"Mod-a":pge},Tq={"Ctrl-h":ga.Backspace,"Alt-Backspace":ga["Mod-Backspace"],"Ctrl-d":ga.Delete,"Ctrl-Alt-Backspace":ga["Mod-Delete"],"Alt-Delete":ga["Mod-Delete"],"Alt-d":ga["Mod-Delete"],"Ctrl-a":gge,"Ctrl-e":yge};for(let t in ga)Tq[t]=ga[t];const wge=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,xge=wge?Tq:ga,bge=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),kge=typeof navigator<"u"&&/Win/.test(navigator.platform);function Sge(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))bge?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Cge(t){let e=Object.create(null);for(let n in t)e[Sge(n)]=t[n];return e}function l6(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function MA(t){return new An({props:{handleKeyDown:EA(t)}})}function EA(t){let e=Cge(t);return function(n,r){let i=pH(r),s,o=e[l6(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[l6(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(kge&&r.ctrlKey&&r.altKey)&&(s=Fa[r.keyCode])&&s!=i){let l=e[l6(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Dr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},I0=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let t9=null;const fa=function(t,e,n){let r=t9||(t9=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},_ge=function(){t9=null},cd=function(t,e,n,r){return n&&(MR(t,e,n,r,-1)||MR(t,e,n,r,1))},Age=/^(img|br|input|textarea|hr)$/i;function MR(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:zs(t))){let o=t.parentNode;if(!o||o.nodeType!=1||zy(t)||Age.test(t.nodeName)||t.contentEditable=="false")return!1;e=Dr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?zs(t):0}else return!1}}function zs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tge(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=zs(t)}else if(t.parentNode&&!zy(t))e=Dr(t),t=t.parentNode;else return null}}function Mge(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!zy(t))e=Dr(t)+1,t=t.parentNode;else return null}}function Ege(t,e,n){for(let r=e==0,i=e==zs(t);r||i;){if(t==n)return!0;let s=Dr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==zs(t)}}function zy(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const T5=function(t){return t.focusNode&&cd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function wh(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Oge(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Nge(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(zs(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(zs(r.startContainer),r.startOffset)}}}const Dl=typeof navigator<"u"?navigator:null,ER=typeof document<"u"?document:null,Lu=Dl&&Dl.userAgent||"",n9=/Edge\/(\d+)/.exec(Lu),Mq=/MSIE \d/.exec(Lu),r9=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Lu),Ki=!!(Mq||r9||n9),lu=Mq?document.documentMode:r9?+r9[1]:n9?+n9[1]:0,Fo=!Ki&&/gecko\/(\d+)/i.test(Lu);Fo&&+(/Firefox\/(\d+)/.exec(Lu)||[0,0])[1];const i9=!Ki&&/Chrome\/(\d+)/.exec(Lu),Qr=!!i9,Eq=i9?+i9[1]:0,ki=!Ki&&!!Dl&&/Apple Computer/.test(Dl.vendor),P0=ki&&(/Mobile\/\w+/.test(Lu)||!!Dl&&Dl.maxTouchPoints>2),Ds=P0||(Dl?/Mac/.test(Dl.platform):!1),Ige=Dl?/Win/.test(Dl.platform):!1,Sa=/Android \d/.test(Lu),jy=!!ER&&"webkitFontSmoothing"in ER.documentElement.style,Pge=jy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Rge(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ql(t,e){return typeof t=="number"?t:t[e]}function Dge(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function OR(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=I0(o);continue}let l=o,a=l==s.body,c=a?Rge(s):Dge(l),u=0,h=0;if(e.top<c.top+Ql(r,"top")?h=-(c.top-e.top+Ql(i,"top")):e.bottom>c.bottom-Ql(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Ql(i,"top")-c.top:e.bottom-c.bottom+Ql(i,"bottom")),e.left<c.left+Ql(r,"left")?u=-(c.left-e.left+Ql(i,"left")):e.right>c.right-Ql(r,"right")&&(u=e.right-c.right+Ql(i,"right")),u||h)if(a)s.defaultView.scrollBy(u,h);else{let f=l.scrollLeft,p=l.scrollTop;h&&(l.scrollTop+=h),u&&(l.scrollLeft+=u);let m=l.scrollLeft-f,y=l.scrollTop-p;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}let d=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:I0(o)}}function Lge(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Oq(t.dom)}}function Oq(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=I0(r));return e}function Bge({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Nq(n,r==0?0:r-e)}function Nq(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let zd=null;function $ge(t){if(t.setActive)return t.setActive();if(zd)return t.focus(zd);let e=Oq(t);t.focus(zd==null?{get preventScroll(){return zd={preventScroll:!0},!0}}:void 0),zd||(zd=!1,Nq(e,0))}function Iq(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=fa(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?Fge(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Iq(n,i)}function Fge(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=vc(r,1);if(s.top!=s.bottom&&OA(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function OA(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function zge(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function jge(t,e,n){let{node:r,offset:i}=Iq(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Hge(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Pq(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(OA(e,c))return Pq(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function Vge(t,e){let n=t.dom.ownerDocument,r,i=0,s=Nge(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!OA(e,c)||(o=Pq(t.dom,e,c),!o))return null}if(ki)for(let c=o;r&&c;c=I0(c))c.draggable&&(r=void 0);if(o=zge(o,e),r){if(Fo&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;jy&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=Hge(t,r,i,e))}l==null&&(l=jge(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function NR(t){return t.top<t.bottom||t.left<t.right}function vc(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(NR(r))return r}return Array.prototype.find.call(n,NR)||t.getBoundingClientRect()}const Wge=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Rq(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=jy||Fo;if(r.nodeType==3)if(o&&(Wge.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=vc(fa(r,i,i),n);if(Fo&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=vc(fa(r,i-1,i-1),-1);if(c.top==a.top){let u=vc(fa(r,i,i+1),-1);if(u.top!=a.top)return Up(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,Up(vc(fa(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==zs(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return a6(a.getBoundingClientRect(),!1)}if(s==null&&i<zs(r)){let a=r.childNodes[i];if(a.nodeType==1)return a6(a.getBoundingClientRect(),!0)}return a6(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==zs(r))){let a=r.childNodes[i-1],c=a.nodeType==3?fa(a,zs(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return Up(vc(c,1),!1)}if(s==null&&i<zs(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?fa(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return Up(vc(c,-1),!0)}return Up(vc(r.nodeType==3?fa(r):r,-n),n>=0)}function Up(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function a6(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Dq(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function qge(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Dq(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=Rq(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=fa(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const Uge=/[\u0590-\u08ac]/;function Gge(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!Uge.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:Dq(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),y=p&&!f.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(u,h),a&&(a!=u||c!=h)&&l.extend&&l.extend(a,c)}catch{}return d!=null&&(l.caretBidiLevel=d),y}):r.pos==r.start()||r.pos==r.end()}let IR=null,PR=null,RR=!1;function Kge(t,e,n){return IR==e&&PR==n?RR:(IR=e,PR=n,RR=n=="up"||n=="down"?qge(t,e,n):Gge(t,e,n))}const Ys=0,DR=1,Th=2,Ll=3;class Hy{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ys,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Dr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Bq){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Lq&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Dr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Dr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let h=l;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=Dr(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=Dr(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let m=this.children[f],y=p+m.size;if(s>p&&o<y)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=y}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),h=!1;if((Fo||ki)&&e==n){let{node:f,offset:p}=l;if(f.nodeType==3){if(h=!!(p&&f.nodeValue[p-1]==`
`),h&&p==f.nodeValue.length)for(let m=f,y;m;m=m.parentNode){if(y=m.nextSibling){y.nodeName=="BR"&&(l=a={node:y.parentNode,offset:Dr(y)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=f.childNodes[p-1];h=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Fo&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||h&&ki)&&cd(l.node,l.offset,u.anchorNode,u.anchorOffset)&&cd(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==n)&&!h){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let p=l;l=a,a=p}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Th:DR,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ll:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Th:Ll}r=o}this.dirty=Th}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Th:DR;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Lq extends Hy{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ys&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Jge extends Hy{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ud extends Hy{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=bd.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ud(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ll||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ll&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ys){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ys}}slice(e,n,r){let i=ud.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=o9(s,n,o,r)),e>0&&(s=o9(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class au extends Hy{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=bd.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=zq(u,r,n),c?a=new Yge(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new M5(e,n,r,i,u,d,s):new au(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ce.empty)}return e}matchesNode(e,n,r){return this.dirty==Ys&&e.eq(this.node)&&Ux(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new Qge(this,o&&o.node,e);t1e(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&a.syncToMarks(u==this.node.childCount?bt.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,h,d)=>{a.syncToMarks(c.marks,r,e);let f;a.findNodeMatch(c,u,h,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,h,f,e)||a.updateNextNode(c,u,h,e,d,i)||a.addNode(c,u,h,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Th)&&(o&&this.protectLocalComposition(e,o),$q(this.contentDOM,this.children,e),P0&&n1e(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof qe)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=r1e(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Jge(this,s,n,i);e.input.compositionNodes.push(o),this.children=o9(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ll||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ys}updateOuterDeco(e){if(Ux(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Fq(this.dom,this.nodeDOM,s9(this.outerDeco,this.node,n),s9(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function LR(t,e,n,r,i){zq(r,e,t);let s=new au(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class M5 extends au{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ll||this.dirty!=Ys&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ys||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ys,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new M5(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ll)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Bq extends Hy{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ys&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Yge extends au{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==Ll)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function $q(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=BR(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof ud){let a=r?r.previousSibling:t.lastChild;$q(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=BR(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Ug=function(t){t&&(this.nodeName=t)};Ug.prototype=Object.create(null);const Mh=[new Ug];function s9(t,e,n){if(t.length==0)return Mh;let r=n?Mh[0]:new Ug,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Ug(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new Ug(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Fq(t,e,n,r){if(n==Mh&&r==Mh)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Mh[0]),i=a}Xge(i,l||Mh[0],o)}return i}function Xge(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function zq(t,e,n){return Fq(t,t,Mh,s9(e,n,t.nodeType!=1))}function Ux(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function BR(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Qge{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Zge(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ys,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ud.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ll&&o.dom==o.contentDOM&&(o.dirty=Th),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof au){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,h,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Ll&&Ux(n,a.outerDeco));if(!d&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Th,h.updateChildren(i,o+1),h.dirty=Ys),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ux(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=au.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=au.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Lq(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ud;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof M5)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ki||Qr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Bq(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Zge(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof ud)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function e1e(t,e){return t.type.side-e.type.side}function t1e(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(u?(h||(h=[u])).push(y):u=y)}if(u)if(h){h.sort(e1e);for(let y=0;y<h.length;y++)n(h[y],c,!!a)}else n(u,c,!!a);let d,f;if(a)f=-1,d=a,a=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let y=0;y<l.length;y++)l[y].to<=s&&l.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let y=p;o<i.length&&i[o].from<y&&(y=i[o].from);for(let g=0;g<l.length;g++)l[g].to<y&&(y=l[g].to);y<p&&(a=d.cut(y-s),d=d.cut(0,y-s),p=y,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?l.filter(y=>!y.inline):l.slice();r(d,m,e.forChild(s,d),f),s=p}}function n1e(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function r1e(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function o9(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function NA(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(T5(n)){for(a=o;i&&!i.node;)i=i.parent;let h=i.node;if(i&&h.isAtom&&tt.isSelectable(h)&&i.parent&&!(h.isInline&&Ege(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new tt(o==d?l:r.resolve(d))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=o,d=o;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);h=Math.min(h,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(h<0)return null;[a,o]=d==t.state.selection.anchor?[d,h]:[h,d],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let h=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=IA(t,u,l,h)}return c}function jq(t){return t.editable?t.hasFocus():Vq(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ea(t,e=!1){let n=t.state.selection;if(Hq(t,n),!!jq(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Qr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&cd(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)s1e(t);else{let{anchor:r,head:i}=n,s,o;$R&&!(n instanceof qe)&&(n.$from.parent.inlineContent||(s=FR(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=FR(t,n.to))),t.docView.setSelection(r,i,t,e),$R&&(s&&zR(s),o&&zR(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&i1e(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const $R=ki||Qr&&Eq<63;function FR(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(ki&&i&&i.contentEditable=="false")return c6(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return c6(i);if(s)return c6(s)}}function c6(t){return t.contentEditable="true",ki&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function zR(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function i1e(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!jq(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function s1e(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Dr(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Ki&&lu<=11&&(r.disabled=!0,r.disabled=!1)}function Hq(t,e){if(e instanceof tt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(jR(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else jR(t)}function jR(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function IA(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||qe.between(e,n,r)}function HR(t){return t.editable&&!t.hasFocus()?!1:Vq(t)}function Vq(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function o1e(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return cd(e.node,e.offset,n.anchorNode,n.anchorOffset)}function l9(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ct.findFrom(s,e)}function Ec(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function VR(t,e,n){let r=t.state.selection;if(r instanceof qe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Ec(t,new qe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=l9(t.state,e);return i&&i instanceof tt?Ec(t,i):!1}else if(!(Ds&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?tt.isSelectable(s)?Ec(t,new tt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):jy?Ec(t,new qe(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof tt&&r.node.isInline)return Ec(t,new qe(e>0?r.$to:r.$from));{let i=l9(t.state,e);return i?Ec(t,i):!1}}}function Gx(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Gg(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function jd(t,e){return e<0?l1e(t):a1e(t)}function l1e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Fo&&n.nodeType==1&&r<Gx(n)&&Gg(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Gg(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Wq(n))break;{let l=n.previousSibling;for(;l&&Gg(l,-1);)i=n.parentNode,s=Dr(l),l=l.previousSibling;if(l)n=l,r=Gx(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?a9(t,n,r):i&&a9(t,i,s)}function a1e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Gx(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Gg(l,1))s=n,o=++r;else break}else{if(Wq(n))break;{let l=n.nextSibling;for(;l&&Gg(l,1);)s=l.parentNode,o=Dr(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Gx(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&a9(t,s,o)}function Wq(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function c1e(t,e){for(;t&&e==t.childNodes.length&&!zy(t);)e=Dr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function u1e(t,e){for(;t&&!e&&!zy(t);)e=Dr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function a9(t,e,n){if(e.nodeType!=3){let s,o;(o=c1e(e,n))?(e=o,n=0):(s=u1e(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(T5(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ea(t)},50)}function WR(t,e){let n=t.state.doc.resolve(e);if(!(Qr||Ige)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function qR(t,e,n){let r=t.state.selection;if(r instanceof qe&&!r.empty||n.indexOf("s")>-1||Ds&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=l9(t.state,e);if(o&&o instanceof tt)return Ec(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Gi?ct.near(o,e):ct.findFrom(o,e);return l?Ec(t,l):!1}return!1}function UR(t,e){if(!(t.state.selection instanceof qe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function GR(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function h1e(t){if(!ki||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;GR(t,r,"true"),setTimeout(()=>GR(t,r,"false"),20)}return!1}function d1e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function f1e(t,e){let n=e.keyCode,r=d1e(e);if(n==8||Ds&&n==72&&r=="c")return UR(t,-1)||jd(t,-1);if(n==46&&!e.shiftKey||Ds&&n==68&&r=="c")return UR(t,1)||jd(t,1);if(n==13||n==27)return!0;if(n==37||Ds&&n==66&&r=="c"){let i=n==37?WR(t,t.state.selection.from)=="ltr"?-1:1:-1;return VR(t,i,r)||jd(t,i)}else if(n==39||Ds&&n==70&&r=="c"){let i=n==39?WR(t,t.state.selection.from)=="ltr"?1:-1:1;return VR(t,i,r)||jd(t,i)}else{if(n==38||Ds&&n==80&&r=="c")return qR(t,-1,r)||jd(t,-1);if(n==40||Ds&&n==78&&r=="c")return h1e(t)||qR(t,1,r)||jd(t,1);if(r==(Ds?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function PA(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||bd.fromSchema(t.state.schema),l=Yq(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=Jq[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=l.createElement(u[f]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),h++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function qq(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new Pe(Ce.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Pe.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)l=h;else{let d=i.marks(),{schema:f}=t.state,p=bd.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let y=o.appendChild(document.createElement("p"));m&&y.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=y1e(n),jy&&v1e(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||od.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!p1e.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)l=w1e(KR(l,+u[1],+u[2]),u[4]);else if(l=Pe.maxOpen(m1e(l.content,i),!0),l.openStart||l.openEnd){let h=0,d=0;for(let f=l.content.firstChild;h<l.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=l.content.lastChild;d<l.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);l=KR(l,h,d)}return t.someProp("transformPasted",h=>{l=h(l,t)}),l}const p1e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function m1e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&Gq(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Kq(o[o.length-1],s.length));let u=Uq(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return Ce.from(o)}return t}function Uq(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ce.from(t));return t}function Gq(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Gq(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ce.from(Uq(n,t,i+1))))}}function Kq(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Kq(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ce.empty,!0);return t.copy(n.append(r))}function c9(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=c9(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(Ce.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function KR(t,e,n){return e<t.openStart&&(t=new Pe(c9(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Pe(c9(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Jq={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let JR=null;function Yq(){return JR||(JR=document.implementation.createHTMLDocument("title"))}let u6=null;function g1e(t){let e=window.trustedTypes;return e?(u6||(u6=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),u6.createHTML(t)):t}function y1e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Yq().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Jq[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=g1e(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function v1e(t){let e=t.querySelectorAll(Qr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function w1e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=Ce.from(a.create(r[l+1],i)),s++,o++}return new Pe(i,s,o)}const Si={},Ci={},x1e={touchstart:!0,touchmove:!0};class b1e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function k1e(t){for(let e in Si){let n=Si[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{C1e(t,r)&&!RA(t,r)&&(t.editable||!(r.type in Ci))&&n(t,r)},x1e[e]?{passive:!0}:void 0)}ki&&t.dom.addEventListener("input",()=>null),u9(t)}function Gc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function S1e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function u9(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>RA(t,r))})}function RA(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function C1e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function _1e(t,e){!RA(t,e)&&Si[e.type]&&(t.editable||!(e.type in Ci))&&Si[e.type](t,e)}Ci.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Qq(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Sa&&Qr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),P0&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,wh(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||f1e(t,n)?n.preventDefault():Gc(t,"key")};Ci.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ci.keypress=(t,e)=>{let n=e;if(Qq(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ds&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof qe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function E5(t){return{left:t.clientX,top:t.clientY}}function A1e(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function DA(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Yf(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function T1e(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&tt.isSelectable(r)?(Yf(t,new tt(n)),!0):!1}function M1e(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof tt&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(tt.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Yf(t,tt.create(t.state.doc,i)),!0):!1}function E1e(t,e,n,r,i){return DA(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?M1e(t,n):T1e(t,n))}function O1e(t,e,n,r){return DA(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function N1e(t,e,n,r){return DA(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||I1e(t,n,r)}function I1e(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Yf(t,qe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Yf(t,qe.create(r,l+1,l+1+o.content.size));else if(tt.isSelectable(o))Yf(t,tt.create(r,l));else continue;return!0}}function LA(t){return Kx(t)}const Xq=Ds?"metaKey":"ctrlKey";Si.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=LA(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&A1e(n,t.input.lastClick)&&!n[Xq]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(E5(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new P1e(t,o,n,!!r)):(s=="doubleClick"?O1e:N1e)(t,o.pos,o.inside,n)?n.preventDefault():Gc(t,"pointer"))};class P1e{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Xq],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof tt&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ea(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(E5(e))),this.updateAllowDefault(e),this.allowDefault||!n?Gc(this.view,"pointer"):E1e(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ki&&this.mightDrag&&!this.mightDrag.node.isAtom||Qr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Yf(this.view,ct.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Gc(this.view,"pointer")}move(e){this.updateAllowDefault(e),Gc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Si.touchstart=t=>{t.input.lastTouch=Date.now(),LA(t),Gc(t,"pointer")};Si.touchmove=t=>{t.input.lastTouch=Date.now(),Gc(t,"pointer")};Si.contextmenu=t=>LA(t);function Qq(t,e){return t.composing?!0:ki&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const R1e=Sa?5e3:-1;Ci.compositionstart=Ci.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof qe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Kx(t,!0),t.markCursor=null;else if(Kx(t,!e.selection.empty),Fo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Zq(t,R1e)};Ci.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Zq(t,20))};function Zq(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Kx(t),e))}function eU(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=L1e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function D1e(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Tge(e.focusNode,e.focusOffset),r=Mge(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function L1e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Kx(t,e=!1){if(!(Sa&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),eU(t),e||t.docView&&t.docView.dirty){let n=NA(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function B1e(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Z1=Ki&&lu<15||P0&&Pge<604;Si.copy=Ci.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Z1?null:n.clipboardData,o=r.content(),{dom:l,text:a}=PA(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):B1e(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $1e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function F1e(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ey(t,r.value,null,i,e):ey(t,r.textContent,r.innerHTML,i,e)},50)}function ey(t,e,n,r,i){let s=qq(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||Pe.empty)))return!0;if(!s)return!1;let o=$1e(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function tU(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ci.paste=(t,e)=>{let n=e;if(t.composing&&!Sa)return;let r=Z1?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&ey(t,tU(r),r.getData("text/html"),i,n)?n.preventDefault():F1e(t,n)};class nU{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const z1e=Ds?"altKey":"ctrlKey";function rU(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[z1e]}Si.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(E5(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof tt?i.to-1:i.to))){if(r&&r.mightDrag)o=tt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let h=t.docView.nearestDesc(n.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(o=tt.create(t.state.doc,h.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=PA(t,l);(!n.dataTransfer.files.length||!Qr||Eq>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Z1?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Z1||n.dataTransfer.setData("text/plain",c),t.dragging=new nU(u,rU(t,n),o)};Si.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ci.dragover=Ci.dragenter=(t,e)=>e.preventDefault();Ci.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(E5(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=qq(t,tU(n.dataTransfer),Z1?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&rU(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||Pe.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let a=o?wW(t.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=t.state.tr;if(l){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(a),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&tt.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new tt(f));else{let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,y,g,v)=>p=v),c.setSelection(IA(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Si.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ea(t)},20))};Si.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Si.beforeinput=(t,e)=>{if(Qr&&Sa&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,wh(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ci)Si[t]=Ci[t];function ty(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Jx{constructor(e,n){this.toDOM=e,this.spec=n||$h,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new er(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Jx&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ty(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class cu{constructor(e,n){this.attrs=e,this.spec=n||$h}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new er(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof cu&&ty(this.attrs,e.attrs)&&ty(this.spec,e.spec)}static is(e){return e.type instanceof cu}destroy(){}}class BA{constructor(e,n){this.attrs=e,this.spec=n||$h}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new er(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof BA&&ty(this.attrs,e.attrs)&&ty(this.spec,e.spec)}destroy(){}}class er{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new er(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new er(e,e,new Jx(n,r))}static inline(e,n,r,i){return new er(e,n,new cu(r,i))}static node(e,n,r,i){return new er(e,n,new BA(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof cu}get widget(){return this.type instanceof Jx}}const tf=[],$h={};class tn{constructor(e,n){this.local=e.length?e:tf,this.children=n.length?n:tf}static create(e,n){return n.length?Yx(n,e,0,$h):Ur}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==Ur||e.maps.length==0?this:this.mapInner(e,n,0,0,r||$h)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?j1e(this.children,o||[],e,n,r,i,s):o?new tn(o.sort(Fh),tf):Ur}add(e,n){return n.length?this==Ur?tn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=sU(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Yx(u,l,c+1,$h)),s+=3}});let o=iU(s?oU(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new tn(o.length?this.local.concat(o).sort(Fh):this.local,i||this.children)}remove(e){return e.length==0||this==Ur?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>l&&h.to<a&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=Ur?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new tn(i,r):Ur}forChild(e,n){if(this==Ur)return this;if(n.isLeaf)return tn.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof cu){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new tn(i.sort(Fh),tf);return r?new $c([l,r]):l}return r||Ur}eq(e){if(this==e)return!0;if(!(e instanceof tn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return $A(this.localsInner(e))}localsInner(e){if(this==Ur)return tf;if(e.inlineContent||!this.local.some(cu.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof cu||n.push(this.local[r]);return n}forEachSet(e){e(this)}}tn.empty=new tn([],[]);tn.removeOverlap=$A;const Ur=tn.empty;class $c{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,$h));return $c.from(r)}forChild(e,n){if(n.isLeaf)return tn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Ur&&(s instanceof $c?r=r.concat(s.members):r.push(s))}return $c.from(r)}eq(e){if(!(e instanceof $c)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?$A(r?n:n.sort(Fh)):tf}static from(e){switch(e.length){case 0:return Ur;case 1:return e[0];default:return new $c(e.every(n=>n instanceof tn)?e:e.reduce((n,r)=>n.concat(r instanceof tn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function j1e(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let y=m-p-(f-d);for(let g=0;g<l.length;g+=3){let v=l[g+1];if(v<0||d>v+u-h)continue;let w=l[g]+u-h;f>=w?l[g+1]=d<=w?-2:-1:d>=u&&y&&(l[g]+=y,l[g+1]+=y)}h+=y}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){a=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),y=r.maybeChild(p);if(y&&m==h&&m+y.nodeSize==f){let g=l[c+2].mapInner(n,y,u+1,t[c]+s+1,o);g!=Ur?(l[c]=h,l[c+1]=f,l[c+2]=g):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=H1e(l,t,e,n,i,s,o),u=Yx(c,r,0,o);e=u.local;for(let h=0;h<l.length;h+=3)l[h+1]<0&&(l.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<l.length&&l[d]<f;)d+=3;l.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new tn(e.sort(Fh),l)}function iU(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new er(i.from+e,i.to+e,i.type))}return n}function H1e(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let h=a.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function sU(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function oU(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Yx(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=sU(t,l,a+n);if(c){s=!0;let u=Yx(c,l,n+a+1,r);u!=Ur&&i.push(a,a+l.nodeSize,u)}});let o=iU(s?oU(t):t,-n).sort(Fh);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new tn(o,i):Ur}function Fh(t,e){return t.from-e.from||t.to-e.to}function $A(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),YR(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),YR(e,i,r.copy(s.from,r.to)));break}}}return e}function YR(t,e,n){for(;e<t.length&&Fh(n,t[e])>0;)e++;t.splice(e,0,n)}function h6(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ur&&e.push(r)}),t.cursorWrapper&&e.push(tn.create(t.state.doc,[t.cursorWrapper.deco])),$c.from(e)}const V1e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},W1e=Ki&&lu<=11;class q1e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class U1e{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new q1e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ki&&lu<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),W1e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,V1e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(HR(this.view)){if(this.suppressingSelectionUpdates)return Ea(this.view);if(Ki&&lu<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&cd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=I0(s))n.add(s);for(let s=e.anchorNode;s;s=I0(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&HR(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],a);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(l=!0))}if(Fo&&a.length){let u=a.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,d]=u;h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let d of u){let f=d.parentNode;f&&f.nodeName=="LI"&&(!h||J1e(e,h)!=f)&&d.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&T5(r)&&(c=NA(e))&&c.eq(ct.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ea(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),G1e(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ea(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let h=e.addedNodes[u];n.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ki&&lu<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?Dr(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?Dr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let XR=new WeakMap,QR=!1;function G1e(t){if(!XR.has(t)&&(XR.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Fo,QR)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),QR=!0}}function ZR(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return cd(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function K1e(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ZR(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ZR(t,n):null}function J1e(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Y1e(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],T5(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Qr&&t.input.lastKeyCode===8)for(let y=s;y>i;y--){let g=r.childNodes[y-1],v=g.pmViewDesc;if(g.nodeName=="BR"&&!v){s=y;break}if(!v||v.size)break}let h=t.state.doc,d=t.someProp("domParser")||od.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:X1e,context:f});if(c&&c[0].pos!=null){let y=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=y),p={anchor:y+o,head:g+o}}return{doc:m,sel:p,from:o,to:l}}function X1e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ki&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ki&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Q1e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Z1e(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let I=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,L=NA(t,I);if(L&&!t.state.selection.eq(L)){if(Qr&&Sa&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",$=>$(t,wh(13,"Enter"))))return;let N=t.state.tr.setSelection(L);I=="pointer"?N.setMeta("pointer",!0):I=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=Y1e(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=nye(h.content,c.doc.content,c.from,d,f);if(p&&t.input.domChangeCount++,(P0&&t.input.lastIOSEnter>Date.now()-225||Sa)&&i.some(I=>I.nodeType==1&&!Q1e.test(I.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",I=>I(t,wh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof qe&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let I=eD(t,t.state.doc,c.sel);if(I&&!I.eq(t.state.selection)){let L=t.state.tr.setSelection(I);s&&L.setMeta("composition",s),t.dispatch(L)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof qe&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Ki&&lu<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),g=u.resolve(p.start),v=m.sameParent(y)&&m.parent.inlineContent&&g.end()>=p.endA,w;if((P0&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!v&&m.pos<c.doc.content.size&&(!m.sameParent(y)||!m.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(m.pos,y.pos,"",""))&&(w=ct.findFrom(c.doc.resolve(m.pos+1),1,!0))&&w.head>m.pos)&&t.someProp("handleKeyDown",I=>I(t,wh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&tye(u,p.start,p.endA,m,y)&&t.someProp("handleKeyDown",I=>I(t,wh(8,"Backspace")))){Sa&&Qr&&t.domObserver.suppressSelectionUpdates();return}Qr&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Sa&&!v&&m.start()!=y.start()&&y.parentOffset==0&&m.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(I){return I(t,wh(13,"Enter"))})},20));let S=p.start,_=p.endA,C=I=>{let L=I||t.state.tr.replace(S,_,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let N=eD(t,L.doc,c.sel);N&&!(Qr&&t.composing&&N.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==S||N.head==L.mapping.map(_)-1)||Ki&&N.empty&&N.head==S)&&L.setSelection(N)}return s&&L.setMeta("composition",s),L.scrollIntoView()},T;if(v){if(m.pos==y.pos){Ki&&lu<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ea(t),20));let I=C(t.state.tr.delete(S,_)),L=u.resolve(p.start).marksAcross(u.resolve(p.endA));L&&I.ensureMarks(L),t.dispatch(I)}else if(p.endA==p.endB&&(T=eye(m.parent.content.cut(m.parentOffset,y.parentOffset),g.parent.content.cut(g.parentOffset,p.endA-g.start())))){let I=C(t.state.tr);T.type=="add"?I.addMark(S,_,T.mark):I.removeMark(S,_,T.mark),t.dispatch(I)}else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let I=m.parent.textBetween(m.parentOffset,y.parentOffset),L=()=>C(t.state.tr.insertText(I,S,_));t.someProp("handleTextInput",N=>N(t,S,_,I,L))||t.dispatch(L())}}else t.dispatch(C())}function eD(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:IA(t,e.resolve(n.anchor),e.resolve(n.head))}function eye(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(Ce.from(c).eq(t))return{mark:l,type:o}}function tye(t,e,n,r,i){if(n-e<=i.pos-r.pos||d6(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(d6(s,!0,!0));return!o.parent.isTextblock||o.pos>n||d6(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function d6(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function nye(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&tD(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&tD(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function tD(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class FA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new b1e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(oD),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=iD(this),rD(this),this.nodeViews=sD(this),this.docView=LR(this.state.doc,nD(this),h6(this),this.dom,this),this.domObserver=new U1e(this,(r,i,s,o)=>Z1e(this,r,i,s,o)),this.domObserver.start(),k1e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&u9(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(oD),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(eU(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=sD(this);iye(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&u9(this),this.editable=iD(this),rD(this);let a=h6(this),c=nD(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,a);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Lge(this);if(o){this.domObserver.stop();let f=h&&(Ki||Qr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&rye(i.selection,e.selection);if(h){let p=Qr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=D1e(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=LR(e.doc,c,a,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&o1e(this))?Ea(this,f):(Hq(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&Bge(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof tt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&OR(this,n.getBoundingClientRect(),e)}else OR(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new nU(e.slice,e.move,i<0?void 0:tt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Ki){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$ge(this.dom),Ea(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Vge(this,e)}coordsAtPos(e,n=1){return Rq(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return Kge(this,n||this.state,e)}pasteHTML(e,n){return ey(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ey(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return PA(this,e)}destroy(){this.docView&&(S1e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],h6(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,_ge())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return _1e(this,e)}domSelectionRange(){let e=this.domSelection();return e?ki&&this.root.nodeType===11&&Oge(this.dom.ownerDocument)==this.dom&&K1e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}FA.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function nD(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[er.node(0,t.state.doc.content.size,e)]}function rD(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:er.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function iD(t){return!t.someProp("editable",e=>e(t.state)===!1)}function rye(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function sD(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function iye(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function oD(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var lU=t=>{throw TypeError(t)},aU=(t,e,n)=>e.has(t)||lU("Cannot "+n),Je=(t,e,n)=>(aU(t,e,"read from private field"),n?n.call(t):e.get(t)),Mr=(t,e,n)=>e.has(t)?lU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),On=(t,e,n,r)=>(aU(t,e,"write to private field"),e.set(t,n),n),nf,po,rf,Rs,wc,Nm,Uw,Gw,ls,xc,sf,Kw,of,Im,Jw,uh,Pm;function Bu(t,e){return t.meta={package:"@milkdown/core",group:"System",...e},t}const cU={strong:(t,e,n,r)=>{const i=t.marker||n.options.strong||"*",s=n.enter("strong"),o=n.createTracker(r);let l=o.move(i+i);return l+=o.move(n.containerPhrasing(t,{before:l,after:i,...o.current()})),l+=o.move(i+i),s(),l},emphasis:(t,e,n,r)=>{const i=t.marker||n.options.emphasis||"*",s=n.enter("emphasis"),o=n.createTracker(r);let l=o.move(i);return l+=o.move(n.containerPhrasing(t,{before:l,after:i,...o.current()})),l+=o.move(i),s(),l}},hn=Pt({},"editorView"),Rm=Pt({},"editorState"),f6=Pt([],"initTimer"),h9=Pt({},"editor"),ny=Pt([],"inputRules"),Bl=Pt([],"prosePlugins"),ry=Pt([],"remarkPlugins"),iy=Pt([],"nodeView"),sy=Pt([],"markView"),zh=Pt(XS().use(WS).use(KS),"remark"),Kg=Pt({handlers:cU},"remarkStringifyOptions"),Yw=Pu("ConfigReady");function sye(t){const e=n=>(n.record(Yw),async()=>(await t(n),n.done(Yw),()=>{n.clearTimer(Yw)}));return Bu(e,{displayName:"Config"}),e}const jh=Pu("InitReady");function oye(t){const e=n=>(n.inject(h9,t).inject(Bl,[]).inject(ry,[]).inject(ny,[]).inject(iy,[]).inject(sy,[]).inject(Kg,{handlers:cU}).inject(zh,XS().use(WS).use(KS)).inject(f6,[Yw]).record(jh),async()=>{await n.waitTimers(f6);const r=n.get(Kg);return n.set(zh,XS().use(WS).use(KS,r)),n.done(jh),()=>{n.remove(h9).remove(Bl).remove(ry).remove(ny).remove(iy).remove(sy).remove(Kg).remove(zh).remove(f6).clearTimer(jh)}});return Bu(e,{displayName:"Init"}),e}const No=Pu("SchemaReady"),p6=Pt([],"schemaTimer"),Oa=Pt({},"schema"),Xf=Pt([],"nodes"),Qf=Pt([],"marks");function lD(t){var e;return{...t,parseDOM:(e=t.parseDOM)==null?void 0:e.map(n=>({priority:t.priority,...n}))}}const uU=t=>(t.inject(Oa,{}).inject(Xf,[]).inject(Qf,[]).inject(p6,[jh]).record(No),async()=>{await t.waitTimers(p6);const e=t.get(zh),r=t.get(ry).reduce((l,a)=>l.use(a.plugin,a.options),e);t.set(zh,r);const i=Object.fromEntries(t.get(Xf).map(([l,a])=>[l,lD(a)])),s=Object.fromEntries(t.get(Qf).map(([l,a])=>[l,lD(a)])),o=new cW({nodes:i,marks:s});return t.set(Oa,o),t.done(No),()=>{t.remove(Oa).remove(Xf).remove(Qf).remove(p6).clearTimer(No)}});Bu(uU,{displayName:"Schema"});class hU{constructor(){Mr(this,nf),Mr(this,po),On(this,nf,new BW),On(this,po,null),this.setCtx=e=>{On(this,po,e)},this.chain=()=>{if(Je(this,po)==null)throw Jk();const e=Je(this,po),n=[],r=this.get,i={run:()=>{const o=Fy(...n),l=e.get(hn);return o(l.state,l.dispatch,l)},inline:o=>(n.push(o),i),pipe:s};function s(o,l){const a=r(o);return n.push(a(l)),i}return i}}get ctx(){return Je(this,po)}create(e,n){const r=e.create(Je(this,nf).sliceMap);return r.set(n),r}get(e){return Je(this,nf).get(e).get()}remove(e){return Je(this,nf).remove(e)}call(e,n){if(Je(this,po)==null)throw Jk();const i=this.get(e)(n),s=Je(this,po).get(hn);return i(s.state,s.dispatch,s)}inline(e){if(Je(this,po)==null)throw Jk();const n=Je(this,po).get(hn);return e(n.state,n.dispatch,n)}}nf=new WeakMap;po=new WeakMap;function lye(t="cmdKey"){return Pt(()=>()=>!1,t)}const ze=Pt(new hU,"commands"),m6=Pt([No],"commandsTimer"),Jg=Pu("CommandsReady"),dU=t=>{const e=new hU;return e.setCtx(t),t.inject(ze,e).inject(m6,[No]).record(Jg),async()=>(await t.waitTimers(m6),t.done(Jg),()=>{t.remove(ze).remove(m6).clearTimer(Jg)})};Bu(dU,{displayName:"Commands"});const Xw=Pu("ParserReady"),fU=()=>{throw pA()},Yg=Pt(fU,"parser"),g6=Pt([],"parserTimer"),pU=t=>(t.inject(Yg,fU).inject(g6,[No]).record(Xw),async()=>{await t.waitTimers(g6);const e=t.get(zh),n=t.get(Oa);return t.set(Yg,nge.create(n,e)),t.done(Xw),()=>{t.remove(Yg).remove(g6).clearTimer(Xw)}});Bu(pU,{displayName:"Parser"});const Xg=Pu("SerializerReady"),y6=Pt([],"serializerTimer"),mU=()=>{throw pA()},Zf=Pt(mU,"serializer"),gU=t=>(t.inject(Zf,mU).inject(y6,[No]).record(Xg),async()=>{await t.waitTimers(y6);const e=t.get(zh),n=t.get(Oa);return t.set(Zf,ige.create(n,e)),t.done(Xg),()=>{t.remove(Zf).remove(y6).clearTimer(Xg)}});Bu(gU,{displayName:"Serializer"});const Qw=Pt("","defaultValue"),v6=Pt(t=>t,"stateOptions"),w6=Pt([],"editorStateTimer"),Zw=Pu("EditorStateReady");function aye(t,e,n){if(typeof t=="string")return e(t);if(t.type==="html")return od.fromSchema(n).parse(t.dom);if(t.type==="json")return Ma.fromJSON(n,t.value);throw Ude(t)}const cye=new $n("MILKDOWN_STATE_TRACKER");function uye(t){const e=Fy(Wde,_A,xq,bq);return t.Backspace=e,t}const yU=t=>(t.inject(Qw,"").inject(Rm,{}).inject(v6,e=>e).inject(w6,[Xw,Xg,Jg]).record(Zw),async()=>{await t.waitTimers(w6);const e=t.get(Oa),n=t.get(Yg),r=t.get(ny),i=t.get(v6),s=t.get(Bl),o=t.get(Qw),l=aye(o,n,e),a=[...s,new An({key:cye,state:{init:()=>{},apply:(h,d,f,p)=>{t.set(Rm,p)}}}),cfe({rules:r}),MA(uye(xge))];t.set(Bl,a);const c=i({schema:e,doc:l,plugins:a}),u=Ah.create(c);return t.set(Rm,u),t.done(Zw),()=>{t.remove(Qw).remove(Rm).remove(v6).remove(w6).clearTimer(Zw)}});Bu(yU,{displayName:"EditorState"});const e4=Pu("EditorViewReady"),x6=Pt([],"editorViewTimer"),Qg=Pt({},"editorViewOptions"),t4=Pt(null,"root"),d9=Pt(null,"rootDOM"),f9=Pt({},"rootAttrs");function hye(t,e){const n=document.createElement("div");n.className="milkdown",t.appendChild(n),e.set(d9,n);const r=e.get(f9);return Object.entries(r).forEach(([i,s])=>n.setAttribute(i,s)),n}function dye(t){t.classList.add("editor"),t.setAttribute("role","textbox")}const fye=new $n("MILKDOWN_VIEW_CLEAR"),vU=t=>(t.inject(t4,document.body).inject(hn,{}).inject(Qg,{}).inject(d9,null).inject(f9,{}).inject(x6,[Zw]).record(e4),async()=>{await t.wait(jh);const e=t.get(t4)||document.body,n=typeof e=="string"?document.querySelector(e):e;t.update(Bl,a=>[new An({key:fye,view:c=>{const u=n?hye(n,t):void 0;return(()=>{if(u&&n){const d=c.dom;n.replaceChild(u,d),u.appendChild(d)}})(),{destroy:()=>{u!=null&&u.parentNode&&(u==null||u.parentNode.replaceChild(c.dom,u)),u==null||u.remove()}}}}),...a]),await t.waitTimers(x6);const r=t.get(Rm),i=t.get(Qg),s=Object.fromEntries(t.get(iy)),o=Object.fromEntries(t.get(sy)),l=new FA(n,{state:r,nodeViews:s,markViews:o,...i});return dye(l.dom),t.set(hn,l),t.done(e4),()=>{l==null||l.destroy(),t.remove(t4).remove(hn).remove(Qg).remove(d9).remove(f9).remove(x6).clearTimer(e4)}});Bu(vU,{displayName:"EditorView"});var Xx=(t=>(t.Idle="Idle",t.OnCreate="OnCreate",t.Created="Created",t.OnDestroy="OnDestroy",t.Destroyed="Destroyed",t))(Xx||{});const pye=class wU{constructor(){Mr(this,rf),Mr(this,Rs),Mr(this,wc),Mr(this,Nm),Mr(this,Uw),Mr(this,Gw),Mr(this,ls),Mr(this,xc),Mr(this,sf),Mr(this,Kw),Mr(this,of),Mr(this,Im),Mr(this,Jw),Mr(this,uh),Mr(this,Pm),On(this,rf,!1),On(this,Rs,"Idle"),On(this,wc,[]),On(this,Nm,()=>{}),On(this,Uw,new BW),On(this,Gw,new Efe),On(this,ls,new Map),On(this,xc,new Map),On(this,sf,new Mfe(Je(this,Uw),Je(this,Gw))),On(this,Kw,()=>{const e=sye(async r=>{await Promise.all(Je(this,wc).map(i=>i(r)))}),n=[uU,pU,gU,dU,yU,vU,oye(this),e];Je(this,of).call(this,n,Je(this,xc))}),On(this,of,(e,n)=>{e.forEach(r=>{const i=Je(this,sf).produce(Je(this,rf)?r.meta:void 0),s=r(i);n.set(r,{ctx:i,handler:s,cleanup:void 0})})}),On(this,Im,(e,n=!1)=>Promise.all([e].flat().map(r=>{const i=Je(this,ls).get(r),s=i==null?void 0:i.cleanup;return n?Je(this,ls).delete(r):Je(this,ls).set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof s=="function"?s():s}))),On(this,Jw,async()=>{await Promise.all([...Je(this,xc).entries()].map(([e,{cleanup:n}])=>typeof n=="function"?n():n)),Je(this,xc).clear()}),On(this,uh,e=>{On(this,Rs,e),Je(this,Nm).call(this,e)}),On(this,Pm,e=>[...e.entries()].map(async([n,r])=>{const{ctx:i,handler:s}=r;if(!s)return;const o=await s();e.set(n,{ctx:i,handler:s,cleanup:o})})),this.enableInspector=(e=!0)=>(On(this,rf,e),this),this.onStatusChange=e=>(On(this,Nm,e),this),this.config=e=>(Je(this,wc).push(e),this),this.removeConfig=e=>(On(this,wc,Je(this,wc).filter(n=>n!==e)),this),this.use=e=>{const n=[e].flat();return n.flat().forEach(r=>{Je(this,ls).set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),Je(this,Rs)==="Created"&&Je(this,of).call(this,n,Je(this,ls)),this},this.remove=async e=>Je(this,Rs)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(n=>{setTimeout(()=>{n(this.remove(e))},50)})):(await Je(this,Im).call(this,[e].flat(),!0),this),this.create=async()=>Je(this,Rs)==="OnCreate"?this:(Je(this,Rs)==="Created"&&await this.destroy(),Je(this,uh).call(this,"OnCreate"),Je(this,Kw).call(this),Je(this,of).call(this,[...Je(this,ls).keys()],Je(this,ls)),await Promise.all([Je(this,Pm).call(this,Je(this,xc)),Je(this,Pm).call(this,Je(this,ls))].flat()),Je(this,uh).call(this,"Created"),this),this.destroy=async(e=!1)=>Je(this,Rs)==="Destroyed"||Je(this,Rs)==="OnDestroy"?this:Je(this,Rs)==="OnCreate"?new Promise(n=>{setTimeout(()=>{n(this.destroy(e))},50)}):(e&&On(this,wc,[]),Je(this,uh).call(this,"OnDestroy"),await Je(this,Im).call(this,[...Je(this,ls).keys()],e),await Je(this,Jw).call(this),Je(this,uh).call(this,"Destroyed"),this),this.action=e=>e(Je(this,sf)),this.inspect=()=>Je(this,rf)?[...Je(this,xc).values(),...Je(this,ls).values()].map(({ctx:e})=>{var n;return(n=e==null?void 0:e.inspector)==null?void 0:n.read()}).filter(e=>!!e):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new wU}get ctx(){return Je(this,sf)}get status(){return Je(this,Rs)}};rf=new WeakMap;Rs=new WeakMap;wc=new WeakMap;Nm=new WeakMap;Uw=new WeakMap;Gw=new WeakMap;ls=new WeakMap;xc=new WeakMap;sf=new WeakMap;Kw=new WeakMap;of=new WeakMap;Im=new WeakMap;Jw=new WeakMap;uh=new WeakMap;Pm=new WeakMap;let mye=pye;function ut(t,e){const n=lye(t),r=i=>async()=>{r.key=n,await i.wait(Jg);const s=e(i);return i.get(ze).create(n,s),r.run=o=>i.get(ze).call(t,o),()=>{i.get(ze).remove(n)}};return r}function ii(t){const e=n=>async()=>{await n.wait(No);const r=t(n);return n.update(ny,i=>[...i,r]),e.inputRule=r,()=>{n.update(ny,i=>i.filter(s=>s!==r))}};return e}function gye(t,e){const n=r=>async()=>{const i=e(r);return r.update(Qf,s=>[...s.filter(o=>o[0]!==t),[t,i]]),n.id=t,n.schema=i,()=>{r.update(Qf,s=>s.filter(([o])=>o!==t))}};return n.type=r=>{const i=r.get(Oa).marks[t];if(!i)throw efe(t);return i},n}function zA(t,e){const n=r=>async()=>{const i=e(r);return r.update(Xf,s=>[...s.filter(o=>o[0]!==t),[t,i]]),n.id=t,n.schema=i,()=>{r.update(Xf,s=>s.filter(([o])=>o!==t))}};return n.type=r=>{const i=r.get(Oa).nodes[t];if(!i)throw Zde(t);return i},n}function dr(t){let e;const n=r=>async()=>(await r.wait(No),e=t(r),r.update(Bl,i=>[...i,e]),()=>{r.update(Bl,i=>i.filter(s=>s!==e))});return n.plugin=()=>e,n.key=()=>e.spec.key,n}function xU(t){const e=n=>async()=>{await n.wait(No);const r=t(n),i=MA(r);return n.update(Bl,s=>[...s,i]),e.keymap=r,()=>{n.update(Bl,s=>s.filter(o=>o!==i))}};return e}function Vy(t,e){const n=r=>async()=>{await r.wait(No);const i=e(r);return t.type(r)instanceof Vx?r.update(iy,s=>[...s,[t.id,i]]):r.update(sy,s=>[...s,[t.id,i]]),n.view=i,n.type=t,()=>{t.type(r)instanceof Vx?r.update(iy,s=>s.filter(o=>o[0]!==t.id)):r.update(sy,s=>s.filter(o=>o[0]!==t.id))}};return n}function Jt(t,e){const n=Pt(t,e),r=i=>(i.inject(n),()=>()=>{i.remove(n)});return r.key=n,r}function nr(t,e){const n=Jt(e,t),r=zA(t,s=>s.get(n.key)(s)),i=[n,r];return i.id=r.id,i.node=r,i.type=s=>r.type(s),i.schema=r.schema,i.ctx=n,i.key=n.key,i.extendSchema=s=>o=>()=>{const l=o.get(n.key),c=s(l)(o);o.update(Xf,u=>[...u.filter(h=>h[0]!==t),[t,c]]),i.schema=c},i}function Wy(t,e){const n=Jt(e,t),r=gye(t,s=>s.get(n.key)(s)),i=[n,r];return i.id=r.id,i.mark=r,i.type=r.type,i.schema=r.schema,i.ctx=n,i.key=n.key,i.extendSchema=s=>o=>()=>{const l=o.get(n.key),c=s(l)(o);o.update(Qf,u=>[...u.filter(h=>h[0]!==t),[t,c]]),i.schema=c},i}function Qi(t,e){const n=Object.fromEntries(Object.entries(e).map(([o,{shortcuts:l}])=>[o,l])),r=Jt(n,`${t}Keymap`),i=xU(o=>{const l=o.get(r.key),a=Object.entries(e).flatMap(([c,{command:u}])=>[l[c]].flat().map(d=>[d,u(o)]));return Object.fromEntries(a)}),s=[r,i];return s.ctx=r,s.shortcuts=i,s.key=r.key,s.keymap=i.keymap,s}const Wo=(t,e=()=>({}))=>Jt(e,`${t}Attr`),qy=(t,e=()=>({}))=>Jt(e,`${t}Attr`);function Hl(t,e,n){const r=Jt({},t),i=o=>async()=>{await o.wait(jh);const a={plugin:e(o),options:o.get(r.key)};return o.update(ry,c=>[...c,a]),()=>{o.update(ry,c=>c.filter(u=>u!==a))}},s=[r,i];return s.id=t,s.plugin=i,s.options=r,s}function yye(){return t=>{const e=t.get(hn);return t.get(Zf)(e.state.doc)}}var bU="Expected a function",aD=NaN,vye="[object Symbol]",wye=/^\s+|\s+$/g,xye=/^[-+]0x[0-9a-f]+$/i,bye=/^0b[01]+$/i,kye=/^0o[0-7]+$/i,Sye=parseInt,Cye=typeof Qn=="object"&&Qn&&Qn.Object===Object&&Qn,_ye=typeof self=="object"&&self&&self.Object===Object&&self,Aye=Cye||_ye||Function("return this")(),Tye=Object.prototype,Mye=Tye.toString,Eye=Math.max,Oye=Math.min,b6=function(){return Aye.Date.now()};function Nye(t,e,n){var r,i,s,o,l,a,c=0,u=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(bU);e=cD(e)||0,Qx(n)&&(u=!!n.leading,h="maxWait"in n,s=h?Eye(cD(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(C){var T=r,I=i;return r=i=void 0,c=C,o=t.apply(I,T),o}function p(C){return c=C,l=setTimeout(g,e),u?f(C):o}function m(C){var T=C-a,I=C-c,L=e-T;return h?Oye(L,s-I):L}function y(C){var T=C-a,I=C-c;return a===void 0||T>=e||T<0||h&&I>=s}function g(){var C=b6();if(y(C))return v(C);l=setTimeout(g,m(C))}function v(C){return l=void 0,d&&r?f(C):(r=i=void 0,o)}function w(){l!==void 0&&clearTimeout(l),c=0,r=a=i=l=void 0}function S(){return l===void 0?o:v(b6())}function _(){var C=b6(),T=y(C);if(r=arguments,i=this,a=C,T){if(l===void 0)return p(a);if(h)return l=setTimeout(g,e),f(a)}return l===void 0&&(l=setTimeout(g,e)),o}return _.cancel=w,_.flush=S,_}function Iye(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(bU);return Qx(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Nye(t,e,{leading:r,maxWait:e,trailing:i})}function Qx(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Pye(t){return!!t&&typeof t=="object"}function Rye(t){return typeof t=="symbol"||Pye(t)&&Mye.call(t)==vye}function cD(t){if(typeof t=="number")return t;if(Rye(t))return aD;if(Qx(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Qx(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(wye,"");var n=bye.test(t);return n||kye.test(t)?Sye(t.slice(2),n?2:8):xye.test(t)?aD:+t}var Dye=Iye;const O5=EC(Dye),p9=Math.min,e0=Math.max,Zx=Math.round,Pl=t=>({x:t,y:t}),Lye={left:"right",right:"left",bottom:"top",top:"bottom"},Bye={start:"end",end:"start"};function uD(t,e,n){return e0(t,p9(e,n))}function N5(t,e){return typeof t=="function"?t(e):t}function hd(t){return t.split("-")[0]}function I5(t){return t.split("-")[1]}function kU(t){return t==="x"?"y":"x"}function SU(t){return t==="y"?"height":"width"}function Kc(t){return["top","bottom"].includes(hd(t))?"y":"x"}function CU(t){return kU(Kc(t))}function $ye(t,e,n){n===void 0&&(n=!1);const r=I5(t),i=CU(t),s=SU(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=eb(o)),[o,eb(o)]}function Fye(t){const e=eb(t);return[m9(t),e,m9(e)]}function m9(t){return t.replace(/start|end/g,e=>Bye[e])}function zye(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function jye(t,e,n,r){const i=I5(t);let s=zye(hd(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(m9)))),s}function eb(t){return t.replace(/left|right|bottom|top/g,e=>Lye[e])}function Hye(t){return{top:0,right:0,bottom:0,left:0,...t}}function Vye(t){return typeof t!="number"?Hye(t):{top:t,right:t,bottom:t,left:t}}function tb(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function hD(t,e,n){let{reference:r,floating:i}=t;const s=Kc(e),o=CU(e),l=SU(o),a=hd(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[l]/2-i[l]/2;let f;switch(a){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(I5(e)){case"start":f[o]-=d*(n&&c?-1:1);break;case"end":f[o]+=d*(n&&c?-1:1);break}return f}const Wye=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=hD(c,r,a),d=r,f={},p=0;for(let m=0;m<l.length;m++){const{name:y,fn:g}=l[m],{x:v,y:w,data:S,reset:_}=await g({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=v??u,h=w??h,f={...f,[y]:{...f[y],...S}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):_.rects),{x:u,y:h}=hD(c,d,a)),m=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function _U(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=N5(e,t),p=Vye(f),y=l[d?h==="floating"?"reference":"floating":h],g=tb(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),v=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),S=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=tb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:a}):v);return{top:(g.top-_.top+p.top)/S.y,bottom:(_.bottom-g.bottom+p.bottom)/S.y,left:(g.left-_.left+p.left)/S.x,right:(_.right-g.right+p.right)/S.x}}const qye=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=N5(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=hd(i),v=Kc(l),w=hd(l)===l,S=await(a.isRTL==null?void 0:a.isRTL(c.floating)),_=d||(w||!m?[eb(l)]:Fye(l)),C=p!=="none";!d&&C&&_.push(...jye(l,m,p,S));const T=[l,..._],I=await _U(e,y),L=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&L.push(I[g]),h){const Z=$ye(i,o,S);L.push(I[Z[0]],I[Z[1]])}if(N=[...N,{placement:i,overflows:L}],!L.every(Z=>Z<=0)){var $,F;const Z=((($=s.flip)==null?void 0:$.index)||0)+1,Y=T[Z];if(Y&&(!(h==="alignment"?v!==Kc(Y):!1)||N.every(W=>W.overflows[0]>0&&Kc(W.placement)===v)))return{data:{index:Z,overflows:N},reset:{placement:Y}};let pe=(F=N.filter(de=>de.overflows[0]<=0).sort((de,W)=>de.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!pe)switch(f){case"bestFit":{var ie;const de=(ie=N.filter(W=>{if(C){const z=Kc(W.placement);return z===v||z==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(z=>z>0).reduce((z,O)=>z+O,0)]).sort((W,z)=>W[1]-z[1])[0])==null?void 0:ie[0];de&&(pe=de);break}case"initialPlacement":pe=l;break}if(i!==pe)return{reset:{placement:pe}}}return{}}}};async function Uye(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=hd(n),l=I5(n),a=Kc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&a?-1:1,h=N5(e,t);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof p=="number"&&(f=l==="end"?p*-1:p),a?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const Gye=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,a=await Uye(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+a.x,y:s+a.y,data:{...a,placement:o}}}}},Kye=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:g,y:v}=y;return{x:g,y:v}}},...a}=N5(t,e),c={x:n,y:r},u=await _U(e,a),h=Kc(hd(i)),d=kU(h);let f=c[d],p=c[h];if(s){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",v=f+u[y],w=f-u[g];f=uD(v,f,w)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",v=p+u[y],w=p-u[g];p=uD(v,p,w)}const m=l.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[d]:s,[h]:o}}}}}};function P5(){return typeof window<"u"}function Z0(t){return AU(t)?(t.nodeName||"").toLowerCase():"#document"}function Cs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Qa(t){var e;return(e=(AU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AU(t){return P5()?t instanceof Node||t instanceof Cs(t).Node:!1}function zo(t){return P5()?t instanceof Element||t instanceof Cs(t).Element:!1}function $l(t){return P5()?t instanceof HTMLElement||t instanceof Cs(t).HTMLElement:!1}function dD(t){return!P5()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cs(t).ShadowRoot}function Uy(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=jo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Jye(t){return["table","td","th"].includes(Z0(t))}function R5(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function jA(t){const e=HA(),n=zo(t)?jo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Yye(t){let e=bu(t);for(;$l(e)&&!R0(e);){if(jA(e))return e;if(R5(e))return null;e=bu(e)}return null}function HA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function R0(t){return["html","body","#document"].includes(Z0(t))}function jo(t){return Cs(t).getComputedStyle(t)}function D5(t){return zo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bu(t){if(Z0(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dD(t)&&t.host||Qa(t);return dD(e)?e.host:e}function TU(t){const e=bu(t);return R0(e)?t.ownerDocument?t.ownerDocument.body:t.body:$l(e)&&Uy(e)?e:TU(e)}function g9(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=TU(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Cs(i);if(s){const l=y9(o);return e.concat(o,o.visualViewport||[],Uy(i)?i:[],l&&n?g9(l):[])}return e.concat(i,g9(i,[],n))}function y9(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function MU(t){const e=jo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=$l(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Zx(n)!==s||Zx(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function EU(t){return zo(t)?t:t.contextElement}function t0(t){const e=EU(t);if(!$l(e))return Pl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=MU(e);let o=(s?Zx(n.width):n.width)/r,l=(s?Zx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Xye=Pl(0);function OU(t){const e=Cs(t);return!HA()||!e.visualViewport?Xye:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Qye(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cs(t)?!1:e}function oy(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=EU(t);let o=Pl(1);e&&(r?zo(r)&&(o=t0(r)):o=t0(t));const l=Qye(s,n,r)?OU(s):Pl(0);let a=(i.left+l.x)/o.x,c=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=Cs(s),f=r&&zo(r)?Cs(r):r;let p=d,m=y9(p);for(;m&&r&&f!==p;){const y=t0(m),g=m.getBoundingClientRect(),v=jo(m),w=g.left+(m.clientLeft+parseFloat(v.paddingLeft))*y.x,S=g.top+(m.clientTop+parseFloat(v.paddingTop))*y.y;a*=y.x,c*=y.y,u*=y.x,h*=y.y,a+=w,c+=S,p=Cs(m),m=y9(p)}}return tb({width:u,height:h,x:a,y:c})}function VA(t,e){const n=D5(t).scrollLeft;return e?e.left+n:oy(Qa(t)).left+n}function NU(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:VA(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Zye(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Qa(r),l=e?R5(e.floating):!1;if(r===o||l&&s)return n;let a={scrollLeft:0,scrollTop:0},c=Pl(1);const u=Pl(0),h=$l(r);if((h||!h&&!s)&&((Z0(r)!=="body"||Uy(o))&&(a=D5(r)),$l(r))){const f=oy(r);c=t0(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const d=o&&!h&&!s?NU(o,a,!0):Pl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x+d.x,y:n.y*c.y-a.scrollTop*c.y+u.y+d.y}}function eve(t){return Array.from(t.getClientRects())}function tve(t){const e=Qa(t),n=D5(t),r=t.ownerDocument.body,i=e0(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=e0(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+VA(t);const l=-n.scrollTop;return jo(r).direction==="rtl"&&(o+=e0(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function nve(t,e){const n=Cs(t),r=Qa(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,a=0;if(i){s=i.width,o=i.height;const c=HA();(!c||c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:o,x:l,y:a}}function rve(t,e){const n=oy(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=$l(t)?t0(t):Pl(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,a=i*s.x,c=r*s.y;return{width:o,height:l,x:a,y:c}}function fD(t,e,n){let r;if(e==="viewport")r=nve(t,n);else if(e==="document")r=tve(Qa(t));else if(zo(e))r=rve(e,n);else{const i=OU(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return tb(r)}function IU(t,e){const n=bu(t);return n===e||!zo(n)||R0(n)?!1:jo(n).position==="fixed"||IU(n,e)}function ive(t,e){const n=e.get(t);if(n)return n;let r=g9(t,[],!1).filter(l=>zo(l)&&Z0(l)!=="body"),i=null;const s=jo(t).position==="fixed";let o=s?bu(t):t;for(;zo(o)&&!R0(o);){const l=jo(o),a=jA(o);!a&&l.position==="fixed"&&(i=null),(s?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Uy(o)&&!a&&IU(t,o))?r=r.filter(u=>u!==o):i=l,o=bu(o)}return e.set(t,r),r}function sve(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?R5(e)?[]:ive(e,this._c):[].concat(n),r],l=o[0],a=o.reduce((c,u)=>{const h=fD(e,u,i);return c.top=e0(h.top,c.top),c.right=p9(h.right,c.right),c.bottom=p9(h.bottom,c.bottom),c.left=e0(h.left,c.left),c},fD(e,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function ove(t){const{width:e,height:n}=MU(t);return{width:e,height:n}}function lve(t,e,n){const r=$l(e),i=Qa(e),s=n==="fixed",o=oy(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=Pl(0);function c(){a.x=VA(i)}if(r||!r&&!s)if((Z0(e)!=="body"||Uy(i))&&(l=D5(e)),r){const f=oy(e,!0,s,e);a.x=f.x+e.clientLeft,a.y=f.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?NU(i,l):Pl(0),h=o.left+l.scrollLeft-a.x-u.x,d=o.top+l.scrollTop-a.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function k6(t){return jo(t).position==="static"}function pD(t,e){if(!$l(t)||jo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Qa(t)===n&&(n=n.ownerDocument.body),n}function PU(t,e){const n=Cs(t);if(R5(t))return n;if(!$l(t)){let i=bu(t);for(;i&&!R0(i);){if(zo(i)&&!k6(i))return i;i=bu(i)}return n}let r=pD(t,e);for(;r&&Jye(r)&&k6(r);)r=pD(r,e);return r&&R0(r)&&k6(r)&&!jA(r)?n:r||Yye(t)||n}const ave=async function(t){const e=this.getOffsetParent||PU,n=this.getDimensions,r=await n(t.floating);return{reference:lve(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cve(t){return jo(t).direction==="rtl"}const uve={convertOffsetParentRelativeRectToViewportRelativeRect:Zye,getDocumentElement:Qa,getClippingRect:sve,getOffsetParent:PU,getElementRects:ave,getClientRects:eve,getDimensions:ove,getScale:t0,isElement:zo,isRTL:cve},ku=Gye,mD=Kye,nb=qye,Ho=(t,e,n)=>{const r=new Map,i={platform:uve,...n},s={...i.platform,_c:r};return Wye(t,e,{...i,platform:s})};var RU=t=>{throw TypeError(t)},WA=(t,e,n)=>e.has(t)||RU("Cannot "+n),We=(t,e,n)=>(WA(t,e,"read from private field"),n?n.call(t):e.get(t)),Qt=(t,e,n)=>e.has(t)?RU("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),wt=(t,e,n,r)=>(WA(t,e,"write to private field"),e.set(t,n),n),hve=(t,e,n)=>(WA(t,e,"access private method"),n),ly,n4,lf,ll,Dm,al,hh,DU,Lm,af,cf,r4,Bm,$m,Fm,i4,uf,ds,Jc,n0,r0,rb,zm,s4,o4,jm,Hm,Vm,v9,LU;function Gy(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-block",...e}}),t}const dve=t=>!Il(n=>n.type.name==="table")(t),L5=Jt({filterNodes:dve},"blockConfig");Gy(L5,{displayName:"Ctx<blockConfig>"});function fve(t,e,n){var r;if(!t.dom.parentElement)return null;try{const s=(r=t.posAtCoords({left:e.x,top:e.y}))==null?void 0:r.inside;if(s==null||s<0)return null;let o=t.state.doc.resolve(s),l=t.state.doc.nodeAt(s),a=t.nodeDOM(s);const c=h=>{const d=o.depth>=1&&o.index(o.depth)===0;if(!(h||d))return;const p=o.before(o.depth);l=t.state.doc.nodeAt(p),a=t.nodeDOM(p),o=t.state.doc.resolve(p),n(o,l)||c(!0)},u=n(o,l);return c(!u),!a||!l?null:{node:l,$pos:o,el:a}}catch{return null}}const gD=m2.ie&&m2.ie_version<15||m2.ios&&m2.webkit_version<604,yD=20;class pve{constructor(){Qt(this,hh),Qt(this,ly),Qt(this,n4),Qt(this,lf),Qt(this,ll),Qt(this,Dm),Qt(this,al),Qt(this,af),Qt(this,cf),Qt(this,r4),Qt(this,Bm),Qt(this,$m),Qt(this,Fm),Qt(this,i4),Qt(this,uf),wt(this,n4,()=>{if(!We(this,ll))return null;const e=We(this,ll),n=We(this,hh,Lm);if(n&&tt.isSelectable(e.node)){const r=tt.create(n.state.doc,e.$pos.pos);return n.dispatch(n.state.tr.setSelection(r)),n.focus(),wt(this,lf,r),r}return null}),wt(this,lf,null),wt(this,ll,null),wt(this,Dm,void 0),wt(this,al,!1),wt(this,cf,()=>{var e;(e=We(this,af))==null||e.call(this,{type:"hide"}),wt(this,ll,null)}),wt(this,r4,e=>{var n;wt(this,ll,e),(n=We(this,af))==null||n.call(this,{type:"show",active:e})}),this.bind=(e,n)=>{wt(this,ly,e),wt(this,af,n)},this.addEvent=e=>{e.addEventListener("mousedown",We(this,Bm)),e.addEventListener("mouseup",We(this,$m)),e.addEventListener("dragstart",We(this,Fm))},this.removeEvent=e=>{e.removeEventListener("mousedown",We(this,Bm)),e.removeEventListener("mouseup",We(this,$m)),e.removeEventListener("dragstart",We(this,Fm))},this.unBind=()=>{wt(this,af,void 0)},wt(this,Bm,()=>{var e;wt(this,Dm,(e=We(this,ll))==null?void 0:e.el.getBoundingClientRect()),We(this,n4).call(this)}),wt(this,$m,()=>{if(!We(this,al)){requestAnimationFrame(()=>{var e;We(this,Dm)&&((e=We(this,hh,Lm))==null||e.focus())});return}wt(this,al,!1),wt(this,lf,null)}),wt(this,Fm,e=>{var n;wt(this,al,!0);const r=We(this,hh,Lm);if(!r)return;r.dom.dataset.dragging="true";const i=We(this,lf);if(e.dataTransfer&&i){const s=i.content();e.dataTransfer.effectAllowed="copyMove";const{dom:o,text:l}=r.serializeForClipboard(s);e.dataTransfer.clearData(),e.dataTransfer.setData(gD?"Text":"text/html",o.innerHTML),gD||e.dataTransfer.setData("text/plain",l);const a=(n=We(this,ll))==null?void 0:n.el;a&&e.dataTransfer.setDragImage(a,0,0),r.dragging={slice:s,move:!0}}}),this.keydownCallback=e=>(We(this,cf).call(this),wt(this,al,!1),e.dom.dataset.dragging="false",!1),wt(this,i4,O5((e,n)=>{if(!e.editable)return;const r=e.dom.getBoundingClientRect(),i=r.left+r.width/2;if(!(e.root.elementFromPoint(i,n.clientY)instanceof Element)){We(this,cf).call(this);return}const o=We(this,hh,DU);if(!o)return;const l=fve(e,{x:i,y:n.clientY},o);if(!l){We(this,cf).call(this);return}We(this,r4).call(this,l)},200)),this.mousemoveCallback=(e,n)=>(e.composing||!e.editable||We(this,i4).call(this,e,n),!1),this.dragoverCallback=(e,n)=>{var r;if(We(this,al)){const i=(r=We(this,hh,Lm))==null?void 0:r.dom.parentElement;if(!i)return!1;const s=i.scrollHeight>i.clientHeight,o=i.getBoundingClientRect();if(s){if(i.scrollTop>0&&Math.abs(n.y-o.y)<yD){const c=i.scrollTop>10?i.scrollTop-10:0;return i.scrollTop=c,!1}const l=Math.round(e.dom.getBoundingClientRect().height);if(Math.round(i.scrollTop+o.height)<l&&Math.abs(n.y-(o.height+o.y))<yD){const c=i.scrollTop+10;return i.scrollTop=c,!1}}}return!1},this.dragenterCallback=e=>{e.dragging&&(wt(this,al,!0),e.dom.dataset.dragging="true")},this.dragleaveCallback=(e,n)=>{const r=n.clientX,i=n.clientY;(r<0||i<0||r>window.innerWidth||i>window.innerHeight)&&(wt(this,ll,null),We(this,uf).call(this,e))},this.dropCallback=e=>(We(this,uf).call(this,e),!1),this.dragendCallback=e=>{We(this,uf).call(this,e)},wt(this,uf,e=>{wt(this,al,!1),e.dom.dataset.dragging="false"})}}ly=new WeakMap;n4=new WeakMap;lf=new WeakMap;ll=new WeakMap;Dm=new WeakMap;al=new WeakMap;hh=new WeakSet;DU=function(){var t;try{return(t=We(this,ly))==null?void 0:t.get(L5.key).filterNodes}catch{return}};Lm=function(){var t;return(t=We(this,ly))==null?void 0:t.get(hn)};af=new WeakMap;cf=new WeakMap;r4=new WeakMap;Bm=new WeakMap;$m=new WeakMap;Fm=new WeakMap;i4=new WeakMap;uf=new WeakMap;const qA=Jt(()=>new pve,"blockService"),B5=Jt({},"blockServiceInstance");Gy(qA,{displayName:"Ctx<blockService>"});Gy(B5,{displayName:"Ctx<blockServiceInstance>"});const $5=Jt({},"blockSpec");Gy($5,{displayName:"Ctx<blockSpec>"});const UA=dr(t=>{const e=new $n("MILKDOWN_BLOCK"),r=t.get(qA.key)();t.set(B5.key,r);const i=t.get($5.key);return new An({key:e,...i,props:{...i.props,handleDOMEvents:{drop:s=>r.dropCallback(s),pointermove:(s,o)=>r.mousemoveCallback(s,o),keydown:s=>r.keydownCallback(s),dragover:(s,o)=>r.dragoverCallback(s,o),dragleave:(s,o)=>r.dragleaveCallback(s,o),dragenter:s=>r.dragenterCallback(s),dragend:s=>r.dragendCallback(s)}}})});Gy(UA,{displayName:"Prose<block>"});class mve{constructor(e){Qt(this,v9),Qt(this,ds),Qt(this,Jc),Qt(this,n0),Qt(this,r0),Qt(this,rb),Qt(this,zm),Qt(this,s4),Qt(this,o4),Qt(this,jm),Qt(this,Hm),Qt(this,Vm),wt(this,r0,null),wt(this,zm,!1),this.update=()=>{requestAnimationFrame(()=>{if(!We(this,zm))try{hve(this,v9,LU).call(this),wt(this,zm,!0)}catch{}})},this.destroy=()=>{var n,r;(n=We(this,n0))==null||n.unBind(),(r=We(this,n0))==null||r.removeEvent(We(this,ds)),We(this,ds).remove()},this.show=n=>{const r=n.el,i=We(this,Jc).get(hn).dom,s={ctx:We(this,Jc),active:n,editorDom:i,blockDom:We(this,ds)},o={contextElement:r,getBoundingClientRect:()=>We(this,Hm)?We(this,Hm).call(this,s):r.getBoundingClientRect()},l=[nb()];if(We(this,jm)){const a=We(this,jm).call(this,s),c=ku(a);l.push(c)}Ho(o,We(this,ds),{placement:We(this,Vm)?We(this,Vm).call(this,s):"left",middleware:[...l,...We(this,s4)],...We(this,o4)}).then(({x:a,y:c})=>{Object.assign(We(this,ds).style,{left:`${a}px`,top:`${c}px`}),We(this,ds).dataset.show="true"}).catch(console.error)},this.hide=()=>{We(this,ds).dataset.show="false"},wt(this,Jc,e.ctx),wt(this,ds,e.content),wt(this,jm,e.getOffset),wt(this,Hm,e.getPosition),wt(this,Vm,e.getPlacement),wt(this,s4,e.middleware??[]),wt(this,o4,e.floatingUIOptions??{}),wt(this,rb,e.root),this.hide()}get active(){return We(this,r0)}}ds=new WeakMap;Jc=new WeakMap;n0=new WeakMap;r0=new WeakMap;rb=new WeakMap;zm=new WeakMap;s4=new WeakMap;o4=new WeakMap;jm=new WeakMap;Hm=new WeakMap;Vm=new WeakMap;v9=new WeakSet;LU=function(){const t=We(this,Jc).get(hn);(We(this,rb)??t.dom.parentElement??document.body).appendChild(We(this,ds));const n=We(this,Jc).get(B5.key);n.bind(We(this,Jc),r=>{r.type==="hide"?(this.hide(),wt(this,r0,null)):r.type==="show"&&(this.show(r.active),wt(this,r0,r.active))}),wt(this,n0,n),We(this,n0).addEvent(We(this,ds)),We(this,ds).draggable=!0};const F5=[$5,L5,qA,B5,UA];F5.key=$5.key;F5.pluginKey=UA.key;function gve(t,e){return function(n,r){let{$from:i,$to:s,node:o}=n.selection;if(o&&o.isBlock||i.depth<2||!i.sameParent(s))return!1;let l=i.node(-1);if(l.type!=t)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let h=Ce.empty,d=i.index(-1)?1:i.index(-2)?2:3;for(let g=i.depth-d;g>=i.depth-3;g--)h=Ce.from(i.node(g).copy(h));let f=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;h=h.append(Ce.from(t.createAndFill()));let p=i.before(i.depth-(d-1)),m=n.tr.replace(p,i.after(-f),new Pe(h,4-d,0)),y=-1;m.doc.nodesBetween(p,m.doc.content.size,(g,v)=>{if(y>-1)return!1;g.isTextblock&&g.content.size==0&&(y=v+1)}),y>-1&&m.setSelection(ct.near(m.doc.resolve(y))),r(m.scrollIntoView())}return!0}let a=s.pos==i.end()?l.contentMatchAt(0).defaultType:null,c=n.tr.delete(i.pos,s.pos),u=a?[null,{type:a}]:void 0;return Vg(c.doc,i.pos,2,u)?(r&&r(c.split(i.pos,2,u).scrollIntoView()),!0):!1}}function BU(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?yve(e,n,t,s):vve(e,n,s):!0:!1}}function yve(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new ei(s-1,o,s,o,new Pe(Ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new eW(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=m5(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return g5(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function vve(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?Ce.empty:Ce.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new ei(h-(l?1:0),d+(a?1:0),h+1,d-1,new Pe((l?Ce.empty:Ce.from(i.copy(Ce.empty))).append(a?Ce.empty:Ce.from(i.copy(Ce.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function wve(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=Ce.from(c?t.create():null),h=new Pe(Ce.from(t.create(null,Ce.from(l.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new ei(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function xve(t){const e=new Map;if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return Du(t,"definition",function(r){const i=vD(r.identifier);i&&!e.get(i)&&e.set(i,r)}),n;function n(r){const i=vD(r);return e.get(i)}}function vD(t){return String(t||"").toUpperCase()}function bve(){return function(t){const e=xve(t);Du(t,function(n,r,i){if(n.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[GS,r];if(n.type==="imageReference"||n.type==="linkReference"){const s=e(n.identifier);if(s&&i&&typeof r=="number")return i.children[r]=n.type==="imageReference"?{type:"image",url:s.url,title:s.title,alt:n.alt}:{type:"link",url:s.url,title:s.title,children:n.children},[GS,r]}})}}function $U(t,e){var n;if(!(e.childCount>=1&&((n=e.lastChild)==null?void 0:n.type.name)==="hardbreak")){t.next(e.content);return}const i=[];e.content.forEach((s,o,l)=>{l!==e.childCount-1&&i.push(s)}),t.next(Ce.fromArray(i))}function re(t,e){return Object.assign(t,{meta:{package:"@milkdown/preset-commonmark",...e}}),t}const GA=qy("emphasis");re(GA,{displayName:"Attr<emphasis>",group:"Emphasis"});const kd=Wy("emphasis",t=>({attrs:{marker:{default:t.get(Kg).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"}],toDOM:e=>["em",t.get(GA.key)(e)],parseMarkdown:{match:e=>e.type==="emphasis",runner:(e,n,r)=>{e.openMark(r,{marker:n.marker}),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="emphasis",runner:(e,n)=>{e.withMark(n,"emphasis",void 0,{marker:n.attrs.marker})}}}));re(kd.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});re(kd.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const z5=ut("ToggleEmphasis",t=>()=>A5(kd.type(t)));re(z5,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const FU=ii(t=>Ly(/(?:^|[^*])\*([^*]+)\*$/,kd.type(t),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:e,start:n})=>e.startsWith("*")?{}:{fullMatch:e.slice(1),start:n+1}}));re(FU,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const zU=ii(t=>Ly(/(?:^|[^_])_([^_]+)_$/,kd.type(t),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:e,start:n})=>e.startsWith("_")?{}:{fullMatch:e.slice(1),start:n+1}}));re(zU,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const KA=Qi("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:t=>{const e=t.get(ze);return()=>e.call(z5.key)}}});re(KA.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});re(KA.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const JA=qy("strong");re(JA,{displayName:"Attr<strong>",group:"Strong"});const ep=Wy("strong",t=>({attrs:{marker:{default:t.get(Kg).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:e=>e==="bold"},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:e=>["strong",t.get(JA.key)(e)],parseMarkdown:{match:e=>e.type==="strong",runner:(e,n,r)=>{e.openMark(r,{marker:n.marker}),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strong",runner:(e,n)=>{e.withMark(n,"strong",void 0,{marker:n.attrs.marker})}}}));re(ep.mark,{displayName:"MarkSchema<strong>",group:"Strong"});re(ep.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const j5=ut("ToggleStrong",t=>()=>A5(ep.type(t)));re(j5,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const jU=ii(t=>Ly(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,ep.type(t),{getAttr:e=>({marker:e[0].startsWith("*")?"*":"_"})}));re(jU,{displayName:"InputRule<strong>",group:"Strong"});const YA=Qi("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:t=>{const e=t.get(ze);return()=>e.call(j5.key)}}});re(YA.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});re(YA.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const XA=qy("inlineCode");re(XA,{displayName:"Attr<inlineCode>",group:"InlineCode"});const Ca=Wy("inlineCode",t=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:e=>["code",t.get(XA.key)(e)],parseMarkdown:{match:e=>e.type==="inlineCode",runner:(e,n,r)=>{e.openMark(r),e.addText(n.value),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="inlineCode",runner:(e,n,r)=>{e.withMark(n,"inlineCode",r.text||"")}}}));re(Ca.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});re(Ca.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const H5=ut("ToggleInlineCode",t=>()=>(e,n)=>{const{selection:r,tr:i}=e;if(r.empty)return!1;const{from:s,to:o}=r;return e.doc.rangeHasMark(s,o,Ca.type(t))?(n==null||n(i.removeMark(s,o,Ca.type(t))),!0):(Object.keys(e.schema.marks).filter(c=>c!==Ca.type.name).map(c=>e.schema.marks[c]).forEach(c=>{i.removeMark(s,o,c)}),n==null||n(i.addMark(s,o,Ca.type(t).create())),!0)});re(H5,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const HU=ii(t=>Ly(/(?:`)([^`]+)(?:`)$/,Ca.type(t)));re(HU,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const QA=Qi("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:t=>{const e=t.get(ze);return()=>e.call(H5.key)}}});re(QA.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});re(QA.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const ZA=qy("link");re(ZA,{displayName:"Attr<link>",group:"Link"});const Io=Wy("link",t=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Vo(e);return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",{...t.get(ZA.key)(e),...e.attrs}],parseMarkdown:{match:e=>e.type==="link",runner:(e,n,r)=>{const i=n.url,s=n.title;e.openMark(r,{href:i,title:s}),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="link",runner:(e,n)=>{e.withMark(n,"link",void 0,{title:n.attrs.title,url:n.attrs.href})}}}));re(Io.mark,{displayName:"MarkSchema<link>",group:"Link"});const VU=ut("ToggleLink",t=>(e={})=>A5(Io.type(t),e));re(VU,{displayName:"Command<toggleLinkCommand>",group:"Link"});const WU=ut("UpdateLink",t=>(e={})=>(n,r)=>{if(!r)return!1;let i,s=-1;const{selection:o}=n,{from:l,to:a}=o;if(n.doc.nodesBetween(l,l===a?a+1:a,(p,m)=>{if(Io.type(t).isInSet(p.marks))return i=p,s=m,!1}),!i)return!1;const c=i.marks.find(({type:p})=>p===Io.type(t));if(!c)return!1;const u=s,h=s+i.nodeSize,{tr:d}=n,f=Io.type(t).create({...c.attrs,...e});return f?(r(d.removeMark(u,h,c).addMark(u,h,f).setSelection(new qe(d.selection.$anchor)).scrollIntoView()),!0):!1});re(WU,{displayName:"Command<updateLinkCommand>",group:"Link"});const qU=zA("doc",()=>({content:"block+",parseMarkdown:{match:({type:t})=>t==="root",runner:(t,e,n)=>{t.injectRoot(e,n)}},toMarkdown:{match:t=>t.type.name==="doc",runner:(t,e)=>{t.openNode("root"),t.next(e.content)}}}));re(qU,{displayName:"NodeSchema<doc>",group:"Doc"});function kve(t){return xA(t,e=>{var n;return e.type==="html"&&["<br />","<br>","<br >","<br/>"].includes((n=e.value)==null?void 0:n.trim())},(e,n)=>{if(!n.length)return;const r=n[n.length-1];if(!r)return;const i=r.children.indexOf(e);i!==-1&&r.children.splice(i,1)},!0)}const V5=Hl("remark-preserve-empty-line",()=>()=>kve);re(V5.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});re(V5.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const eT=Wo("paragraph");re(eT,{displayName:"Attr<paragraph>",group:"Paragraph"});const Vl=nr("paragraph",t=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",t.get(eT.key)(e),0],parseMarkdown:{match:e=>e.type==="paragraph",runner:(e,n,r)=>{e.openNode(r),n.children?e.next(n.children):e.addText(n.value||""),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="paragraph",runner:(e,n)=>{var r;const s=(r=t.get(hn).state)==null?void 0:r.doc.lastChild;e.openNode("paragraph"),(!n.content||n.content.size===0)&&n!==s&&Sve(t)?e.addNode("html",void 0,"<br />"):$U(e,n),e.closeNode()}}}));function Sve(t){let e=!1;try{t.get(V5.id),e=!0}catch{e=!1}return e}re(Vl.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});re(Vl.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const tT=ut("TurnIntoText",t=>()=>Q1(Vl.type(t)));re(tT,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const nT=Qi("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:t=>{const e=t.get(ze);return()=>e.call(tT.key)}}});re(nT.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});re(nT.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const Cve=Array(6).fill(0).map((t,e)=>e+1);function _ve(t){return t.textContent.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-")}const W5=Jt(_ve,"headingIdGenerator");re(W5,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const rT=Wo("heading");re(rT,{displayName:"Attr<heading>",group:"Heading"});const gs=nr("heading",t=>{const e=t.get(W5.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:Cve.map(n=>({tag:`h${n}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw Vo(r);return{level:n,id:r.id}}})),toDOM:n=>[`h${n.attrs.level}`,{...t.get(rT.key)(n),id:n.attrs.id||e(n)},0],parseMarkdown:{match:({type:n})=>n==="heading",runner:(n,r,i)=>{const s=r.depth;n.openNode(i,{level:s}),n.next(r.children),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="heading",runner:(n,r)=>{n.openNode("heading",void 0,{depth:r.attrs.level}),$U(n,r),n.closeNode()}}}});re(gs.node,{displayName:"NodeSchema<heading>",group:"Heading"});re(gs.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const UU=ii(t=>fA(/^(?<hashes>#+)\s$/,gs.type(t),e=>{var n,r;const i=((r=(n=e.groups)==null?void 0:n.hashes)==null?void 0:r.length)||0,s=t.get(hn),{$from:o}=s.state.selection,l=o.node();if(l.type.name==="heading"){let a=Number(l.attrs.level)+Number(i);return a>6&&(a=6),{level:a}}return{level:i}}));re(UU,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Oc=ut("WrapInHeading",t=>e=>(e??(e=1),e<1?Q1(Vl.type(t)):Q1(gs.type(t),{level:e})));re(Oc,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const iT=ut("DowngradeHeading",t=>()=>(e,n,r)=>{const{$from:i}=e.selection,s=i.node();if(s.type!==gs.type(t)||!e.selection.empty||i.parentOffset!==0)return!1;const o=s.attrs.level-1;return o?(n==null||n(e.tr.setNodeMarkup(e.selection.$from.before(),void 0,{...s.attrs,level:o})),!0):Q1(Vl.type(t))(e,n,r)});re(iT,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const sT=Qi("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:t=>{const e=t.get(ze);return()=>e.call(Oc.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:t=>{const e=t.get(ze);return()=>e.call(Oc.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:t=>{const e=t.get(ze);return()=>e.call(Oc.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:t=>{const e=t.get(ze);return()=>e.call(Oc.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:t=>{const e=t.get(ze);return()=>e.call(Oc.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:t=>{const e=t.get(ze);return()=>e.call(Oc.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:t=>{const e=t.get(ze);return()=>e.call(iT.key)}}});re(sT.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});re(sT.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const oT=Wo("blockquote");re(oT,{displayName:"Attr<blockquote>",group:"Blockquote"});const tp=nr("blockquote",t=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",t.get(oT.key)(e),0],parseMarkdown:{match:({type:e})=>e==="blockquote",runner:(e,n,r)=>{e.openNode(r).next(n.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="blockquote",runner:(e,n)=>{e.openNode("blockquote").next(n.content).closeNode()}}}));re(tp.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});re(tp.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const GU=ii(t=>dA(/^\s*>\s$/,tp.type(t)));re(GU,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const lT=ut("WrapInBlockquote",t=>()=>TA(tp.type(t)));re(lT,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const aT=Qi("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:t=>{const e=t.get(ze);return()=>e.call(lT.key)}}});re(aT.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});re(aT.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const cT=Wo("codeBlock",()=>({pre:{},code:{}}));re(cT,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const Fl=nr("code_block",t=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Vo(e);return{language:e.dataset.language}}}],toDOM:e=>{const n=t.get(cT.key)(e),r=e.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...n.pre,...i},["code",n.code,0]]},parseMarkdown:{match:({type:e})=>e==="code",runner:(e,n,r)=>{const i=n.lang??"",s=n.value;e.openNode(r,{language:i}),s&&e.addText(s),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="code_block",runner:(e,n)=>{var r;e.addNode("code",void 0,((r=n.content.firstChild)==null?void 0:r.text)||"",{lang:n.attrs.language})}}}));re(Fl.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});re(Fl.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const KU=ii(t=>fA(/^```(?<language>[a-z]*)?[\s\n]$/,Fl.type(t),e=>{var n;return{language:((n=e.groups)==null?void 0:n.language)??""}}));re(KU,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const uT=ut("CreateCodeBlock",t=>(e="")=>Q1(Fl.type(t),{language:e}));re(uT,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const Ave=ut("UpdateCodeBlockLanguage",()=>({pos:t,language:e}={pos:-1,language:""})=>(n,r)=>t>=0?(r==null||r(n.tr.setNodeAttribute(t,"language",e)),!0):!1);re(Ave,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const hT=Qi("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:t=>{const e=t.get(ze);return()=>e.call(uT.key)}}});re(hT.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});re(hT.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const dT=Wo("image");re(dT,{displayName:"Attr<image>",group:"Image"});const Sd=nr("image",t=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Vo(e);return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt")||"",title:e.getAttribute("title")||e.getAttribute("alt")||""}}}],toDOM:e=>["img",{...t.get(dT.key)(e),...e.attrs}],parseMarkdown:{match:({type:e})=>e==="image",runner:(e,n,r)=>{const i=n.url,s=n.alt,o=n.title;e.addNode(r,{src:i,alt:s,title:o})}},toMarkdown:{match:e=>e.type.name==="image",runner:(e,n)=>{e.addNode("image",void 0,void 0,{title:n.attrs.title,url:n.attrs.src,alt:n.attrs.alt})}}}));re(Sd.node,{displayName:"NodeSchema<image>",group:"Image"});re(Sd.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const JU=ut("InsertImage",t=>(e={})=>(n,r)=>{if(!r)return!0;const{src:i="",alt:s="",title:o=""}=e,l=Sd.type(t).create({src:i,alt:s,title:o});return l&&r(n.tr.replaceSelectionWith(l).scrollIntoView()),!0});re(JU,{displayName:"Command<insertImageCommand>",group:"Image"});const YU=ut("UpdateImage",t=>(e={})=>(n,r)=>{const i=Sfe(n.selection,Sd.type(t));if(!i)return!1;const{node:s,pos:o}=i,l={...s.attrs},{src:a,alt:c,title:u}=e;return a!==void 0&&(l.src=a),c!==void 0&&(l.alt=c),u!==void 0&&(l.title=u),r==null||r(n.tr.setNodeMarkup(o,void 0,l).scrollIntoView()),!0});re(YU,{displayName:"Command<updateImageCommand>",group:"Image"});const Tve=ii(t=>new Ji(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(e,n,r,i)=>{const[s,o,l="",a]=n;return s?e.tr.replaceWith(r,i,Sd.type(t).create({src:l,alt:o,title:a})):null}));re(Tve,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const ib=Wo("hardbreak",t=>({"data-type":"hardbreak","data-is-inline":t.attrs.isInline}));re(ib,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Hh=nr("hardbreak",t=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:e=>e.attrs.isInline?["span",t.get(ib.key)(e)," "]:["br",t.get(ib.key)(e)],parseMarkdown:{match:({type:e})=>e==="break",runner:(e,n,r)=>{var i;e.addNode(r,{isInline:!!((i=n.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:e=>e.type.name==="hardbreak",runner:(e,n)=>{n.attrs.isInline?e.addNode("text",void 0,`
`):e.addNode("break")}}}));re(Hh.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});re(Hh.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const fT=ut("InsertHardbreak",t=>()=>(e,n)=>{var r;const{selection:i,tr:s}=e;if(!(i instanceof qe))return!1;if(i.empty){const o=i.$from.node();if(o.childCount>0&&((r=o.lastChild)==null?void 0:r.type.name)==="hardbreak")return n==null||n(s.replaceRangeWith(i.to-1,i.to,e.schema.node("paragraph")).setSelection(ct.near(s.doc.resolve(i.to))).scrollIntoView()),!0}return n==null||n(s.setMeta("hardbreak",!0).replaceSelectionWith(Hh.type(t).create()).scrollIntoView()),!0});re(fT,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const pT=Qi("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:t=>{const e=t.get(ze);return()=>e.call(fT.key)}}});re(pT.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});re(pT.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const mT=Wo("hr");re(mT,{displayName:"Attr<hr>",group:"Hr"});const np=nr("hr",t=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",t.get(mT.key)(e)],parseMarkdown:{match:({type:e})=>e==="thematicBreak",runner:(e,n,r)=>{e.addNode(r)}},toMarkdown:{match:e=>e.type.name==="hr",runner:e=>{e.addNode("thematicBreak")}}}));re(np.node,{displayName:"NodeSchema<hr>",group:"Hr"});re(np.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const XU=ii(t=>new Ji(/^(?:---|___\s|\*\*\*\s)$/,(e,n,r,i)=>{const{tr:s}=e;return n[0]&&s.replaceWith(r-1,i,np.type(t).create()),s}));re(XU,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const QU=ut("InsertHr",t=>()=>(e,n)=>{if(!n)return!0;const r=Vl.node.type(t).create(),{tr:i,selection:s}=e,{from:o}=s,l=np.type(t).create();if(!l)return!0;const a=i.replaceSelectionWith(l).insert(o,r),c=ct.findFrom(a.doc.resolve(o),1,!0);return c&&n(a.setSelection(c).scrollIntoView()),!0});re(QU,{displayName:"Command<insertHrCommand>",group:"Hr"});const gT=Wo("bulletList");re(gT,{displayName:"Attr<bulletList>",group:"BulletList"});const Cd=nr("bullet_list",t=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Vo(e);return{spread:e.dataset.spread==="true"}}}],toDOM:e=>["ul",{...t.get(gT.key)(e),"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:n})=>e==="list"&&!n,runner:(e,n,r)=>{const i=n.spread!=null?`${n.spread}`:"false";e.openNode(r,{spread:i}).next(n.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="bullet_list",runner:(e,n)=>{e.openNode("list",void 0,{ordered:!1,spread:n.attrs.spread}).next(n.content).closeNode()}}}));re(Cd.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});re(Cd.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const ZU=ii(t=>dA(/^\s*([-+*])\s$/,Cd.type(t)));re(ZU,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const yT=ut("WrapInBulletList",t=>()=>TA(Cd.type(t)));re(yT,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const vT=Qi("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:t=>{const e=t.get(ze);return()=>e.call(yT.key)}}});re(vT.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});re(vT.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const wT=Wo("orderedList");re(wT,{displayName:"Attr<orderedList>",group:"OrderedList"});const _d=nr("ordered_list",t=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Vo(e);return{spread:e.dataset.spread,order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",{...t.get(wT.key)(e),...e.attrs.order===1?{}:e.attrs.order,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e,ordered:n})=>e==="list"&&!!n,runner:(e,n,r)=>{const i=n.spread!=null?`${n.spread}`:"true";e.openNode(r,{spread:i}).next(n.children).closeNode()}},toMarkdown:{match:e=>e.type.name==="ordered_list",runner:(e,n)=>{e.openNode("list",void 0,{ordered:!0,start:1,spread:n.attrs.spread==="true"}),e.next(n.content),e.closeNode()}}}));re(_d.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});re(_d.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const eG=ii(t=>dA(/^\s*(\d+)\.\s$/,_d.type(t),e=>({order:Number(e[1])}),(e,n)=>n.childCount+n.attrs.order===Number(e[1])));re(eG,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const xT=ut("WrapInOrderedList",t=>()=>TA(_d.type(t)));re(xT,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const bT=Qi("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:t=>{const e=t.get(ze);return()=>e.call(xT.key)}}});re(bT.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});re(bT.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const kT=Wo("listItem");re(kT,{displayName:"Attr<listItem>",group:"ListItem"});const to=nr("list_item",t=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:e=>{if(!(e instanceof HTMLElement))throw Vo(e);return{label:e.dataset.label,listType:e.dataset.listType,spread:e.dataset.spread==="true"}}}],toDOM:e=>["li",{...t.get(kT.key)(e),"data-label":e.attrs.label,"data-list-type":e.attrs.listType,"data-spread":e.attrs.spread},0],parseMarkdown:{match:({type:e})=>e==="listItem",runner:(e,n,r)=>{const i=n.label!=null?`${n.label}.`:"",s=n.label!=null?"ordered":"bullet",o=n.spread!=null?`${n.spread}`:"true";e.openNode(r,{label:i,listType:s,spread:o}),e.next(n.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="list_item",runner:(e,n)=>{e.openNode("listItem",void 0,{spread:n.attrs.spread}),e.next(n.content),e.closeNode()}}}));re(to.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});re(to.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const ST=ut("SinkListItem",t=>()=>wve(to.type(t)));re(ST,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const CT=ut("LiftListItem",t=>()=>BU(to.type(t)));re(CT,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const _T=ut("SplitListItem",t=>()=>gve(to.type(t)));re(_T,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function Mve(t){return(e,n,r)=>{const{selection:i}=e;if(!(i instanceof qe))return!1;const{empty:s,$from:o}=i;if(!s||o.parentOffset!==0)return!1;const l=o.node(-1);return l.type!==to.type(t)||l.firstChild!==o.node()||o.node(-2).childCount>1?!1:BU(to.type(t))(e,n,r)}}const AT=ut("LiftFirstListItem",t=>()=>Mve(t));re(AT,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const TT=Qi("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:t=>{const e=t.get(ze);return()=>e.call(_T.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:t=>{const e=t.get(ze);return()=>e.call(ST.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:t=>{const e=t.get(ze);return()=>e.call(CT.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:t=>{const e=t.get(ze);return()=>e.call(AT.key)}}});re(TT.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});re(TT.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const tG=zA("text",()=>({group:"inline",parseMarkdown:{match:({type:t})=>t==="text",runner:(t,e)=>{t.addText(e.value)}},toMarkdown:{match:t=>t.type.name==="text",runner:(t,e)=>{t.addNode("text",void 0,e.text)}}}));re(tG,{displayName:"NodeSchema<text>",group:"Text"});const MT=Wo("html");re(MT,{displayName:"Attr<html>",group:"Html"});const ET=nr("html",t=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:e=>{const n=document.createElement("span"),r={...t.get(MT.key)(e),"data-value":e.attrs.value,"data-type":"html"};return n.textContent=e.attrs.value,["span",r,e.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:e=>({value:e.dataset.value??""})}],parseMarkdown:{match:({type:e})=>e==="html",runner:(e,n,r)=>{e.addNode(r,{value:n.value})}},toMarkdown:{match:e=>e.type.name==="html",runner:(e,n)=>{e.addNode("html",void 0,n.attrs.value)}}}));re(ET.node,{displayName:"NodeSchema<html>",group:"Html"});re(ET.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const Eve=[qU,eT,Vl,W5,rT,gs,ib,Hh,oT,tp,cT,Fl,mT,np,dT,Sd,gT,Cd,wT,_d,kT,to,GA,kd,JA,ep,XA,Ca,ZA,Io,MT,ET,tG].flat(),Ove=[GU,ZU,eG,KU,XU,UU].flat(),Nve=[FU,zU,HU,jU],hf=ut("IsMarkSelected",()=>t=>e=>{if(!t)return!1;const{doc:n,selection:r}=e;return n.rangeHasMark(r.from,r.to,t)}),nG=ut("IsNoteSelected",()=>t=>e=>t?RW(e,t).hasNode:!1),Tr=ut("ClearTextInCurrentBlock",()=>()=>(t,e)=>{let n=t.tr;const{$from:r,$to:i}=n.selection,{pos:s}=r,{pos:o}=i,l=s-r.node().content.size;return l<0?!1:(n=n.deleteRange(l,o),e==null||e(n),!0)}),sa=ut("SetBlockType",()=>t=>(e,n)=>{const{nodeType:r,attrs:i=null}=t??{};if(!r)return!1;const s=e.tr,{from:o,to:l}=s.selection;try{s.setBlockType(o,l,r,i)}catch{return!1}return n==null||n(s),!0}),Wm=ut("WrapInBlockType",()=>t=>(e,n)=>{const{nodeType:r,attrs:i=null}=t??{};if(!r)return!1;let s=e.tr;try{const{$from:o,$to:l}=s.selection,a=o.blockRange(l),c=a&&cA(a,r,i);if(!c)return!1;s=s.wrap(a,c)}catch{return!1}return n==null||n(s),!0}),qm=ut("AddBlockType",()=>t=>(e,n)=>{const{nodeType:r,attrs:i=null}=t??{};if(!r)return!1;const s=e.tr;try{const o=r instanceof Ma?r:r.createAndFill(i);if(!o)return!1;s.replaceSelectionWith(o)}catch{return!1}return n==null||n(s),!0}),rG=ut("SelectTextNearPos",()=>t=>(e,n)=>{const{pos:r}=t??{};if(r==null)return!1;const i=(o,l,a)=>Math.min(Math.max(o,l),a),s=e.tr;try{const o=e.doc.resolve(i(r,0,e.doc.content.size));s.setSelection(qe.near(o))}catch{return!1}return n==null||n(s.scrollIntoView()),!0}),Ive=[tT,lT,Oc,iT,uT,fT,QU,JU,YU,xT,yT,ST,_T,CT,AT,z5,H5,j5,VU,WU,hf,nG,Tr,sa,Wm,qm,rG],Pve=[aT,hT,pT,sT,TT,bT,vT,nT,KA,QA,YA].flat(),OT=Hl("remarkAddOrderInList",()=>()=>t=>{Du(t,"list",e=>{if(e.ordered){const n=e.start??1;e.children.forEach((r,i)=>{r.label=i+n})}})});re(OT.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});re(OT.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const NT=Hl("remarkLineBreak",()=>()=>t=>{const e=/[\t ]*(?:\r?\n|\r)/g;Du(t,"text",(n,r,i)=>{if(!n.value||typeof n.value!="string")return;const s=[];let o=0;e.lastIndex=0;let l=e.exec(n.value);for(;l;){const c=l.index;o!==c&&s.push({type:"text",value:n.value.slice(o,c)}),s.push({type:"break",data:{isInline:!0}}),o=c+l[0].length,l=e.exec(n.value)}if(s.length>0&&i&&typeof r=="number")return o<n.value.length&&s.push({type:"text",value:n.value.slice(o)}),i.children.splice(r,1,...s),r+s.length})});re(NT.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});re(NT.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const IT=Hl("remarkInlineLink",()=>bve);re(IT.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});re(IT.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const Rve=t=>!!t.children,Dve=t=>t.type==="html";function Lve(t,e){return n(t,0,null)[0];function n(r,i,s){if(Rve(r)){const o=[];for(let l=0,a=r.children.length;l<a;l++){const c=r.children[l];if(c){const u=n(c,l,r);if(u)for(let h=0,d=u.length;h<d;h++){const f=u[h];f&&o.push(f)}}}r.children=o}return e(r,i,s)}}const PT=Hl("remarkHTMLTransformer",()=>()=>t=>{Lve(t,(e,n,r)=>Dve(e)?((r==null?void 0:r.type)==="root"&&(e.children=[{...e}],delete e.value,e.type="paragraph"),[e]):[e])});re(PT.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});re(PT.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const RT=Hl("remarkMarker",()=>()=>(t,e)=>{const n=r=>e.value.charAt(r.position.start.offset);Du(t,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=n(r)})});re(RT.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});re(RT.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const iG=dr(()=>{let t=!1;const e=new $n("MILKDOWN_INLINE_NODES_CURSOR"),n=new An({key:e,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,s=i.nodeBefore,o=i.nodeAfter;return!!(s&&o&&s.isInline&&!s.isText&&o.isInline&&!o.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>t?(t=!1,requestAnimationFrame(()=>{if(n.getState(r.state)){const o=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",o))}}),!0):!1,compositionstart:r=>(n.getState(r.state)&&(t=!0),!1),beforeinput:(r,i)=>{if(n.getState(r.state)&&i instanceof InputEvent&&i.data&&!t){const o=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",o)),!0}return!1}},decorations(r){if(n.getState(r)){const o=r.selection.$from.pos,l=document.createElement("span"),a=er.widget(o,l,{side:-1}),c=document.createElement("span"),u=er.widget(o,c);return setTimeout(()=>{l.contentEditable="true",c.contentEditable="true"}),tn.create(r.doc,[a,u])}return tn.empty}}});return n});re(iG,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const sG=dr(t=>new An({key:new $n("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(e,n,r)=>{if(!e.length)return;const[i]=e;if(!i)return;const[s]=i.steps;if(i.getMeta("hardbreak")){if(!(s instanceof Rr))return;const{from:a}=s;return r.tr.setNodeMarkup(a,Hh.type(t),void 0,[])}if(s instanceof ka){let a=r.tr;const{from:c,to:u}=s;return r.doc.nodesBetween(c,u,(h,d)=>{h.type===Hh.type(t)&&(a=a.setNodeMarkup(d,Hh.type(t),void 0,[]))}),a}}}));re(sG,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const DT=Jt(["table","code_block"],"hardbreakFilterNodes");re(DT,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const oG=dr(t=>{const e=t.get(DT.key);return new An({key:new $n("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(n,r)=>{const i=n.getMeta("hardbreak"),[s]=n.steps;if(i&&s){const{from:o}=s,l=r.doc.resolve(o);let a=l.depth,c=!0;for(;a>0;)e.includes(l.node(a).type.name)&&(c=!1),a--;return c}return!0}})});re(oG,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const lG=dr(t=>{const e=new $n("MILKDOWN_HEADING_ID"),n=r=>{if(r.composing)return;const i=t.get(W5.key),s=r.state.tr.setMeta("addToHistory",!1);let o=!1;const l={};r.state.doc.descendants((a,c)=>{if(a.type===gs.type(t)){if(a.textContent.trim().length===0)return;const u=a.attrs;let h=i(a);l[h]?(l[h]+=1,h+=`-#${l[h]}`):l[h]=1,u.id!==h&&(o=!0,s.setMeta(e,!0).setNodeMarkup(c,void 0,{...u,id:h}))}}),o&&r.dispatch(s)};return new An({key:e,view:r=>(n(r),{update:(i,s)=>{i.state.doc.eq(s.doc)||n(i)}})})});re(lG,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const aG=dr(t=>{const e=n=>{if(n.composing||!n.editable)return;const r=_d.type(t),i=Cd.type(t),s=to.type(t),o=n.state,l=(u,h)=>{let d=!1;const f=`${h+1}.`;return u.label!==f&&(u.label=f,d=!0),d};let a=o.tr,c=!1;o.doc.descendants((u,h,d,f)=>{if(u.type===i){const p=u.maybeChild(0);(p==null?void 0:p.type)===s&&p.attrs.listType==="ordered"&&(c=!0,a.setNodeMarkup(h,r,{spread:"true"}),u.descendants((m,y,g,v)=>{if(m.type===s){const w={...m.attrs};l(w,v)&&(a=a.setNodeMarkup(y,void 0,w))}return!1}))}else if(u.type===s&&(d==null?void 0:d.type)===r){const p={...u.attrs};let m=!1;p.listType!=="ordered"&&(p.listType="ordered",m=!0),(d==null?void 0:d.maybeChild(0))&&(m=l(p,f)),m&&(a=a.setNodeMarkup(h,void 0,p),c=!0)}}),c&&n.dispatch(a.setMeta("addToHistory",!1))};return new An({key:new $n("MILKDOWN_KEEP_LIST_ORDER"),view:n=>(e(n),{update:r=>{e(r)}})})});re(aG,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const Bve=[sG,DT,oG,iG,OT,IT,NT,PT,RT,V5,lG,aG].flat(),$ve=[Eve,Ove,Nve,Ive,Pve,Bve].flat();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function LT(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const un={},Zg=[],Po=()=>{},Fve=()=>!1,q5=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),BT=t=>t.startsWith("onUpdate:"),kr=Object.assign,$T=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},zve=Object.prototype.hasOwnProperty,Wt=(t,e)=>zve.call(t,e),gt=Array.isArray,e1=t=>U5(t)==="[object Map]",jve=t=>U5(t)==="[object Set]",xt=t=>typeof t=="function",Sr=t=>typeof t=="string",rp=t=>typeof t=="symbol",Kn=t=>t!==null&&typeof t=="object",cG=t=>(Kn(t)||xt(t))&&xt(t.then)&&xt(t.catch),Hve=Object.prototype.toString,U5=t=>Hve.call(t),Vve=t=>U5(t).slice(8,-1),Wve=t=>U5(t)==="[object Object]",FT=t=>Sr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,t1=LT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G5=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},qve=/-(\w)/g,Su=G5(t=>t.replace(qve,(e,n)=>n?n.toUpperCase():"")),Uve=/\B([A-Z])/g,Ad=G5(t=>t.replace(Uve,"-$1").toLowerCase()),uG=G5(t=>t.charAt(0).toUpperCase()+t.slice(1)),S6=G5(t=>t?`on${uG(t)}`:""),uu=(t,e)=>!Object.is(t,e),C6=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},sb=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Gve=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let wD;const Vh=()=>wD||(wD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function zT(t){if(gt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Sr(r)?Xve(r):zT(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Sr(t)||Kn(t))return t}const Kve=/;(?![^(]*\))/g,Jve=/:([^]+)/,Yve=/\/\*[^]*?\*\//g;function Xve(t){const e={};return t.replace(Yve,"").split(Kve).forEach(n=>{if(n){const r=n.split(Jve);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function jT(t){let e="";if(Sr(t))e=t;else if(gt(t))for(let n=0;n<t.length;n++){const r=jT(t[n]);r&&(e+=r+" ")}else if(Kn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Qve="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zve=LT(Qve);function hG(t){return!!t||t===""}/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pi;class e2e{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pi,!e&&Pi&&(this.index=(Pi.scopes||(Pi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Pi;try{return Pi=this,e()}finally{Pi=n}}}on(){++this._on===1&&(this.prevScope=Pi,Pi=this)}off(){this._on>0&&--this._on===0&&(Pi=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function t2e(){return Pi}let cn;const _6=new WeakSet;class dG{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pi&&Pi.active&&Pi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_6.has(this)&&(_6.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pG(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xD(this),mG(this);const e=cn,n=Ro;cn=this,Ro=!0;try{return this.fn()}finally{gG(this),cn=e,Ro=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)WT(e);this.deps=this.depsTail=void 0,xD(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_6.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){w9(this)&&this.run()}get dirty(){return w9(this)}}let fG=0,n1,r1;function pG(t,e=!1){if(t.flags|=8,e){t.next=r1,r1=t;return}t.next=n1,n1=t}function HT(){fG++}function VT(){if(--fG>0)return;if(r1){let e=r1;for(r1=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;n1;){let e=n1;for(n1=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function mG(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function gG(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),WT(r),n2e(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function w9(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(yG(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function yG(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ay)||(t.globalVersion=ay,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!w9(t))))return;t.flags|=2;const e=t.dep,n=cn,r=Ro;cn=t,Ro=!0;try{mG(t);const i=t.fn(t._value);(e.version===0||uu(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{cn=n,Ro=r,gG(t),t.flags&=-3}}function WT(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)WT(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function n2e(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Ro=!0;const vG=[];function Ha(){vG.push(Ro),Ro=!1}function Va(){const t=vG.pop();Ro=t===void 0?!0:t}function xD(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=cn;cn=void 0;try{e()}finally{cn=n}}}let ay=0;class r2e{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qT{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!cn||!Ro||cn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==cn)n=this.activeLink=new r2e(cn,this),cn.deps?(n.prevDep=cn.depsTail,cn.depsTail.nextDep=n,cn.depsTail=n):cn.deps=cn.depsTail=n,wG(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=cn.depsTail,n.nextDep=void 0,cn.depsTail.nextDep=n,cn.depsTail=n,cn.deps===n&&(cn.deps=r)}return n}trigger(e){this.version++,ay++,this.notify(e)}notify(e){HT();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{VT()}}}function wG(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)wG(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const x9=new WeakMap,Wh=Symbol(""),b9=Symbol(""),cy=Symbol("");function Jr(t,e,n){if(Ro&&cn){let r=x9.get(t);r||x9.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new qT),i.map=r,i.key=n),i.track()}}function wa(t,e,n,r,i,s){const o=x9.get(t);if(!o){ay++;return}const l=a=>{a&&a.trigger()};if(HT(),e==="clear")o.forEach(l);else{const a=gt(t),c=a&&FT(n);if(a&&n==="length"){const u=Number(r);o.forEach((h,d)=>{(d==="length"||d===cy||!rp(d)&&d>=u)&&l(h)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(cy)),e){case"add":a?c&&l(o.get("length")):(l(o.get(Wh)),e1(t)&&l(o.get(b9)));break;case"delete":a||(l(o.get(Wh)),e1(t)&&l(o.get(b9)));break;case"set":e1(t)&&l(o.get(Wh));break}}VT()}function Hd(t){const e=Vt(t);return e===t?e:(Jr(e,"iterate",cy),Do(t)?e:e.map(fi))}function UT(t){return Jr(t=Vt(t),"iterate",cy),t}const i2e={__proto__:null,[Symbol.iterator](){return A6(this,Symbol.iterator,fi)},concat(...t){return Hd(this).concat(...t.map(e=>gt(e)?Hd(e):e))},entries(){return A6(this,"entries",t=>(t[1]=fi(t[1]),t))},every(t,e){return Zl(this,"every",t,e,void 0,arguments)},filter(t,e){return Zl(this,"filter",t,e,n=>n.map(fi),arguments)},find(t,e){return Zl(this,"find",t,e,fi,arguments)},findIndex(t,e){return Zl(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Zl(this,"findLast",t,e,fi,arguments)},findLastIndex(t,e){return Zl(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Zl(this,"forEach",t,e,void 0,arguments)},includes(...t){return T6(this,"includes",t)},indexOf(...t){return T6(this,"indexOf",t)},join(t){return Hd(this).join(t)},lastIndexOf(...t){return T6(this,"lastIndexOf",t)},map(t,e){return Zl(this,"map",t,e,void 0,arguments)},pop(){return Gp(this,"pop")},push(...t){return Gp(this,"push",t)},reduce(t,...e){return bD(this,"reduce",t,e)},reduceRight(t,...e){return bD(this,"reduceRight",t,e)},shift(){return Gp(this,"shift")},some(t,e){return Zl(this,"some",t,e,void 0,arguments)},splice(...t){return Gp(this,"splice",t)},toReversed(){return Hd(this).toReversed()},toSorted(t){return Hd(this).toSorted(t)},toSpliced(...t){return Hd(this).toSpliced(...t)},unshift(...t){return Gp(this,"unshift",t)},values(){return A6(this,"values",fi)}};function A6(t,e,n){const r=UT(t),i=r[e]();return r!==t&&!Do(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const s2e=Array.prototype;function Zl(t,e,n,r,i,s){const o=UT(t),l=o!==t&&!Do(t),a=o[e];if(a!==s2e[e]){const h=a.apply(t,s);return l?fi(h):h}let c=n;o!==t&&(l?c=function(h,d){return n.call(this,fi(h),d,t)}:n.length>2&&(c=function(h,d){return n.call(this,h,d,t)}));const u=a.call(o,c,r);return l&&i?i(u):u}function bD(t,e,n,r){const i=UT(t);let s=n;return i!==t&&(Do(t)?n.length>3&&(s=function(o,l,a){return n.call(this,o,l,a,t)}):s=function(o,l,a){return n.call(this,o,fi(l),a,t)}),i[e](s,...r)}function T6(t,e,n){const r=Vt(t);Jr(r,"iterate",cy);const i=r[e](...n);return(i===-1||i===!1)&&YT(n[0])?(n[0]=Vt(n[0]),r[e](...n)):i}function Gp(t,e,n=[]){Ha(),HT();const r=Vt(t)[e].apply(t,n);return VT(),Va(),r}const o2e=LT("__proto__,__v_isRef,__isVue"),xG=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(rp));function l2e(t){rp(t)||(t=String(t));const e=Vt(this);return Jr(e,"has",t),e.hasOwnProperty(t)}class bG{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?y2e:_G:s?CG:SG).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=gt(e);if(!i){let a;if(o&&(a=i2e[n]))return a;if(n==="hasOwnProperty")return l2e}const l=Reflect.get(e,n,ti(e)?e:r);return(rp(n)?xG.has(n):o2e(n))||(i||Jr(e,"get",n),s)?l:ti(l)?o&&FT(n)?l:l.value:Kn(l)?i?AG(l):KT(l):l}}class kG extends bG{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const a=dd(s);if(!Do(r)&&!dd(r)&&(s=Vt(s),r=Vt(r)),!gt(e)&&ti(s)&&!ti(r))return a?!1:(s.value=r,!0)}const o=gt(e)&&FT(n)?Number(n)<e.length:Wt(e,n),l=Reflect.set(e,n,r,ti(e)?e:i);return e===Vt(i)&&(o?uu(r,s)&&wa(e,"set",n,r):wa(e,"add",n,r)),l}deleteProperty(e,n){const r=Wt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&wa(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!rp(n)||!xG.has(n))&&Jr(e,"has",n),r}ownKeys(e){return Jr(e,"iterate",gt(e)?"length":Wh),Reflect.ownKeys(e)}}class a2e extends bG{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const c2e=new kG,u2e=new a2e,h2e=new kG(!0);const k9=t=>t,y2=t=>Reflect.getPrototypeOf(t);function d2e(t,e,n){return function(...r){const i=this.__v_raw,s=Vt(i),o=e1(s),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,c=i[t](...r),u=n?k9:e?S9:fi;return!e&&Jr(s,"iterate",a?b9:Wh),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:l?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function v2(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function f2e(t,e){const n={get(i){const s=this.__v_raw,o=Vt(s),l=Vt(i);t||(uu(i,l)&&Jr(o,"get",i),Jr(o,"get",l));const{has:a}=y2(o),c=e?k9:t?S9:fi;if(a.call(o,i))return c(s.get(i));if(a.call(o,l))return c(s.get(l));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Jr(Vt(i),"iterate",Wh),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Vt(s),l=Vt(i);return t||(uu(i,l)&&Jr(o,"has",i),Jr(o,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const o=this,l=o.__v_raw,a=Vt(l),c=e?k9:t?S9:fi;return!t&&Jr(a,"iterate",Wh),l.forEach((u,h)=>i.call(s,c(u),c(h),o))}};return kr(n,t?{add:v2("add"),set:v2("set"),delete:v2("delete"),clear:v2("clear")}:{add(i){!e&&!Do(i)&&!dd(i)&&(i=Vt(i));const s=Vt(this);return y2(s).has.call(s,i)||(s.add(i),wa(s,"add",i,i)),this},set(i,s){!e&&!Do(s)&&!dd(s)&&(s=Vt(s));const o=Vt(this),{has:l,get:a}=y2(o);let c=l.call(o,i);c||(i=Vt(i),c=l.call(o,i));const u=a.call(o,i);return o.set(i,s),c?uu(s,u)&&wa(o,"set",i,s):wa(o,"add",i,s),this},delete(i){const s=Vt(this),{has:o,get:l}=y2(s);let a=o.call(s,i);a||(i=Vt(i),a=o.call(s,i)),l&&l.call(s,i);const c=s.delete(i);return a&&wa(s,"delete",i,void 0),c},clear(){const i=Vt(this),s=i.size!==0,o=i.clear();return s&&wa(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=d2e(i,t,e)}),n}function GT(t,e){const n=f2e(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Wt(n,i)&&i in r?n:r,i,s)}const p2e={get:GT(!1,!1)},m2e={get:GT(!1,!0)},g2e={get:GT(!0,!1)};const SG=new WeakMap,CG=new WeakMap,_G=new WeakMap,y2e=new WeakMap;function v2e(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function w2e(t){return t.__v_skip||!Object.isExtensible(t)?0:v2e(Vve(t))}function KT(t){return dd(t)?t:JT(t,!1,c2e,p2e,SG)}function x2e(t){return JT(t,!1,h2e,m2e,CG)}function AG(t){return JT(t,!0,u2e,g2e,_G)}function JT(t,e,n,r,i){if(!Kn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=w2e(t);if(s===0)return t;const o=i.get(t);if(o)return o;const l=new Proxy(t,s===2?r:n);return i.set(t,l),l}function i1(t){return dd(t)?i1(t.__v_raw):!!(t&&t.__v_isReactive)}function dd(t){return!!(t&&t.__v_isReadonly)}function Do(t){return!!(t&&t.__v_isShallow)}function YT(t){return t?!!t.__v_raw:!1}function Vt(t){const e=t&&t.__v_raw;return e?Vt(e):t}function b2e(t){return!Wt(t,"__v_skip")&&Object.isExtensible(t)&&sb(t,"__v_skip",!0),t}const fi=t=>Kn(t)?KT(t):t,S9=t=>Kn(t)?AG(t):t;function ti(t){return t?t.__v_isRef===!0:!1}function je(t){return TG(t,!1)}function ob(t){return TG(t,!0)}function TG(t,e){return ti(t)?t:new k2e(t,e)}class k2e{constructor(e,n){this.dep=new qT,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Vt(e),this._value=n?e:fi(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Do(e)||dd(e);e=r?e:Vt(e),uu(e,n)&&(this._rawValue=e,this._value=r?e:fi(e),this.dep.trigger())}}function S2e(t){return ti(t)?t.value:t}const C2e={get:(t,e,n)=>e==="__v_raw"?t:S2e(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ti(i)&&!ti(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function MG(t){return i1(t)?t:new Proxy(t,C2e)}class _2e{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new qT(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ay-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&cn!==this)return pG(this,!0),!0}get value(){const e=this.dep.track();return yG(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function A2e(t,e,n=!1){let r,i;return xt(t)?r=t:(r=t.get,i=t.set),new _2e(r,i,n)}const w2={},lb=new WeakMap;let dh;function T2e(t,e=!1,n=dh){if(n){let r=lb.get(n);r||lb.set(n,r=[]),r.push(t)}}function M2e(t,e,n=un){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:l,call:a}=n,c=S=>i?S:Do(S)||i===!1||i===0?Fc(S,1):Fc(S);let u,h,d,f,p=!1,m=!1;if(ti(t)?(h=()=>t.value,p=Do(t)):i1(t)?(h=()=>c(t),p=!0):gt(t)?(m=!0,p=t.some(S=>i1(S)||Do(S)),h=()=>t.map(S=>{if(ti(S))return S.value;if(i1(S))return c(S);if(xt(S))return a?a(S,2):S()})):xt(t)?e?h=a?()=>a(t,2):t:h=()=>{if(d){Ha();try{d()}finally{Va()}}const S=dh;dh=u;try{return a?a(t,3,[f]):t(f)}finally{dh=S}}:h=Po,e&&i){const S=h,_=i===!0?1/0:i;h=()=>Fc(S(),_)}const y=t2e(),g=()=>{u.stop(),y&&y.active&&$T(y.effects,u)};if(s&&e){const S=e;e=(..._)=>{S(..._),g()}}let v=m?new Array(t.length).fill(w2):w2;const w=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const _=u.run();if(i||p||(m?_.some((C,T)=>uu(C,v[T])):uu(_,v))){d&&d();const C=dh;dh=u;try{const T=[_,v===w2?void 0:m&&v[0]===w2?[]:v,f];v=_,a?a(e,3,T):e(...T)}finally{dh=C}}}else u.run()};return l&&l(w),u=new dG(h),u.scheduler=o?()=>o(w,!1):w,f=S=>T2e(S,!1,u),d=u.onStop=()=>{const S=lb.get(u);if(S){if(a)a(S,4);else for(const _ of S)_();lb.delete(u)}},e?r?w(!0):v=u.run():o?o(w.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function Fc(t,e=1/0,n){if(e<=0||!Kn(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ti(t))Fc(t.value,e,n);else if(gt(t))for(let r=0;r<t.length;r++)Fc(t[r],e,n);else if(jve(t)||e1(t))t.forEach(r=>{Fc(r,e,n)});else if(Wve(t)){for(const r in t)Fc(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Fc(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ky(t,e,n,r){try{return r?t(...r):t()}catch(i){K5(i,e,n)}}function zl(t,e,n,r){if(xt(t)){const i=Ky(t,e,n,r);return i&&cG(i)&&i.catch(s=>{K5(s,e,n)}),i}if(gt(t)){const i=[];for(let s=0;s<t.length;s++)i.push(zl(t[s],e,n,r));return i}}function K5(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||un;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,a,c)===!1)return}l=l.parent}if(s){Ha(),Ky(s,null,10,[t,a,c]),Va();return}}E2e(t,n,i,r,o)}function E2e(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const pi=[];let dl=-1;const i0=[];let Nc=null,df=0;const EG=Promise.resolve();let ab=null;function O2e(t){const e=ab||EG;return t?e.then(this?t.bind(this):t):e}function N2e(t){let e=dl+1,n=pi.length;for(;e<n;){const r=e+n>>>1,i=pi[r],s=uy(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function XT(t){if(!(t.flags&1)){const e=uy(t),n=pi[pi.length-1];!n||!(t.flags&2)&&e>=uy(n)?pi.push(t):pi.splice(N2e(e),0,t),t.flags|=1,OG()}}function OG(){ab||(ab=EG.then(IG))}function I2e(t){gt(t)?i0.push(...t):Nc&&t.id===-1?Nc.splice(df+1,0,t):t.flags&1||(i0.push(t),t.flags|=1),OG()}function kD(t,e,n=dl+1){for(;n<pi.length;n++){const r=pi[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;pi.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function NG(t){if(i0.length){const e=[...new Set(i0)].sort((n,r)=>uy(n)-uy(r));if(i0.length=0,Nc){Nc.push(...e);return}for(Nc=e,df=0;df<Nc.length;df++){const n=Nc[df];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Nc=null,df=0}}const uy=t=>t.id==null?t.flags&2?-1:1/0:t.id;function IG(t){try{for(dl=0;dl<pi.length;dl++){const e=pi[dl];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ky(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;dl<pi.length;dl++){const e=pi[dl];e&&(e.flags&=-2)}dl=-1,pi.length=0,NG(),ab=null,(pi.length||i0.length)&&IG()}}let bl,Um=[],C9=!1;function J5(t,...e){bl?bl.emit(t,...e):C9||Um.push({event:t,args:e})}function PG(t,e){var n,r;bl=t,bl?(bl.enabled=!0,Um.forEach(({event:i,args:s})=>bl.emit(i,...s)),Um=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{PG(s,e)}),setTimeout(()=>{bl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,C9=!0,Um=[])},3e3)):(C9=!0,Um=[])}function P2e(t,e){J5("app:init",t,e,{Fragment:Yr,Text:Xy,Comment:fd,Static:a4})}function R2e(t){J5("app:unmount",t)}const D2e=QT("component:added"),RG=QT("component:updated"),L2e=QT("component:removed"),B2e=t=>{bl&&typeof bl.cleanupBuffer=="function"&&!bl.cleanupBuffer(t)&&L2e(t)};/*! #__NO_SIDE_EFFECTS__ */function QT(t){return e=>{J5(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}function $2e(t,e,n){J5("component:emit",t.appContext.app,t,e,n)}let _l=null,DG=null;function cb(t){const e=_l;return _l=t,DG=t&&t.type.__scopeId||null,e}function F2e(t,e=_l,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&OD(-1);const s=cb(e);let o;try{o=t(...i)}finally{cb(s),r._d&&OD(1)}return __VUE_PROD_DEVTOOLS__&&RG(e),o};return r._n=!0,r._c=!0,r._d=!0,r}function Ku(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];s&&(l.oldValue=s[o].value);let a=l.dir[r];a&&(Ha(),zl(a,n,8,[t.el,l,t,e]),Va())}}const z2e=Symbol("_vte"),j2e=t=>t.__isTeleport;function ZT(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ZT(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function si(t,e){return xt(t)?kr({name:t.name},e,{setup:t}):t}function LG(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ub(t,e,n,r,i=!1){if(gt(t)){t.forEach((p,m)=>ub(p,e&&(gt(e)?e[m]:e),n,r,i));return}if(s1(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ub(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?oM(r.component):r.el,o=i?null:s,{i:l,r:a}=t,c=e&&e.r,u=l.refs===un?l.refs={}:l.refs,h=l.setupState,d=Vt(h),f=h===un?()=>!1:p=>Wt(d,p);if(c!=null&&c!==a&&(Sr(c)?(u[c]=null,f(c)&&(h[c]=null)):ti(c)&&(c.value=null)),xt(a))Ky(a,l,12,[o,u]);else{const p=Sr(a),m=ti(a);if(p||m){const y=()=>{if(t.f){const g=p?f(a)?h[a]:u[a]:a.value;i?gt(g)&&$T(g,s):gt(g)?g.includes(s)||g.push(s):p?(u[a]=[s],f(a)&&(h[a]=u[a])):(a.value=[s],t.k&&(u[t.k]=a.value))}else p?(u[a]=o,f(a)&&(h[a]=o)):m&&(a.value=o,t.k&&(u[t.k]=o))};o?(y.id=-1,us(y,n)):y()}}}Vh().requestIdleCallback;Vh().cancelIdleCallback;const s1=t=>!!t.type.__asyncLoader,BG=t=>t.type.__isKeepAlive;function H2e(t,e){$G(t,"a",e)}function V2e(t,e){$G(t,"da",e)}function $G(t,e,n=gi){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Y5(e,r,n),n){let i=n.parent;for(;i&&i.parent;)BG(i.parent.vnode)&&W2e(r,e,n,i),i=i.parent}}function W2e(t,e,n,r){const i=Y5(e,t,r,!0);Yy(()=>{$T(r[e],i)},n)}function Y5(t,e,n=gi,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Ha();const l=Qy(n),a=zl(e,n,t,o);return l(),Va(),a});return r?i.unshift(s):i.push(s),s}}const Za=t=>(e,n=gi)=>{(!hy||t==="sp")&&Y5(t,(...r)=>e(...r),n)},q2e=Za("bm"),Jy=Za("m"),U2e=Za("bu"),G2e=Za("u"),K2e=Za("bum"),Yy=Za("um"),J2e=Za("sp"),Y2e=Za("rtg"),X2e=Za("rtc");function Q2e(t,e=gi){Y5("ec",t,e)}const Z2e=Symbol.for("v-ndc"),_9=t=>t?tK(t)?oM(t):_9(t.parent):null,o1=kr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_9(t.parent),$root:t=>_9(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>__VUE_OPTIONS_API__?eM(t):t.type,$forceUpdate:t=>t.f||(t.f=()=>{XT(t.update)}),$nextTick:t=>t.n||(t.n=O2e.bind(t.proxy)),$watch:t=>__VUE_OPTIONS_API__?kwe.bind(t):Po}),M6=(t,e)=>t!==un&&!t.__isScriptSetup&&Wt(t,e),ewe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:l,appContext:a}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(M6(r,e))return o[e]=1,r[e];if(i!==un&&Wt(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Wt(c,e))return o[e]=3,s[e];if(n!==un&&Wt(n,e))return o[e]=4,n[e];(!__VUE_OPTIONS_API__||A9)&&(o[e]=0)}}const u=o1[e];let h,d;if(u)return e==="$attrs"&&Jr(t.attrs,"get",""),u(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(n!==un&&Wt(n,e))return o[e]=4,n[e];if(d=a.config.globalProperties,Wt(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return M6(i,e)?(i[e]=n,!0):r!==un&&Wt(r,e)?(r[e]=n,!0):Wt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let l;return!!n[o]||t!==un&&Wt(t,o)||M6(e,o)||(l=s[0])&&Wt(l,o)||Wt(r,o)||Wt(o1,o)||Wt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Wt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function SD(t){return gt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let A9=!0;function twe(t){const e=eM(t),n=t.proxy,r=t.ctx;A9=!1,e.beforeCreate&&CD(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:y,beforeDestroy:g,beforeUnmount:v,destroyed:w,unmounted:S,render:_,renderTracked:C,renderTriggered:T,errorCaptured:I,serverPrefetch:L,expose:N,inheritAttrs:$,components:F,directives:ie,filters:Z}=e;if(c&&nwe(c,r,null),o)for(const de in o){const W=o[de];xt(W)&&(r[de]=W.bind(n))}if(i){const de=i.call(n,n);Kn(de)&&(t.data=KT(de))}if(A9=!0,s)for(const de in s){const W=s[de],z=xt(W)?W.bind(n,n):xt(W.get)?W.get.bind(n,n):Po,O=!xt(W)&&xt(W.set)?W.set.bind(n):Po,ee=pd({get:z,set:O});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>ee.value,set:X=>ee.value=X})}if(l)for(const de in l)FG(l[de],r,n,de);if(a){const de=xt(a)?a.call(n):a;Reflect.ownKeys(de).forEach(W=>{awe(W,de[W])})}u&&CD(u,t,"c");function pe(de,W){gt(W)?W.forEach(z=>de(z.bind(n))):W&&de(W.bind(n))}if(pe(q2e,h),pe(Jy,d),pe(U2e,f),pe(G2e,p),pe(H2e,m),pe(V2e,y),pe(Q2e,I),pe(X2e,C),pe(Y2e,T),pe(K2e,v),pe(Yy,S),pe(J2e,L),gt(N))if(N.length){const de=t.exposed||(t.exposed={});N.forEach(W=>{Object.defineProperty(de,W,{get:()=>n[W],set:z=>n[W]=z})})}else t.exposed||(t.exposed={});_&&t.render===Po&&(t.render=_),$!=null&&(t.inheritAttrs=$),F&&(t.components=F),ie&&(t.directives=ie),L&&LG(t)}function nwe(t,e,n=Po){gt(t)&&(t=T9(t));for(const r in t){const i=t[r];let s;Kn(i)?"default"in i?s=l4(i.from||r,i.default,!0):s=l4(i.from||r):s=l4(i),ti(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function CD(t,e,n){zl(gt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function FG(t,e,n,r){let i=r.includes(".")?XG(n,r):()=>n[r];if(Sr(t)){const s=e[t];xt(s)&&o0(i,s)}else if(xt(t))o0(i,t.bind(n));else if(Kn(t))if(gt(t))t.forEach(s=>FG(s,e,n,r));else{const s=xt(t.handler)?t.handler.bind(n):e[t.handler];xt(s)&&o0(i,s,t)}}function eM(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,l=s.get(e);let a;return l?a=l:!i.length&&!n&&!r?a=e:(a={},i.length&&i.forEach(c=>hb(a,c,o,!0)),hb(a,e,o)),Kn(e)&&s.set(e,a),a}function hb(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&hb(t,s,n,!0),i&&i.forEach(o=>hb(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=rwe[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const rwe={data:_D,props:AD,emits:AD,methods:Gm,computed:Gm,beforeCreate:ui,created:ui,beforeMount:ui,mounted:ui,beforeUpdate:ui,updated:ui,beforeDestroy:ui,beforeUnmount:ui,destroyed:ui,unmounted:ui,activated:ui,deactivated:ui,errorCaptured:ui,serverPrefetch:ui,components:Gm,directives:Gm,watch:swe,provide:_D,inject:iwe};function _D(t,e){return e?t?function(){return kr(xt(t)?t.call(this,this):t,xt(e)?e.call(this,this):e)}:e:t}function iwe(t,e){return Gm(T9(t),T9(e))}function T9(t){if(gt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ui(t,e){return t?[...new Set([].concat(t,e))]:e}function Gm(t,e){return t?kr(Object.create(null),t,e):e}function AD(t,e){return t?gt(t)&&gt(e)?[...new Set([...t,...e])]:kr(Object.create(null),SD(t),SD(e??{})):e}function swe(t,e){if(!t)return e;if(!e)return t;const n=kr(Object.create(null),t);for(const r in e)n[r]=ui(t[r],e[r]);return n}function zG(){return{app:null,config:{isNativeTag:Fve,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let owe=0;function lwe(t,e){return function(r,i=null){xt(r)||(r=kr({},r)),i!=null&&!Kn(i)&&(i=null);const s=zG(),o=new WeakSet,l=[];let a=!1;const c=s.app={_uid:owe++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:RD,get config(){return s.config},set config(u){},use(u,...h){return o.has(u)||(u&&xt(u.install)?(o.add(u),u.install(c,...h)):xt(u)&&(o.add(u),u(c,...h))),c},mixin(u){return __VUE_OPTIONS_API__&&(s.mixins.includes(u)||s.mixins.push(u)),c},component(u,h){return h?(s.components[u]=h,c):s.components[u]},directive(u,h){return h?(s.directives[u]=h,c):s.directives[u]},mount(u,h,d){if(!a){const f=c._ceVNode||Ao(r,i);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),h&&e?e(f,u):t(f,u,d),a=!0,c._container=u,u.__vue_app__=c,__VUE_PROD_DEVTOOLS__&&(c._instance=f.component,P2e(c,RD)),oM(f.component)}},onUnmount(u){l.push(u)},unmount(){a&&(zl(l,c._instance,16),t(null,c._container),__VUE_PROD_DEVTOOLS__&&(c._instance=null,R2e(c)),delete c._container.__vue_app__)},provide(u,h){return s.provides[u]=h,c},runWithContext(u){const h=s0;s0=c;try{return u()}finally{s0=h}}};return c}}let s0=null;function awe(t,e){if(gi){let n=gi.provides;const r=gi.parent&&gi.parent.provides;r===n&&(n=gi.provides=Object.create(r)),n[t]=e}}function l4(t,e,n=!1){const r=gi||_l;if(r||s0){let i=s0?s0._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&xt(e)?e.call(r&&r.proxy):e}}const jG={},HG=()=>Object.create(jG),VG=t=>Object.getPrototypeOf(t)===jG;function cwe(t,e,n,r=!1){const i={},s=HG();t.propsDefaults=Object.create(null),WG(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:x2e(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function uwe(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,l=Vt(i),[a]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(X5(t.emitsOptions,d))continue;const f=e[d];if(a)if(Wt(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=Su(d);i[p]=M9(a,l,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{WG(t,e,i,s)&&(c=!0);let u;for(const h in l)(!e||!Wt(e,h)&&((u=Ad(h))===h||!Wt(e,u)))&&(a?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=M9(a,l,h,void 0,t,!0)):delete i[h]);if(s!==l)for(const h in s)(!e||!Wt(e,h))&&(delete s[h],c=!0)}c&&wa(t.attrs,"set","")}function WG(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(t1(a))continue;const c=e[a];let u;i&&Wt(i,u=Su(a))?!s||!s.includes(u)?n[u]=c:(l||(l={}))[u]=c:X5(t.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,o=!0)}if(s){const a=Vt(n),c=l||un;for(let u=0;u<s.length;u++){const h=s[u];n[h]=M9(i,a,h,c[h],t,!Wt(c,h))}}return o}function M9(t,e,n,r,i,s){const o=t[n];if(o!=null){const l=Wt(o,"default");if(l&&r===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&xt(a)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Qy(i);r=c[n]=a.call(null,e),u()}}else r=a;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!l?r=!1:o[1]&&(r===""||r===Ad(n))&&(r=!0))}return r}const hwe=new WeakMap;function qG(t,e,n=!1){const r=__VUE_OPTIONS_API__&&n?hwe:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},l=[];let a=!1;if(__VUE_OPTIONS_API__&&!xt(t)){const u=h=>{a=!0;const[d,f]=qG(h,e,!0);kr(o,d),f&&l.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!a)return Kn(t)&&r.set(t,Zg),Zg;if(gt(s))for(let u=0;u<s.length;u++){const h=Su(s[u]);TD(h)&&(o[h]=un)}else if(s)for(const u in s){const h=Su(u);if(TD(h)){const d=s[u],f=o[h]=gt(d)||xt(d)?{type:d}:kr({},d),p=f.type;let m=!1,y=!0;if(gt(p))for(let g=0;g<p.length;++g){const v=p[g],w=xt(v)&&v.name;if(w==="Boolean"){m=!0;break}else w==="String"&&(y=!1)}else m=xt(p)&&p.name==="Boolean";f[0]=m,f[1]=y,(m||Wt(f,"default"))&&l.push(h)}}const c=[o,l];return Kn(t)&&r.set(t,c),c}function TD(t){return t[0]!=="$"&&!t1(t)}const tM=t=>t[0]==="_"||t==="$stable",nM=t=>gt(t)?t.map(gl):[gl(t)],dwe=(t,e,n)=>{if(e._n)return e;const r=F2e((...i)=>nM(e(...i)),n);return r._c=!1,r},UG=(t,e,n)=>{const r=t._ctx;for(const i in t){if(tM(i))continue;const s=t[i];if(xt(s))e[i]=dwe(i,s,r);else if(s!=null){const o=nM(s);e[i]=()=>o}}},GG=(t,e)=>{const n=nM(e);t.slots.default=()=>n},KG=(t,e,n)=>{for(const r in e)(n||!tM(r))&&(t[r]=e[r])},fwe=(t,e,n)=>{const r=t.slots=HG();if(t.vnode.shapeFlag&32){const i=e._;i?(KG(r,e,n),n&&sb(r,"_",i,!0)):UG(e,r)}else e&&GG(t,e)},pwe=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=un;if(r.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:KG(i,e,n):(s=!e.$stable,UG(e,i)),o=e}else e&&(GG(t,e),o={default:1});if(s)for(const l in i)!tM(l)&&o[l]==null&&delete i[l]};function mwe(){typeof __VUE_OPTIONS_API__!="boolean"&&(Vh().__VUE_OPTIONS_API__=!0),typeof __VUE_PROD_DEVTOOLS__!="boolean"&&(Vh().__VUE_PROD_DEVTOOLS__=!1),typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(Vh().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const us=Ewe;function gwe(t){return ywe(t)}function ywe(t,e){mwe();const n=Vh();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&PG(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:i,patchProp:s,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Po,insertStaticContent:p}=t,m=(R,B,G,ce=null,se=null,ae=null,ke=void 0,Se=null,be=!!B.dynamicChildren)=>{if(R===B)return;R&&!Kp(R,B)&&(ce=ve(R),X(R,se,ae,!0),R=null),B.patchFlag===-2&&(be=!1,B.dynamicChildren=null);const{type:fe,ref:Ve,shapeFlag:_e}=B;switch(fe){case Xy:y(R,B,G,ce);break;case fd:g(R,B,G,ce);break;case a4:R==null&&v(B,G,ce,ke);break;case Yr:F(R,B,G,ce,se,ae,ke,Se,be);break;default:_e&1?_(R,B,G,ce,se,ae,ke,Se,be):_e&6?ie(R,B,G,ce,se,ae,ke,Se,be):(_e&64||_e&128)&&fe.process(R,B,G,ce,se,ae,ke,Se,be,vt)}Ve!=null&&se&&ub(Ve,R&&R.ref,ae,B||R,!B)},y=(R,B,G,ce)=>{if(R==null)r(B.el=l(B.children),G,ce);else{const se=B.el=R.el;B.children!==R.children&&c(se,B.children)}},g=(R,B,G,ce)=>{R==null?r(B.el=a(B.children||""),G,ce):B.el=R.el},v=(R,B,G,ce)=>{[R.el,R.anchor]=p(R.children,B,G,ce,R.el,R.anchor)},w=({el:R,anchor:B},G,ce)=>{let se;for(;R&&R!==B;)se=d(R),r(R,G,ce),R=se;r(B,G,ce)},S=({el:R,anchor:B})=>{let G;for(;R&&R!==B;)G=d(R),i(R),R=G;i(B)},_=(R,B,G,ce,se,ae,ke,Se,be)=>{B.type==="svg"?ke="svg":B.type==="math"&&(ke="mathml"),R==null?C(B,G,ce,se,ae,ke,Se,be):L(R,B,se,ae,ke,Se,be)},C=(R,B,G,ce,se,ae,ke,Se)=>{let be,fe;const{props:Ve,shapeFlag:_e,transition:De,dirs:V}=R;if(be=R.el=o(R.type,ae,Ve&&Ve.is,Ve),_e&8?u(be,R.children):_e&16&&I(R.children,be,null,ce,se,E6(R,ae),ke,Se),V&&Ku(R,null,ce,"created"),T(be,R,R.scopeId,ke,ce),Ve){for(const Ee in Ve)Ee!=="value"&&!t1(Ee)&&s(be,Ee,null,Ve[Ee],ae,ce);"value"in Ve&&s(be,"value",null,Ve.value,ae),(fe=Ve.onVnodeBeforeMount)&&Qo(fe,ce,R)}__VUE_PROD_DEVTOOLS__&&(sb(be,"__vnode",R,!0),sb(be,"__vueParentComponent",ce,!0)),V&&Ku(R,null,ce,"beforeMount");const ne=vwe(se,De);ne&&De.beforeEnter(be),r(be,B,G),((fe=Ve&&Ve.onVnodeMounted)||ne||V)&&us(()=>{fe&&Qo(fe,ce,R),ne&&De.enter(be),V&&Ku(R,null,ce,"mounted")},se)},T=(R,B,G,ce,se)=>{if(G&&f(R,G),ce)for(let ae=0;ae<ce.length;ae++)f(R,ce[ae]);if(se){let ae=se.subTree;if(B===ae||ZG(ae.type)&&(ae.ssContent===B||ae.ssFallback===B)){const ke=se.vnode;T(R,ke,ke.scopeId,ke.slotScopeIds,se.parent)}}},I=(R,B,G,ce,se,ae,ke,Se,be=0)=>{for(let fe=be;fe<R.length;fe++){const Ve=R[fe]=Se?Ic(R[fe]):gl(R[fe]);m(null,Ve,B,G,ce,se,ae,ke,Se)}},L=(R,B,G,ce,se,ae,ke)=>{const Se=B.el=R.el;__VUE_PROD_DEVTOOLS__&&(Se.__vnode=B);let{patchFlag:be,dynamicChildren:fe,dirs:Ve}=B;be|=R.patchFlag&16;const _e=R.props||un,De=B.props||un;let V;if(G&&Ju(G,!1),(V=De.onVnodeBeforeUpdate)&&Qo(V,G,B,R),Ve&&Ku(B,R,G,"beforeUpdate"),G&&Ju(G,!0),(_e.innerHTML&&De.innerHTML==null||_e.textContent&&De.textContent==null)&&u(Se,""),fe?N(R.dynamicChildren,fe,Se,G,ce,E6(B,se),ae):ke||W(R,B,Se,null,G,ce,E6(B,se),ae,!1),be>0){if(be&16)$(Se,_e,De,G,se);else if(be&2&&_e.class!==De.class&&s(Se,"class",null,De.class,se),be&4&&s(Se,"style",_e.style,De.style,se),be&8){const ne=B.dynamicProps;for(let Ee=0;Ee<ne.length;Ee++){const Ie=ne[Ee],lt=_e[Ie],Ot=De[Ie];(Ot!==lt||Ie==="value")&&s(Se,Ie,lt,Ot,se,G)}}be&1&&R.children!==B.children&&u(Se,B.children)}else!ke&&fe==null&&$(Se,_e,De,G,se);((V=De.onVnodeUpdated)||Ve)&&us(()=>{V&&Qo(V,G,B,R),Ve&&Ku(B,R,G,"updated")},ce)},N=(R,B,G,ce,se,ae,ke)=>{for(let Se=0;Se<B.length;Se++){const be=R[Se],fe=B[Se],Ve=be.el&&(be.type===Yr||!Kp(be,fe)||be.shapeFlag&198)?h(be.el):G;m(be,fe,Ve,null,ce,se,ae,ke,!0)}},$=(R,B,G,ce,se)=>{if(B!==G){if(B!==un)for(const ae in B)!t1(ae)&&!(ae in G)&&s(R,ae,B[ae],null,se,ce);for(const ae in G){if(t1(ae))continue;const ke=G[ae],Se=B[ae];ke!==Se&&ae!=="value"&&s(R,ae,Se,ke,se,ce)}"value"in G&&s(R,"value",B.value,G.value,se)}},F=(R,B,G,ce,se,ae,ke,Se,be)=>{const fe=B.el=R?R.el:l(""),Ve=B.anchor=R?R.anchor:l("");let{patchFlag:_e,dynamicChildren:De,slotScopeIds:V}=B;V&&(Se=Se?Se.concat(V):V),R==null?(r(fe,G,ce),r(Ve,G,ce),I(B.children||[],G,Ve,se,ae,ke,Se,be)):_e>0&&_e&64&&De&&R.dynamicChildren?(N(R.dynamicChildren,De,G,se,ae,ke,Se),(B.key!=null||se&&B===se.subTree)&&JG(R,B,!0)):W(R,B,G,Ve,se,ae,ke,Se,be)},ie=(R,B,G,ce,se,ae,ke,Se,be)=>{B.slotScopeIds=Se,R==null?B.shapeFlag&512?se.ctx.activate(B,G,ce,ke,be):Z(B,G,ce,se,ae,ke,be):Y(R,B,be)},Z=(R,B,G,ce,se,ae,ke)=>{const Se=R.component=Bwe(R,ce,se);if(BG(R)&&(Se.ctx.renderer=vt),$we(Se,!1,ke),Se.asyncDep){if(se&&se.registerDep(Se,pe,ke),!R.el){const be=Se.subTree=Ao(fd);g(null,be,B,G)}}else pe(Se,R,B,G,se,ae,ke)},Y=(R,B,G)=>{const ce=B.component=R.component;if(Twe(R,B,G))if(ce.asyncDep&&!ce.asyncResolved){de(ce,B,G);return}else ce.next=B,ce.update();else B.el=R.el,ce.vnode=B},pe=(R,B,G,ce,se,ae,ke)=>{const Se=()=>{if(R.isMounted){let{next:_e,bu:De,u:V,parent:ne,vnode:Ee}=R;{const Ft=YG(R);if(Ft){_e&&(_e.el=Ee.el,de(R,_e,ke)),Ft.asyncDep.then(()=>{R.isUnmounted||Se()});return}}let Ie=_e,lt;Ju(R,!1),_e?(_e.el=Ee.el,de(R,_e,ke)):_e=Ee,De&&C6(De),(lt=_e.props&&_e.props.onVnodeBeforeUpdate)&&Qo(lt,ne,_e,Ee),Ju(R,!0);const Ot=O6(R),Yt=R.subTree;R.subTree=Ot,m(Yt,Ot,h(Yt.el),ve(Yt),R,se,ae),_e.el=Ot.el,Ie===null&&Mwe(R,Ot.el),V&&us(V,se),(lt=_e.props&&_e.props.onVnodeUpdated)&&us(()=>Qo(lt,ne,_e,Ee),se),__VUE_PROD_DEVTOOLS__&&RG(R)}else{let _e;const{el:De,props:V}=B,{bm:ne,m:Ee,parent:Ie,root:lt,type:Ot}=R,Yt=s1(B);if(Ju(R,!1),ne&&C6(ne),!Yt&&(_e=V&&V.onVnodeBeforeMount)&&Qo(_e,Ie,B),Ju(R,!0),De&&ln){const Ft=()=>{R.subTree=O6(R),ln(De,R.subTree,R,se,null)};Yt&&Ot.__asyncHydrate?Ot.__asyncHydrate(De,R,Ft):Ft()}else{lt.ce&&lt.ce._injectChildStyle(Ot);const Ft=R.subTree=O6(R);m(null,Ft,G,ce,R,se,ae),B.el=Ft.el}if(Ee&&us(Ee,se),!Yt&&(_e=V&&V.onVnodeMounted)){const Ft=B;us(()=>Qo(_e,Ie,Ft),se)}(B.shapeFlag&256||Ie&&s1(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&R.a&&us(R.a,se),R.isMounted=!0,__VUE_PROD_DEVTOOLS__&&D2e(R),B=G=ce=null}};R.scope.on();const be=R.effect=new dG(Se);R.scope.off();const fe=R.update=be.run.bind(be),Ve=R.job=be.runIfDirty.bind(be);Ve.i=R,Ve.id=R.uid,be.scheduler=()=>XT(Ve),Ju(R,!0),fe()},de=(R,B,G)=>{B.component=R;const ce=R.vnode.props;R.vnode=B,R.next=null,uwe(R,B.props,ce,G),pwe(R,B.children,G),Ha(),kD(R),Va()},W=(R,B,G,ce,se,ae,ke,Se,be=!1)=>{const fe=R&&R.children,Ve=R?R.shapeFlag:0,_e=B.children,{patchFlag:De,shapeFlag:V}=B;if(De>0){if(De&128){O(fe,_e,G,ce,se,ae,ke,Se,be);return}else if(De&256){z(fe,_e,G,ce,se,ae,ke,Se,be);return}}V&8?(Ve&16&&ue(fe,se,ae),_e!==fe&&u(G,_e)):Ve&16?V&16?O(fe,_e,G,ce,se,ae,ke,Se,be):ue(fe,se,ae,!0):(Ve&8&&u(G,""),V&16&&I(_e,G,ce,se,ae,ke,Se,be))},z=(R,B,G,ce,se,ae,ke,Se,be)=>{R=R||Zg,B=B||Zg;const fe=R.length,Ve=B.length,_e=Math.min(fe,Ve);let De;for(De=0;De<_e;De++){const V=B[De]=be?Ic(B[De]):gl(B[De]);m(R[De],V,G,null,se,ae,ke,Se,be)}fe>Ve?ue(R,se,ae,!0,!1,_e):I(B,G,ce,se,ae,ke,Se,be,_e)},O=(R,B,G,ce,se,ae,ke,Se,be)=>{let fe=0;const Ve=B.length;let _e=R.length-1,De=Ve-1;for(;fe<=_e&&fe<=De;){const V=R[fe],ne=B[fe]=be?Ic(B[fe]):gl(B[fe]);if(Kp(V,ne))m(V,ne,G,null,se,ae,ke,Se,be);else break;fe++}for(;fe<=_e&&fe<=De;){const V=R[_e],ne=B[De]=be?Ic(B[De]):gl(B[De]);if(Kp(V,ne))m(V,ne,G,null,se,ae,ke,Se,be);else break;_e--,De--}if(fe>_e){if(fe<=De){const V=De+1,ne=V<Ve?B[V].el:ce;for(;fe<=De;)m(null,B[fe]=be?Ic(B[fe]):gl(B[fe]),G,ne,se,ae,ke,Se,be),fe++}}else if(fe>De)for(;fe<=_e;)X(R[fe],se,ae,!0),fe++;else{const V=fe,ne=fe,Ee=new Map;for(fe=ne;fe<=De;fe++){const Nt=B[fe]=be?Ic(B[fe]):gl(B[fe]);Nt.key!=null&&Ee.set(Nt.key,fe)}let Ie,lt=0;const Ot=De-ne+1;let Yt=!1,Ft=0;const bn=new Array(Ot);for(fe=0;fe<Ot;fe++)bn[fe]=0;for(fe=V;fe<=_e;fe++){const Nt=R[fe];if(lt>=Ot){X(Nt,se,ae,!0);continue}let kn;if(Nt.key!=null)kn=Ee.get(Nt.key);else for(Ie=ne;Ie<=De;Ie++)if(bn[Ie-ne]===0&&Kp(Nt,B[Ie])){kn=Ie;break}kn===void 0?X(Nt,se,ae,!0):(bn[kn-ne]=fe+1,kn>=Ft?Ft=kn:Yt=!0,m(Nt,B[kn],G,null,se,ae,ke,Se,be),lt++)}const pr=Yt?wwe(bn):Zg;for(Ie=pr.length-1,fe=Ot-1;fe>=0;fe--){const Nt=ne+fe,kn=B[Nt],_r=Nt+1<Ve?B[Nt+1].el:ce;bn[fe]===0?m(null,kn,G,_r,se,ae,ke,Se,be):Yt&&(Ie<0||fe!==pr[Ie]?ee(kn,G,_r,2):Ie--)}}},ee=(R,B,G,ce,se=null)=>{const{el:ae,type:ke,transition:Se,children:be,shapeFlag:fe}=R;if(fe&6){ee(R.component.subTree,B,G,ce);return}if(fe&128){R.suspense.move(B,G,ce);return}if(fe&64){ke.move(R,B,G,vt);return}if(ke===Yr){r(ae,B,G);for(let _e=0;_e<be.length;_e++)ee(be[_e],B,G,ce);r(R.anchor,B,G);return}if(ke===a4){w(R,B,G);return}if(ce!==2&&fe&1&&Se)if(ce===0)Se.beforeEnter(ae),r(ae,B,G),us(()=>Se.enter(ae),se);else{const{leave:_e,delayLeave:De,afterLeave:V}=Se,ne=()=>{R.ctx.isUnmounted?i(ae):r(ae,B,G)},Ee=()=>{_e(ae,()=>{ne(),V&&V()})};De?De(ae,ne,Ee):Ee()}else r(ae,B,G)},X=(R,B,G,ce=!1,se=!1)=>{const{type:ae,props:ke,ref:Se,children:be,dynamicChildren:fe,shapeFlag:Ve,patchFlag:_e,dirs:De,cacheIndex:V}=R;if(_e===-2&&(se=!1),Se!=null&&(Ha(),ub(Se,null,G,R,!0),Va()),V!=null&&(B.renderCache[V]=void 0),Ve&256){B.ctx.deactivate(R);return}const ne=Ve&1&&De,Ee=!s1(R);let Ie;if(Ee&&(Ie=ke&&ke.onVnodeBeforeUnmount)&&Qo(Ie,B,R),Ve&6)U(R.component,G,ce);else{if(Ve&128){R.suspense.unmount(G,ce);return}ne&&Ku(R,null,B,"beforeUnmount"),Ve&64?R.type.remove(R,B,G,vt,ce):fe&&!fe.hasOnce&&(ae!==Yr||_e>0&&_e&64)?ue(fe,B,G,!1,!0):(ae===Yr&&_e&384||!se&&Ve&16)&&ue(be,B,G),ce&&E(R)}(Ee&&(Ie=ke&&ke.onVnodeUnmounted)||ne)&&us(()=>{Ie&&Qo(Ie,B,R),ne&&Ku(R,null,B,"unmounted")},G)},E=R=>{const{type:B,el:G,anchor:ce,transition:se}=R;if(B===Yr){xe(G,ce);return}if(B===a4){S(R);return}const ae=()=>{i(G),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(R.shapeFlag&1&&se&&!se.persisted){const{leave:ke,delayLeave:Se}=se,be=()=>ke(G,ae);Se?Se(R.el,ae,be):be()}else ae()},xe=(R,B)=>{let G;for(;R!==B;)G=d(R),i(R),R=G;i(B)},U=(R,B,G)=>{const{bum:ce,scope:se,job:ae,subTree:ke,um:Se,m:be,a:fe,parent:Ve,slots:{__:_e}}=R;MD(be),MD(fe),ce&&C6(ce),Ve&&gt(_e)&&_e.forEach(De=>{Ve.renderCache[De]=void 0}),se.stop(),ae&&(ae.flags|=8,X(ke,R,B,G)),Se&&us(Se,B),us(()=>{R.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve()),__VUE_PROD_DEVTOOLS__&&B2e(R)},ue=(R,B,G,ce=!1,se=!1,ae=0)=>{for(let ke=ae;ke<R.length;ke++)X(R[ke],B,G,ce,se)},ve=R=>{if(R.shapeFlag&6)return ve(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const B=d(R.anchor||R.el),G=B&&B[z2e];return G?d(G):B};let Oe=!1;const st=(R,B,G)=>{R==null?B._vnode&&X(B._vnode,null,null,!0):m(B._vnode||null,R,B,null,null,null,G),B._vnode=R,Oe||(Oe=!0,kD(),NG(),Oe=!1)},vt={p:m,um:X,m:ee,r:E,mt:Z,mc:I,pc:W,pbc:N,n:ve,o:t};let _t,ln;return{render:st,hydrate:_t,createApp:lwe(st,_t)}}function E6({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ju({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function vwe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function JG(t,e,n=!1){const r=t.children,i=e.children;if(gt(r)&&gt(i))for(let s=0;s<r.length;s++){const o=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=Ic(i[s]),l.el=o.el),!n&&l.patchFlag!==-2&&JG(o,l)),l.type===Xy&&(l.el=o.el),l.type===fd&&!l.el&&(l.el=o.el)}}function wwe(t){const e=t.slice(),n=[0];let r,i,s,o,l;const a=t.length;for(r=0;r<a;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)l=s+o>>1,t[n[l]]<c?s=l+1:o=l;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function YG(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:YG(e)}function MD(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const xwe=Symbol.for("v-scx"),bwe=()=>l4(xwe);function ip(t,e){return rM(t,null,e)}function o0(t,e,n){return rM(t,e,n)}function rM(t,e,n=un){const{immediate:r,deep:i,flush:s,once:o}=n,l=kr({},n),a=e&&r||!e&&s!=="post";let c;if(hy){if(s==="sync"){const f=bwe();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!a){const f=()=>{};return f.stop=Po,f.resume=Po,f.pause=Po,f}}const u=gi;l.call=(f,p,m)=>zl(f,u,p,m);let h=!1;s==="post"?l.scheduler=f=>{us(f,u&&u.suspense)}:s!=="sync"&&(h=!0,l.scheduler=(f,p)=>{p?f():XT(f)}),l.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=M2e(t,e,l);return hy&&(c?c.push(d):a&&d()),d}function kwe(t,e,n){const r=this.proxy,i=Sr(t)?t.includes(".")?XG(r,t):()=>r[t]:t.bind(r,r);let s;xt(e)?s=e:(s=e.handler,n=e);const o=Qy(this),l=rM(i,s.bind(r),n);return o(),l}function XG(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Swe=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Su(e)}Modifiers`]||t[`${Ad(e)}Modifiers`];function Cwe(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||un;let i=n;const s=e.startsWith("update:"),o=s&&Swe(r,e.slice(7));o&&(o.trim&&(i=n.map(u=>Sr(u)?u.trim():u)),o.number&&(i=n.map(Gve))),__VUE_PROD_DEVTOOLS__&&$2e(t,e,i);let l,a=r[l=S6(e)]||r[l=S6(Su(e))];!a&&s&&(a=r[l=S6(Ad(e))]),a&&zl(a,t,6,i);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,zl(c,t,6,i)}}function QG(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},l=!1;if(__VUE_OPTIONS_API__&&!xt(t)){const a=c=>{const u=QG(c,e,!0);u&&(l=!0,kr(o,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!s&&!l?(Kn(t)&&r.set(t,null),null):(gt(s)?s.forEach(a=>o[a]=null):kr(o,s),Kn(t)&&r.set(t,o),o)}function X5(t,e){return!t||!q5(e)?!1:(e=e.slice(2).replace(/Once$/,""),Wt(t,e[0].toLowerCase()+e.slice(1))||Wt(t,Ad(e))||Wt(t,e))}function O6(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t,y=cb(t);let g,v;try{if(n.shapeFlag&4){const S=i||r,_=S;g=gl(c.call(_,S,u,h,f,d,p)),v=l}else{const S=e;g=gl(S.length>1?S(h,{attrs:l,slots:o,emit:a}):S(h,null)),v=e.props?l:_we(l)}}catch(S){K5(S,t,1),g=Ao(fd)}let w=g;if(v&&m!==!1){const S=Object.keys(v),{shapeFlag:_}=w;S.length&&_&7&&(s&&S.some(BT)&&(v=Awe(v,s)),w=D0(w,v,!1,!0))}return n.dirs&&(w=D0(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&ZT(w,n.transition),g=w,cb(y),g}const _we=t=>{let e;for(const n in t)(n==="class"||n==="style"||q5(n))&&((e||(e={}))[n]=t[n]);return e},Awe=(t,e)=>{const n={};for(const r in t)(!BT(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Twe(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:l,patchFlag:a}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?ED(r,o,c):!!o;if(a&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!X5(c,d))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?ED(r,o,c):!0:!!o;return!1}function ED(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!X5(n,s))return!0}return!1}function Mwe({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const ZG=t=>t.__isSuspense;function Ewe(t,e){e&&e.pendingBranch?gt(t)?e.effects.push(...t):e.effects.push(t):I2e(t)}const Yr=Symbol.for("v-fgt"),Xy=Symbol.for("v-txt"),fd=Symbol.for("v-cmt"),a4=Symbol.for("v-stc");let Yc=null,iM=1;function OD(t,e=!1){iM+=t,t<0&&Yc&&e&&(Yc.hasOnce=!0)}function db(t){return t?t.__v_isVNode===!0:!1}function Kp(t,e){return t.type===e.type&&t.key===e.key}const eK=({key:t})=>t??null,c4=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Sr(t)||ti(t)||xt(t)?{i:_l,r:t,k:e,f:!!n}:t:null);function Owe(t,e=null,n=null,r=0,i=null,s=t===Yr?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&eK(e),ref:e&&c4(e),scopeId:DG,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:_l};return l?(sM(a,n),s&128&&t.normalize(a)):n&&(a.shapeFlag|=Sr(n)?8:16),iM>0&&!o&&Yc&&(a.patchFlag>0||s&6)&&a.patchFlag!==32&&Yc.push(a),a}const Ao=Nwe;function Nwe(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Z2e)&&(t=fd),db(t)){const l=D0(t,e,!0);return n&&sM(l,n),iM>0&&!s&&Yc&&(l.shapeFlag&6?Yc[Yc.indexOf(t)]=l:Yc.push(l)),l.patchFlag=-2,l}if(Hwe(t)&&(t=t.__vccOpts),e){e=Iwe(e);let{class:l,style:a}=e;l&&!Sr(l)&&(e.class=jT(l)),Kn(a)&&(YT(a)&&!gt(a)&&(a=kr({},a)),e.style=zT(a))}const o=Sr(t)?1:ZG(t)?128:j2e(t)?64:Kn(t)?4:xt(t)?2:0;return Owe(t,e,n,r,i,o,s,!0)}function Iwe(t){return t?YT(t)||VG(t)?kr({},t):t:null}function D0(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:l,transition:a}=t,c=e?Rwe(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&eK(c),ref:e&&e.ref?n&&s?gt(s)?s.concat(c4(e)):[s,c4(e)]:c4(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Yr?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&D0(t.ssContent),ssFallback:t.ssFallback&&D0(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&ZT(u,a.clone(u)),u}function Pwe(t=" ",e=0){return Ao(Xy,null,t,e)}function gl(t){return t==null||typeof t=="boolean"?Ao(fd):gt(t)?Ao(Yr,null,t.slice()):db(t)?Ic(t):Ao(Xy,null,String(t))}function Ic(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:D0(t)}function sM(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(gt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),sM(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!VG(e)?e._ctx=_l:i===3&&_l&&(_l.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else xt(e)?(e={default:e,_ctx:_l},n=32):(e=String(e),r&64?(n=16,e=[Pwe(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rwe(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=jT([e.class,r.class]));else if(i==="style")e.style=zT([e.style,r.style]);else if(q5(i)){const s=e[i],o=r[i];o&&s!==o&&!(gt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Qo(t,e,n,r=null){zl(t,e,7,[n,r])}const Dwe=zG();let Lwe=0;function Bwe(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Dwe,s={uid:Lwe++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new e2e(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qG(r,i),emitsOptions:QG(r,i),emit:null,emitted:null,propsDefaults:un,inheritAttrs:r.inheritAttrs,ctx:un,data:un,props:un,attrs:un,slots:un,refs:un,setupState:un,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Cwe.bind(null,s),t.ce&&t.ce(s),s}let gi=null,fb,E9;{const t=Vh(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};fb=e("__VUE_INSTANCE_SETTERS__",n=>gi=n),E9=e("__VUE_SSR_SETTERS__",n=>hy=n)}const Qy=t=>{const e=gi;return fb(t),t.scope.on(),()=>{t.scope.off(),fb(e)}},ND=()=>{gi&&gi.scope.off(),fb(null)};function tK(t){return t.vnode.shapeFlag&4}let hy=!1;function $we(t,e=!1,n=!1){e&&E9(e);const{props:r,children:i}=t.vnode,s=tK(t);cwe(t,r,s,e),fwe(t,i,n||e);const o=s?Fwe(t,e):void 0;return e&&E9(!1),o}function Fwe(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ewe);const{setup:r}=n;if(r){Ha();const i=t.setupContext=r.length>1?jwe(t):null,s=Qy(t),o=Ky(r,t,0,[t.props,i]),l=cG(o);if(Va(),s(),(l||t.sp)&&!s1(t)&&LG(t),l){if(o.then(ND,ND),e)return o.then(a=>{ID(t,a,e)}).catch(a=>{K5(a,t,0)});t.asyncDep=o}else ID(t,o,e)}else nK(t,e)}function ID(t,e,n){xt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Kn(e)&&(__VUE_PROD_DEVTOOLS__&&(t.devtoolsRawSetupState=e),t.setupState=MG(e)),nK(t,n)}let PD;function nK(t,e,n){const r=t.type;if(!t.render){if(!e&&PD&&!r.render){const i=r.template||__VUE_OPTIONS_API__&&eM(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:l,compilerOptions:a}=r,c=kr(kr({isCustomElement:s,delimiters:l},o),a);r.render=PD(i,c)}}t.render=r.render||Po}if(__VUE_OPTIONS_API__){const i=Qy(t);Ha();try{twe(t)}finally{Va(),i()}}}const zwe={get(t,e){return Jr(t,"get",""),t[e]}};function jwe(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,zwe),slots:t.slots,emit:t.emit,expose:e}}function oM(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(MG(b2e(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in o1)return o1[n](t)},has(e,n){return n in e||n in o1}})):t.proxy}function Hwe(t){return xt(t)&&"__vccOpts"in t}const pd=(t,e)=>A2e(t,e,hy);function Q(t,e,n){const r=arguments.length;return r===2?Kn(e)&&!gt(e)?db(e)?Ao(t,null,[e]):Ao(t,e):Ao(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&db(n)&&(n=[n]),Ao(t,e,n))}const RD="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let O9;const DD=typeof window<"u"&&window.trustedTypes;if(DD)try{O9=DD.createPolicy("vue",{createHTML:t=>t})}catch{}const rK=O9?t=>O9.createHTML(t):t=>t,Vwe="http://www.w3.org/2000/svg",Wwe="http://www.w3.org/1998/Math/MathML",pa=typeof document<"u"?document:null,LD=pa&&pa.createElement("template"),qwe={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?pa.createElementNS(Vwe,t):e==="mathml"?pa.createElementNS(Wwe,t):n?pa.createElement(t,{is:n}):pa.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>pa.createTextNode(t),createComment:t=>pa.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>pa.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{LD.innerHTML=rK(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=LD.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Uwe=Symbol("_vtc");function Gwe(t,e,n){const r=t[Uwe];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const BD=Symbol("_vod"),Kwe=Symbol("_vsh"),Jwe=Symbol(""),Ywe=/(^|;)\s*display\s*:/;function Xwe(t,e,n){const r=t.style,i=Sr(n);let s=!1;if(n&&!i){if(e)if(Sr(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&u4(r,l,"")}else for(const o in e)n[o]==null&&u4(r,o,"");for(const o in n)o==="display"&&(s=!0),u4(r,o,n[o])}else if(i){if(e!==n){const o=r[Jwe];o&&(n+=";"+o),r.cssText=n,s=Ywe.test(n)}}else e&&t.removeAttribute("style");BD in t&&(t[BD]=s?r.display:"",t[Kwe]&&(r.display="none"))}const $D=/\s*!important$/;function u4(t,e,n){if(gt(n))n.forEach(r=>u4(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Qwe(t,e);$D.test(n)?t.setProperty(Ad(r),n.replace($D,""),"important"):t[r]=n}}const FD=["Webkit","Moz","ms"],N6={};function Qwe(t,e){const n=N6[e];if(n)return n;let r=Su(e);if(r!=="filter"&&r in t)return N6[e]=r;r=uG(r);for(let i=0;i<FD.length;i++){const s=FD[i]+r;if(s in t)return N6[e]=s}return e}const zD="http://www.w3.org/1999/xlink";function jD(t,e,n,r,i,s=Zve(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(zD,e.slice(6,e.length)):t.setAttributeNS(zD,e,n):n==null||s&&!hG(n)?t.removeAttribute(e):t.setAttribute(e,s?"":rp(n)?String(n):n)}function HD(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?rK(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=hG(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Zwe(t,e,n,r){t.addEventListener(e,n,r)}function e4e(t,e,n,r){t.removeEventListener(e,n,r)}const VD=Symbol("_vei");function t4e(t,e,n,r,i=null){const s=t[VD]||(t[VD]={}),o=s[e];if(r&&o)o.value=r;else{const[l,a]=n4e(e);if(r){const c=s[e]=s4e(r,i);Zwe(t,l,c,a)}else o&&(e4e(t,l,o,a),s[e]=void 0)}}const WD=/(?:Once|Passive|Capture)$/;function n4e(t){let e;if(WD.test(t)){e={};let r;for(;r=t.match(WD);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ad(t.slice(2)),e]}let I6=0;const r4e=Promise.resolve(),i4e=()=>I6||(r4e.then(()=>I6=0),I6=Date.now());function s4e(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;zl(o4e(r,n.value),e,5,[r])};return n.value=t,n.attached=i4e(),n}function o4e(t,e){if(gt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const qD=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,l4e=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?Gwe(t,r,o):e==="style"?Xwe(t,n,r):q5(e)?BT(e)||t4e(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):a4e(t,e,r,o))?(HD(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&jD(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Sr(r))?HD(t,Su(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),jD(t,e,r,o))};function a4e(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&qD(e)&&xt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return qD(e)&&Sr(n)?!1:e in t}const c4e=kr({patchProp:l4e},qwe);let UD;function u4e(){return UD||(UD=gwe(c4e))}const qo=(...t)=>{const e=u4e().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=d4e(r);if(!i)return;const s=e._component;!xt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,h4e(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function h4e(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function d4e(t){return Sr(t)?document.querySelector(t):t}var f4e="Expected a function",GD=NaN,p4e="[object Symbol]",m4e=/^\s+|\s+$/g,g4e=/^[-+]0x[0-9a-f]+$/i,y4e=/^0b[01]+$/i,v4e=/^0o[0-7]+$/i,w4e=parseInt,x4e=typeof Qn=="object"&&Qn&&Qn.Object===Object&&Qn,b4e=typeof self=="object"&&self&&self.Object===Object&&self,k4e=x4e||b4e||Function("return this")(),S4e=Object.prototype,C4e=S4e.toString,_4e=Math.max,A4e=Math.min,P6=function(){return k4e.Date.now()};function T4e(t,e,n){var r,i,s,o,l,a,c=0,u=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(f4e);e=KD(e)||0,N9(n)&&(u=!!n.leading,h="maxWait"in n,s=h?_4e(KD(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function f(C){var T=r,I=i;return r=i=void 0,c=C,o=t.apply(I,T),o}function p(C){return c=C,l=setTimeout(g,e),u?f(C):o}function m(C){var T=C-a,I=C-c,L=e-T;return h?A4e(L,s-I):L}function y(C){var T=C-a,I=C-c;return a===void 0||T>=e||T<0||h&&I>=s}function g(){var C=P6();if(y(C))return v(C);l=setTimeout(g,m(C))}function v(C){return l=void 0,d&&r?f(C):(r=i=void 0,o)}function w(){l!==void 0&&clearTimeout(l),c=0,r=a=i=l=void 0}function S(){return l===void 0?o:v(P6())}function _(){var C=P6(),T=y(C);if(r=arguments,i=this,a=C,T){if(l===void 0)return p(a);if(h)return l=setTimeout(g,e),f(a)}return l===void 0&&(l=setTimeout(g,e)),o}return _.cancel=w,_.flush=S,_}function N9(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function M4e(t){return!!t&&typeof t=="object"}function E4e(t){return typeof t=="symbol"||M4e(t)&&C4e.call(t)==p4e}function KD(t){if(typeof t=="number")return t;if(E4e(t))return GD;if(N9(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=N9(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(m4e,"");var n=y4e.test(t);return n||v4e.test(t)?w4e(t.slice(2),n?2:8):g4e.test(t)?GD:+t}var O4e=T4e;const lM=EC(O4e);var iK=t=>{throw TypeError(t)},aM=(t,e,n)=>e.has(t)||iK("Cannot "+n),wo=(t,e,n)=>(aM(t,e,"read from private field"),n?n.call(t):e.get(t)),Zo=(t,e,n)=>e.has(t)?iK("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),el=(t,e,n,r)=>(aM(t,e,"write to private field"),e.set(t,n),n),N4e=(t,e,n)=>(aM(t,e,"access private method"),n),Km,h4,d4,f4,p4,l0,m4,g4,y4,I9,sK;function I4e(t){const e=Jt({},`${t}_SLASH_SPEC`),n=dr(i=>{const s=i.get(e.key);return new An({key:new $n(`${t}_SLASH`),...s})}),r=[e,n];return r.key=e.key,r.pluginKey=n.key,e.meta={package:"@milkdown/plugin-slash",displayName:`Ctx<slashSpec>|${t}`},n.meta={package:"@milkdown/plugin-slash",displayName:`Prose<slash>|${t}`},r}class P4e{constructor(e){Zo(this,I9),Zo(this,Km),Zo(this,h4),Zo(this,d4),Zo(this,f4),Zo(this,p4),Zo(this,l0),Zo(this,m4),Zo(this,g4),Zo(this,y4),el(this,Km,!1),this.onShow=()=>{},this.onHide=()=>{},el(this,y4,(n,r)=>{const{state:i,composing:s}=n,{selection:o,doc:l}=i,{ranges:a}=o,c=Math.min(...a.map(f=>f.$from.pos)),u=Math.max(...a.map(f=>f.$to.pos)),h=r&&r.doc.eq(l)&&r.selection.eq(o);if(wo(this,Km)||((wo(this,f4)??n.dom.parentElement??document.body).appendChild(this.element),el(this,Km,!0)),s||h)return;if(!wo(this,m4).call(this,n,r)){this.hide();return}Ho({getBoundingClientRect:()=>x5(n,c,u)},this.element,{placement:"bottom-start",middleware:[nb(),ku(wo(this,g4)),...wo(this,h4)],...wo(this,d4)}).then(({x:f,y:p})=>{Object.assign(this.element.style,{left:`${f}px`,top:`${p}px`})}).catch(console.error),this.show()}),this.update=(n,r)=>{lM(wo(this,y4),wo(this,p4))(n,r)},this.getContent=(n,r=i=>i.type.name==="paragraph")=>{const{selection:i}=n.state,{empty:s,$from:o}=i,l=n.state.selection instanceof qe,a=this.element.contains(document.activeElement),c=!n.hasFocus()&&!a,u=!n.editable,d=!kfe(r)(n.state.selection);if(!(c||u||!s||!l||d))return o.parent.textBetween(Math.max(0,o.parentOffset-500),o.parentOffset,void 0,"")},this.destroy=()=>{},this.show=()=>{this.element.dataset.show="true",this.onShow()},this.hide=()=>{this.element.dataset.show="false",this.onHide()},this.element=e.content,el(this,p4,e.debounce??200),el(this,m4,e.shouldShow??N4e(this,I9,sK)),el(this,l0,e.trigger??"/"),el(this,g4,e.offset),el(this,h4,e.middleware??[]),el(this,d4,e.floatingUIOptions??{}),el(this,f4,e.root)}}Km=new WeakMap;h4=new WeakMap;d4=new WeakMap;f4=new WeakMap;p4=new WeakMap;l0=new WeakMap;m4=new WeakMap;g4=new WeakMap;y4=new WeakMap;I9=new WeakSet;sK=function(t){const e=this.getContent(t);if(!e)return!1;const n=e.at(-1);return n?Array.isArray(wo(this,l0))?wo(this,l0).includes(n):wo(this,l0)===n:!1};function oK(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=oK(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function jr(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=oK(t))&&(r&&(r+=" "),r+=e);return r}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:lK,setPrototypeOf:JD,isFrozen:R4e,getPrototypeOf:D4e,getOwnPropertyDescriptor:L4e}=Object;let{freeze:_i,seal:no,create:aK}=Object,{apply:P9,construct:R9}=typeof Reflect<"u"&&Reflect;_i||(_i=function(e){return e});no||(no=function(e){return e});P9||(P9=function(e,n,r){return e.apply(n,r)});R9||(R9=function(e,n){return new e(...n)});const x2=Ai(Array.prototype.forEach),B4e=Ai(Array.prototype.lastIndexOf),YD=Ai(Array.prototype.pop),Jp=Ai(Array.prototype.push),$4e=Ai(Array.prototype.splice),v4=Ai(String.prototype.toLowerCase),R6=Ai(String.prototype.toString),XD=Ai(String.prototype.match),Yp=Ai(String.prototype.replace),F4e=Ai(String.prototype.indexOf),z4e=Ai(String.prototype.trim),go=Ai(Object.prototype.hasOwnProperty),li=Ai(RegExp.prototype.test),Xp=j4e(TypeError);function Ai(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return P9(t,e,r)}}function j4e(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return R9(t,n)}}function At(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v4;JD&&JD(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(R4e(e)||(e[r]=s),i=s)}t[i]=!0}return t}function H4e(t){for(let e=0;e<t.length;e++)go(t,e)||(t[e]=null);return t}function oa(t){const e=aK(null);for(const[n,r]of lK(t))go(t,n)&&(Array.isArray(r)?e[n]=H4e(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=oa(r):e[n]=r);return e}function Qp(t,e){for(;t!==null;){const r=L4e(t,e);if(r){if(r.get)return Ai(r.get);if(typeof r.value=="function")return Ai(r.value)}t=D4e(t)}function n(){return null}return n}const QD=_i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D6=_i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L6=_i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),V4e=_i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B6=_i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),W4e=_i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ZD=_i(["#text"]),eL=_i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$6=_i(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tL=_i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),b2=_i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),q4e=no(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U4e=no(/<%[\w\W]*|[\w\W]*%>/gm),G4e=no(/\$\{[\w\W]*/gm),K4e=no(/^data-[\-\w.\u00B7-\uFFFF]+$/),J4e=no(/^aria-[\-\w]+$/),cK=no(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y4e=no(/^(?:\w+script|data):/i),X4e=no(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uK=no(/^html$/i),Q4e=no(/^[a-z][.\w]*(-[.\w]+)+$/i);var nL=Object.freeze({__proto__:null,ARIA_ATTR:J4e,ATTR_WHITESPACE:X4e,CUSTOM_ELEMENT:Q4e,DATA_ATTR:K4e,DOCTYPE_NAME:uK,ERB_EXPR:U4e,IS_ALLOWED_URI:cK,IS_SCRIPT_OR_DATA:Y4e,MUSTACHE_EXPR:q4e,TMPLIT_EXPR:G4e});const Zp={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Z4e=function(){return typeof window>"u"?null:window},exe=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},rL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function hK(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z4e();const e=Ge=>hK(Ge);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Zp.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:a,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=t,p=a.prototype,m=Qp(p,"cloneNode"),y=Qp(p,"remove"),g=Qp(p,"nextSibling"),v=Qp(p,"childNodes"),w=Qp(p,"parentNode");if(typeof o=="function"){const Ge=n.createElement("template");Ge.content&&Ge.content.ownerDocument&&(n=Ge.content.ownerDocument)}let S,_="";const{implementation:C,createNodeIterator:T,createDocumentFragment:I,getElementsByTagName:L}=n,{importNode:N}=r;let $=rL();e.isSupported=typeof lK=="function"&&typeof w=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:ie,TMPLIT_EXPR:Z,DATA_ATTR:Y,ARIA_ATTR:pe,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:z}=nL;let{IS_ALLOWED_URI:O}=nL,ee=null;const X=At({},[...QD,...D6,...L6,...B6,...ZD]);let E=null;const xe=At({},[...eL,...$6,...tL,...b2]);let U=Object.seal(aK(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ue=null,ve=null,Oe=!0,st=!0,vt=!1,_t=!0,ln=!1,R=!0,B=!1,G=!1,ce=!1,se=!1,ae=!1,ke=!1,Se=!0,be=!1;const fe="user-content-";let Ve=!0,_e=!1,De={},V=null;const ne=At({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ee=null;const Ie=At({},["audio","video","img","source","image","track"]);let lt=null;const Ot=At({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yt="http://www.w3.org/1998/Math/MathML",Ft="http://www.w3.org/2000/svg",bn="http://www.w3.org/1999/xhtml";let pr=bn,Nt=!1,kn=null;const _r=At({},[Yt,Ft,bn],R6);let Vu=At({},["mi","mo","mn","ms","mtext"]),Wu=At({},["annotation-xml"]);const wv=At({},["title","style","font","a","script"]);let nc=null;const xv=["application/xhtml+xml","text/html"],bv="text/html";let Wn=null,Yl=null;const kv=n.createElement("form"),gp=function(H){return H instanceof RegExp||H instanceof Function},Od=function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Yl&&Yl===H)){if((!H||typeof H!="object")&&(H={}),H=oa(H),nc=xv.indexOf(H.PARSER_MEDIA_TYPE)===-1?bv:H.PARSER_MEDIA_TYPE,Wn=nc==="application/xhtml+xml"?R6:v4,ee=go(H,"ALLOWED_TAGS")?At({},H.ALLOWED_TAGS,Wn):X,E=go(H,"ALLOWED_ATTR")?At({},H.ALLOWED_ATTR,Wn):xe,kn=go(H,"ALLOWED_NAMESPACES")?At({},H.ALLOWED_NAMESPACES,R6):_r,lt=go(H,"ADD_URI_SAFE_ATTR")?At(oa(Ot),H.ADD_URI_SAFE_ATTR,Wn):Ot,Ee=go(H,"ADD_DATA_URI_TAGS")?At(oa(Ie),H.ADD_DATA_URI_TAGS,Wn):Ie,V=go(H,"FORBID_CONTENTS")?At({},H.FORBID_CONTENTS,Wn):ne,ue=go(H,"FORBID_TAGS")?At({},H.FORBID_TAGS,Wn):oa({}),ve=go(H,"FORBID_ATTR")?At({},H.FORBID_ATTR,Wn):oa({}),De=go(H,"USE_PROFILES")?H.USE_PROFILES:!1,Oe=H.ALLOW_ARIA_ATTR!==!1,st=H.ALLOW_DATA_ATTR!==!1,vt=H.ALLOW_UNKNOWN_PROTOCOLS||!1,_t=H.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ln=H.SAFE_FOR_TEMPLATES||!1,R=H.SAFE_FOR_XML!==!1,B=H.WHOLE_DOCUMENT||!1,se=H.RETURN_DOM||!1,ae=H.RETURN_DOM_FRAGMENT||!1,ke=H.RETURN_TRUSTED_TYPE||!1,ce=H.FORCE_BODY||!1,Se=H.SANITIZE_DOM!==!1,be=H.SANITIZE_NAMED_PROPS||!1,Ve=H.KEEP_CONTENT!==!1,_e=H.IN_PLACE||!1,O=H.ALLOWED_URI_REGEXP||cK,pr=H.NAMESPACE||bn,Vu=H.MATHML_TEXT_INTEGRATION_POINTS||Vu,Wu=H.HTML_INTEGRATION_POINTS||Wu,U=H.CUSTOM_ELEMENT_HANDLING||{},H.CUSTOM_ELEMENT_HANDLING&&gp(H.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=H.CUSTOM_ELEMENT_HANDLING.tagNameCheck),H.CUSTOM_ELEMENT_HANDLING&&gp(H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),H.CUSTOM_ELEMENT_HANDLING&&typeof H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ln&&(st=!1),ae&&(se=!0),De&&(ee=At({},ZD),E=[],De.html===!0&&(At(ee,QD),At(E,eL)),De.svg===!0&&(At(ee,D6),At(E,$6),At(E,b2)),De.svgFilters===!0&&(At(ee,L6),At(E,$6),At(E,b2)),De.mathMl===!0&&(At(ee,B6),At(E,tL),At(E,b2))),H.ADD_TAGS&&(ee===X&&(ee=oa(ee)),At(ee,H.ADD_TAGS,Wn)),H.ADD_ATTR&&(E===xe&&(E=oa(E)),At(E,H.ADD_ATTR,Wn)),H.ADD_URI_SAFE_ATTR&&At(lt,H.ADD_URI_SAFE_ATTR,Wn),H.FORBID_CONTENTS&&(V===ne&&(V=oa(V)),At(V,H.FORBID_CONTENTS,Wn)),Ve&&(ee["#text"]=!0),B&&At(ee,["html","head","body"]),ee.table&&(At(ee,["tbody"]),delete ue.tbody),H.TRUSTED_TYPES_POLICY){if(typeof H.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof H.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=H.TRUSTED_TYPES_POLICY,_=S.createHTML("")}else S===void 0&&(S=exe(f,i)),S!==null&&typeof _=="string"&&(_=S.createHTML(""));_i&&_i(H),Yl=H}},yp=At({},[...D6,...L6,...V4e]),vp=At({},[...B6,...W4e]),Sv=function(H){let we=w(H);(!we||!we.tagName)&&(we={namespaceURI:pr,tagName:"template"});const He=v4(H.tagName),Xt=v4(we.tagName);return kn[H.namespaceURI]?H.namespaceURI===Ft?we.namespaceURI===bn?He==="svg":we.namespaceURI===Yt?He==="svg"&&(Xt==="annotation-xml"||Vu[Xt]):!!yp[He]:H.namespaceURI===Yt?we.namespaceURI===bn?He==="math":we.namespaceURI===Ft?He==="math"&&Wu[Xt]:!!vp[He]:H.namespaceURI===bn?we.namespaceURI===Ft&&!Wu[Xt]||we.namespaceURI===Yt&&!Vu[Xt]?!1:!vp[He]&&(wv[He]||!yp[He]):!!(nc==="application/xhtml+xml"&&kn[H.namespaceURI]):!1},es=function(H){Jp(e.removed,{element:H});try{w(H).removeChild(H)}catch{y(H)}},Xl=function(H,we){try{Jp(e.removed,{attribute:we.getAttributeNode(H),from:we})}catch{Jp(e.removed,{attribute:null,from:we})}if(we.removeAttribute(H),H==="is")if(se||ae)try{es(we)}catch{}else try{we.setAttribute(H,"")}catch{}},wp=function(H){let we=null,He=null;if(ce)H="<remove></remove>"+H;else{const Fn=XD(H,/^[\r\n\t ]+/);He=Fn&&Fn[0]}nc==="application/xhtml+xml"&&pr===bn&&(H='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+H+"</body></html>");const Xt=S?S.createHTML(H):H;if(pr===bn)try{we=new d().parseFromString(Xt,nc)}catch{}if(!we||!we.documentElement){we=C.createDocument(pr,"template",null);try{we.documentElement.innerHTML=Nt?_:Xt}catch{}}const ir=we.body||we.documentElement;return H&&He&&ir.insertBefore(n.createTextNode(He),ir.childNodes[0]||null),pr===bn?L.call(we,B?"html":"body")[0]:B?we.documentElement:ir},xp=function(H){return T.call(H.ownerDocument||H,H,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Nd=function(H){return H instanceof h&&(typeof H.nodeName!="string"||typeof H.textContent!="string"||typeof H.removeChild!="function"||!(H.attributes instanceof u)||typeof H.removeAttribute!="function"||typeof H.setAttribute!="function"||typeof H.namespaceURI!="string"||typeof H.insertBefore!="function"||typeof H.hasChildNodes!="function")},bp=function(H){return typeof l=="function"&&H instanceof l};function Ns(Ge,H,we){x2(Ge,He=>{He.call(e,H,we,Yl)})}const kp=function(H){let we=null;if(Ns($.beforeSanitizeElements,H,null),Nd(H))return es(H),!0;const He=Wn(H.nodeName);if(Ns($.uponSanitizeElement,H,{tagName:He,allowedTags:ee}),R&&H.hasChildNodes()&&!bp(H.firstElementChild)&&li(/<[/\w!]/g,H.innerHTML)&&li(/<[/\w!]/g,H.textContent)||H.nodeType===Zp.progressingInstruction||R&&H.nodeType===Zp.comment&&li(/<[/\w]/g,H.data))return es(H),!0;if(!ee[He]||ue[He]){if(!ue[He]&&Cp(He)&&(U.tagNameCheck instanceof RegExp&&li(U.tagNameCheck,He)||U.tagNameCheck instanceof Function&&U.tagNameCheck(He)))return!1;if(Ve&&!V[He]){const Xt=w(H)||H.parentNode,ir=v(H)||H.childNodes;if(ir&&Xt){const Fn=ir.length;for(let Ar=Fn-1;Ar>=0;--Ar){const Is=m(ir[Ar],!0);Is.__removalCount=(H.__removalCount||0)+1,Xt.insertBefore(Is,g(H))}}}return es(H),!0}return H instanceof a&&!Sv(H)||(He==="noscript"||He==="noembed"||He==="noframes")&&li(/<\/no(script|embed|frames)/i,H.innerHTML)?(es(H),!0):(ln&&H.nodeType===Zp.text&&(we=H.textContent,x2([F,ie,Z],Xt=>{we=Yp(we,Xt," ")}),H.textContent!==we&&(Jp(e.removed,{element:H.cloneNode()}),H.textContent=we)),Ns($.afterSanitizeElements,H,null),!1)},Sp=function(H,we,He){if(Se&&(we==="id"||we==="name")&&(He in n||He in kv))return!1;if(!(st&&!ve[we]&&li(Y,we))){if(!(Oe&&li(pe,we))){if(!E[we]||ve[we]){if(!(Cp(H)&&(U.tagNameCheck instanceof RegExp&&li(U.tagNameCheck,H)||U.tagNameCheck instanceof Function&&U.tagNameCheck(H))&&(U.attributeNameCheck instanceof RegExp&&li(U.attributeNameCheck,we)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(we))||we==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&li(U.tagNameCheck,He)||U.tagNameCheck instanceof Function&&U.tagNameCheck(He))))return!1}else if(!lt[we]){if(!li(O,Yp(He,W,""))){if(!((we==="src"||we==="xlink:href"||we==="href")&&H!=="script"&&F4e(He,"data:")===0&&Ee[H])){if(!(vt&&!li(de,Yp(He,W,"")))){if(He)return!1}}}}}}return!0},Cp=function(H){return H!=="annotation-xml"&&XD(H,z)},_p=function(H){Ns($.beforeSanitizeAttributes,H,null);const{attributes:we}=H;if(!we||Nd(H))return;const He={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:E,forceKeepAttr:void 0};let Xt=we.length;for(;Xt--;){const ir=we[Xt],{name:Fn,namespaceURI:Ar,value:Is}=ir,rc=Wn(Fn),Id=Is;let sr=Fn==="value"?Id:z4e(Id);if(He.attrName=rc,He.attrValue=sr,He.keepAttr=!0,He.forceKeepAttr=void 0,Ns($.uponSanitizeAttribute,H,He),sr=He.attrValue,be&&(rc==="id"||rc==="name")&&(Xl(Fn,H),sr=fe+sr),R&&li(/((--!?|])>)|<\/(style|title)/i,sr)){Xl(Fn,H);continue}if(He.forceKeepAttr)continue;if(!He.keepAttr){Xl(Fn,H);continue}if(!_t&&li(/\/>/i,sr)){Xl(Fn,H);continue}ln&&x2([F,ie,Z],Tp=>{sr=Yp(sr,Tp," ")});const Ap=Wn(H.nodeName);if(!Sp(Ap,rc,sr)){Xl(Fn,H);continue}if(S&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Ar)switch(f.getAttributeType(Ap,rc)){case"TrustedHTML":{sr=S.createHTML(sr);break}case"TrustedScriptURL":{sr=S.createScriptURL(sr);break}}if(sr!==Id)try{Ar?H.setAttributeNS(Ar,Fn,sr):H.setAttribute(Fn,sr),Nd(H)?es(H):YD(e.removed)}catch{Xl(Fn,H)}}Ns($.afterSanitizeAttributes,H,null)},Cv=function Ge(H){let we=null;const He=xp(H);for(Ns($.beforeSanitizeShadowDOM,H,null);we=He.nextNode();)Ns($.uponSanitizeShadowNode,we,null),kp(we),_p(we),we.content instanceof s&&Ge(we.content);Ns($.afterSanitizeShadowDOM,H,null)};return e.sanitize=function(Ge){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=null,He=null,Xt=null,ir=null;if(Nt=!Ge,Nt&&(Ge="<!-->"),typeof Ge!="string"&&!bp(Ge))if(typeof Ge.toString=="function"){if(Ge=Ge.toString(),typeof Ge!="string")throw Xp("dirty is not a string, aborting")}else throw Xp("toString is not a function");if(!e.isSupported)return Ge;if(G||Od(H),e.removed=[],typeof Ge=="string"&&(_e=!1),_e){if(Ge.nodeName){const Is=Wn(Ge.nodeName);if(!ee[Is]||ue[Is])throw Xp("root node is forbidden and cannot be sanitized in-place")}}else if(Ge instanceof l)we=wp("<!---->"),He=we.ownerDocument.importNode(Ge,!0),He.nodeType===Zp.element&&He.nodeName==="BODY"||He.nodeName==="HTML"?we=He:we.appendChild(He);else{if(!se&&!ln&&!B&&Ge.indexOf("<")===-1)return S&&ke?S.createHTML(Ge):Ge;if(we=wp(Ge),!we)return se?null:ke?_:""}we&&ce&&es(we.firstChild);const Fn=xp(_e?Ge:we);for(;Xt=Fn.nextNode();)kp(Xt),_p(Xt),Xt.content instanceof s&&Cv(Xt.content);if(_e)return Ge;if(se){if(ae)for(ir=I.call(we.ownerDocument);we.firstChild;)ir.appendChild(we.firstChild);else ir=we;return(E.shadowroot||E.shadowrootmode)&&(ir=N.call(r,ir,!0)),ir}let Ar=B?we.outerHTML:we.innerHTML;return B&&ee["!doctype"]&&we.ownerDocument&&we.ownerDocument.doctype&&we.ownerDocument.doctype.name&&li(uK,we.ownerDocument.doctype.name)&&(Ar="<!DOCTYPE "+we.ownerDocument.doctype.name+`>
`+Ar),ln&&x2([F,ie,Z],Is=>{Ar=Yp(Ar,Is," ")}),S&&ke?S.createHTML(Ar):Ar},e.setConfig=function(){let Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Od(Ge),G=!0},e.clearConfig=function(){Yl=null,G=!1},e.isValidAttribute=function(Ge,H,we){Yl||Od({});const He=Wn(Ge),Xt=Wn(H);return Sp(He,Xt,we)},e.addHook=function(Ge,H){typeof H=="function"&&Jp($[Ge],H)},e.removeHook=function(Ge,H){if(H!==void 0){const we=B4e($[Ge],H);return we===-1?void 0:$4e($[Ge],we,1)[0]}return YD($[Ge])},e.removeHooks=function(Ge){$[Ge]=[]},e.removeAllHooks=function(){$=rL()},e}var Uo=hK();function L0({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}L0.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};let txe=t=>crypto.getRandomValues(new Uint8Array(t)),nxe=(t,e,n)=>{let r=(2<<Math.log2(t.length-1))-1,i=-~(1.6*r*e/t.length);return(s=e)=>{let o="";for(;;){let l=n(i),a=i|0;for(;a--;)if(o+=t[l[a]&r]||"",o.length>=s)return o}}},dK=(t,e=21)=>nxe(t,e|0,txe);var rxe=Object.defineProperty,iL=Object.getOwnPropertySymbols,ixe=Object.prototype.hasOwnProperty,sxe=Object.prototype.propertyIsEnumerable,sL=(t,e,n)=>e in t?rxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oxe=(t,e)=>{for(var n in e||(e={}))ixe.call(e,n)&&sL(t,n,e[n]);if(iL)for(var n of iL(e))sxe.call(e,n)&&sL(t,n,e[n]);return t};function Zy(t,e){return Object.assign(t,{meta:oxe({package:"@milkdown/components"},e)}),t}const lxe={imageIcon:"",captionIcon:"",uploadButton:"Upload file",confirmButton:"Confirm ",uploadPlaceholderText:"or paste the image link ...",captionPlaceholderText:"Image caption",onUpload:t=>Promise.resolve(URL.createObjectURL(t))},Q5=Jt(lxe,"imageBlockConfigCtx");Zy(Q5,{displayName:"Config<image-block>",group:"ImageBlock"});function axe(t){return Du(t,"paragraph",(e,n,r)=>{var i,s;if(((i=e.children)==null?void 0:i.length)!==1)return;const o=(s=e.children)==null?void 0:s[0];if(!o||o.type!=="image")return;const{url:l,alt:a,title:c}=o,u={type:"image-block",url:l,alt:a,title:c};r.children.splice(n,1,u)})}const cM=Hl("remark-image-block",()=>()=>axe);Zy(cM.plugin,{displayName:"Remark<remarkImageBlock>",group:"ImageBlock"});Zy(cM.options,{displayName:"RemarkConfig<remarkImageBlock>",group:"ImageBlock"});var cxe=Object.defineProperty,oL=Object.getOwnPropertySymbols,uxe=Object.prototype.hasOwnProperty,hxe=Object.prototype.propertyIsEnumerable,lL=(t,e,n)=>e in t?cxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dxe=(t,e)=>{for(var n in e||(e={}))uxe.call(e,n)&&lL(t,n,e[n]);if(oL)for(var n of oL(e))hxe.call(e,n)&&lL(t,n,e[n]);return t};const D9="image-block",Z5=nr("image-block",()=>({inline:!1,group:"block",selectable:!0,draggable:!0,isolating:!0,marks:"",atom:!0,priority:100,attrs:{src:{default:"",validate:"string"},caption:{default:"",validate:"string"},ratio:{default:1,validate:"number"}},parseDOM:[{tag:`img[data-type="${D9}"]`,getAttrs:t=>{var e;if(!(t instanceof HTMLElement))throw Vo(t);return{src:t.getAttribute("src")||"",caption:t.getAttribute("caption")||"",ratio:Number((e=t.getAttribute("ratio"))!=null?e:1)}}}],toDOM:t=>["img",dxe({"data-type":D9},t.attrs)],parseMarkdown:{match:({type:t})=>t==="image-block",runner:(t,e,n)=>{const r=e.url,i=e.title;let s=Number(e.alt||1);(Number.isNaN(s)||s===0)&&(s=1),t.addNode(n,{src:r,caption:i,ratio:s})}},toMarkdown:{match:t=>t.type.name==="image-block",runner:(t,e)=>{t.openNode("paragraph"),t.addNode("image",void 0,void 0,{title:e.attrs.caption,url:e.attrs.src,alt:`${Number.parseFloat(e.attrs.ratio).toFixed(2)}`}),t.closeNode()}}}));Zy(Z5.node,{displayName:"NodeSchema<image-block>",group:"ImageBlock"});function l1({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}l1.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const fxe=dK("abcdefg",8),pxe=si({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:t,src:e,setLink:n,onUpload:r,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:l,className:a}){var c,u;const h=je(!1),d=je(),f=je((c=e.value)!=null?c:""),p=je(fxe()),m=je(((u=e.value)==null?void 0:u.length)!==0),y=S=>{const C=S.target.value;m.value=C.length!==0,f.value=C},g=S=>{var _,C;S.key==="Enter"&&n((C=(_=d.value)==null?void 0:_.value)!=null?C:"")},v=()=>{var S,_;n((_=(S=d.value)==null?void 0:S.value)!=null?_:"")},w=S=>{var _;const C=(_=S.target.files)==null?void 0:_[0];C&&r(C).then(T=>{T&&(n(T),m.value=!0)}).catch(T=>{console.error("An error occurred while uploading image"),console.error(T)})};return()=>Q("div",{class:jr("image-edit",a)},Q(l1,{icon:i,class:"image-icon"}),Q("div",{class:jr("link-importer",h.value&&"focus")},Q("input",{ref:d,draggable:"true",onDragstart:S=>{S.preventDefault(),S.stopPropagation()},disabled:t.value,class:"link-input-area",value:f.value,onInput:y,onKeydown:g,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!m.value&&Q("div",{class:"placeholder"},Q("input",{disabled:t.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:w}),Q("label",{class:"uploader",for:p.value},Q(l1,{icon:s})),Q("span",{class:"text",onClick:()=>{var S;return(S=d.value)==null?void 0:S.focus()}},l))),f.value&&Q("div",{class:"confirm",onClick:()=>v()},Q(l1,{icon:o})))}}),mxe=si({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup({src:t,caption:e,ratio:n,readonly:r,setAttr:i,config:s}){var o;const l=je(),a=je(),c=je(!!((o=e.value)!=null&&o.length)),u=je(0),h=()=>{var v;const w=l.value;if(!w)return;const S=w.closest(".milkdown-image-block");if(!S)return;const _=S.getBoundingClientRect().width;if(!_)return;const C=w.height,T=w.width,I=T<_?C:_*(C/T),L=(I*((v=n.value)!=null?v:1)).toFixed(2);w.dataset.origin=I.toFixed(2),w.dataset.height=L,w.style.height=`${L}px`},d=v=>{v.preventDefault(),v.stopPropagation(),!r.value&&(c.value=!c.value)},f=v=>{const S=v.target.value;u.value&&window.clearTimeout(u.value),u.value=window.setTimeout(()=>{i("caption",S)},1e3)},p=v=>{const S=v.target.value;u.value&&(window.clearTimeout(u.value),u.value=0),i("caption",S)},m=v=>{v.preventDefault();const w=l.value;if(!w)return;const S=w.getBoundingClientRect().top,_=v.clientY-S,C=Number(_<100?100:_).toFixed(2);w.dataset.height=C,w.style.height=`${C}px`},y=()=>{window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",y);const v=l.value;if(!v)return;const w=Number(v.dataset.origin),S=Number(v.dataset.height),_=Number.parseFloat(Number(S/w).toFixed(2));Number.isNaN(_)||i("ratio",_)},g=v=>{r.value||(v.preventDefault(),v.stopPropagation(),window.addEventListener("pointermove",m),window.addEventListener("pointerup",y))};return()=>Q(Yr,null,Q("div",{class:"image-wrapper"},Q("div",{class:"operation"},Q("div",{class:"operation-item",onPointerdown:d},Q(l1,{icon:s.captionIcon}))),Q("img",{ref:l,"data-type":D9,onLoad:h,src:t.value,alt:e.value}),Q("div",{ref:a,class:"image-resize-handle",onPointerdown:g})),c.value&&Q("input",{draggable:"true",onDragstart:v=>{v.preventDefault(),v.stopPropagation()},class:"caption-input",placeholder:s==null?void 0:s.captionPlaceholderText,onInput:f,onBlur:p,value:e.value}))}});var gxe=Object.defineProperty,aL=Object.getOwnPropertySymbols,yxe=Object.prototype.hasOwnProperty,vxe=Object.prototype.propertyIsEnumerable,cL=(t,e,n)=>e in t?gxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wxe=(t,e)=>{for(var n in e||(e={}))yxe.call(e,n)&&cL(t,n,e[n]);if(aL)for(var n of aL(e))vxe.call(e,n)&&cL(t,n,e[n]);return t};const xxe=si({props:{src:{type:Object,required:!0},caption:{type:Object,required:!0},ratio:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const{src:e}=t;return()=>{var n;return(n=e.value)!=null&&n.length?Q(mxe,wxe({},t)):Q(pxe,{src:t.src,selected:t.selected,readonly:t.readonly,setLink:r=>t.setAttr("src",r),imageIcon:t.config.imageIcon,uploadButton:t.config.uploadButton,confirmButton:t.config.confirmButton,uploadPlaceholderText:t.config.uploadPlaceholderText,onUpload:t.config.onUpload})}}}),fK=Vy(Z5.node,t=>(e,n,r)=>{const i=je(e.attrs.src),s=je(e.attrs.caption),o=je(e.attrs.ratio),l=je(!1),a=je(!n.editable),c=(y,g)=>{if(!n.editable)return;const v=r();v!=null&&n.dispatch(n.state.tr.setNodeAttribute(v,y,y==="src"?Uo.sanitize(g):g))},u=t.get(Q5.key),h=qo(xxe,{src:i,caption:s,ratio:o,selected:l,readonly:a,setAttr:c,config:u}),d=document.createElement("div");d.className="milkdown-image-block",h.mount(d);const f=ip(()=>{l.value?d.classList.add("selected"):d.classList.remove("selected")}),p=u.proxyDomURL,m=y=>{if(!p)i.value=y.attrs.src;else{const g=p(y.attrs.src);typeof g=="string"?i.value=g:g.then(v=>{i.value=v}).catch(console.error)}o.value=y.attrs.ratio,s.value=y.attrs.caption,a.value=!n.editable};return m(e),{dom:d,update:y=>y.type!==e.type?!1:(m(y),!0),stopEvent:y=>y.target instanceof HTMLInputElement,selectNode:()=>{l.value=!0},deselectNode:()=>{l.value=!1},destroy:()=>{f(),h.unmount(),d.remove()}}});Zy(fK,{displayName:"NodeView<image-block>",group:"ImageBlock"});const bxe=[cM,Z5,fK,Q5].flat();var L9,B9;if(typeof WeakMap<"u"){let t=new WeakMap;L9=e=>t.get(e),B9=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;L9=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},B9=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var qt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let l=1;s<this.width&&this.map[e+l]==n;l++)s++;for(let l=1;o<this.height&&this.map[e+this.width*l]==n;l++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:l,top:a,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,a),right:Math.max(r,l),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const l=(t+1)*this.width;for(;o<l&&this.map[o]<i;)o++;return o==l?s-1:this.map[o]}i=s}}static get(t){return L9(t)||B9(t,kxe(t))}};function kxe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Sxe(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const h=t.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==h.childCount)break;const m=h.child(p),{colspan:y,rowspan:g,colwidth:v}=m.attrs;for(let w=0;w<g;w++){if(w+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:g-w});break}const S=i+w*e;for(let _=0;_<y;_++){r[S+_]==0?r[S+_]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:y-_});const C=v&&v[_];if(C){const T=(S+_)%e*2,I=o[T];I==null||I!=C&&o[T+1]==1?(o[T]=C,o[T+1]=1):I==C&&o[T+1]++}}}i+=y,u+=m.nodeSize}const d=(c+1)*e;let f=0;for(;i<d;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),u++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const l=new qt(e,n,r,s);let a=!1;for(let c=0;!a&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(a=!0);return a&&Cxe(l,o,t),l}function Sxe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const l=t.child(o);for(let a=0;a<l.childCount;a++){const c=l.child(a);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const l=i.child(o);s+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Cxe(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let l=null;const a=o.attrs;for(let c=0;c<a.colspan;c++){const u=(i+c)%t.width,h=e[u*2];h!=null&&(!a.colwidth||a.colwidth[c]!=h)&&((l||(l=_xe(a)))[c]=h)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function _xe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function uL(t,e){if(typeof t=="string")return{};const n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(o=>Number(o)):null,i=Number(t.getAttribute("colspan")||1),s={colspan:i,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const o in e){const l=e[o].getFromDOM,a=l&&l(t);a!=null&&(s[o]=a)}return s}function hL(t,e){const n={};t.attrs.colspan!=1&&(n.colspan=t.attrs.colspan),t.attrs.rowspan!=1&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(","));for(const r in e){const i=e[r].setDOMAttr;i&&i(t.attrs[r],n)}return n}function Axe(t){if(t!==null){if(!Array.isArray(t))throw new TypeError("colwidth must be null or an array");for(const e of t)if(typeof e!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function Txe(t){const e=t.cellAttributes||{},n={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:Axe}};for(const r in e)n[r]={default:e[r].default,validate:e[r].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>uL(r,e)}],toDOM(r){return["td",hL(r,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>uL(r,e)}],toDOM(r){return["th",hL(r,e),0]}}}}function ro(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var zc=new $n("selectingCells");function ev(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function oo(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function e3(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ev(e.$head)||Mxe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Mxe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function $9(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Exe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function uM(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function pK(t,e,n){const r=t.node(-1),i=qt.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function md(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Oxe(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Nxe(t,e,n){const r=ro(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var sn=class la extends ct{constructor(e,n=e){const r=e.node(-1),i=qt.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),l=e.node(0),a=i.cellsInRect(o).filter(u=>u!=n.pos-s);a.unshift(n.pos-s);const c=a.map(u=>{const h=r.nodeAt(u);if(!h)throw RangeError(`No cell with offset ${u} found`);const d=s+u+1;return new _W(l.resolve(d),l.resolve(d+h.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if($9(r)&&$9(i)&&uM(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?la.rowSelection(r,i):s&&this.isColSelection()?la.colSelection(r,i):new la(r,i)}return qe.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=qt.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let a=i.top;a<i.bottom;a++){const c=[];for(let u=a*n.width+i.left,h=i.left;h<i.right;h++,u++){const d=n.map[u];if(s[d])continue;s[d]=!0;const f=n.findCell(d);let p=e.nodeAt(d);if(!p)throw RangeError(`No cell with offset ${d} found`);const m=i.left-f.left,y=f.right-i.right;if(m>0||y>0){let g=p.attrs;if(m>0&&(g=md(g,0,m)),y>0&&(g=md(g,g.colspan-y,y)),f.left<i.left){if(p=p.type.createAndFill(g),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(g)}`)}else p=p.type.create(g,p.content)}if(f.top<i.top||f.bottom>i.bottom){const g={...p.attrs,rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)};f.top<i.top?p=p.type.createAndFill(g):p=p.type.create(g,p.content)}c.push(p)}o.push(e.child(a).copy(Ce.from(c)))}const l=this.isColSelection()&&this.isRowSelection()?e:o;return new Pe(Ce.from(l),1,1)}replace(e,n=Pe.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:l,$to:a}=i[o],c=e.mapping.slice(r);e.replace(c.map(l.pos),c.map(a.pos),o?Pe.empty:n)}const s=ct.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new Pe(Ce.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=qt.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=qt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),a=e.node(0);return o.top<=l.top?(o.top>0&&(e=a.resolve(s+i.map[o.left])),l.bottom<i.height&&(n=a.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(n=a.resolve(s+i.map[l.left])),o.bottom<i.height&&(e=a.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new la(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=qt.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==n.width}eq(e){return e instanceof la&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=qt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),l=i.findCell(n.pos-s),a=e.node(0);return o.left<=l.left?(o.left>0&&(e=a.resolve(s+i.map[o.top*i.width])),l.right<i.width&&(n=a.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(n=a.resolve(s+i.map[l.top*i.width])),o.right<i.width&&(e=a.resolve(s+i.map[i.width*(o.top+1)-1]))),new la(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new la(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new la(e.resolve(n),e.resolve(r))}getBookmark(){return new Ixe(this.$anchorCell.pos,this.$headCell.pos)}};sn.prototype.visible=!1;ct.jsonID("cell",sn);var Ixe=class mK{constructor(e,n){this.anchor=e,this.head=n}map(e){return new mK(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&uM(n,r)?new sn(n,r):ct.near(r,1)}};function Pxe(t){if(!(t.selection instanceof sn))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(er.node(r,r+n.nodeSize,{class:"selectedCell"}))}),tn.create(t.doc,e)}function Rxe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function Dxe({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Lxe(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof tt&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=sn.create(i,r.from);else if(o=="row"){const l=i.resolve(r.from+1);s=sn.rowSelection(l,l)}else if(!n){const l=qt.get(r.node),a=r.from+1,c=a+l.map[l.width*l.height-1];s=sn.create(i,a+1,c)}}else r instanceof qe&&Rxe(r)?s=qe.create(i,r.from):r instanceof qe&&Dxe(r)&&(s=qe.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var Bxe=new $n("fix-tables");function gK(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,l=0;o<s;o++){const a=e.child(o);for(let c=l,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==a){l=c+1,n+=a.nodeSize;continue e}r(a,n),l<i&&t.child(l).sameMarkup(a)?gK(t.child(l),a,n+1,r):a.nodesBetween(0,a.content.size,r,n+1),n+=a.nodeSize}}function $xe(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=Fxe(t,i,s,n))};return e?e.doc!=t.doc&&gK(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Fxe(t,e,n,r){const i=qt.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let a=0;a<i.height;a++)s.push(0);for(let a=0;a<i.problems.length;a++){const c=i.problems[a];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const h=u.attrs;for(let d=0;d<h.rowspan;d++)s[c.row+d]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,md(h,h.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let o,l;for(let a=0;a<s.length;a++)s[a]&&(o==null&&(o=a),l=a);for(let a=0,c=n+1;a<i.height;a++){const u=e.child(a),h=c+u.nodeSize,d=s[a];if(d>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const p=[];for(let y=0;y<d;y++){const g=ro(t.schema)[f].createAndFill();g&&p.push(g)}const m=(a==0||o==a-1)&&l==a?c+1:h-1;r.insert(r.mapping.map(m),p)}c=h}return r.setMeta(Bxe,{fixTables:!0})}function $u(t){const e=t.selection,n=e3(t),r=n.node(-1),i=n.start(-1),s=qt.get(r);return{...e instanceof sn?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function yK(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;Nxe(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const l=o*e.width+i;if(i>0&&i<e.width&&e.map[l-1]==e.map[l]){const a=e.map[l],c=r.nodeAt(a);t.setNodeMarkup(t.mapping.map(n+a),null,Oxe(c.attrs,i-e.colCount(a))),o+=c.attrs.rowspan-1}else{const a=s==null?ro(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),a.createAndFill())}}return t}function zxe(t,e){if(!oo(t))return!1;if(e){const n=$u(t);e(yK(t.tr,n,n.left))}return!0}function jxe(t,e){if(!oo(t))return!1;if(e){const n=$u(t);e(yK(t.tr,n,n.right))}return!0}function Hxe(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const l=o*e.width+i,a=e.map[l],c=n.nodeAt(a),u=c.attrs;if(i>0&&e.map[l-1]==a||i<e.width-1&&e.map[l+1]==a)t.setNodeMarkup(t.mapping.slice(s).map(r+a),null,md(u,i-e.colCount(a)));else{const h=t.mapping.slice(s).map(r+a);t.delete(h,h+c.nodeSize)}o+=u.rowspan}}function Vxe(t,e){if(!oo(t))return!1;if(e){const n=$u(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;Hxe(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=qt.get(s)}e(r)}return!0}function Wxe(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,l=t.mapping.maps.length;t.delete(s+r,o+r);const a=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const h=e.map[u];if(!a.has(h)){if(a.add(h),i>0&&h==e.map[u-e.width]){const d=n.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(l).map(h+r),null,{...d,rowspan:d.rowspan-1}),c+=d.colspan-1}else if(i<e.height&&h==e.map[u+e.width]){const d=n.nodeAt(h),f=d.attrs,p=d.type.create({...f,rowspan:d.attrs.rowspan-1},d.content),m=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(l).map(r+m),p),c+=f.colspan-1}}}}function qxe(t,e){if(!oo(t))return!1;if(e){const n=$u(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;Wxe(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=qt.get(n.table)}e(r)}return!0}function Uxe(t,e){return function(n,r){if(!oo(n))return!1;const i=e3(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof sn?n.selection.forEachCell((o,l)=>{o.attrs[t]!==e&&s.setNodeMarkup(l,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function Gxe(t){return function(e,n){if(!oo(e))return!1;if(n){const r=ro(e.schema),i=$u(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),l=o.map(a=>i.table.nodeAt(a));for(let a=0;a<o.length;a++)l[a].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[a],r.cell,l[a].attrs);if(s.steps.length==0)for(let a=0;a<o.length;a++)s.setNodeMarkup(i.tableStart+o[a],r.header_cell,l[a].attrs);n(s)}return!0}}function dL(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function hM(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Gxe(t):function(n,r){if(!oo(n))return!1;if(r){const i=ro(n.schema),s=$u(n),o=n.tr,l=dL("row",s,i),a=dL("column",s,i),u=(t==="column"?l:t==="row"?a:!1)?1:0,h=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,d=t=="column"?a?i.cell:i.header_cell:t=="row"?l?i.cell:i.header_cell:i.cell;s.map.cellsInRect(h).forEach(f=>{const p=f+s.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,d,m.attrs)}),r(o)}return!0}}hM("row",{useDeprecatedLogic:!0});hM("column",{useDeprecatedLogic:!0});hM("cell",{useDeprecatedLogic:!0});function Kxe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function vK(t){return function(e,n){if(!oo(e))return!1;const r=Kxe(e3(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(qe.between(i,Exe(i))).scrollIntoView())}return!0}}function Jxe(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function k2(t,e){const n=t.selection;if(!(n instanceof sn))return!1;if(e){const r=t.tr,i=ro(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new Pe(i,0,0))}),r.docChanged&&e(r)}return!0}function Yxe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,l=[];if(s=="row")for(let a=0;a<e.childCount;a++){let c=e.child(a).content;const u=a?0:Math.max(0,n-1),h=a<e.childCount-1?0:Math.max(0,r-1);(u||h)&&(c=F9(ro(o).row,new Pe(c,u,h)).content),l.push(c)}else if(s=="cell"||s=="header_cell")l.push(n||r?F9(ro(o).row,new Pe(e,n,r)).content:e);else return null;return Xxe(o,l)}function Xxe(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:l,colspan:a}=s.child(o).attrs;for(let c=i;c<i+l;c++)n[c]=(n[c]||0)+a}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ce.empty),n[i]<r){const s=ro(t).cell.createAndFill(),o=[];for(let l=n[i];l<r;l++)o.push(s);e[i]=e[i].append(Ce.from(o))}return{height:e.length,width:r,rows:e}}function F9(t,e){const n=t.createAndFill();return new CW(n).replace(0,n.content.size,e).doc}function Qxe({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let l=0;l<n.length;l++){const a=n[l],c=[];for(let u=s[l]||0,h=0;u<r;h++){let d=a.child(h%a.childCount);u+d.attrs.colspan>r&&(d=d.type.createChecked(md(d.attrs,d.attrs.colspan,u+d.attrs.colspan-r),d.content)),c.push(d),u+=d.attrs.colspan;for(let f=1;f<d.attrs.rowspan;f++)s[l+f]=(s[l+f]||0)+d.attrs.colspan}o.push(Ce.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,l=0;o<i;o++,l++){const a=[],c=n[l%e];for(let u=0;u<c.childCount;u++){let h=c.child(u);o+h.attrs.rowspan>i&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,i-h.attrs.rowspan)},h.content)),a.push(h)}s.push(Ce.from(a))}n=s,e=i}return{width:t,height:e,rows:n}}function Zxe(t,e,n,r,i,s,o){const l=t.doc.type.schema,a=ro(l);let c,u;if(i>e.width)for(let h=0,d=0;h<e.height;h++){const f=n.child(h);d+=f.nodeSize;const p=[];let m;f.lastChild==null||f.lastChild.type==a.cell?m=c||(c=a.cell.createAndFill()):m=u||(u=a.header_cell.createAndFill());for(let y=e.width;y<i;y++)p.push(m);t.insert(t.mapping.slice(o).map(d-1+r),p)}if(s>e.height){const h=[];for(let p=0,m=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const y=p>=e.width?!1:n.nodeAt(e.map[m+p]).type==a.header_cell;h.push(y?u||(u=a.header_cell.createAndFill()):c||(c=a.cell.createAndFill()))}const d=a.row.create(null,Ce.from(h)),f=[];for(let p=e.height;p<s;p++)f.push(d);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),f)}return!!(c||u)}function fL(t,e,n,r,i,s,o,l){if(o==0||o==e.height)return!1;let a=!1;for(let c=i;c<s;c++){const u=o*e.width+c,h=e.map[u];if(e.map[u-e.width]==h){a=!0;const d=n.nodeAt(h),{top:f,left:p}=e.findCell(h);t.setNodeMarkup(t.mapping.slice(l).map(h+r),null,{...d.attrs,rowspan:o-f}),t.insert(t.mapping.slice(l).map(e.positionAt(o,p,n)),d.type.createAndFill({...d.attrs,rowspan:f+d.attrs.rowspan-o})),c+=d.attrs.colspan-1}}return a}function pL(t,e,n,r,i,s,o,l){if(o==0||o==e.width)return!1;let a=!1;for(let c=i;c<s;c++){const u=c*e.width+o,h=e.map[u];if(e.map[u-1]==h){a=!0;const d=n.nodeAt(h),f=e.colCount(h),p=t.mapping.slice(l).map(h+r);t.setNodeMarkup(p,null,md(d.attrs,o-f,d.attrs.colspan-(o-f))),t.insert(p+d.nodeSize,d.type.createAndFill(md(d.attrs,0,o-f))),c+=d.attrs.rowspan-1}}return a}function mL(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=qt.get(s);const{top:l,left:a}=r,c=a+i.width,u=l+i.height,h=t.tr;let d=0;function f(){if(s=n?h.doc.nodeAt(n-1):h.doc,!s)throw new Error("No table found");o=qt.get(s),d=h.mapping.maps.length}Zxe(h,o,s,n,c,u,d)&&f(),fL(h,o,s,n,a,c,l,d)&&f(),fL(h,o,s,n,a,c,u,d)&&f(),pL(h,o,s,n,l,u,a,d)&&f(),pL(h,o,s,n,l,u,c,d)&&f();for(let p=l;p<u;p++){const m=o.positionAt(p,a,s),y=o.positionAt(p,c,s);h.replace(h.mapping.slice(d).map(m+n),h.mapping.slice(d).map(y+n),new Pe(i.rows[p-l],0,0))}f(),h.setSelection(new sn(h.doc.resolve(n+o.positionAt(l,a,s)),h.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(h)}var ebe=EA({ArrowLeft:S2("horiz",-1),ArrowRight:S2("horiz",1),ArrowUp:S2("vert",-1),ArrowDown:S2("vert",1),"Shift-ArrowLeft":C2("horiz",-1),"Shift-ArrowRight":C2("horiz",1),"Shift-ArrowUp":C2("vert",-1),"Shift-ArrowDown":C2("vert",1),Backspace:k2,"Mod-Backspace":k2,Delete:k2,"Mod-Delete":k2});function w4(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function S2(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof sn)return w4(n,r,ct.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=wK(i,t,e);if(o==null)return!1;if(t=="horiz")return w4(n,r,ct.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(o),a=pK(l,t,e);let c;return a?c=ct.near(a,1):e<0?c=ct.near(n.doc.resolve(l.before(-1)),-1):c=ct.near(n.doc.resolve(l.after(-1)),1),w4(n,r,c)}}}function C2(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof sn)o=s;else{const a=wK(i,t,e);if(a==null)return!1;o=new sn(n.doc.resolve(a))}const l=pK(o.$headCell,t,e);return l?w4(n,r,new sn(o.$anchorCell,l)):!1}}function tbe(t,e){const n=t.state.doc,r=ev(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new sn(r))),!0):!1}function nbe(t,e,n){if(!oo(t.state))return!1;let r=Yxe(n);const i=t.state.selection;if(i instanceof sn){r||(r={width:1,height:1,rows:[Ce.from(F9(ro(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),l=qt.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=Qxe(r,l.right-l.left,l.bottom-l.top),mL(t.state,t.dispatch,o,l,r),!0}else if(r){const s=e3(t.state),o=s.start(-1);return mL(t.state,t.dispatch,o,qt.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function rbe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=gL(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof sn)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=ev(t.state.selection.$anchor))!=null&&((n=F6(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(a,c){let u=F6(t,c);const h=zc.getState(t.state)==null;if(!u||!uM(a,u))if(h)u=a;else return;const d=new sn(a,u);if(h||!t.state.selection.eq(d)){const f=t.state.tr.setSelection(d);h&&f.setMeta(zc,a.pos),t.dispatch(f)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",l),zc.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(zc,-1))}function l(a){const c=a,u=zc.getState(t.state);let h;if(u!=null)h=t.state.doc.resolve(u);else if(gL(t,c.target)!=r&&(h=F6(t,e),!h))return o();h&&s(h,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",l)}function wK(t,e,n){if(!(t.state.selection instanceof qe))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const l=r.before(i),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?l:null}}return null}function gL(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function F6(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ev(t.state.doc.resolve(n.pos)):null}var ibe=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),z9(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,z9(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function z9(t,e,n,r,i,s){var o;let l=0,a=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let h=0,d=0;h<u.childCount;h++){const{colspan:f,colwidth:p}=u.child(h).attrs;for(let m=0;m<f;m++,d++){const y=i==d?s:p&&p[m],g=y?y+"px":"";if(l+=y||r,y||(a=!1),c)c.style.width!=g&&(c.style.width=g),c=c.nextSibling;else{const v=document.createElement("col");v.style.width=g,e.appendChild(v)}}}for(;c;){const h=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=h}a?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var vs=new $n("tableColumnResizing");function sbe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=ibe,lastColumnResizable:i=!0}={}){const s=new An({key:vs,state:{init(o,l){var a,c;const u=(c=(a=s.spec)==null?void 0:a.props)==null?void 0:c.nodeViews,h=ro(l.schema).table.name;return r&&u&&(u[h]=(d,f)=>new r(d,n,f)),new obe(-1,!1)},apply(o,l){return l.apply(o)}},props:{attributes:o=>{const l=vs.getState(o);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,l)=>{lbe(o,l,t,i)},mouseleave:o=>{abe(o)},mousedown:(o,l)=>{cbe(o,l,e,n)}},decorations:o=>{const l=vs.getState(o);if(l&&l.activeHandle>-1)return pbe(o,l.activeHandle)},nodeViews:{}}});return s}var obe=class x4{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(vs);if(r&&r.setHandle!=null)return new x4(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new x4(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return $9(e.doc.resolve(i))||(i=-1),new x4(i,n.dragging)}return n}};function lbe(t,e,n,r){if(!t.editable)return;const i=vs.getState(t.state);if(i&&!i.dragging){const s=hbe(e.target);let o=-1;if(s){const{left:l,right:a}=s.getBoundingClientRect();e.clientX-l<=n?o=yL(t,e,"left",n):a-e.clientX<=n&&(o=yL(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const l=t.state.doc.resolve(o),a=l.node(-1),c=qt.get(a),u=l.start(-1);if(c.colCount(l.pos-u)+l.nodeAfter.attrs.colspan-1==c.width-1)return}xK(t,o)}}}function abe(t){if(!t.editable)return;const e=vs.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&xK(t,-1)}function cbe(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=vs.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const l=t.state.doc.nodeAt(o.activeHandle),a=ube(t,o.activeHandle,l.attrs);t.dispatch(t.state.tr.setMeta(vs,{setDragging:{startX:e.clientX,startWidth:a}}));function c(h){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const d=vs.getState(t.state);d!=null&&d.dragging&&(dbe(t,d.activeHandle,vL(d.dragging,h,n)),t.dispatch(t.state.tr.setMeta(vs,{setDragging:null})))}function u(h){if(!h.which)return c(h);const d=vs.getState(t.state);if(d&&d.dragging){const f=vL(d.dragging,h,n);wL(t,d.activeHandle,f,r)}}return wL(t,o.activeHandle,a,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function ube(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let l=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let c=0;c<n;c++)r[c]&&(l-=r[c],a--);return l/a}function hbe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function yL(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,l=ev(t.state.doc.resolve(o));if(!l)return-1;if(n=="right")return l.pos;const a=qt.get(l.node(-1)),c=l.start(-1),u=a.map.indexOf(l.pos-c);return u%a.width==0?-1:c+a.map[u-1]}function vL(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function xK(t,e){t.dispatch(t.state.tr.setMeta(vs,{setHandle:e}))}function dbe(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=qt.get(i),o=r.start(-1),l=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,a=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+l;if(c&&s.map[u]==s.map[u-s.width])continue;const h=s.map[u],d=i.nodeAt(h).attrs,f=d.colspan==1?0:l-s.colCount(h);if(d.colwidth&&d.colwidth[f]==n)continue;const p=d.colwidth?d.colwidth.slice():fbe(d.colspan);p[f]=n,a.setNodeMarkup(o+h,null,{...d,colwidth:p})}a.docChanged&&t.dispatch(a)}function wL(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),l=qt.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let a=t.domAtPos(i.start(-1)).node;for(;a&&a.nodeName!="TABLE";)a=a.parentNode;a&&z9(s,a.firstChild,a,r,l,n)}function fbe(t){return Array(t).fill(0)}function pbe(t,e){var n;const r=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return tn.empty;const o=qt.get(s),l=i.start(-1),a=o.colCount(i.pos-l)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const u=a+c*o.width;if((a==o.width-1||o.map[u]!=o.map[u+1])&&(c==0||o.map[u]!=o.map[u-o.width])){const h=o.map[u],d=l+h+s.nodeAt(h).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=vs.getState(t))!=null&&n.dragging&&r.push(er.node(l+h,l+h+s.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),r.push(er.widget(d,f))}}return tn.create(t.doc,r)}function mbe({allowTableNodeSelection:t=!1}={}){return new An({key:zc,state:{init(){return null},apply(e,n){const r=e.getMeta(zc);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:Pxe,handleDOMEvents:{mousedown:rbe},createSelectionBetween(e){return zc.getState(e.state)!=null?e.state.selection:null},handleTripleClick:tbe,handleKeyDown:ebe,handlePaste:nbe},appendTransaction(e,n,r){return Lxe(r,$xe(r,n),t)}})}var pb=typeof navigator<"u"?navigator:null,dM=pb&&pb.userAgent||"",gbe=/Edge\/(\d+)/.exec(dM),ybe=/MSIE \d/.exec(dM),vbe=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(dM),wbe=!!(ybe||vbe||gbe),xbe=!wbe&&!!pb&&/Apple Computer/.test(pb.vendor),bK=new $n("safari-ime-span"),j9=!1,bbe={key:bK,props:{decorations:kbe,handleDOMEvents:{compositionstart:()=>{j9=!0},compositionend:()=>{j9=!1}}}};function kbe(t){const{$from:e,$to:n,to:r}=t.selection;if(j9&&e.sameParent(n)){const i=er.widget(r,Sbe,{ignoreSelection:!0,key:"safari-ime-span"});return tn.create(t.doc,[i])}}function Sbe(t){const e=t.dom.ownerDocument.createElement("span");return e.className="ProseMirror-safari-ime-span",e}var Cbe=new An(xbe?bbe:{key:bK});function xL(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function _be(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Abe(t,e,n){const i=C5((n||{}).ignore||[]),s=Tbe(e);let o=-1;for(;++o<s.length;)xA(t,"text",l);function l(c,u){let h=-1,d;for(;++h<u.length;){const f=u[h],p=d?d.children:void 0;if(i(f,p?p.indexOf(f):void 0,d))return;d=f}if(d)return a(c,u)}function a(c,u){const h=u[u.length-1],d=s[o][0],f=s[o][1];let p=0;const y=h.children.indexOf(c);let g=!1,v=[];d.lastIndex=0;let w=d.exec(c.value);for(;w;){const S=w.index,_={index:w.index,input:w.input,stack:[...u,c]};let C=f(...w,_);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?d.lastIndex=S+1:(p!==S&&v.push({type:"text",value:c.value.slice(p,S)}),Array.isArray(C)?v.push(...C):C&&v.push(C),p=S+w[0].length,g=!0),!d.global)break;w=d.exec(c.value)}return g?(p<c.value.length&&v.push({type:"text",value:c.value.slice(p)}),h.children.splice(y,1,...v)):v=[c],y+v.length}}function Tbe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([Mbe(i[0]),Ebe(i[1])])}return e}function Mbe(t){return typeof t=="string"?new RegExp(_be(t),"g"):t}function Ebe(t){return typeof t=="function"?t:function(){return t}}const z6="phrasing",j6=["autolink","link","image","label"];function Obe(){return{transforms:[Bbe],enter:{literalAutolink:Ibe,literalAutolinkEmail:H6,literalAutolinkHttp:H6,literalAutolinkWww:H6},exit:{literalAutolink:Lbe,literalAutolinkEmail:Dbe,literalAutolinkHttp:Pbe,literalAutolinkWww:Rbe}}}function Nbe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:z6,notInConstruct:j6},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:z6,notInConstruct:j6},{character:":",before:"[ps]",after:"\\/",inConstruct:z6,notInConstruct:j6}]}}function Ibe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function H6(t){this.config.enter.autolinkProtocol.call(this,t)}function Pbe(t){this.config.exit.autolinkProtocol.call(this,t)}function Rbe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Dbe(t){this.config.exit.autolinkEmail.call(this,t)}function Lbe(t){this.exit(t)}function Bbe(t){Abe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$be],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Fbe]],{ignore:["link","linkReference"]})}function $be(t,e,n,r,i){let s="";if(!kK(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!zbe(n)))return!1;const o=jbe(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Fbe(t,e,n,r){return!kK(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function zbe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jbe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=xL(t,"(");let s=xL(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function kK(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ad(n)||k5(n))&&(!e||n!==47)}SK.peek=Ybe;function Hbe(){this.buffer()}function Vbe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Wbe(){this.buffer()}function qbe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Ube(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Oo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Gbe(t){this.exit(t)}function Kbe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Oo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Jbe(t){this.exit(t)}function Ybe(){return"["}function SK(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function Xbe(){return{enter:{gfmFootnoteCallString:Hbe,gfmFootnoteCall:Vbe,gfmFootnoteDefinitionLabelString:Wbe,gfmFootnoteDefinition:qbe},exit:{gfmFootnoteCallString:Ube,gfmFootnoteCall:Gbe,gfmFootnoteDefinitionLabelString:Kbe,gfmFootnoteDefinition:Jbe}}}function Qbe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:SK},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const l=s.createTracker(o);let a=l.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return a+=l.move(s.safe(s.associationId(r),{before:a,after:"]"})),u(),a+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),a+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),e?CK:Zbe))),c(),a}}function Zbe(t,e,n){return e===0?t:CK(t,e,n)}function CK(t,e,n){return(n?"":"    ")+t}const e5e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];_K.peek=s5e;function t5e(){return{canContainEols:["delete"],enter:{strikethrough:r5e},exit:{strikethrough:i5e}}}function n5e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:e5e}],handlers:{delete:_K}}}function r5e(t){this.enter({type:"delete",children:[]},t)}function i5e(t){this.exit(t)}function _K(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function s5e(){return"~"}function o5e(t){return t.length}function l5e(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||o5e,s=[],o=[],l=[],a=[];let c=0,u=-1;for(;++u<t.length;){const m=[],y=[];let g=-1;for(t[u].length>c&&(c=t[u].length);++g<t[u].length;){const v=a5e(t[u][g]);if(n.alignDelimiters!==!1){const w=i(v);y[g]=w,(a[g]===void 0||w>a[g])&&(a[g]=w)}m.push(v)}o[u]=m,l[u]=y}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=bL(r[h]);else{const m=bL(r);for(;++h<c;)s[h]=m}h=-1;const d=[],f=[];for(;++h<c;){const m=s[h];let y="",g="";m===99?(y=":",g=":"):m===108?y=":":m===114&&(g=":");let v=n.alignDelimiters===!1?1:Math.max(1,a[h]-y.length-g.length);const w=y+"-".repeat(v)+g;n.alignDelimiters!==!1&&(v=y.length+v+g.length,v>a[h]&&(a[h]=v),f[h]=v),d[h]=w}o.splice(1,0,d),l.splice(1,0,f),u=-1;const p=[];for(;++u<o.length;){const m=o[u],y=l[u];h=-1;const g=[];for(;++h<c;){const v=m[h]||"";let w="",S="";if(n.alignDelimiters!==!1){const _=a[h]-(y[h]||0),C=s[h];C===114?w=" ".repeat(_):C===99?_%2?(w=" ".repeat(_/2+.5),S=" ".repeat(_/2-.5)):(w=" ".repeat(_/2),S=w):S=" ".repeat(_)}n.delimiterStart!==!1&&!h&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||h)&&g.push(" "),n.alignDelimiters!==!1&&g.push(w),g.push(v),n.alignDelimiters!==!1&&g.push(S),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&g.push("|")}p.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return p.join(`
`)}function a5e(t){return t==null?"":String(t)}function bL(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function c5e(){return{enter:{table:u5e,tableData:kL,tableHeader:kL,tableRow:d5e},exit:{codeText:f5e,table:h5e,tableData:V6,tableHeader:V6,tableRow:V6}}}function u5e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function h5e(t){this.exit(t),this.data.inTable=void 0}function d5e(t){this.enter({type:"tableRow",children:[]},t)}function V6(t){this.exit(t)}function kL(t){this.enter({type:"tableCell",children:[]},t)}function f5e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,p5e));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function p5e(t,e){return e==="|"?e:t}function m5e(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:o,tableCell:a,tableRow:l}};function o(f,p,m,y){return c(u(f,m,y),f.align)}function l(f,p,m,y){const g=h(f,m,y),v=c([g]);return v.slice(0,v.indexOf(`
`))}function a(f,p,m,y){const g=m.enter("tableCell"),v=m.enter("phrasing"),w=m.containerPhrasing(f,{...y,before:s,after:s});return v(),g(),w}function c(f,p){return l5e(f,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function u(f,p,m){const y=f.children;let g=-1;const v=[],w=p.enter("table");for(;++g<y.length;)v[g]=h(y[g],p,m);return w(),v}function h(f,p,m){const y=f.children;let g=-1;const v=[],w=p.enter("tableRow");for(;++g<y.length;)v[g]=a(y[g],f,p,m);return w(),v}function d(f,p,m){let y=kA.inlineCode(f,p,m);return m.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function g5e(){return{exit:{taskListCheckValueChecked:SL,taskListCheckValueUnchecked:SL,paragraph:v5e}}}function y5e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:w5e}}}function SL(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function v5e(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function w5e(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let a=kA.listItem(t,e,n,{...r,...l.current()});return s&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),a;function c(u){return u+o}}function x5e(){return[Obe(),Xbe(),t5e(),c5e(),g5e()]}function b5e(t){return{extensions:[Nbe(),Qbe(t),n5e(),m5e(t),y5e()]}}const k5e={tokenize:M5e,partial:!0},AK={tokenize:E5e,partial:!0},TK={tokenize:O5e,partial:!0},MK={tokenize:N5e,partial:!0},S5e={tokenize:I5e,partial:!0},EK={name:"wwwAutolink",tokenize:A5e,previous:NK},OK={name:"protocolAutolink",tokenize:T5e,previous:IK},ec={name:"emailAutolink",tokenize:_5e,previous:PK},Wl={};function C5e(){return{text:Wl}}let Yu=48;for(;Yu<123;)Wl[Yu]=ec,Yu++,Yu===58?Yu=65:Yu===91&&(Yu=97);Wl[43]=ec;Wl[45]=ec;Wl[46]=ec;Wl[95]=ec;Wl[72]=[ec,OK];Wl[104]=[ec,OK];Wl[87]=[ec,EK];Wl[119]=[ec,EK];function _5e(t,e,n){const r=this;let i,s;return o;function o(h){return!H9(h)||!PK.call(r,r.previous)||fM(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(h))}function l(h){return H9(h)?(t.consume(h),l):h===64?(t.consume(h),a):n(h)}function a(h){return h===46?t.check(S5e,u,c)(h):h===45||h===95||Hi(h)?(s=!0,t.consume(h),a):u(h)}function c(h){return t.consume(h),i=!0,a}function u(h){return s&&i&&mi(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function A5e(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!NK.call(r,r.previous)||fM(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(k5e,t.attempt(AK,t.attempt(TK,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function T5e(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&IK.call(r,r.previous)&&!fM(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),l):n(h)}function l(h){if(mi(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),l;if(h===58){const d=i.toLowerCase();if(d==="http"||d==="https")return t.consume(h),a}return n(h)}function a(h){return h===47?(t.consume(h),s?c:(s=!0,a)):n(h)}function c(h){return h===null||Wx(h)||rn(h)||ad(h)||k5(h)?n(h):t.attempt(AK,t.attempt(TK,u),n)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function M5e(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function E5e(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(MK,a,l)(c):c===null||rn(c)||ad(c)||c!==45&&k5(c)?a(c):(s=!0,t.consume(c),o)}function l(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function a(c){return i||r||!s?n(c):e(c)}}function O5e(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(MK,e,s)(o):o===null||rn(o)||ad(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function N5e(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||rn(l)||ad(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||rn(l)||ad(l)?e(l):r(l)}function s(l){return mi(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),r):mi(l)?(t.consume(l),o):n(l)}}function I5e(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Hi(s)?n(s):e(s)}}function NK(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||rn(t)}function IK(t){return!mi(t)}function PK(t){return!(t===47||H9(t))}function H9(t){return t===43||t===45||t===46||t===95||Hi(t)}function fM(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const P5e={tokenize:j5e,partial:!0};function R5e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:$5e,continuation:{tokenize:F5e},exit:z5e}},text:{91:{name:"gfmFootnoteCall",tokenize:B5e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:D5e,resolveTo:L5e}}}}function D5e(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const a=r.events[i][1];if(a.type==="labelImage"){o=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return l;function l(a){if(!o||!o._balanced)return n(a);const c=Oo(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(a):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(a),t.exit("gfmFootnoteCallLabelMarker"),e(a))}}function L5e(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...l),t}function B5e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),a}function a(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||rn(h))return n(h);if(h===93){t.exit("chunkString");const d=t.exit("gfmFootnoteCallString");return i.includes(Oo(r.sliceSerialize(d)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return rn(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function $5e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return a;function a(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(p)}function u(p){if(o>999||p===93&&!l||p===null||p===91||rn(p))return n(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteDefinitionLabelString");return s=Oo(r.sliceSerialize(m)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),d}return rn(p)||(l=!0),o++,t.consume(p),p===92?h:u}function h(p){return p===91||p===92||p===93?(t.consume(p),o++,u):u(p)}function d(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),i.includes(s)||i.push(s),St(t,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return e(p)}}function F5e(t,e,n){return t.check(By,e,t.attempt(P5e,e,n))}function z5e(t){t.exit("gfmFootnoteDefinition")}function j5e(t,e,n){const r=this;return St(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function H5e(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,l){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let c=a;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[a][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[a][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[a][1].start)},d=[["enter",u,l],["enter",o[c][1],l],["exit",o[c][1],l],["enter",h,l]],f=l.parser.constructs.insideSpan.null;f&&Ss(d,d.length,0,S5(f,o.slice(c+1,a),l)),Ss(d,d.length,0,[["exit",h,l],["enter",o[a][1],l],["exit",o[a][1],l],["exit",u,l]]),Ss(o,c-1,a-c+3,d),a=c+d.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function s(o,l,a){const c=this.previous,u=this.events;let h=0;return d;function d(p){return c===126&&u[u.length-1][1].type!=="characterEscape"?a(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const m=O0(c);if(p===126)return h>1?a(p):(o.consume(p),h++,f);if(h<2&&!n)return a(p);const y=o.exit("strikethroughSequenceTemporary"),g=O0(p);return y._open=!g||g===2&&!!m,y._close=!m||m===2&&!!g,l(p)}}}class V5e{constructor(){this.map=[]}add(e,n,r){W5e(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function W5e(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function q5e(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function U5e(){return{flow:{null:{name:"table",tokenize:G5e,resolveAll:K5e}}}}function G5e(t,e,n){const r=this;let i=0,s=0,o;return l;function l(N){let $=r.events.length-1;for(;$>-1;){const Z=r.events[$][1].type;if(Z==="lineEnding"||Z==="linePrefix")$--;else break}const F=$>-1?r.events[$][1].type:null,ie=F==="tableHead"||F==="tableRow"?C:a;return ie===C&&r.parser.lazy[r.now().line]?n(N):ie(N)}function a(N){return t.enter("tableHead"),t.enter("tableRow"),c(N)}function c(N){return N===124||(o=!0,s+=1),u(N)}function u(N){return N===null?n(N):Ue(N)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),f):n(N):Mt(N)?St(t,u,"whitespace")(N):(s+=1,o&&(o=!1,i+=1),N===124?(t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h(N)))}function h(N){return N===null||N===124||rn(N)?(t.exit("data"),u(N)):(t.consume(N),N===92?d:h)}function d(N){return N===92||N===124?(t.consume(N),h):h(N)}function f(N){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(N):(t.enter("tableDelimiterRow"),o=!1,Mt(N)?St(t,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):p(N))}function p(N){return N===45||N===58?y(N):N===124?(o=!0,t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),m):_(N)}function m(N){return Mt(N)?St(t,y,"whitespace")(N):y(N)}function y(N){return N===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(N),t.exit("tableDelimiterMarker"),g):N===45?(s+=1,g(N)):N===null||Ue(N)?S(N):_(N)}function g(N){return N===45?(t.enter("tableDelimiterFiller"),v(N)):_(N)}function v(N){return N===45?(t.consume(N),v):N===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(N),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(N))}function w(N){return Mt(N)?St(t,S,"whitespace")(N):S(N)}function S(N){return N===124?p(N):N===null||Ue(N)?!o||i!==s?_(N):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(N)):_(N)}function _(N){return n(N)}function C(N){return t.enter("tableRow"),T(N)}function T(N){return N===124?(t.enter("tableCellDivider"),t.consume(N),t.exit("tableCellDivider"),T):N===null||Ue(N)?(t.exit("tableRow"),e(N)):Mt(N)?St(t,T,"whitespace")(N):(t.enter("data"),I(N))}function I(N){return N===null||N===124||rn(N)?(t.exit("data"),T(N)):(t.consume(N),N===92?L:I)}function L(N){return N===92||N===124?(t.consume(N),I):I(N)}}function K5e(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,a=0,c,u,h;const d=new V5e;for(;++n<t.length;){const f=t[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,a!==0&&(CL(d,e,a,c,u),u=void 0,a=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(n,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(n,0,[["enter",u,e]])),i=p.type==="tableDelimiterRow"?2:u?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=_2(d,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=_2(d,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(l=!0,a=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(a=n,s[1]!==0?(o[0]=o[1],h=_2(d,e,s,i,n,h)):o[1]!==0&&(h=_2(d,e,o,i,n,h)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(a!==0&&CL(d,e,a,c,u),d.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=q5e(e.events,n))}return t}function _2(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},ff(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const a=ff(e.events,n[1]);if(s={type:o,start:Object.assign({},a),end:Object.assign({},a)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=ff(e.events,n[2]),u=ff(e.events,n[3]),h={type:l,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const d=e.events[n[2]],f=e.events[n[3]];if(d[1].end=Object.assign({},f[1].end),d[1].type="chunkText",d[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,m=n[3]-n[2]-1;t.add(p,m,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},ff(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function CL(t,e,n,r,i){const s=[],o=ff(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function ff(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const J5e={name:"tasklistCheck",tokenize:X5e};function Y5e(){return{text:{91:J5e}}}function X5e(t,e,n){const r=this;return i;function i(a){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(a):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),s)}function s(a){return rn(a)?(t.enter("taskListCheckValueUnchecked"),t.consume(a),t.exit("taskListCheckValueUnchecked"),o):a===88||a===120?(t.enter("taskListCheckValueChecked"),t.consume(a),t.exit("taskListCheckValueChecked"),o):n(a)}function o(a){return a===93?(t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(a)}function l(a){return Ue(a)?e(a):Mt(a)?t.check({tokenize:Q5e},e,n)(a):n(a)}}function Q5e(t,e,n){return St(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function Z5e(t){return zW([C5e(),R5e(),H5e(t),U5e(),Y5e()])}const e3e={};function t3e(t){const e=this,n=t||e3e,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Z5e(n)),s.push(x5e()),o.push(b5e(n))}function dt(t,e){return Object.assign(t,{meta:{package:"@milkdown/preset-gfm",...e}}),t}const pM=qy("strike_through");dt(pM,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const sp=Wy("strike_through",t=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:e=>e==="line-through"}],toDOM:e=>["del",t.get(pM.key)(e)],parseMarkdown:{match:e=>e.type==="delete",runner:(e,n,r)=>{e.openMark(r),e.next(n.children),e.closeMark(r)}},toMarkdown:{match:e=>e.type.name==="strike_through",runner:(e,n)=>{e.withMark(n,"delete")}}}));dt(sp.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});dt(sp.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const t3=ut("ToggleStrikeThrough",t=>()=>A5(sp.type(t)));dt(t3,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const RK=ii(t=>Ly(/~([^~]+)~$/,sp.type(t)));dt(RK,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const mM=Qi("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:t=>{const e=t.get(ze);return()=>e.call(t3.key)}}});dt(mM.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});dt(mM.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const tv=Txe({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:t=>t.style.textAlign||"left",setDOMAttr:(t,e)=>{e.style=`text-align: ${t||"left"}`}}}}),Td=nr("table",()=>({...tv.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="table",runner:(t,e,n)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r,isHeader:o===0}));t.openNode(n),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table",runner:(t,e)=>{var n;const r=(n=e.content.firstChild)==null?void 0:n.content;if(!r)return;const i=[];r.forEach(s=>{i.push(s.attrs.alignment)}),t.openNode("table",void 0,{align:i}),t.next(e.content),t.closeNode()}}}));dt(Td.node,{displayName:"NodeSchema<table>",group:"Table"});dt(Td.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const n3=nr("table_header_row",()=>({...tv.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:t=>!!(t.type==="tableRow"&&t.isHeader),runner:(t,e,n)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r[o],isHeader:e.isHeader}));t.openNode(n),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header_row",runner:(t,e)=>{t.openNode("tableRow",void 0,{isHeader:!0}),t.next(e.content),t.closeNode()}}}));dt(n3.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});dt(n3.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const nv=nr("table_row",()=>({...tv.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:t=>t.type==="tableRow",runner:(t,e,n)=>{const r=e.align,i=e.children.map((s,o)=>({...s,align:r[o]}));t.openNode(n),t.next(i),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_row",runner:(t,e)=>{e.content.size!==0&&(t.openNode("tableRow"),t.next(e.content),t.closeNode())}}}));dt(nv.node,{displayName:"NodeSchema<tableRow>",group:"Table"});dt(nv.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const rv=nr("table_cell",()=>({...tv.table_cell,disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="tableCell"&&!t.isHeader,runner:(t,e,n)=>{const r=e.align;t.openNode(n,{alignment:r}).openNode(t.schema.nodes.paragraph).next(e.children).closeNode().closeNode()}},toMarkdown:{match:t=>t.type.name==="table_cell",runner:(t,e)=>{t.openNode("tableCell").next(e.content).closeNode()}}}));dt(rv.node,{displayName:"NodeSchema<tableCell>",group:"Table"});dt(rv.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const r3=nr("table_header",()=>({...tv.table_header,disableDropCursor:!0,parseMarkdown:{match:t=>t.type==="tableCell"&&!!t.isHeader,runner:(t,e,n)=>{const r=e.align;t.openNode(n,{alignment:r}),t.openNode(t.schema.nodes.paragraph),t.next(e.children),t.closeNode(),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="table_header",runner:(t,e)=>{t.openNode("tableCell"),t.next(e.content),t.closeNode()}}}));dt(r3.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});dt(r3.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function gM(t,e=3,n=3){const r=Array(n).fill(0).map(()=>rv.type(t).createAndFill()),i=Array(n).fill(0).map(()=>r3.type(t).createAndFill()),s=Array(e).fill(0).map((o,l)=>l===0?n3.type(t).create(null,i):nv.type(t).create(null,r));return Td.type(t).create(null,s)}function op(t){return mA(e=>e.type.spec.tableRole==="table")(t)}function pf(t,e){const n=op(e.$from);if(!n)return;const r=qt.get(n.node);if(!(t<0||t>=r.width))return r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height}).map(i=>{const s=n.node.nodeAt(i);if(!s)return;const o=i+n.start;return{pos:o,start:o+1,node:s}}).filter(i=>i!=null)}function mf(t,e){const n=op(e.$from);if(!n)return;const r=qt.get(n.node);if(!(t<0||t>=r.height))return r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1}).map(i=>{const s=n.node.nodeAt(i);if(!s)return;const o=i+n.start;return{pos:o,start:o+1,node:s}}).filter(i=>i!=null)}function n3e(t){const e=op(t.$from);if(!e)return;const n=qt.get(e.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(i=>{const s=e.node.nodeAt(i),o=i+e.start;return{pos:o,start:o+1,node:s}})}function r3e(t){const e=n3e(t.selection);if(e&&e[0]){const n=t.doc.resolve(e[0].pos),r=e[e.length-1];if(r){const i=t.doc.resolve(r.pos);return b5(t.setSelection(new sn(i,n)))}}return t}function DK(t,e,{map:n,tableStart:r,table:i},s){const o=Array(s).fill(0).reduce((a,c,u)=>a+i.child(u).nodeSize,r),l=Array(n.width).fill(0).map((a,c)=>{const u=i.nodeAt(n.map[c]);return rv.type(t).createAndFill({alignment:u==null?void 0:u.attrs.alignment})});return e.insert(o,nv.type(t).create(null,l)),e}function LK(t){return(e,n)=>r=>{n=n??r.selection.from;const i=r.doc.resolve(n),s=mA(a=>a.type.name==="table")(i),o=s?{node:s.node,from:s.start}:void 0,l=t==="row";if(o){const a=qt.get(o.node);if(e>=0&&e<(l?a.height:a.width)){const c=a.positionAt(l?e:a.height-1,l?a.width-1:e,o.node),u=r.doc.resolve(o.from+c),h=l?sn.rowSelection:sn.colSelection,d=a.positionAt(l?e:0,l?0:e,o.node),f=r.doc.resolve(o.from+d);return b5(r.setSelection(h(u,f)))}}return r}}const i3e=LK("row"),s3e=LK("col");function _L(t){return t[0].map((e,n)=>t.map(r=>r[n]))}function BK(t,e){const n=[],r=qt.get(t);for(let s=0;s<r.height;s++){const o=t.child(s),l=[];for(let a=0;a<r.width;a++){if(!e[s][a])continue;const c=r.map[s*r.width+a],u=e[s][a],d=t.nodeAt(c).type.createChecked(Object.assign({},u.attrs),u.content,u.marks);l.push(d)}n.push(o.type.createChecked(o.attrs,l,o.marks))}return t.type.createChecked(t.attrs,n,t.marks)}function $K(t){const e=qt.get(t),n=[];for(let r=0;r<e.height;r++){const i=[],s={};for(let o=0;o<e.width;o++){const l=e.map[r*e.width+o],a=t.nodeAt(l),c=e.findCell(l);if(s[l]||c.top!==r){i.push(null);continue}s[l]=!0,i.push(a)}n.push(i)}return n}function FK(t,e,n,r){const i=e[0]>n[0]?-1:1,s=t.splice(e[0],e.length),o=s.length%2===0?1:0;let l;return l=i===-1?n[0]:n[n.length-1]-o,t.splice(l,0,...s),t}function o3e(t,e,n,r){let i=_L($K(t.node));return i=FK(i,e,n),i=_L(i),BK(t.node,i)}function l3e(t,e,n,r){let i=$K(t.node);return i=FK(i,e,n),BK(t.node,i)}function AL(t,e){let n=t,r=t;for(let u=t;u>=0;u--){const h=pf(u,e.selection);h&&h.forEach(d=>{const f=d.node.attrs.colspan+u-1;f>=n&&(n=u),f>r&&(r=f)})}for(let u=t;u<=r;u++){const h=pf(u,e.selection);h&&h.forEach(d=>{const f=d.node.attrs.colspan+u-1;d.node.attrs.colspan>1&&f>r&&(r=f)})}const i=[];for(let u=n;u<=r;u++){const h=pf(u,e.selection);h&&h.length&&i.push(u)}n=i[0],r=i[i.length-1];const s=pf(n,e.selection),o=mf(0,e.selection),l=e.doc.resolve(s[s.length-1].pos);let a;for(let u=r;u>=n;u--){const h=pf(u,e.selection);if(h&&h.length){for(let d=o.length-1;d>=0;d--)if(o[d].pos===h[0].pos){a=h[0];break}if(a)break}}const c=e.doc.resolve(a.pos);return{$anchor:l,$head:c,indexes:i}}function TL(t,e){let n=t,r=t;for(let u=t;u>=0;u--)mf(u,e.selection).forEach(d=>{const f=d.node.attrs.rowspan+u-1;f>=n&&(n=u),f>r&&(r=f)});for(let u=t;u<=r;u++)mf(u,e.selection).forEach(d=>{const f=d.node.attrs.rowspan+u-1;d.node.attrs.rowspan>1&&f>r&&(r=f)});const i=[];for(let u=n;u<=r;u++){const h=mf(u,e.selection);h&&h.length&&i.push(u)}n=i[0],r=i[i.length-1];const s=mf(n,e.selection),o=pf(0,e.selection),l=e.doc.resolve(s[s.length-1].pos);let a;for(let u=r;u>=n;u--){const h=mf(u,e.selection);if(h&&h.length){for(let d=o.length-1;d>=0;d--)if(o[d].pos===h[0].pos){a=h[0];break}if(a)break}}const c=e.doc.resolve(a.pos);return{$anchor:l,$head:c,indexes:i}}function a3e(t){const{tr:e,origin:n,target:r,select:i=!0,pos:s}=t,o=s!=null?e.doc.resolve(s):e.selection.$from,l=op(o);if(!l)return e;const{indexes:a}=AL(n,e),{indexes:c}=AL(r,e);if(a.includes(r))return e;const u=o3e(l,a,c),h=b5(e).replaceWith(l.pos,l.pos+l.node.nodeSize,u);if(!i)return h;const d=qt.get(u),f=l.start,p=r,m=d.positionAt(d.height-1,p,u),y=h.doc.resolve(f+m),g=sn.colSelection,v=d.positionAt(0,p,u),w=h.doc.resolve(f+v);return h.setSelection(g(y,w))}function c3e(t){const{tr:e,origin:n,target:r,select:i=!0,pos:s}=t,o=s!=null?e.doc.resolve(s):e.selection.$from,l=op(o);if(!l)return e;const{indexes:a}=TL(n,e),{indexes:c}=TL(r,e);if(a.includes(r))return e;const u=l3e(l,a,c),h=b5(e).replaceWith(l.pos,l.pos+l.node.nodeSize,u);if(!i)return h;const d=qt.get(u),f=l.start,p=r,m=d.positionAt(p,d.width-1,u),y=h.doc.resolve(f+m),g=sn.rowSelection,v=d.positionAt(p,0,u),w=h.doc.resolve(f+v);return h.setSelection(g(y,w))}const yM=ut("GoToPrevTableCell",()=>()=>vK(-1));dt(yM,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const vM=ut("GoToNextTableCell",()=>()=>vK(1));dt(vM,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const wM=ut("ExitTable",t=>()=>(e,n)=>{if(!oo(e))return!1;const{$head:r}=e.selection,i=xfe(r,Td.type(t));if(!i)return!1;const{to:s}=i,o=e.tr.replaceWith(s,s,Vl.type(t).createAndFill());return o.setSelection(ct.near(o.doc.resolve(s),1)).scrollIntoView(),n==null||n(o),!0});dt(wM,{displayName:"Command<breakTableCommand>",group:"Table"});const zK=ut("InsertTable",t=>({row:e,col:n}={})=>(r,i)=>{const{selection:s,tr:o}=r,{from:l}=s,a=gM(t,e,n),c=o.replaceSelectionWith(a),u=ct.findFrom(c.doc.resolve(l),1,!0);return u&&c.setSelection(u),i==null||i(c),!0});dt(zK,{displayName:"Command<insertTableCommand>",group:"Table"});const xM=ut("MoveRow",()=>({from:t,to:e,pos:n}={})=>(r,i)=>{const{tr:s}=r;return!!(i==null?void 0:i(c3e({tr:s,origin:t??0,target:e??0,pos:n,select:!0})))});dt(xM,{displayName:"Command<moveRowCommand>",group:"Table"});const bM=ut("MoveCol",()=>({from:t,to:e,pos:n}={})=>(r,i)=>{const{tr:s}=r;return!!(i==null?void 0:i(a3e({tr:s,origin:t??0,target:e??0,pos:n,select:!0})))});dt(bM,{displayName:"Command<moveColCommand>",group:"Table"});const Eh=ut("SelectRow",()=>(t={index:0})=>(e,n)=>{const{tr:r}=e;return!!(n==null?void 0:n(i3e(t.index,t.pos)(r)))});dt(Eh,{displayName:"Command<selectRowCommand>",group:"Table"});const Oh=ut("SelectCol",()=>(t={index:0})=>(e,n)=>{const{tr:r}=e;return!!(n==null?void 0:n(s3e(t.index,t.pos)(r)))});dt(Oh,{displayName:"Command<selectColCommand>",group:"Table"});const jK=ut("SelectTable",()=>()=>(t,e)=>{const{tr:n}=t;return!!(e==null?void 0:e(r3e(n)))});dt(jK,{displayName:"Command<selectTableCommand>",group:"Table"});const kM=ut("DeleteSelectedCells",()=>()=>(t,e)=>{const{selection:n}=t;if(!(n instanceof sn))return!1;const r=n.isRowSelection(),i=n.isColSelection();return r&&i?Jxe(t,e):i?Vxe(t,e):qxe(t,e)});dt(kM,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const SM=ut("AddColBefore",()=>()=>zxe);dt(SM,{displayName:"Command<addColBeforeCommand>",group:"Table"});const CM=ut("AddColAfter",()=>()=>jxe);dt(CM,{displayName:"Command<addColAfterCommand>",group:"Table"});const _M=ut("AddRowBefore",t=>()=>(e,n)=>{if(!oo(e))return!1;if(n){const r=$u(e);n(DK(t,e.tr,r,r.top))}return!0});dt(_M,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const AM=ut("AddRowAfter",t=>()=>(e,n)=>{if(!oo(e))return!1;if(n){const r=$u(e);n(DK(t,e.tr,r,r.bottom))}return!0});dt(AM,{displayName:"Command<addRowAfterCommand>",group:"Table"});const TM=ut("SetAlign",()=>(t="left")=>Uxe("alignment",t));dt(TM,{displayName:"Command<setAlignCommand>",group:"Table"});const HK=ii(t=>new Ji(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(e,n,r,i)=>{var s,o;const l=e.doc.resolve(r);if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),Td.type(t)))return null;const a=Math.max(Number(((s=n.groups)==null?void 0:s.row)??0),2),c=gM(t,a,Number((o=n.groups)==null?void 0:o.col)),u=e.tr.replaceRangeWith(r,i,c);return u.setSelection(qe.create(u.doc,r+3)).scrollIntoView()}));dt(HK,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const MM=Qi("tableKeymap",{NextCell:{shortcuts:["Mod-]","Tab"],command:t=>{const e=t.get(ze);return()=>e.call(vM.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:t=>{const e=t.get(ze);return()=>e.call(yM.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:t=>{const e=t.get(ze);return()=>e.call(wM.key)}}});dt(MM.ctx,{displayName:"KeymapCtx<table>",group:"Table"});dt(MM.shortcuts,{displayName:"Keymap<table>",group:"Table"});const W6="footnote_definition",ML="footnoteDefinition",EM=nr("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${W6}"]`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw Vo(t);return{label:t.dataset.label}},contentElement:"dd"}],toDOM:t=>{const e=t.attrs.label;return["dl",{"data-label":e,"data-type":W6},["dt",e],["dd",0]]},parseMarkdown:{match:({type:t})=>t===ML,runner:(t,e,n)=>{t.openNode(n,{label:e.label}).next(e.children).closeNode()}},toMarkdown:{match:t=>t.type.name===W6,runner:(t,e)=>{t.openNode(ML,void 0,{label:e.attrs.label,identifier:e.attrs.label}).next(e.content).closeNode()}}}));dt(EM.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});dt(EM.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const q6="footnote_reference",OM=nr("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${q6}"]`,getAttrs:t=>{if(!(t instanceof HTMLElement))throw Vo(t);return{label:t.dataset.label}}}],toDOM:t=>{const e=t.attrs.label;return["sup",{"data-label":e,"data-type":q6},e]},parseMarkdown:{match:({type:t})=>t==="footnoteReference",runner:(t,e,n)=>{t.addNode(n,{label:e.label})}},toMarkdown:{match:t=>t.type.name===q6,runner:(t,e)=>{t.addNode("footnoteReference",void 0,void 0,{label:e.attrs.label,identifier:e.attrs.label})}}}));dt(OM.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});dt(OM.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const VK=to.extendSchema(t=>e=>{const n=t(e);return{...n,attrs:{...n.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw Vo(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...(n==null?void 0:n.parseDOM)||[]],toDOM:r=>n.toDOM&&r.attrs.checked==null?n.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,i,s)=>{if(i.checked==null){n.parseMarkdown.runner(r,i,s);return}const o=i.label!=null?`${i.label}.`:"",l=i.checked!=null?!!i.checked:null,a=i.label!=null?"ordered":"bullet",c=i.spread!=null?`${i.spread}`:"true";r.openNode(s,{label:o,listType:a,spread:c,checked:l}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,i)=>{if(i.attrs.checked==null){n.toMarkdown.runner(r,i);return}const s=i.attrs.label,o=i.attrs.listType,l=i.attrs.spread==="true",a=i.attrs.checked;r.openNode("listItem",void 0,{label:s,listType:o,spread:l,checked:a}),r.next(i.content),r.closeNode()}}}});dt(VK,{displayName:"NodeSchema<listItem>",group:"ListItem"});const WK=ii(()=>new Ji(/^\[(?<checked>\s|x)\]\s$/,(t,e,n,r)=>{var i;const s=t.doc.resolve(n);let o=0,l=s.node(o);for(;l&&l.type.name!=="list_item";)o--,l=s.node(o);if(!l||l.attrs.checked!=null)return null;const a=((i=e.groups)==null?void 0:i.checked)==="x",c=s.before(o),u=t.tr;return u.deleteRange(n,r).setNodeMarkup(c,void 0,{...l.attrs,checked:a}),u}));dt(WK,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const u3e=[mM,MM].flat(),h3e=[HK,WK],d3e=[RK],qK=dr(()=>Cbe);dt(qK,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const f3e=dr(()=>sbe({}));dt(f3e,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const UK=dr(()=>mbe({allowTableNodeSelection:!0}));dt(UK,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const NM=Hl("remarkGFM",()=>t3e);dt(NM.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});dt(NM.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const p3e=new $n("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function m3e(t,e){let n=0;return e.forEach((r,i,s)=>{r===t&&(n=s)}),n}const GK=dr(()=>new An({key:p3e,appendTransaction:(t,e,n)=>{let r;const i=(s,o)=>{if(r||(r=n.tr),s.type.name!=="table_cell")return;const l=n.doc.resolve(o),a=l.node(l.depth),u=l.node(l.depth-1).firstChild;if(!u)return;const h=m3e(s,a),d=u.maybeChild(h);if(!d)return;const f=d.attrs.alignment,p=s.attrs.alignment;f!==p&&r.setNodeMarkup(o,void 0,{...s.attrs,alignment:f})};return e.doc!==n.doc&&n.doc.descendants(i),r}}));dt(GK,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const g3e=[GK,qK,NM,UK].flat(),y3e=[VK,Td,n3,nv,r3,rv,EM,OM,pM,sp].flat(),v3e=[vM,yM,wM,zK,xM,bM,Eh,Oh,jK,kM,_M,AM,SM,CM,TM,t3],w3e=[y3e,h3e,d3e,u3e,v3e,g3e].flat(),x3e=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=PM(t.state,n.from);return r.line?b3e(t):r.block?S3e(t):!1};function IM(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const b3e=IM(A3e,0),k3e=IM(KK,0),S3e=IM((t,e)=>KK(t,e,_3e(e)),0);function PM(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const em=50;function C3e(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-em,r),o=t.sliceDoc(i,i+em),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,c=s.length-l;if(s.slice(c-e.length,c)==e&&o.slice(a,a+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let u,h;i-r<=2*em?u=h=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+em),h=t.sliceDoc(i-em,i));let d=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(h)[0].length,p=h.length-f-n.length;return u.slice(d,d+e.length)==e&&h.slice(p,p+n.length)==n?{open:{pos:r+d+e.length,margin:/\s/.test(u.charAt(d+e.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function _3e(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function KK(t,e,n=e.selection.ranges){let r=n.map(s=>PM(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>C3e(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,l;o<i.length;o++)if(l=i[o]){let a=r[o],{open:c,close:u}=l;s.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:s}}return null}function A3e(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let l=r.length,a=1e9,c=PM(e,s).line;if(c){for(let u=s;u<=o;){let h=e.doc.lineAt(u);if(h.from>i&&(s==o||o>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,f=d==h.length,p=h.text.slice(d,d+c.length)==c?d:-1;d<h.text.length&&d<a&&(a=d),r.push({line:h,comment:p,token:c,indent:d,empty:f,single:!1})}u=h.to+1}if(a<1e9)for(let u=l;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=a);r.length==l+1&&(r[l].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:l.from+c,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of r)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const V9=Ya.define(),T3e=Ya.define(),M3e=Re.define(),JK=Re.define({combine(t){return jl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),YK=Cr.define({create(){return a1.empty},update(t,e){let n=e.state.facet(JK),r=e.annotation(V9);if(r){let a=Vi.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return a?u=mb(u,u.length,n.minDepth,a):u=ZK(u,e.startState.selection),new a1(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(T3e);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(wi.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Vi.fromTransaction(e),o=e.annotation(wi.time),l=e.annotation(wi.userEvent);return s?t=t.addChanges(s,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new a1(t.done.map(Vi.fromJSON),t.undone.map(Vi.fromJSON))}});function E3e(t={}){return[YK,JK.of(t),$e.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?XK:e.inputType=="historyRedo"?W9:null;return r?(e.preventDefault(),r(n)):!1}})]}function i3(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(YK,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const XK=i3(0,!1),W9=i3(1,!1),O3e=i3(0,!0),N3e=i3(1,!0);class Vi{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Vi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Vi(e.changes&&cr.fromJSON(e.changes),[],e.mapped&&Nl.fromJSON(e.mapped),e.startSelection&&oe.fromJSON(e.startSelection),e.selectionsAfter.map(oe.fromJSON))}static fromTransaction(e,n){let r=Ws;for(let i of e.startState.facet(M3e)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Vi(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Ws)}static selection(e){return new Vi(void 0,Ws,void 0,void 0,e)}}function mb(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function I3e(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,l)=>{for(let a=0;a<n.length;){let c=n[a++],u=n[a++];l>=c&&o<=u&&(r=!0)}}),r}function P3e(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function QK(t,e){return t.length?e.length?t.concat(e):t:e}const Ws=[],R3e=200;function ZK(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-R3e));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),mb(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Vi.selection([e])]}function D3e(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function U6(t,e){if(!t.length)return t;let n=t.length,r=Ws;for(;n;){let i=L3e(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Vi.selection(r)]:Ws}function L3e(t,e,n){let r=QK(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Ws,n);if(!t.changes)return Vi.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Vi(i,ft.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const B3e=/^(input\.type|delete)($|\.)/;let a1=class Jm{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Jm(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||B3e.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,I3e(l.changes,e.changes))||r=="input.type.compose")?o=mb(o,o.length-1,i.minDepth,new Vi(e.changes.compose(l.changes),QK(ft.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ws)):o=mb(o,o.length,i.minDepth,e),new Jm(o,Ws,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ws;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&P3e(s[s.length-1],e)?this:new Jm(ZK(this.done,e),this.undone,n,r)}addMapping(e){return new Jm(U6(this.done,e),U6(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:V9.of({side:e,rest:D3e(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=i.length==1?Ws:i.slice(0,i.length-1);return s.mapped&&(l=U6(l,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:V9.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};a1.empty=new a1(Ws,Ws);const $3e=[{key:"Mod-z",run:XK,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:W9,preventDefault:!0},{linux:"Ctrl-Shift-z",run:W9,preventDefault:!0},{key:"Mod-u",run:O3e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:N3e,preventDefault:!0}];function lp(t,e){return oe.create(t.ranges.map(e),t.mainIndex)}function ql(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Go({state:t,dispatch:e},n){let r=lp(t.selection,n);return r.eq(t.selection,!0)?!1:(e(ql(t,r)),!0)}function s3(t,e){return oe.cursor(e?t.to:t.from)}function eJ(t,e){return Go(t,n=>n.empty?t.moveByChar(n,e):s3(n,e))}function oi(t){return t.textDirectionAt(t.state.selection.main.head)==xn.LTR}const tJ=t=>eJ(t,!oi(t)),nJ=t=>eJ(t,oi(t));function rJ(t,e){return Go(t,n=>n.empty?t.moveByGroup(n,e):s3(n,e))}const F3e=t=>rJ(t,!oi(t)),z3e=t=>rJ(t,oi(t));function j3e(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function o3(t,e,n){let r=zr(t).resolveInner(e.head),i=n?Ct.closedBy:Ct.openedBy;for(let a=e.head;;){let c=n?r.childAfter(a):r.childBefore(a);if(!c)break;j3e(t,c,i)?r=c:a=n?c.to:c.from}let s=r.type.prop(i),o,l;return s&&(o=n?Sl(t,r.from,1):Sl(t,r.to,-1))&&o.matched?l=n?o.end.to:o.end.from:l=n?r.to:r.from,oe.cursor(l,n?-1:1)}const H3e=t=>Go(t,e=>o3(t.state,e,!oi(t))),V3e=t=>Go(t,e=>o3(t.state,e,oi(t)));function iJ(t,e){return Go(t,n=>{if(!n.empty)return s3(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const sJ=t=>iJ(t,!1),oJ=t=>iJ(t,!0);function lJ(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet($e.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function aJ(t,e){let n=lJ(t),{state:r}=t,i=lp(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):s3(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,c=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<c&&(s=$e.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(ql(r,i),{effects:s}),!0}const EL=t=>aJ(t,!1),q9=t=>aJ(t,!0);function Fu(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=oe.cursor(r.from+s))}return i}const W3e=t=>Go(t,e=>Fu(t,e,!0)),q3e=t=>Go(t,e=>Fu(t,e,!1)),U3e=t=>Go(t,e=>Fu(t,e,!oi(t))),G3e=t=>Go(t,e=>Fu(t,e,oi(t))),K3e=t=>Go(t,e=>oe.cursor(t.lineBlockAt(e.head).from,1)),J3e=t=>Go(t,e=>oe.cursor(t.lineBlockAt(e.head).to,-1));function Y3e(t,e,n){let r=!1,i=lp(t.selection,s=>{let o=Sl(t,s.head,-1)||Sl(t,s.head,1)||s.head>0&&Sl(t,s.head-1,1)||s.head<t.doc.length&&Sl(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return oe.cursor(l)});return r?(e(ql(t,i)),!0):!1}const X3e=({state:t,dispatch:e})=>Y3e(t,e);function lo(t,e){let n=lp(t.state.selection,r=>{let i=e(r);return oe.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(ql(t.state,n)),!0)}function cJ(t,e){return lo(t,n=>t.moveByChar(n,e))}const uJ=t=>cJ(t,!oi(t)),hJ=t=>cJ(t,oi(t));function dJ(t,e){return lo(t,n=>t.moveByGroup(n,e))}const Q3e=t=>dJ(t,!oi(t)),Z3e=t=>dJ(t,oi(t)),eke=t=>lo(t,e=>o3(t.state,e,!oi(t))),tke=t=>lo(t,e=>o3(t.state,e,oi(t)));function fJ(t,e){return lo(t,n=>t.moveVertically(n,e))}const pJ=t=>fJ(t,!1),mJ=t=>fJ(t,!0);function gJ(t,e){return lo(t,n=>t.moveVertically(n,e,lJ(t).height))}const OL=t=>gJ(t,!1),NL=t=>gJ(t,!0),nke=t=>lo(t,e=>Fu(t,e,!0)),rke=t=>lo(t,e=>Fu(t,e,!1)),ike=t=>lo(t,e=>Fu(t,e,!oi(t))),ske=t=>lo(t,e=>Fu(t,e,oi(t))),oke=t=>lo(t,e=>oe.cursor(t.lineBlockAt(e.head).from)),lke=t=>lo(t,e=>oe.cursor(t.lineBlockAt(e.head).to)),IL=({state:t,dispatch:e})=>(e(ql(t,{anchor:0})),!0),PL=({state:t,dispatch:e})=>(e(ql(t,{anchor:t.doc.length})),!0),RL=({state:t,dispatch:e})=>(e(ql(t,{anchor:t.selection.main.anchor,head:0})),!0),DL=({state:t,dispatch:e})=>(e(ql(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),ake=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),cke=({state:t,dispatch:e})=>{let n=l3(t).map(({from:r,to:i})=>oe.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:oe.create(n),userEvent:"select"})),!0},uke=({state:t,dispatch:e})=>{let n=lp(t.selection,r=>{let i=zr(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&o.next)return oe.range(l.to,l.from)}return r});return n.eq(t.selection)?!1:(e(ql(t,n)),!0)},hke=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=oe.create([n.main]):n.main.empty||(r=oe.create([oe.cursor(n.main.head)])),r?(e(ql(t,r)),!0):!1};function iv(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(n="delete.backward",a=A2(t,a,!1)):a>o&&(n="delete.forward",a=A2(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=A2(t,o,!1),l=A2(t,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:oe.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?$e.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function A2(t,e,n){if(t instanceof $e)for(let r of t.state.facet($e.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const yJ=(t,e,n)=>iv(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),l,a;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,i-o.from))){if(l[l.length-1]=="	")return i-1;let c=X0(l,s.tabSize),u=c%rd(s)||rd(s);for(let h=0;h<u&&l[l.length-1-h]==" ";h++)i--;a=i}else a=Br(o.text,i-o.from,e,e)+o.from,a==i&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,i-o.from))&&(a=Br(o.text,a-o.from,!1,!1)+o.from);return a}),U9=t=>yJ(t,!1,!0),vJ=t=>yJ(t,!0,!1),wJ=(t,e)=>iv(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let l=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Br(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,a)-s.from,Math.max(r,a)-s.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||r!=n.head)&&(l=u),r=a}return r}),xJ=t=>wJ(t,!1),dke=t=>wJ(t,!0),fke=t=>iv(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),pke=t=>iv(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),mke=t=>iv(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),gke=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:$t.of(["",""])},range:oe.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},yke=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Br(s.text,i-s.from,!1)+s.from,l=i==s.to?i+1:Br(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:t.doc.slice(i,l).append(t.doc.slice(o,i))},range:oe.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function l3(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function bJ(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of l3(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),l=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let a of s.ranges)i.push(oe.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let a of s.ranges)i.push(oe.range(a.anchor-l,a.head-l))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:oe.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const vke=({state:t,dispatch:e})=>bJ(t,e,!1),wke=({state:t,dispatch:e})=>bJ(t,e,!0);function kJ(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of l3(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const xke=({state:t,dispatch:e})=>kJ(t,e,!1),bke=({state:t,dispatch:e})=>kJ(t,e,!0),kke=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(l3(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=lp(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),l=t.coordsAtPos(i.head,i.assoc||1);l&&(s=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ske(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=zr(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Ct.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const LL=SJ(!1),Cke=SJ(!0);function SJ(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,l=e.doc.lineAt(s),a=!t&&s==o&&Ske(e,s);t&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new d5(e,{simulateBreak:s,simulateDoubleBreak:!!a}),u=nA(c,s);for(u==null&&(u=X0(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let h=["",U1(e,u)];return a&&h.push(U1(e,c.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:$t.of(h)},range:oe.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function RM(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let l=t.doc.lineAt(o);l.number>n&&(r.empty||r.to>l.from)&&(e(l,i,r),n=l.number),o=l.to+1}let s=t.changes(i);return{changes:i,range:oe.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const _ke=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new d5(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=RM(t,(s,o,l)=>{let a=nA(r,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let c=/^\s*/.exec(s.text)[0],u=U1(t,a);(c!=u||l.from<s.from+c.length)&&(n[s.from]=a,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},CJ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(RM(t,(n,r)=>{r.push({from:n.from,insert:t.facet(h5)})}),{userEvent:"input.indent"})),!0),_J=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(RM(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=X0(i,t.tabSize),o=0,l=U1(t,Math.max(0,s-rd(t)));for(;o<i.length&&o<l.length&&i.charCodeAt(o)==l.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),Ake=t=>(t.setTabFocusMode(),!0),Tke=[{key:"Ctrl-b",run:tJ,shift:uJ,preventDefault:!0},{key:"Ctrl-f",run:nJ,shift:hJ},{key:"Ctrl-p",run:sJ,shift:pJ},{key:"Ctrl-n",run:oJ,shift:mJ},{key:"Ctrl-a",run:K3e,shift:oke},{key:"Ctrl-e",run:J3e,shift:lke},{key:"Ctrl-d",run:vJ},{key:"Ctrl-h",run:U9},{key:"Ctrl-k",run:fke},{key:"Ctrl-Alt-h",run:xJ},{key:"Ctrl-o",run:gke},{key:"Ctrl-t",run:yke},{key:"Ctrl-v",run:q9}],Mke=[{key:"ArrowLeft",run:tJ,shift:uJ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:F3e,shift:Q3e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:U3e,shift:ike,preventDefault:!0},{key:"ArrowRight",run:nJ,shift:hJ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:z3e,shift:Z3e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:G3e,shift:ske,preventDefault:!0},{key:"ArrowUp",run:sJ,shift:pJ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:IL,shift:RL},{mac:"Ctrl-ArrowUp",run:EL,shift:OL},{key:"ArrowDown",run:oJ,shift:mJ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:PL,shift:DL},{mac:"Ctrl-ArrowDown",run:q9,shift:NL},{key:"PageUp",run:EL,shift:OL},{key:"PageDown",run:q9,shift:NL},{key:"Home",run:q3e,shift:rke,preventDefault:!0},{key:"Mod-Home",run:IL,shift:RL},{key:"End",run:W3e,shift:nke,preventDefault:!0},{key:"Mod-End",run:PL,shift:DL},{key:"Enter",run:LL,shift:LL},{key:"Mod-a",run:ake},{key:"Backspace",run:U9,shift:U9},{key:"Delete",run:vJ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:xJ},{key:"Mod-Delete",mac:"Alt-Delete",run:dke},{mac:"Mod-Backspace",run:pke},{mac:"Mod-Delete",run:mke}].concat(Tke.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),AJ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:H3e,shift:eke},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:V3e,shift:tke},{key:"Alt-ArrowUp",run:vke},{key:"Shift-Alt-ArrowUp",run:xke},{key:"Alt-ArrowDown",run:wke},{key:"Shift-Alt-ArrowDown",run:bke},{key:"Escape",run:hke},{key:"Mod-Enter",run:Cke},{key:"Alt-l",mac:"Ctrl-l",run:cke},{key:"Mod-i",run:uke,preventDefault:!0},{key:"Mod-[",run:_J},{key:"Mod-]",run:CJ},{key:"Mod-Alt-\\",run:_ke},{key:"Shift-Mod-k",run:kke},{key:"Shift-Mod-\\",run:X3e},{key:"Mod-/",run:x3e},{key:"Alt-A",run:k3e},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Ake}].concat(Mke),Eke={key:"Tab",run:CJ,shift:_J};var gb=200,br=function(){};br.prototype.append=function(e){return e.length?(e=br.from(e),!this.length&&e||e.length<gb&&this.leafAppend(e)||this.length<gb&&e.leafPrepend(this)||this.appendInner(e)):this};br.prototype.prepend=function(e){return e.length?br.from(e).append(this):this};br.prototype.appendInner=function(e){return new Oke(this,e)};br.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?br.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};br.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};br.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};br.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};br.from=function(e){return e instanceof br?e:e&&e.length?new TJ(e):br.empty};var TJ=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=gb)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=gb)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(br);br.empty=new TJ([]);var Oke=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(br);const Nke=500;class _o{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new fl(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new fl(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return l=i?h.selection.map(i.slice(s)):h.selection,a=new _o(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new fl(e.mapping.maps[u],h,n),f;(f=a&&a.merge(d))&&(d=f,u?s.pop():l=l.slice(0,l.length-1)),s.push(d),n&&(o++,n=void 0),i||(a=d)}let c=o-r.depth;return c>Pke&&(l=Ike(l,c),o-=c),new _o(l.append(s),o)}remapping(e,n){let r=new Y1;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new _o(this.items.append(e.map(n=>new fl(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(d=>{d.selection&&l--},i);let a=n;this.items.forEach(d=>{let f=s.getMirror(--a);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),y=d.selection&&d.selection.map(s.slice(a+1,f));y&&l++,r.push(new fl(p,m,y))}else r.push(new fl(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new fl(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new _o(u,l);return h.emptyItemCount()>Nke&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new fl(c.invert(),a,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new _o(br.from(i.reverse()),s)}}_o.empty=new _o(br.empty,0);function Ike(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class fl{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new fl(n.getMap().invert(),n,this.selection)}}}class Pc{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Pke=20;function Rke(t,e,n,r){let i=n.getMeta(qh),s;if(i)return i.historyState;n.getMeta(Bke)&&(t=new Pc(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(qh))return o.getMeta(qh).redo?new Pc(t.done.addTransform(n,void 0,r,b4(e)),t.undone,BL(n.mapping.maps),t.prevTime,t.prevComposition):new Pc(t.done,t.undone.addTransform(n,void 0,r,b4(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Dke(n,t.prevRanges)),c=o?G6(t.prevRanges,n.mapping):BL(n.mapping.maps);return new Pc(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,b4(e)),_o.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Pc(t.done.rebased(n,s),t.undone.rebased(n,s),G6(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Pc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),G6(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Dke(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function BL(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function G6(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function Lke(t,e,n){let r=b4(e),i=qh.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new Pc(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(qh,{redo:n,historyState:a})}let K6=!1,$L=null;function b4(t){let e=t.plugins;if($L!=e){K6=!1,$L=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){K6=!0;break}}return K6}const qh=new $n("history"),Bke=new $n("closeHistory");function $ke(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new An({key:qh,state:{init(){return new Pc(_o.empty,_o.empty,null,0,-1)},apply(e,n,r){return Rke(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?a3:r=="historyRedo"?B0:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function MJ(t,e){return(n,r)=>{let i=qh.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=Lke(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const a3=MJ(!1,!0),B0=MJ(!0,!0);var Fke=Object.defineProperty,FL=Object.getOwnPropertySymbols,zke=Object.prototype.hasOwnProperty,jke=Object.prototype.propertyIsEnumerable,zL=(t,e,n)=>e in t?Fke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hke=(t,e)=>{for(var n in e||(e={}))zke.call(e,n)&&zL(t,n,e[n]);if(FL)for(var n of FL(e))jke.call(e,n)&&zL(t,n,e[n]);return t};function EJ(t,e){return Object.assign(t,{meta:Hke({package:"@milkdown/components"},e)}),t}const Vke={extensions:[],languages:[],expandIcon:"",searchIcon:"",clearSearchIcon:"",searchPlaceholder:"Search language",noResultText:"No result",renderLanguage:t=>t,renderPreview:()=>null,previewToggleButton:t=>t?"Edit":"Hide",previewLabel:"Preview"},sv=Jt(Vke,"codeBlockConfigCtx");EJ(sv,{displayName:"Config<code-block>",group:"CodeBlock"});class Wke{constructor(e){this.languages=e,this.map={},e.forEach(n=>{n.alias.forEach(r=>{this.map[r]=n})})}getAll(){return this.languages.map(e=>({name:e.name,alias:e.alias}))}load(e){const r=this.map[e.toLowerCase()];return r?r.support?Promise.resolve(r.support):r.load():Promise.resolve(void 0)}}function c1({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}c1.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const qke=si({props:{language:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},config:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0}},setup({language:t,config:e,setLanguage:n,getAllLanguages:r,getReadOnly:i}){const s=je(),o=je(!1),l=je(),a=je(),c=je("");o0([o,s,a],()=>{c.value="";const m=s.value,y=a.value;!m||!y||Ho(m,y,{placement:"bottom-start"}).then(({x:g,y:v})=>{Object.assign(y.style,{left:`${g}px`,top:`${v}px`})}).catch(console.error)});const u=m=>{if(m.preventDefault(),m.stopPropagation(),i())return;const y=!o.value;o.value=y,y&&setTimeout(()=>{var g;return(g=l.value)==null?void 0:g.focus()},0)},h=m=>{const y=m.target;c.value=y.value},d=m=>{m.key==="Escape"&&(c.value="")},f=pd(()=>{var m;if(!o.value)return[];const y=(m=r())!=null?m:[],g=y.find(w=>w.name.toLowerCase()===t.value.toLowerCase()),v=y.filter(w=>{const S=c.value.toLowerCase();return(w.name.toLowerCase().includes(S)||w.alias.some(_=>_.toLowerCase().includes(S)))&&w!==g});return v.length===0?[]:g?[g,...v]:v}),p=m=>{const y=m.target;if(s.value&&s.value.contains(y))return;const g=a.value,v=s.value;!v||!g||v.dataset.expanded==="true"&&(g.contains(y)||(o.value=!1))};return Jy(()=>{window.addEventListener("click",p)}),Yy(()=>{window.removeEventListener("click",p)}),()=>Q(Yr,null,Q("button",{type:"button",ref:s,class:"language-button",onClick:u,"data-expanded":String(o.value)},t.value||"Text",Q("div",{class:"expand-icon"},Q(c1,{icon:e.expandIcon}))),Q("div",{ref:a,class:"language-picker"},o.value?Q("div",{class:"list-wrapper"},Q("div",{class:"search-box"},Q("div",{class:"search-icon"},Q(c1,{icon:e.searchIcon})),Q("input",{ref:l,class:"search-input",placeholder:e.searchPlaceholder,value:c.value,onInput:h,onKeydown:d}),Q("div",{class:jr("clear-icon",c.value.length===0&&"hidden"),onMousedown:m=>{m.preventDefault(),c.value=""}},Q(c1,{icon:e.clearSearchIcon}))),Q("ul",{class:"language-list",role:"listbox",onKeydown:m=>{if(m.key==="Enter"){const y=document.activeElement;y instanceof HTMLElement&&y.dataset.language&&n(y.dataset.language)}}},f.value.length?f.value.map(m=>Q("li",{role:"listitem",tabindex:"0",class:"language-list-item","aria-selected":m.name.toLowerCase()===t.value.toLowerCase(),"data-language":m.name,onClick:()=>{n(m.name),o.value=!1}},e.renderLanguage(m.name,m.name.toLowerCase()===t.value.toLowerCase()))):Q("li",{class:"language-list-item no-result"},e.noResultText))):null))}}),Uke=si({props:{text:{type:Object,required:!0},language:{type:Object,required:!0},config:{type:Object,required:!0},previewOnlyMode:{type:Object,required:!0},preview:{type:Object,required:!0}},setup(t){const{previewOnlyMode:e,config:n,preview:r}=t,i=je();return ip(()=>{const s=i.value;if(!s)return;for(;s.firstChild;)s.removeChild(s.firstChild);const o=r.value;(typeof o=="string"||o instanceof Element)&&(s.innerHTML=Uo.sanitize(o))}),()=>r.value?Q("div",{class:"preview-panel"},!e.value&&Q(Yr,null,Q("div",{class:"preview-divider"}),Q("div",{class:jr("preview-label",e&&"hidden")},n.previewLabel)),Q("div",{ref:i,class:"preview"})):null}}),Gke=si({props:{text:{type:Object,required:!0},selected:{type:Object,required:!0},getReadOnly:{type:Function,required:!0},codemirror:{type:Object,required:!0},language:{type:Object,required:!0},getAllLanguages:{type:Function,required:!0},setLanguage:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const e=je(!1),n=je();Jy(()=>{for(var i;(i=n.value)!=null&&i.firstChild;)n.value.removeChild(n.value.firstChild);n.value&&n.value.appendChild(t.codemirror.dom)});const r=pd(()=>{const i=t.text.value,s=t.language.value;return t.config.renderPreview(s,i)});return()=>Q(Yr,null,Q("div",{class:"tools"},Q(qke,{language:t.language,config:t.config,setLanguage:t.setLanguage,getAllLanguages:t.getAllLanguages,getReadOnly:t.getReadOnly}),r.value?Q("button",{class:"preview-toggle-button",onClick:()=>e.value=!e.value},Q(c1,{icon:t.config.previewToggleButton(e.value)})):null),Q("div",{ref:n,class:jr("codemirror-host",r.value&&e.value&&"hidden")}),Q(Uke,{text:t.text,language:t.language,config:t.config,previewOnlyMode:e,preview:r}))}});class Kke{constructor(e,n,r,i,s){this.node=e,this.view=n,this.getPos=r,this.loader=i,this.config=s,this.selected=je(!1),this.language=je(""),this.text=je(""),this.updating=!1,this.languageName="",this.forwardUpdate=o=>{var l;if(this.updating||!this.cm.hasFocus)return;let a=((l=this.getPos())!=null?l:0)+1;const{main:c}=o.state.selection,u=a+c.from,h=a+c.to,d=this.view.state.selection;if(o.docChanged||d.from!==u||d.to!==h){const f=this.view.state.tr;o.changes.iterChanges((p,m,y,g,v)=>{v.length?f.replaceWith(a+p,a+m,this.view.state.schema.text(v.toString())):f.delete(a+p,a+m),a+=g-y-(m-p)}),f.setSelection(qe.create(f.doc,u,h)),this.view.dispatch(f)}},this.createApp=()=>qo(Gke,{text:this.text,selected:this.selected,codemirror:this.cm,language:this.language,getAllLanguages:this.getAllLanguages,getReadOnly:()=>!this.view.editable,setLanguage:this.setLanguage,config:this.config}),this.codeMirrorKeymap=()=>{const o=this.view;return[{key:"ArrowUp",run:()=>this.maybeEscape("line",-1)},{key:"ArrowLeft",run:()=>this.maybeEscape("char",-1)},{key:"ArrowDown",run:()=>this.maybeEscape("line",1)},{key:"ArrowRight",run:()=>this.maybeEscape("char",1)},{key:"Mod-Enter",run:()=>Cq(o.state,o.dispatch)?(o.focus(),!0):!1},{key:"Mod-z",run:()=>a3(o.state,o.dispatch)},{key:"Shift-Mod-z",run:()=>B0(o.state,o.dispatch)},{key:"Mod-y",run:()=>B0(o.state,o.dispatch)},{key:"Backspace",run:()=>{var l;const a=this.cm.state.selection.ranges;if(a.length>1)return!1;const c=a[0];if(c&&(!c.empty||c.anchor>0)||this.cm.state.doc.lines>=2)return!1;const u=this.view.state,h=(l=this.getPos())!=null?l:0,d=u.tr.replaceWith(h,h+this.node.nodeSize,u.schema.nodes.paragraph.createChecked({},this.node.content));return d.setSelection(qe.near(d.doc.resolve(h))),this.view.dispatch(d),this.view.focus(),!0}}]},this.maybeEscape=(o,l)=>{var a;const{state:c}=this.cm;let u=c.selection.main;if(!u.empty||(o==="line"&&(u=c.doc.lineAt(u.head)),l<0?u.from>0:u.to<c.doc.length))return!1;const h=((a=this.getPos())!=null?a:0)+(l<0?0:this.node.nodeSize),d=qe.near(this.view.state.doc.resolve(h),l),f=this.view.state.tr.setSelection(d).scrollIntoView();return this.view.dispatch(f),this.view.focus(),!0},this.setLanguage=o=>{var l;this.view.dispatch(this.view.state.tr.setNodeAttribute((l=this.getPos())!=null?l:0,"language",o))},this.getAllLanguages=()=>this.loader.getAll(),this.languageConf=new C0,this.readOnlyConf=new C0,this.cm=new $e({doc:this.node.textContent,root:this.view.root,extensions:[this.readOnlyConf.of(_n.readOnly.of(!this.view.editable)),Q0.of(this.codeMirrorKeymap()),this.languageConf.of([]),_n.changeFilter.of(()=>this.view.editable),...s.extensions,$e.updateListener.of(this.forwardUpdate)]}),this.app=this.createApp(),this.dom=this.createDom(this.app),this.disposeSelectedWatcher=ip(()=>{this.selected.value?this.dom.classList.add("selected"):this.dom.classList.remove("selected")}),this.updateLanguage()}createDom(e){const n=document.createElement("div");return n.className="milkdown-code-block",this.text.value=this.node.textContent,e.mount(n),n}updateLanguage(){const e=this.node.attrs.language;if(e===this.languageName)return;this.language.value=e,this.loader.load(e??"").then(r=>{r&&(this.cm.dispatch({effects:this.languageConf.reconfigure(r)}),this.languageName=e)}).catch(console.error)}setSelection(e,n){this.cm.dom.isConnected&&(this.cm.focus(),this.updating=!0,this.cm.dispatch({selection:{anchor:e,head:n}}),this.updating=!1)}update(e){if(e.type!==this.node.type)return!1;if(this.updating)return!0;this.node=e,this.text.value=e.textContent,this.updateLanguage(),this.view.editable===this.cm.state.readOnly&&this.cm.dispatch({effects:this.readOnlyConf.reconfigure(_n.readOnly.of(!this.view.editable))});const n=Jke(this.cm.state.doc.toString(),e.textContent);return n&&(this.updating=!0,this.cm.dispatch({changes:{from:n.from,to:n.to,insert:n.text}}),this.updating=!1),!0}selectNode(){this.selected.value=!0,this.cm.focus()}deselectNode(){this.selected.value=!1}stopEvent(){return!0}destroy(){this.app.unmount(),this.cm.destroy(),this.disposeSelectedWatcher()}}function Jke(t,e){if(t===e)return null;let n=0,r=t.length,i=e.length;for(;n<r&&t.charCodeAt(n)===e.charCodeAt(n);)++n;for(;r>n&&i>n&&t.charCodeAt(r-1)===e.charCodeAt(i-1);)r--,i--;return{from:n,to:r,text:e.slice(n,i)}}const OJ=Vy(Fl.node,t=>{const e=t.get(sv.key),n=new Wke(e.languages);return(r,i,s)=>new Kke(r,i,s,n,e)});EJ(OJ,{displayName:"NodeView<code-block>",group:"CodeBlock"});const Yke=[OJ,sv],jL=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class $0{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?l=>s(jL(l)):jL,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Bi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=z_(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=wl(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let l=i.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}o==r&&s<n.length&&n.charCodeAt(s)==l&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&($0.prototype[Symbol.iterator]=function(){return this});const NJ={from:-1,to:-1,match:/.*/.exec("")},DM="gm"+(/x/.unicode==null?"":"u");class IJ{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=NJ,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new PJ(e,n,r,i,s);this.re=new RegExp(n,DM+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=yb(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=yb(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const J6=new WeakMap;class a0{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=J6.get(e);if(!i||i.from>=r||i.to<=n){let l=new a0(n,e.sliceString(n,r));return J6.set(e,l),l}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),J6.set(e,new a0(o,s)),new a0(n,s.slice(n-o,r-o))}}class PJ{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=NJ,this.matchPos=yb(e,i),this.re=new RegExp(n,DM+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=a0.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=yb(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=a0.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(IJ.prototype[Symbol.iterator]=PJ.prototype[Symbol.iterator]=function(){return this});function Xke(t){try{return new RegExp(t,DM),!0}catch{return!1}}function yb(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function G9(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Zt("input",{class:"cm-textfield",name:"line",value:e}),r=Zt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:u1.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Zt("label",t.state.phrase("Go to line"),": ",n)," ",Zt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Zt("button",{name:"close",onclick:()=>{t.dispatch({effects:u1.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,c,u,h]=s,d=u?+u.slice(1):0,f=c?+c:l.number;if(c&&h){let y=f/100;a&&(y=y*(a=="-"?-1:1)+l.number/o.doc.lines),f=Math.round(o.doc.lines*y)}else c&&a&&(f=f*(a=="-"?-1:1)+l.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),m=oe.cursor(p.from+Math.max(0,Math.min(d,p.length)));t.dispatch({effects:[u1.of(!1),$e.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:r}}const u1=ft.define(),HL=Cr.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(u1)&&(t=n.value);return t},provide:t=>q1.from(t,e=>e?G9:null)}),Qke=t=>{let e=W1(t,G9);if(!e){let n=[u1.of(!0)];t.state.field(HL,!1)==null&&n.push(ft.appendConfig.of([HL,Zke])),t.dispatch({effects:n}),e=W1(t,G9)}return e&&e.dom.querySelector("input").select(),!0},Zke=$e.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),e6e={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},t6e=Re.define({combine(t){return jl(t,e6e,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function n6e(t){return[l6e,o6e]}const r6e=Qe.mark({class:"cm-selectionMatch"}),i6e=Qe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function VL(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=Cn.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=Cn.Word)}function s6e(t,e,n,r){return t(e.sliceDoc(n,n+1))==Cn.Word&&t(e.sliceDoc(r-1,r))==Cn.Word}const o6e=tr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(t6e),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Qe.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Qe.none;let a=n.wordAt(i.head);if(!a)return Qe.none;o=n.charCategorizer(i.head),s=n.sliceDoc(a.from,a.to)}else{let a=i.to-i.from;if(a<e.minSelectionLength||a>200)return Qe.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(VL(o,n,i.from,i.to)&&s6e(o,n,i.from,i.to)))return Qe.none}else if(s=n.sliceDoc(i.from,i.to),!s)return Qe.none}let l=[];for(let a of t.visibleRanges){let c=new $0(n.doc,s,a.from,a.to);for(;!c.next().done;){let{from:u,to:h}=c.value;if((!o||VL(o,n,u,h))&&(i.empty&&u<=i.from&&h>=i.to?l.push(i6e.range(u,h)):(u>=i.to||h<=i.from)&&l.push(r6e.range(u,h)),l.length>e.maxMatches))return Qe.none}}return Qe.set(l)}},{decorations:t=>t.decorations}),l6e=$e.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),a6e=({state:t,dispatch:e})=>{let{selection:n}=t,r=oe.create(n.ranges.map(i=>t.wordAt(i.head)||oe.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function c6e(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,l=new $0(t.doc,e,r[r.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new $0(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(a=>a.from==l.value.from))continue;if(s){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const u6e=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return a6e({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=c6e(t,r);return i?(e(t.update({selection:t.selection.addRange(oe.range(i.from,i.to),!1),effects:$e.scrollIntoView(i.to)})),!0):!1},ap=Re.define({combine(t){return jl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new k6e(e),scrollToMatch:e=>$e.scrollIntoView(e)})}});class RJ{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Xke(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new p6e(this):new d6e(this)}getCursor(e,n=0,r){let i=e.doc?e:_n.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?yf(this,i,n,r):gf(this,i,n,r)}}class DJ{constructor(e){this.spec=e}}function gf(t,e,n,r){return new $0(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?h6e(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function h6e(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(vb(i,n-s))!=Cn.Word||e(wb(i,n-s))!=Cn.Word)&&(e(wb(i,r-s))!=Cn.Word||e(vb(i,r-s))!=Cn.Word))}class d6e extends DJ{constructor(e){super(e)}nextMatch(e,n,r){let i=gf(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=gf(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=gf(this.spec,e,s,i),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=gf(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=gf(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function yf(t,e,n,r){return new IJ(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?f6e(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function vb(t,e){return t.slice(Br(t,e,!1),e)}function wb(t,e){return t.slice(e,Br(t,e))}function f6e(t){return(e,n,r)=>!r[0].length||(t(vb(r.input,r.index))!=Cn.Word||t(wb(r.input,r.index))!=Cn.Word)&&(t(wb(r.input,r.index+r[0].length))!=Cn.Word||t(vb(r.input,r.index+r[0].length))!=Cn.Word)}class p6e extends DJ{nextMatch(e,n,r){let i=yf(this.spec,e,r,e.doc.length).next();return i.done&&(i=yf(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=yf(this.spec,e,s,r),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=yf(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=yf(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const dy=ft.define(),LM=ft.define(),hu=Cr.define({create(t){return new Y6(K9(t).create(),null)},update(t,e){for(let n of e.effects)n.is(dy)?t=new Y6(n.value.create(),t.panel):n.is(LM)&&(t=new Y6(t.query,n.value?BM:null));return t},provide:t=>q1.from(t,e=>e.panel)});class Y6{constructor(e,n){this.query=e,this.panel=n}}const m6e=Qe.mark({class:"cm-searchMatch"}),g6e=Qe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),y6e=tr.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(hu))}update(t){let e=t.state.field(hu);(e!=t.startState.field(hu)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Qe.none;let{view:n}=this,r=new $a;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:l,to:a}=s[i];for(;i<o-1&&a>s[i+1].from-2*250;)a=s[++i].to;t.highlight(n.state,l,a,(c,u)=>{let h=n.state.selection.ranges.some(d=>d.from==c&&d.to==u);r.add(c,u,h?g6e:m6e)})}return r.finish()}},{decorations:t=>t.decorations});function ov(t){return e=>{let n=e.state.field(hu,!1);return n&&n.query.spec.valid?t(e,n):$J(e)}}const xb=ov((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=oe.single(r.from,r.to),s=t.state.facet(ap);return t.dispatch({selection:i,effects:[$M(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),BJ(t),!0}),bb=ov((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=oe.single(i.from,i.to),o=t.state.facet(ap);return t.dispatch({selection:s,effects:[$M(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),BJ(t),!0}),v6e=ov((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:oe.create(n.map(r=>oe.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),w6e=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let l=new $0(t.doc,t.sliceDoc(r,i));!l.next().done;){if(s.length>1e3)return!1;l.value.from==r&&(o=s.length),s.push(oe.range(l.value.from,l.value.to))}return e(t.update({selection:oe.create(s,o),userEvent:"select.search.matches"})),!0},WL=ov((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,l=[],a,c,u=[];o.from==r&&o.to==i&&(c=n.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push($e.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let h=t.state.changes(l);return o&&(a=oe.single(o.from,o.to).map(h),u.push($M(t,o)),u.push(n.facet(ap).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:u,userEvent:"input.replace"}),!0}),x6e=ov((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:$e.announce.of(r),userEvent:"input.replace.all"}),!0});function BM(t){return t.state.facet(ap).createPanel(t)}function K9(t,e){var n,r,i,s,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=t.facet(ap);return new RJ({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function LJ(t){let e=W1(t,BM);return e&&e.dom.querySelector("[main-field]")}function BJ(t){let e=LJ(t);e&&e==t.root.activeElement&&e.select()}const $J=t=>{let e=t.state.field(hu,!1);if(e&&e.panel){let n=LJ(t);if(n&&n!=t.root.activeElement){let r=K9(t.state,e.query.spec);r.valid&&t.dispatch({effects:dy.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[LM.of(!0),e?dy.of(K9(t.state,e.query.spec)):ft.appendConfig.of(C6e)]});return!0},FJ=t=>{let e=t.state.field(hu,!1);if(!e||!e.panel)return!1;let n=W1(t,BM);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:LM.of(!1)}),!0},b6e=[{key:"Mod-f",run:$J,scope:"editor search-panel"},{key:"F3",run:xb,shift:bb,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:xb,shift:bb,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:FJ,scope:"editor search-panel"},{key:"Mod-Shift-l",run:w6e},{key:"Mod-Alt-g",run:Qke},{key:"Mod-d",run:u6e,preventDefault:!0}];class k6e{constructor(e){this.view=e;let n=this.query=e.state.field(hu).query.spec;this.commit=this.commit.bind(this),this.searchField=Zt("input",{value:n.search,placeholder:ts(e,"Find"),"aria-label":ts(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Zt("input",{value:n.replace,placeholder:ts(e,"Replace"),"aria-label":ts(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Zt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Zt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Zt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Zt("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Zt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>xb(e),[ts(e,"next")]),r("prev",()=>bb(e),[ts(e,"previous")]),r("select",()=>v6e(e),[ts(e,"all")]),Zt("label",null,[this.caseField,ts(e,"match case")]),Zt("label",null,[this.reField,ts(e,"regexp")]),Zt("label",null,[this.wordField,ts(e,"by word")]),...e.state.readOnly?[]:[Zt("br"),this.replaceField,r("replace",()=>WL(e),[ts(e,"replace")]),r("replaceAll",()=>x6e(e),[ts(e,"replace all")])],Zt("button",{name:"close",onclick:()=>FJ(e),"aria-label":ts(e,"close"),type:"button"},[""])])}commit(){let e=new RJ({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:dy.of(e)}))}keydown(e){Nce(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?bb:xb)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),WL(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(dy)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ap).top}}function ts(t,e){return t.state.phrase(e)}const T2=30,M2=/[\s\.,:;?!]/;function $M(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-T2),o=Math.min(i,n+T2),l=t.state.sliceDoc(s,o);if(s!=r.from){for(let a=0;a<T2;a++)if(!M2.test(l[a+1])&&M2.test(l[a])){l=l.slice(a);break}}if(o!=i){for(let a=l.length-1;a>l.length-T2;a--)if(!M2.test(l[a-1])&&M2.test(l[a])){l=l.slice(0,a);break}}return $e.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${r.number}.`)}const S6e=$e.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),C6e=[hu,Nu.low(y6e),S6e];class zJ{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=zr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(jJ(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function qL(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function _6e(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=qL(e)+qL(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function A6e(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:_6e(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function DTe(t,e){return n=>{for(let r=zr(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class UL{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Uh(t){return t.selection.main.from}function jJ(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const FM=Ya.define();function T6e(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(l=>{if(l!=i&&n!=r&&t.sliceDoc(l.from+s,l.from+o)!=t.sliceDoc(n,r))return{range:l};let a=t.toText(e);return{changes:{from:l.from+s,to:r==i.from?l.to:l.from+o,insert:a},range:oe.cursor(l.from+s+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const GL=new WeakMap;function M6e(t){if(!Array.isArray(t))return t;let e=GL.get(t);return e||GL.set(t,e=A6e(t)),e}const kb=ft.define(),fy=ft.define();class E6e{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Bi(e,n),i=wl(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Bi(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let v=Bi(e,0),w=wl(v),S=w==e.length?0:-100;if(v!=n[0])if(v==r[0])S+=-200;else return null;return this.ret(S,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,c=0;if(l<0){for(let v=0,w=Math.min(e.length,200);v<w&&c<a;){let S=Bi(e,v);(S==n[c]||S==r[c])&&(i[c++]=v),v+=wl(S)}if(c<a)return null}let u=0,h=0,d=!1,f=0,p=-1,m=-1,y=/[a-z]/.test(e),g=!0;for(let v=0,w=Math.min(e.length,200),S=0;v<w&&h<a;){let _=Bi(e,v);l<0&&(u<a&&_==n[u]&&(s[u++]=v),f<a&&(_==n[f]||_==r[f]?(f==0&&(p=v),m=v+1,f++):f=0));let C,T=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(C=z_(_))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!v||T==1&&y||S==0&&T!=0)&&(n[h]==_||r[h]==_&&(d=!0)?o[h++]=v:o.length&&(g=!1)),S=T,v+=wl(_)}return h==a&&o[0]==0&&g?this.result(-100+(d?-200:0),o,e):f==a&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):f==a?this.ret(-900-e.length,[p,m]):h==a?this.result(-100+(d?-200:0)+-700+(g?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let l=o+(this.astral?wl(Bi(r,o)):1);s&&i[s-1]==o?i[s-1]=l:(i[s++]=o,i[s++]=l)}return this.ret(e-r.length,i)}}class O6e{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const wr=Re.define({combine(t){return jl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:N6e,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>KL(e(r),n(r)),optionClass:(e,n)=>r=>KL(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function KL(t,e){return t?e?t+" "+e:t:e}function N6e(t,e,n,r,i,s){let o=t.textDirection==xn.RTL,l=o,a=!1,c="top",u,h,d=e.left-i.left,f=i.right-e.right,p=r.right-r.left,m=r.bottom-r.top;if(l&&d<Math.min(p,f)?l=!1:!l&&f<Math.min(p,d)&&(l=!0),p<=(l?d:f))u=Math.max(i.top,Math.min(n.top,i.bottom-m))-e.top,h=Math.min(400,l?d:f);else{a=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let v=i.bottom-e.bottom;v>=m||v>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let y=(e.bottom-e.top)/s.offsetHeight,g=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${h/g}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function I6e(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let c=0;c<s.length;){let u=s[c++],h=s[c++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(l.slice(u,h))),d.className="cm-completionMatchedText",a=h}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function X6(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class P6e{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,l=e.state.facet(wr);this.optionContent=I6e(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=X6(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(n).open;for(let u=a.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(wr).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:fy.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:l}=r.open;(!i.open||i.open.options!=s)&&(this.range=X6(s.length,o,e.state.facet(wr).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),l!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=X6(n.options.length,n.selected,this.view.state.facet(wr).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>ji(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&D6e(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(wr).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let d=typeof c=="string"?c:c.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=d}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let h=this.optionClass(l);h&&(u.className=h);for(let d of this.optionContent){let f=d(l,this.view.state,this.view,a);f&&u.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function R6e(t,e){return n=>new P6e(n,t,e)}function D6e(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function JL(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function L6e(t,e){let n=[],r=null,i=c=>{n.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let h=typeof u=="string"?u:u.name;r.some(d=>d.name==h)||r.push(typeof u=="string"?{name:h}:u)}},s=e.facet(wr);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)i(new UL(h,c.source,u?u(h):[],1e9-n.length));else{let h=e.sliceDoc(c.from,c.to),d,f=s.filterStrict?new O6e(h):new E6e(h);for(let p of c.result.options)if(d=f.match(p.label)){let m=p.displayLabel?u?u(p,d.matched):[]:d.matched;i(new UL(p,c.source,m,d.score+(p.boost||0)))}}}if(r){let c=Object.create(null),u=0,h=(d,f)=>{var p,m;return((p=d.rank)!==null&&p!==void 0?p:1e9)-((m=f.rank)!==null&&m!==void 0?m:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(h))u-=1e5,c[d.name]=u;for(let d of n){let{section:f}=d.completion;f&&(d.score+=c[typeof f=="string"?f:f.name])}}let o=[],l=null,a=s.compareCompletions;for(let c of n.sort((u,h)=>h.score-u.score||a(u.completion,h.completion))){let u=c.completion;!l||l.label!=u.label||l.detail!=u.detail||l.type!=null&&u.type!=null&&l.type!=u.type||l.apply!=u.apply||l.boost!=u.boost?o.push(c):JL(c.completion)>JL(l)&&(o[o.length-1]=c),l=c.completion}return o}class Bf{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Bf(this.options,YL(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let l=L6e(e,n);if(!l.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let a=n.facet(wr).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==c){a=u;break}}return new Bf(l,YL(r,a),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:H6e,above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Bf(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Bf(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Sb{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Sb(z6e,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(wr),s=(r.override||n.languageDataAt("autocomplete",Uh(n)).map(M6e)).map(a=>(this.active.find(u=>u.source==a)||new qs(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,c)=>a==this.active[c])&&(s=this.active);let o=this.open,l=e.effects.some(a=>a.is(zM));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!B6e(s,this.active)||l?o=Bf.build(s,n,this.id,o,r,l):o&&o.disabled&&!s.some(a=>a.isPending)&&(o=null),!o&&s.every(a=>!a.isPending)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new qs(a.source,0):a));for(let a of e.effects)a.is(VJ)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Sb(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?$6e:F6e}}function B6e(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const $6e={"aria-autocomplete":"list"},F6e={};function YL(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const z6e=[];function HJ(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(FM);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class qs{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=HJ(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new qs(i.source,0)),r&4&&i.state==0&&(i=new qs(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(kb))i=new qs(i.source,1,s.value);else if(s.is(fy))i=new qs(i.source,0);else if(s.is(zM))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Uh(e.state))}}class c0 extends qs{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Uh(e.state);if(l>o||!i||n&2&&(Uh(e.startState)==this.from||l<this.limit))return new qs(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return j6e(i.validFor,e.state,s,o)?new c0(this.source,this.explicit,a,i,s,o):i.update&&(i=i.update(i,s,o,new zJ(e.state,l,!1)))?new c0(this.source,this.explicit,a,i,i.from,(r=i.to)!==null&&r!==void 0?r:Uh(e.state)):new qs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new c0(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new qs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function j6e(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):jJ(t,!0).test(i)}const zM=ft.define({map(t,e){return t.map(n=>n.map(e))}}),VJ=ft.define(),Fi=Cr.define({create(){return Sb.start()},update(t,e){return t.update(e)},provide:t=>[tA.from(t,e=>e.tooltip),$e.contentAttributes.from(t,e=>e.attrs)]});function jM(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Fi).active.find(i=>i.source==e.source);return r instanceof c0?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},T6e(t.state,n,r.from,r.to)),{annotations:FM.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const H6e=R6e(Fi,jM);function E2(t,e="option"){return n=>{let r=n.state.field(Fi,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(wr).interactionDelay)return!1;let i=1,s;e=="page"&&(s=vV(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:VJ.of(l)}),!0}}const V6e=t=>{let e=t.state.field(Fi,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(wr).interactionDelay?!1:jM(t,e.open.options[e.open.selected])},XL=t=>t.state.field(Fi,!1)?(t.dispatch({effects:kb.of(!0)}),!0):!1,W6e=t=>{let e=t.state.field(Fi,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:fy.of(null)}),!0)};class q6e{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const U6e=50,G6e=1e3,K6e=tr.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Fi).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Fi),n=t.state.facet(wr);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Fi)==e)return;let r=t.transactions.some(s=>{let o=HJ(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>U6e&&Date.now()-o.time>G6e){for(let l of o.context.abortListeners)try{l()}catch(a){ji(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(kb)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Fi);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(wr).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=Uh(e),r=new zJ(e,n,t.explicit,this.view),i=new q6e(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:fy.of(null)}),ji(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(wr).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(wr),r=this.view.state.field(Fi);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let l=Uh(s.updates.length?s.updates[0].startState:this.view.state),a=Math.min(l,s.done.from+(s.active.explicit?0:1)),c=new c0(s.active.source,s.active.explicit,a,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:l);for(let u of s.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(l=>l.source==s.active.source);if(o&&o.isPending)if(s.done==null){let l=new qs(s.active.source,0);for(let a of s.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:zM.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Fi,!1);if(e&&e.tooltip&&this.view.state.facet(wr).closeOnBlur){let n=e.open&&vV(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:fy.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:kb.of(!1)}),20),this.composing=0}}}),J6e=typeof navigator=="object"&&/Win/.test(navigator.platform),Y6e=Nu.highest($e.domEventHandlers({keydown(t,e){let n=e.state.field(Fi,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(J6e&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&jM(e,r),!1}})),WJ=$e.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class X6e{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class HM{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,Lr.TrackDel),r=e.mapPos(this.to,1,Lr.TrackDel);return n==null||r==null?null:new HM(this.field,n,r)}}class VM{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(r.length){let c=o,u=/^\t*/.exec(a)[0].length;for(let h=0;h<u;h++)c+=e.facet(h5);i.push(n+c.length-u),a=c+a.slice(u)}r.push(a),n+=a.length+1}let l=this.fieldPositions.map(a=>new HM(a.field,i[a.line]+a.from,i[a.line]+a.to));return{text:r,ranges:l}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",c=-1,u=a.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(l!=null?n[h].seq==l:u&&n[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<n.length&&(l==null||n[h].seq!=null&&n[h].seq<l);)h++;n.splice(h,0,{seq:l,name:u}),c=h;for(let d of i)d.field>=c&&d.field++}i.push(new X6e(c,r.length,s.index,s.index+u.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(l,a,c)=>{for(let u of i)u.line==r.length&&u.from>c&&(u.from--,u.to--);return a}),r.push(o)}return new VM(r,i)}}let Q6e=Qe.widget({widget:new class extends Xa{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Z6e=Qe.mark({class:"cm-snippetField"});class cp{constructor(e,n){this.ranges=e,this.active=n,this.deco=Qe.set(e.map(r=>(r.from==r.to?Q6e:Z6e).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new cp(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const lv=ft.define({map(t,e){return t&&t.map(e)}}),e7e=ft.define(),py=Cr.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(lv))return n.value;if(n.is(e7e)&&t)return new cp(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>$e.decorations.from(t,e=>e?e.deco:Qe.none)});function WM(t,e){return oe.create(t.filter(n=>n.field==e).map(n=>oe.range(n.from,n.to)))}function t7e(t){let e=VM.parse(t);return(n,r,i,s)=>{let{text:o,ranges:l}=e.instantiate(n.state,i),{main:a}=n.state.selection,c={changes:{from:i,to:s==a.from?a.to:s,insert:$t.of(o)},scrollIntoView:!0,annotations:r?[FM.of(r),wi.userEvent.of("input.complete")]:void 0};if(l.length&&(c.selection=WM(l,0)),l.some(u=>u.field>0)){let u=new cp(l,0),h=c.effects=[lv.of(u)];n.state.field(py,!1)===void 0&&h.push(ft.appendConfig.of([py,o7e,l7e,WJ]))}n.dispatch(n.state.update(c))}}function qJ(t){return({state:e,dispatch:n})=>{let r=e.field(py,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:WM(r.ranges,i),effects:lv.of(s?null:new cp(r.ranges,i)),scrollIntoView:!0})),!0}}const n7e=({state:t,dispatch:e})=>t.field(py,!1)?(e(t.update({effects:lv.of(null)})),!0):!1,r7e=qJ(1),i7e=qJ(-1),s7e=[{key:"Tab",run:r7e,shift:i7e},{key:"Escape",run:n7e}],QL=Re.define({combine(t){return t.length?t[0]:s7e}}),o7e=Nu.highest(Q0.compute([QL],t=>t.facet(QL)));function LTe(t,e){return Object.assign(Object.assign({},e),{apply:t7e(t)})}const l7e=$e.domEventHandlers({mousedown(t,e){let n=e.state.field(py,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:WM(n.ranges,i.field),effects:lv.of(n.ranges.some(s=>s.field>i.field)?new cp(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),my={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Nh=ft.define({map(t,e){let n=e.mapPos(t,-1,Lr.TrackAfter);return n??void 0}}),qM=new class extends Zh{};qM.startSide=1;qM.endSide=-1;const UJ=Cr.define({create(){return Rt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Nh)&&(t=t.update({add:[qM.range(n.value,n.value+1)]}));return t}});function a7e(){return[u7e,UJ]}const Q6="()[]{}<>";function GJ(t){for(let e=0;e<Q6.length;e+=2)if(Q6.charCodeAt(e)==t)return Q6.charAt(e+1);return z_(t<128?t:t+1)}function KJ(t,e){return t.languageDataAt("closeBrackets",e)[0]||my}const c7e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),u7e=$e.inputHandler.of((t,e,n,r)=>{if((c7e?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&wl(Bi(r,0))==1||e!=i.from||n!=i.to)return!1;let s=f7e(t.state,r);return s?(t.dispatch(s),!0):!1}),h7e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=KJ(t,t.selection.main.head).brackets||my.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let l=p7e(t.doc,o.head);for(let a of r)if(a==l&&c3(t.doc,o.head)==GJ(Bi(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:oe.cursor(o.head-a.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},d7e=[{key:"Backspace",run:h7e}];function f7e(t,e){let n=KJ(t,t.selection.main.head),r=n.brackets||my.brackets;for(let i of r){let s=GJ(Bi(i,0));if(e==i)return s==i?y7e(t,i,r.indexOf(i+i+i)>-1,n):m7e(t,i,s,n.before||my.before);if(e==s&&JJ(t,t.selection.main.from))return g7e(t,i,s)}return null}function JJ(t,e){let n=!1;return t.field(UJ).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function c3(t,e){let n=t.sliceString(e,e+2);return n.slice(0,wl(Bi(n,0)))}function p7e(t,e){let n=t.sliceString(e-2,e);return wl(Bi(n,0))==n.length?n:n.slice(1)}function m7e(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Nh.of(o.to+e.length),range:oe.range(o.anchor+e.length,o.head+e.length)};let l=c3(t.doc,o.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+n,from:o.head},effects:Nh.of(o.head+e.length),range:oe.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function g7e(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&c3(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:oe.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function y7e(t,e,n,r){let i=r.stringPrefixes||my.stringPrefixes,s=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Nh.of(l.to+e.length),range:oe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=c3(t.doc,a),u;if(c==e){if(ZL(t,a))return{changes:{insert:e+e,from:a},effects:Nh.of(a+e.length),range:oe.cursor(a+e.length)};if(JJ(t,a)){let d=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+d.length,insert:d},range:oe.cursor(a+d.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=eB(t,a-2*e.length,i))>-1&&ZL(t,u))return{changes:{insert:e+e+e+e,from:a},effects:Nh.of(a+e.length),range:oe.cursor(a+e.length)};if(t.charCategorizer(a)(c)!=Cn.Word&&eB(t,a,i)>-1&&!v7e(t,a,e,i))return{changes:{insert:e+e,from:a},effects:Nh.of(a+e.length),range:oe.cursor(a+e.length)}}return{range:s=l}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function ZL(t,e){let n=zr(t).resolveInner(e+1);return n.parent&&n.from==e}function v7e(t,e,n,r){let i=zr(t).resolveInner(e,-1),s=r.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),a=l.indexOf(n);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>n.length+a;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function eB(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Cn.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=Cn.Word)return s}return-1}function w7e(t={}){return[Y6e,Fi,wr.of(t),K6e,x7e,WJ]}const YJ=[{key:"Ctrl-Space",run:XL},{mac:"Alt-`",run:XL},{key:"Escape",run:W6e},{key:"ArrowDown",run:E2(!0)},{key:"ArrowUp",run:E2(!1)},{key:"PageDown",run:E2(!0,"page")},{key:"PageUp",run:E2(!1,"page")},{key:"Enter",run:V6e}],x7e=Nu.highest(Q0.computeN([wr],t=>t.facet(wr).defaultKeymap?[YJ]:[]));class tB{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class xh{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(gy).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((u,h)=>u.from-h.from||u.to-h.to),o=new $a,l=[],a=0;for(let u=0;;){let h=u==s.length?null:s[u];if(!h&&!l.length)break;let d,f;for(l.length?(d=a,f=l.reduce((m,y)=>Math.min(m,y.to),h&&h.from>d?h.from:1e8)):(d=h.from,f=h.to,l.push(h),u++);u<s.length;){let m=s[u];if(m.from==d&&(m.to>m.from||m.to==d))l.push(m),u++,f=Math.min(m.to,f);else{f=Math.min(m.from,f);break}}let p=P7e(l);if(l.some(m=>m.from==m.to||m.from==m.to-1&&r.doc.lineAt(m.from).to==m.from))o.add(d,d,Qe.widget({widget:new E7e(p),diagnostics:l.slice()}));else{let m=l.reduce((y,g)=>g.markClass?y+" "+g.markClass:y,"");o.add(d,f,Qe.mark({class:"cm-lintRange cm-lintRange-"+p+m,diagnostics:l.slice(),inclusiveEnd:l.some(y=>y.to>f)}))}a=f;for(let m=0;m<l.length;m++)l[m].to<=a&&l.splice(m--,1)}let c=o.finish();return new xh(c,n,F0(c))}}function F0(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new tB(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new tB(r.from,s,r.diagnostic)}}),r}function b7e(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(gy).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(XJ))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function k7e(t,e){return t.field(bs,!1)?e:e.concat(ft.appendConfig.of(R7e))}const XJ=ft.define(),UM=ft.define(),QJ=ft.define(),bs=Cr.define({create(){return new xh(Qe.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=F0(n,t.selected.diagnostic,s)||F0(n,null,s)}!n.size&&i&&e.state.facet(gy).autoPanel&&(i=null),t=new xh(n,i,r)}for(let n of e.effects)if(n.is(XJ)){let r=e.state.facet(gy).autoPanel?n.value.length?yy.open:null:t.panel;t=xh.init(n.value,r,e.state)}else n.is(UM)?t=new xh(t.diagnostics,n.value?yy.open:null,t.selected):n.is(QJ)&&(t=new xh(t.diagnostics,t.panel,n.value));return t},provide:t=>[q1.from(t,e=>e.panel),$e.decorations.from(t,e=>e.diagnostics)]}),S7e=Qe.mark({class:"cm-lintRange cm-lintRange-active"});function C7e(t,e,n){let{diagnostics:r}=t.state.field(bs),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(a,c,{spec:u})=>{if(e>=a&&e<=c&&(a==c||(e>a||n>0)&&(e<c||n<0)))return i=u.diagnostics,s=a,o=c,!1});let l=t.state.facet(gy).tooltipFilter;return i&&l&&(i=l(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:_7e(t,i)}}}:null}function _7e(t,e){return Zt("ul",{class:"cm-tooltip-lint"},e.map(n=>eY(t,n,!1)))}const A7e=t=>{let e=t.state.field(bs,!1);(!e||!e.panel)&&t.dispatch({effects:k7e(t.state,[UM.of(!0)])});let n=W1(t,yy.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},nB=t=>{let e=t.state.field(bs,!1);return!e||!e.panel?!1:(t.dispatch({effects:UM.of(!1)}),!0)},T7e=t=>{let e=t.state.field(bs,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},M7e=[{key:"Mod-Shift-m",run:A7e,preventDefault:!0},{key:"F8",run:T7e}],gy=Re.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},jl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function ZJ(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function eY(t,e,n){var r;let i=n?ZJ(e.actions):[];return Zt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Zt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let l=!1,a=d=>{if(d.preventDefault(),l)return;l=!0;let f=F0(t.state.field(bs).diagnostics,e);f&&s.apply(t,f.from,f.to)},{name:c}=s,u=i[o]?c.indexOf(i[o]):-1,h=u<0?c:[c.slice(0,u),Zt("u",c.slice(u,u+1)),c.slice(u+1)];return Zt("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},h)}),e.source&&Zt("div",{class:"cm-diagnosticSource"},e.source))}class E7e extends Xa{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Zt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class rB{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=eY(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class yy{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)nB(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=ZJ(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==i.keyCode){let a=F0(this.view.state.field(bs).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Zt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Zt("div",{class:"cm-panel-lint"},this.list,Zt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nB(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(bs).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(bs),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let h=-1,d;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==u){h=f;break}h<0?(d=new rB(this.view,u),this.items.splice(r,0,d),i=!0):(d=this.items[h],h>r&&(this.items.splice(r,h-r),i=!0)),n&&d.diagnostic==n.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),s=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new rB(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let c=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/c:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(bs),r=F0(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:QJ.of(r)})}static open(e){return new yy(e)}}function O7e(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function O2(t){return O7e(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const N7e=$e.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:O2("#d11")},".cm-lintRange-warning":{backgroundImage:O2("orange")},".cm-lintRange-info":{backgroundImage:O2("#999")},".cm-lintRange-hint":{backgroundImage:O2("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function I7e(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function P7e(t){let e="hint",n=1;for(let r of t){let i=I7e(r.severity);i>n&&(n=i,e=r.severity)}return e}const R7e=[bs,$e.decorations.compute([bs],t=>{let{selected:e,panel:n}=t.field(bs);return!e||!n||e.from==e.to?Qe.none:Qe.set([S7e.range(e.from,e.to)])}),yue(C7e,{hideOn:b7e}),N7e],D7e=[Mue(),Nue(),Kce(),E3e(),fhe(),Bce(),Hce(),_n.allowMultipleSelections.of(!0),Zue(),BV(yhe,{fallback:!0}),Che(),a7e(),w7e(),oue(),cue(),eue(),n6e(),Q0.of([...d7e,...AJ,...b6e,...$3e,...che,...YJ,...M7e])];function L7e(t={}){return new An({view(e){return new B7e(e,t)}})}class B7e{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let h=e.nodeBefore,d=e.nodeAfter;if(h||d){let f=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(f){let p=f.getBoundingClientRect(),m=h?p.bottom:p.top;h&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*l;r={left:p.left,right:p.right,top:m-y,bottom:m+y}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*o;r={left:h.left-d,right:h.left+d,top:h.top,bottom:h.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,u=-pageYOffset;else{let h=a.getBoundingClientRect(),d=h.width/a.offsetWidth,f=h.height/a.offsetHeight;c=h.left-a.scrollLeft*d,u=h.top-a.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=wW(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Vn extends ct{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Vn.valid(r)?new Vn(r):ct.near(r)}content(){return Pe.empty}eq(e){return e instanceof Vn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Vn(e.resolve(n.pos))}getBookmark(){return new GM(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!$7e(e)||!F7e(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Vn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(Vn.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!tt.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Vn.valid(l))return l}return null}}}Vn.prototype.visible=!1;Vn.findFrom=Vn.findGapCursorFrom;ct.jsonID("gapcursor",Vn);class GM{constructor(e){this.pos=e}map(e){return new GM(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Vn.valid(n)?new Vn(n):ct.near(n)}}function $7e(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function F7e(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function z7e(){return new An({props:{decorations:W7e,createSelectionBetween(t,e,n){return e.pos==n.pos&&Vn.valid(n)?new Vn(n):null},handleClick:H7e,handleKeyDown:j7e,handleDOMEvents:{beforeinput:V7e}}})}const j7e=EA({ArrowLeft:N2("horiz",-1),ArrowRight:N2("horiz",1),ArrowUp:N2("vert",-1),ArrowDown:N2("vert",1)});function N2(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof qe){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=Vn.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new Vn(c))),!0):!1}}function H7e(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Vn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&tt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Vn(r))),!0)}function V7e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Vn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ce.empty;for(let o=r.length-1;o>=0;o--)i=Ce.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Pe(i,0,0));return s.setSelection(qe.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function W7e(t){if(!(t.selection instanceof Vn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",tn.create(t.doc,[er.widget(t.selection.head,e,{key:"gapcursor"})])}function KM(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-cursor",...e}}),t}const u3=Jt({},"dropCursorConfig");KM(u3,{displayName:"Ctx<dropCursor>"});const tY=dr(t=>L7e(t.get(u3.key)));KM(tY,{displayName:"Prose<dropCursor>"});const nY=dr(()=>z7e());KM(nY,{displayName:"Prose<gapCursor>"});const q7e=[u3,tY,nY];function U7e(t){var e;const n=(e=void 0)!=null?e:!1;let r=typeof document>"u"?null:document.createElement("div");return new An({key:G7e,view:i=>{n!==!0&&X7e(i.state.schema,n||[]);const s=i.dom.ownerDocument;r=r||document.createElement("div");const o=r,l=()=>{J7e(i,o)};let a;return window.ResizeObserver&&(a=new window.ResizeObserver(()=>l()),a.observe(i.dom)),s.addEventListener("selectionchange",l),{update:()=>{l()},destroy:()=>{s.removeEventListener("selectionchange",l),a&&a.unobserve(i.dom)}}},props:{handleKeyDown:(i,s)=>{var o;const{selection:l}=i.state;if(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey||s.isComposing||!["ArrowLeft","ArrowRight"].includes(s.key)||!J9(l)||!l.empty)return!1;const a=l.$head,[c,u]=rY(a),h=i.state.storedMarks||a.marks();if(c&&u&&!bt.sameSet(c,u)){if(s.key==="ArrowLeft"&&!bt.sameSet(c,h))return i.dispatch(i.state.tr.setStoredMarks(c)),!0;if(s.key==="ArrowRight"&&!bt.sameSet(u,h))return i.dispatch(i.state.tr.setStoredMarks(u)),!0}return s.key==="ArrowLeft"&&a.textOffset===1?(i.dispatch(i.state.tr.setSelection(qe.create(i.state.doc,a.pos-1)).setStoredMarks(a.marks())),!0):s.key==="ArrowRight"&&a.textOffset+1===((o=a.parent.maybeChild(a.index()))==null?void 0:o.nodeSize)?(i.dispatch(i.state.tr.setSelection(qe.create(i.state.doc,a.pos+1)).setStoredMarks(a.marks())),!0):!1},decorations:i=>{if(!(!r||!J9(i.selection)||!i.selection.empty))return tn.create(i.doc,[er.widget(0,r,{key:"prosemirror-virtual-cursor"})])},attributes:{class:"virtual-cursor-enabled"}}})}var G7e=new $n("prosemirror-virtual-cursor");function K7e(t,e){var n;const r=window.getSelection();if(!r||!r.rangeCount)return null;const i=(n=r==null?void 0:r.getRangeAt(0))==null?void 0:n.cloneRange();if(!i)return null;i.collapse(e);const s=i.getClientRects(),o=s!=null&&s.length?s[s.length-1]:null;return o!=null&&o.height?o:t.coordsAtPos(t.state.selection.head)}function rY(t){const e=t.index(),n=t.parent.maybeChild(e);let r=t.textOffset?n:null;return!r&&e>0&&(r=t.parent.maybeChild(e-1)),[r==null?void 0:r.marks,n==null?void 0:n.marks]}function J9(t){return t&&typeof t=="object"&&"$cursor"in t}function J7e(t,e){if(!t||!t.dom||t.isDestroyed||!e)return;const{state:n,dom:r}=t,{selection:i}=n;if(!J9(i))return;const s=K7e(t,i.$head===i.$from);if(!s)return e;const o=r.getBoundingClientRect();let l="prosemirror-virtual-cursor";const a=n.selection.$head,[c,u]=rY(a),h=n.storedMarks||a.marks();i.$cursor&&c&&u&&h&&!bt.sameSet(c,u)&&(bt.sameSet(c,h)?l+=" prosemirror-virtual-cursor-left":bt.sameSet(u,h)&&(l+=" prosemirror-virtual-cursor-right")),e.className=l,Y7e(e,"prosemirror-virtual-cursor-animation"),e.style.height=`${s.bottom-s.top}px`,e.style.left=`${s.left-o.left}px`,e.style.top=`${s.top-o.top}px`}function Y7e(t,e){t.classList.remove(e),t.offsetWidth,t.classList.add(e)}function X7e(t,e){for(const[n,r]of Object.entries(t.marks))r.spec.inclusive===!1&&!e.includes(n)&&console.warn(`[prosemirror-virtual-cursor] Virtual cursor does not work well with marks that have inclusive set to false. Please consider removing the inclusive option from the "${n}" mark or adding it to the "skipWarning" option.`)}var Q7e=Object.defineProperty,iB=Object.getOwnPropertySymbols,Z7e=Object.prototype.hasOwnProperty,e8e=Object.prototype.propertyIsEnumerable,sB=(t,e,n)=>e in t?Q7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t8e=(t,e)=>{for(var n in e||(e={}))Z7e.call(e,n)&&sB(t,n,e[n]);if(iB)for(var n of iB(e))e8e.call(e,n)&&sB(t,n,e[n]);return t};function iY(t,e){return Object.assign(t,{meta:t8e({package:"@milkdown/components"},e)}),t}const n8e={imageIcon:"",uploadButton:"Upload",confirmButton:"",uploadPlaceholderText:"/Paste",onUpload:t=>Promise.resolve(URL.createObjectURL(t))},h3=Jt(n8e,"inlineImageConfigCtx");iY(h3,{displayName:"Config<image-inline>",group:"ImageInline"});function k4({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}k4.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const r8e=dK("abcdefg",8),i8e=si({props:{src:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setLink:{type:Function,required:!0},imageIcon:{type:String,required:!1},uploadButton:{type:String,required:!1},confirmButton:{type:String,required:!1},uploadPlaceholderText:{type:String,required:!1},onUpload:{type:Function,required:!0}},setup({readonly:t,src:e,setLink:n,onUpload:r,imageIcon:i,uploadButton:s,confirmButton:o,uploadPlaceholderText:l,className:a}){var c,u;const h=je(!1),d=je(),f=je((c=e.value)!=null?c:""),p=je(r8e()),m=je(((u=e.value)==null?void 0:u.length)!==0),y=S=>{const C=S.target.value;m.value=C.length!==0,f.value=C},g=S=>{var _,C;S.key==="Enter"&&n((C=(_=d.value)==null?void 0:_.value)!=null?C:"")},v=()=>{var S,_;n((_=(S=d.value)==null?void 0:S.value)!=null?_:"")},w=S=>{var _;const C=(_=S.target.files)==null?void 0:_[0];C&&r(C).then(T=>{T&&(n(T),m.value=!0)}).catch(T=>{console.error("An error occurred while uploading image"),console.error(T)})};return()=>Q("div",{class:jr("image-edit",a)},Q(k4,{icon:i,class:"image-icon"}),Q("div",{class:jr("link-importer",h.value&&"focus")},Q("input",{ref:d,draggable:"true",onDragstart:S=>{S.preventDefault(),S.stopPropagation()},disabled:t.value,class:"link-input-area",value:f.value,onInput:y,onKeydown:g,onFocus:()=>h.value=!0,onBlur:()=>h.value=!1}),!m.value&&Q("div",{class:"placeholder"},Q("input",{disabled:t.value,class:"hidden",id:p.value,type:"file",accept:"image/*",onChange:w}),Q("label",{class:"uploader",for:p.value},Q(k4,{icon:s})),Q("span",{class:"text",onClick:()=>{var S;return(S=d.value)==null?void 0:S.focus()}},l))),f.value&&Q("div",{class:"confirm",onClick:()=>v()},Q(k4,{icon:o})))}}),s8e=si({props:{src:{type:Object,required:!0},alt:{type:Object,required:!0},title:{type:Object,required:!0},selected:{type:Object,required:!0},readonly:{type:Object,required:!0},setAttr:{type:Function,required:!0},config:{type:Object,required:!0}},setup(t){const{src:e,alt:n,title:r}=t;return()=>{var i;return(i=e.value)!=null&&i.length?Q("img",{class:"image-inline",src:e.value,alt:n.value,title:r.value}):Q(i8e,{src:t.src,selected:t.selected,readonly:t.readonly,setLink:s=>t.setAttr("src",s),imageIcon:t.config.imageIcon,uploadButton:t.config.uploadButton,confirmButton:t.config.confirmButton,uploadPlaceholderText:t.config.uploadPlaceholderText,onUpload:t.config.onUpload,className:"empty-image-inline"})}}}),sY=Vy(Sd.node,t=>(e,n,r)=>{const i=je(e.attrs.src),s=je(e.attrs.alt),o=je(e.attrs.title),l=je(!1),a=je(!n.editable),c=(y,g)=>{if(!n.editable)return;const v=r();v!=null&&n.dispatch(n.state.tr.setNodeAttribute(v,y,y==="src"?Uo.sanitize(g):g))},u=t.get(h3.key),h=qo(s8e,{src:i,alt:s,title:o,selected:l,readonly:a,setAttr:c,config:u}),d=document.createElement("span");d.className="milkdown-image-inline",h.mount(d);const f=ip(()=>{l.value?d.classList.add("selected"):d.classList.remove("selected")}),p=u.proxyDomURL,m=y=>{if(!p)i.value=y.attrs.src;else{const g=p(y.attrs.src);typeof g=="string"?i.value=g:g.then(v=>{i.value=v}).catch(console.error)}s.value=y.attrs.alt,o.value=y.attrs.title};return m(e),{dom:d,update:y=>y.type!==e.type?!1:(m(y),!0),stopEvent:y=>y.target instanceof HTMLInputElement,selectNode:()=>{l.value=!0},deselectNode:()=>{l.value=!1},destroy:()=>{f(),h.unmount(),d.remove()}}});iY(sY,{displayName:"NodeView<image-inline>",group:"ImageInline"});const o8e=[h3,sY];class ms{constructor(e,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=r}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new ms(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class Xs{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new Xs(n,ms.range(this,e))}}class ge{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,o=n&&n.loc;if(o&&o.start<=o.end){var l=o.lexer.input;i=o.start,s=o.end,i===l.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var a=l.slice(i,s).replace(/[^]/g,"$&"),c;i>15?c=""+l.slice(i-15,i):c=l.slice(0,i);var u;s+15<l.length?u=l.slice(s,s+15)+"":u=l.slice(s),r+=c+a+u}var h=new Error(r);return h.name="ParseError",h.__proto__=ge.prototype,h.position=i,i!=null&&s!=null&&(h.length=s-i),h.rawMessage=e,h}}ge.prototype.__proto__=Error.prototype;var l8e=function(e,n){return e.indexOf(n)!==-1},a8e=function(e,n){return e===void 0?n:e},c8e=/([A-Z])/g,u8e=function(e){return e.replace(c8e,"-$1").toLowerCase()},h8e={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d8e=/[&><"']/g;function f8e(t){return String(t).replace(d8e,e=>h8e[e])}var oY=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},p8e=function(e){var n=oY(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},m8e=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},g8e=function(e){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},Ze={contains:l8e,deflt:a8e,escape:f8e,hyphenate:u8e,getBaseElem:oY,isCharacterBox:p8e,protocolFromUrl:g8e},S4={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function y8e(t){if(t.default)return t.default;var e=t.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class JM{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in S4)if(S4.hasOwnProperty(n)){var r=S4[n];this[n]=e[n]!==void 0?r.processor?r.processor(e[n]):e[n]:y8e(r)}}reportNonstrict(e,n,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,n,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new ge("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,r){var i=this.strict;if(typeof i=="function")try{i=i(e,n,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var n=Ze.protocolFromUrl(e.url);if(n==null)return!1;e.protocol=n}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class lc{constructor(e,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=r}sup(){return yl[v8e[this.id]]}sub(){return yl[w8e[this.id]]}fracNum(){return yl[x8e[this.id]]}fracDen(){return yl[b8e[this.id]]}cramp(){return yl[k8e[this.id]]}text(){return yl[S8e[this.id]]}isTight(){return this.size>=2}}var YM=0,Cb=1,u0=2,Na=3,vy=4,Us=5,z0=6,yi=7,yl=[new lc(YM,0,!1),new lc(Cb,0,!0),new lc(u0,1,!1),new lc(Na,1,!0),new lc(vy,2,!1),new lc(Us,2,!0),new lc(z0,3,!1),new lc(yi,3,!0)],v8e=[vy,Us,vy,Us,z0,yi,z0,yi],w8e=[Us,Us,Us,Us,yi,yi,yi,yi],x8e=[u0,Na,vy,Us,z0,yi,z0,yi],b8e=[Na,Na,Us,Us,yi,yi,yi,yi],k8e=[Cb,Cb,Na,Na,Us,Us,yi,yi],S8e=[YM,Cb,u0,Na,u0,Na,u0,Na],rt={DISPLAY:yl[YM],TEXT:yl[u0],SCRIPT:yl[vy],SCRIPTSCRIPT:yl[z0]},Y9=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function C8e(t){for(var e=0;e<Y9.length;e++)for(var n=Y9[e],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(t>=i[0]&&t<=i[1])return n.name}return null}var C4=[];Y9.forEach(t=>t.blocks.forEach(e=>C4.push(...e)));function lY(t){for(var e=0;e<C4.length;e+=2)if(t>=C4[e]&&t<=C4[e+1])return!0;return!1}var Vd=80,_8e=function(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},A8e=function(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},T8e=function(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},M8e=function(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},E8e=function(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},O8e=function(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},N8e=function(e,n,r){var i=r-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},I8e=function(e,n,r){n=1e3*n;var i="";switch(e){case"sqrtMain":i=_8e(n,Vd);break;case"sqrtSize1":i=A8e(n,Vd);break;case"sqrtSize2":i=T8e(n,Vd);break;case"sqrtSize3":i=M8e(n,Vd);break;case"sqrtSize4":i=E8e(n,Vd);break;case"sqrtTall":i=N8e(n,Vd,r)}return i},P8e=function(e,n){switch(e){case"":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},oB={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},R8e=function(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class av{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Ze.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){for(var e="",n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e}toText(){var e=n=>n.toText();return this.children.map(e).join("")}}var Al={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},I2={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},lB={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function D8e(t,e){Al[t]=e}function XM(t,e,n){if(!Al[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),i=Al[e][r];if(!i&&t[0]in lB&&(r=lB[t[0]].charCodeAt(0),i=Al[e][r]),!i&&n==="text"&&lY(r)&&(i=Al[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Z6={};function L8e(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!Z6[e]){var n=Z6[e]={cssEmPerMu:I2.quad[e]/18};for(var r in I2)I2.hasOwnProperty(r)&&(n[r]=I2[r][e])}return Z6[e]}var B8e=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],aB=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],cB=function(e,n){return n.size<2?e:B8e[e-1][n.size-1]};class ya{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||ya.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=aB[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new ya(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:cB(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:aB[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=cB(ya.BASESIZE,e);return this.size===n&&this.textSize===ya.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==ya.BASESIZE?["sizing","reset-size"+this.size,"size"+ya.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=L8e(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}ya.BASESIZE=6;var X9={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},$8e={ex:!0,em:!0,mu:!0},aY=function(e){return typeof e!="string"&&(e=e.unit),e in X9||e in $8e||e==="ex"},Rn=function(e,n){var r;if(e.unit in X9)r=X9[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var i;if(n.style.isTight()?i=n.havingStyle(n.style.text()):i=n,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new ge("Invalid unit: '"+e.unit+"'");i!==n&&(r*=i.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*r,n.maxSize)},Te=function(e){return+e.toFixed(4)+"em"},Cu=function(e){return e.filter(n=>n).join(" ")},cY=function(e,n,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var i=n.getColor();i&&(this.style.color=i)}},uY=function(e){var n=document.createElement(e);n.className=Cu(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&n.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n},F8e=/[\s"'>/=\x00-\x1f]/,hY=function(e){var n="<"+e;this.classes.length&&(n+=' class="'+Ze.escape(Cu(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Ze.hyphenate(i)+":"+this.style[i]+";");r&&(n+=' style="'+Ze.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(F8e.test(s))throw new ge("Invalid attribute name '"+s+"'");n+=" "+s+'="'+Ze.escape(this.attributes[s])+'"'}n+=">";for(var o=0;o<this.children.length;o++)n+=this.children[o].toMarkup();return n+="</"+e+">",n};class cv{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,cY.call(this,e,r,i),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return Ze.contains(this.classes,e)}toNode(){return uY.call(this,"span")}toMarkup(){return hY.call(this,"span")}}class QM{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,cY.call(this,n,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return Ze.contains(this.classes,e)}toNode(){return uY.call(this,"a")}toMarkup(){return hY.call(this,"a")}}class z8e{constructor(e,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return Ze.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e='<img src="'+Ze.escape(this.src)+'"'+(' alt="'+Ze.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=Ze.hyphenate(r)+":"+this.style[r]+";");return n&&(e+=' style="'+Ze.escape(n)+'"'),e+="'/>",e}}var j8e={:"",:"",:"",:""};class io{constructor(e,n,r,i,s,o,l,a){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=l||[],this.style=a||{},this.maxFontSize=0;var c=C8e(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=j8e[this.text])}hasClass(e){return Ze.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=Te(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=Cu(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=Ze.escape(Cu(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=Ze.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,n+=' style="'+Ze.escape(r)+'"');var s=Ze.escape(this.text);return e?(n+=">",n+=s,n+="</span>",n):s}}class Wa{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)n.appendChild(this.children[i].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+Ze.escape(this.attributes[n])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class _u{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",oB[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+Ze.escape(this.alternate)+'"/>':'<path d="'+Ze.escape(oB[this.pathName])+'"/>'}}class Q9{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+Ze.escape(this.attributes[n])+'"');return e+="/>",e}}function uB(t){if(t instanceof io)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function H8e(t){if(t instanceof cv)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var V8e={bin:1,close:1,inner:1,open:1,punct:1,rel:1},W8e={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},pn={math:{},text:{}};function x(t,e,n,r,i,s){pn[t][i]={font:e,group:n,replace:r},s&&r&&(pn[t][r]=pn[t][i])}var k="math",he="text",A="main",P="ams",Tn="accent-token",Le="bin",Ei="close",up="inner",nt="mathord",rr="op-token",Os="open",d3="punct",D="rel",tc="spacing",j="textord";x(k,A,D,"","\\equiv",!0);x(k,A,D,"","\\prec",!0);x(k,A,D,"","\\succ",!0);x(k,A,D,"","\\sim",!0);x(k,A,D,"","\\perp");x(k,A,D,"","\\preceq",!0);x(k,A,D,"","\\succeq",!0);x(k,A,D,"","\\simeq",!0);x(k,A,D,"","\\mid",!0);x(k,A,D,"","\\ll",!0);x(k,A,D,"","\\gg",!0);x(k,A,D,"","\\asymp",!0);x(k,A,D,"","\\parallel");x(k,A,D,"","\\bowtie",!0);x(k,A,D,"","\\smile",!0);x(k,A,D,"","\\sqsubseteq",!0);x(k,A,D,"","\\sqsupseteq",!0);x(k,A,D,"","\\doteq",!0);x(k,A,D,"","\\frown",!0);x(k,A,D,"","\\ni",!0);x(k,A,D,"","\\propto",!0);x(k,A,D,"","\\vdash",!0);x(k,A,D,"","\\dashv",!0);x(k,A,D,"","\\owns");x(k,A,d3,".","\\ldotp");x(k,A,d3,"","\\cdotp");x(k,A,j,"#","\\#");x(he,A,j,"#","\\#");x(k,A,j,"&","\\&");x(he,A,j,"&","\\&");x(k,A,j,"","\\aleph",!0);x(k,A,j,"","\\forall",!0);x(k,A,j,"","\\hbar",!0);x(k,A,j,"","\\exists",!0);x(k,A,j,"","\\nabla",!0);x(k,A,j,"","\\flat",!0);x(k,A,j,"","\\ell",!0);x(k,A,j,"","\\natural",!0);x(k,A,j,"","\\clubsuit",!0);x(k,A,j,"","\\wp",!0);x(k,A,j,"","\\sharp",!0);x(k,A,j,"","\\diamondsuit",!0);x(k,A,j,"","\\Re",!0);x(k,A,j,"","\\heartsuit",!0);x(k,A,j,"","\\Im",!0);x(k,A,j,"","\\spadesuit",!0);x(k,A,j,"","\\S",!0);x(he,A,j,"","\\S");x(k,A,j,"","\\P",!0);x(he,A,j,"","\\P");x(k,A,j,"","\\dag");x(he,A,j,"","\\dag");x(he,A,j,"","\\textdagger");x(k,A,j,"","\\ddag");x(he,A,j,"","\\ddag");x(he,A,j,"","\\textdaggerdbl");x(k,A,Ei,"","\\rmoustache",!0);x(k,A,Os,"","\\lmoustache",!0);x(k,A,Ei,"","\\rgroup",!0);x(k,A,Os,"","\\lgroup",!0);x(k,A,Le,"","\\mp",!0);x(k,A,Le,"","\\ominus",!0);x(k,A,Le,"","\\uplus",!0);x(k,A,Le,"","\\sqcap",!0);x(k,A,Le,"","\\ast");x(k,A,Le,"","\\sqcup",!0);x(k,A,Le,"","\\bigcirc",!0);x(k,A,Le,"","\\bullet",!0);x(k,A,Le,"","\\ddagger");x(k,A,Le,"","\\wr",!0);x(k,A,Le,"","\\amalg");x(k,A,Le,"&","\\And");x(k,A,D,"","\\longleftarrow",!0);x(k,A,D,"","\\Leftarrow",!0);x(k,A,D,"","\\Longleftarrow",!0);x(k,A,D,"","\\longrightarrow",!0);x(k,A,D,"","\\Rightarrow",!0);x(k,A,D,"","\\Longrightarrow",!0);x(k,A,D,"","\\leftrightarrow",!0);x(k,A,D,"","\\longleftrightarrow",!0);x(k,A,D,"","\\Leftrightarrow",!0);x(k,A,D,"","\\Longleftrightarrow",!0);x(k,A,D,"","\\mapsto",!0);x(k,A,D,"","\\longmapsto",!0);x(k,A,D,"","\\nearrow",!0);x(k,A,D,"","\\hookleftarrow",!0);x(k,A,D,"","\\hookrightarrow",!0);x(k,A,D,"","\\searrow",!0);x(k,A,D,"","\\leftharpoonup",!0);x(k,A,D,"","\\rightharpoonup",!0);x(k,A,D,"","\\swarrow",!0);x(k,A,D,"","\\leftharpoondown",!0);x(k,A,D,"","\\rightharpoondown",!0);x(k,A,D,"","\\nwarrow",!0);x(k,A,D,"","\\rightleftharpoons",!0);x(k,P,D,"","\\nless",!0);x(k,P,D,"","\\@nleqslant");x(k,P,D,"","\\@nleqq");x(k,P,D,"","\\lneq",!0);x(k,P,D,"","\\lneqq",!0);x(k,P,D,"","\\@lvertneqq");x(k,P,D,"","\\lnsim",!0);x(k,P,D,"","\\lnapprox",!0);x(k,P,D,"","\\nprec",!0);x(k,P,D,"","\\npreceq",!0);x(k,P,D,"","\\precnsim",!0);x(k,P,D,"","\\precnapprox",!0);x(k,P,D,"","\\nsim",!0);x(k,P,D,"","\\@nshortmid");x(k,P,D,"","\\nmid",!0);x(k,P,D,"","\\nvdash",!0);x(k,P,D,"","\\nvDash",!0);x(k,P,D,"","\\ntriangleleft");x(k,P,D,"","\\ntrianglelefteq",!0);x(k,P,D,"","\\subsetneq",!0);x(k,P,D,"","\\@varsubsetneq");x(k,P,D,"","\\subsetneqq",!0);x(k,P,D,"","\\@varsubsetneqq");x(k,P,D,"","\\ngtr",!0);x(k,P,D,"","\\@ngeqslant");x(k,P,D,"","\\@ngeqq");x(k,P,D,"","\\gneq",!0);x(k,P,D,"","\\gneqq",!0);x(k,P,D,"","\\@gvertneqq");x(k,P,D,"","\\gnsim",!0);x(k,P,D,"","\\gnapprox",!0);x(k,P,D,"","\\nsucc",!0);x(k,P,D,"","\\nsucceq",!0);x(k,P,D,"","\\succnsim",!0);x(k,P,D,"","\\succnapprox",!0);x(k,P,D,"","\\ncong",!0);x(k,P,D,"","\\@nshortparallel");x(k,P,D,"","\\nparallel",!0);x(k,P,D,"","\\nVDash",!0);x(k,P,D,"","\\ntriangleright");x(k,P,D,"","\\ntrianglerighteq",!0);x(k,P,D,"","\\@nsupseteqq");x(k,P,D,"","\\supsetneq",!0);x(k,P,D,"","\\@varsupsetneq");x(k,P,D,"","\\supsetneqq",!0);x(k,P,D,"","\\@varsupsetneqq");x(k,P,D,"","\\nVdash",!0);x(k,P,D,"","\\precneqq",!0);x(k,P,D,"","\\succneqq",!0);x(k,P,D,"","\\@nsubseteqq");x(k,P,Le,"","\\unlhd");x(k,P,Le,"","\\unrhd");x(k,P,D,"","\\nleftarrow",!0);x(k,P,D,"","\\nrightarrow",!0);x(k,P,D,"","\\nLeftarrow",!0);x(k,P,D,"","\\nRightarrow",!0);x(k,P,D,"","\\nleftrightarrow",!0);x(k,P,D,"","\\nLeftrightarrow",!0);x(k,P,D,"","\\vartriangle");x(k,P,j,"","\\hslash");x(k,P,j,"","\\triangledown");x(k,P,j,"","\\lozenge");x(k,P,j,"","\\circledS");x(k,P,j,"","\\circledR");x(he,P,j,"","\\circledR");x(k,P,j,"","\\measuredangle",!0);x(k,P,j,"","\\nexists");x(k,P,j,"","\\mho");x(k,P,j,"","\\Finv",!0);x(k,P,j,"","\\Game",!0);x(k,P,j,"","\\backprime");x(k,P,j,"","\\blacktriangle");x(k,P,j,"","\\blacktriangledown");x(k,P,j,"","\\blacksquare");x(k,P,j,"","\\blacklozenge");x(k,P,j,"","\\bigstar");x(k,P,j,"","\\sphericalangle",!0);x(k,P,j,"","\\complement",!0);x(k,P,j,"","\\eth",!0);x(he,A,j,"","");x(k,P,j,"","\\diagup");x(k,P,j,"","\\diagdown");x(k,P,j,"","\\square");x(k,P,j,"","\\Box");x(k,P,j,"","\\Diamond");x(k,P,j,"","\\yen",!0);x(he,P,j,"","\\yen",!0);x(k,P,j,"","\\checkmark",!0);x(he,P,j,"","\\checkmark");x(k,P,j,"","\\beth",!0);x(k,P,j,"","\\daleth",!0);x(k,P,j,"","\\gimel",!0);x(k,P,j,"","\\digamma",!0);x(k,P,j,"","\\varkappa");x(k,P,Os,"","\\@ulcorner",!0);x(k,P,Ei,"","\\@urcorner",!0);x(k,P,Os,"","\\@llcorner",!0);x(k,P,Ei,"","\\@lrcorner",!0);x(k,P,D,"","\\leqq",!0);x(k,P,D,"","\\leqslant",!0);x(k,P,D,"","\\eqslantless",!0);x(k,P,D,"","\\lesssim",!0);x(k,P,D,"","\\lessapprox",!0);x(k,P,D,"","\\approxeq",!0);x(k,P,Le,"","\\lessdot");x(k,P,D,"","\\lll",!0);x(k,P,D,"","\\lessgtr",!0);x(k,P,D,"","\\lesseqgtr",!0);x(k,P,D,"","\\lesseqqgtr",!0);x(k,P,D,"","\\doteqdot");x(k,P,D,"","\\risingdotseq",!0);x(k,P,D,"","\\fallingdotseq",!0);x(k,P,D,"","\\backsim",!0);x(k,P,D,"","\\backsimeq",!0);x(k,P,D,"","\\subseteqq",!0);x(k,P,D,"","\\Subset",!0);x(k,P,D,"","\\sqsubset",!0);x(k,P,D,"","\\preccurlyeq",!0);x(k,P,D,"","\\curlyeqprec",!0);x(k,P,D,"","\\precsim",!0);x(k,P,D,"","\\precapprox",!0);x(k,P,D,"","\\vartriangleleft");x(k,P,D,"","\\trianglelefteq");x(k,P,D,"","\\vDash",!0);x(k,P,D,"","\\Vvdash",!0);x(k,P,D,"","\\smallsmile");x(k,P,D,"","\\smallfrown");x(k,P,D,"","\\bumpeq",!0);x(k,P,D,"","\\Bumpeq",!0);x(k,P,D,"","\\geqq",!0);x(k,P,D,"","\\geqslant",!0);x(k,P,D,"","\\eqslantgtr",!0);x(k,P,D,"","\\gtrsim",!0);x(k,P,D,"","\\gtrapprox",!0);x(k,P,Le,"","\\gtrdot");x(k,P,D,"","\\ggg",!0);x(k,P,D,"","\\gtrless",!0);x(k,P,D,"","\\gtreqless",!0);x(k,P,D,"","\\gtreqqless",!0);x(k,P,D,"","\\eqcirc",!0);x(k,P,D,"","\\circeq",!0);x(k,P,D,"","\\triangleq",!0);x(k,P,D,"","\\thicksim");x(k,P,D,"","\\thickapprox");x(k,P,D,"","\\supseteqq",!0);x(k,P,D,"","\\Supset",!0);x(k,P,D,"","\\sqsupset",!0);x(k,P,D,"","\\succcurlyeq",!0);x(k,P,D,"","\\curlyeqsucc",!0);x(k,P,D,"","\\succsim",!0);x(k,P,D,"","\\succapprox",!0);x(k,P,D,"","\\vartriangleright");x(k,P,D,"","\\trianglerighteq");x(k,P,D,"","\\Vdash",!0);x(k,P,D,"","\\shortmid");x(k,P,D,"","\\shortparallel");x(k,P,D,"","\\between",!0);x(k,P,D,"","\\pitchfork",!0);x(k,P,D,"","\\varpropto");x(k,P,D,"","\\blacktriangleleft");x(k,P,D,"","\\therefore",!0);x(k,P,D,"","\\backepsilon");x(k,P,D,"","\\blacktriangleright");x(k,P,D,"","\\because",!0);x(k,P,D,"","\\llless");x(k,P,D,"","\\gggtr");x(k,P,Le,"","\\lhd");x(k,P,Le,"","\\rhd");x(k,P,D,"","\\eqsim",!0);x(k,A,D,"","\\Join");x(k,P,D,"","\\Doteq",!0);x(k,P,Le,"","\\dotplus",!0);x(k,P,Le,"","\\smallsetminus");x(k,P,Le,"","\\Cap",!0);x(k,P,Le,"","\\Cup",!0);x(k,P,Le,"","\\doublebarwedge",!0);x(k,P,Le,"","\\boxminus",!0);x(k,P,Le,"","\\boxplus",!0);x(k,P,Le,"","\\divideontimes",!0);x(k,P,Le,"","\\ltimes",!0);x(k,P,Le,"","\\rtimes",!0);x(k,P,Le,"","\\leftthreetimes",!0);x(k,P,Le,"","\\rightthreetimes",!0);x(k,P,Le,"","\\curlywedge",!0);x(k,P,Le,"","\\curlyvee",!0);x(k,P,Le,"","\\circleddash",!0);x(k,P,Le,"","\\circledast",!0);x(k,P,Le,"","\\centerdot");x(k,P,Le,"","\\intercal",!0);x(k,P,Le,"","\\doublecap");x(k,P,Le,"","\\doublecup");x(k,P,Le,"","\\boxtimes",!0);x(k,P,D,"","\\dashrightarrow",!0);x(k,P,D,"","\\dashleftarrow",!0);x(k,P,D,"","\\leftleftarrows",!0);x(k,P,D,"","\\leftrightarrows",!0);x(k,P,D,"","\\Lleftarrow",!0);x(k,P,D,"","\\twoheadleftarrow",!0);x(k,P,D,"","\\leftarrowtail",!0);x(k,P,D,"","\\looparrowleft",!0);x(k,P,D,"","\\leftrightharpoons",!0);x(k,P,D,"","\\curvearrowleft",!0);x(k,P,D,"","\\circlearrowleft",!0);x(k,P,D,"","\\Lsh",!0);x(k,P,D,"","\\upuparrows",!0);x(k,P,D,"","\\upharpoonleft",!0);x(k,P,D,"","\\downharpoonleft",!0);x(k,A,D,"","\\origof",!0);x(k,A,D,"","\\imageof",!0);x(k,P,D,"","\\multimap",!0);x(k,P,D,"","\\leftrightsquigarrow",!0);x(k,P,D,"","\\rightrightarrows",!0);x(k,P,D,"","\\rightleftarrows",!0);x(k,P,D,"","\\twoheadrightarrow",!0);x(k,P,D,"","\\rightarrowtail",!0);x(k,P,D,"","\\looparrowright",!0);x(k,P,D,"","\\curvearrowright",!0);x(k,P,D,"","\\circlearrowright",!0);x(k,P,D,"","\\Rsh",!0);x(k,P,D,"","\\downdownarrows",!0);x(k,P,D,"","\\upharpoonright",!0);x(k,P,D,"","\\downharpoonright",!0);x(k,P,D,"","\\rightsquigarrow",!0);x(k,P,D,"","\\leadsto");x(k,P,D,"","\\Rrightarrow",!0);x(k,P,D,"","\\restriction");x(k,A,j,"","`");x(k,A,j,"$","\\$");x(he,A,j,"$","\\$");x(he,A,j,"$","\\textdollar");x(k,A,j,"%","\\%");x(he,A,j,"%","\\%");x(k,A,j,"_","\\_");x(he,A,j,"_","\\_");x(he,A,j,"_","\\textunderscore");x(k,A,j,"","\\angle",!0);x(k,A,j,"","\\infty",!0);x(k,A,j,"","\\prime");x(k,A,j,"","\\triangle");x(k,A,j,"","\\Gamma",!0);x(k,A,j,"","\\Delta",!0);x(k,A,j,"","\\Theta",!0);x(k,A,j,"","\\Lambda",!0);x(k,A,j,"","\\Xi",!0);x(k,A,j,"","\\Pi",!0);x(k,A,j,"","\\Sigma",!0);x(k,A,j,"","\\Upsilon",!0);x(k,A,j,"","\\Phi",!0);x(k,A,j,"","\\Psi",!0);x(k,A,j,"","\\Omega",!0);x(k,A,j,"A","");x(k,A,j,"B","");x(k,A,j,"E","");x(k,A,j,"Z","");x(k,A,j,"H","");x(k,A,j,"I","");x(k,A,j,"K","");x(k,A,j,"M","");x(k,A,j,"N","");x(k,A,j,"O","");x(k,A,j,"P","");x(k,A,j,"T","");x(k,A,j,"X","");x(k,A,j,"","\\neg",!0);x(k,A,j,"","\\lnot");x(k,A,j,"","\\top");x(k,A,j,"","\\bot");x(k,A,j,"","\\emptyset");x(k,P,j,"","\\varnothing");x(k,A,nt,"","\\alpha",!0);x(k,A,nt,"","\\beta",!0);x(k,A,nt,"","\\gamma",!0);x(k,A,nt,"","\\delta",!0);x(k,A,nt,"","\\epsilon",!0);x(k,A,nt,"","\\zeta",!0);x(k,A,nt,"","\\eta",!0);x(k,A,nt,"","\\theta",!0);x(k,A,nt,"","\\iota",!0);x(k,A,nt,"","\\kappa",!0);x(k,A,nt,"","\\lambda",!0);x(k,A,nt,"","\\mu",!0);x(k,A,nt,"","\\nu",!0);x(k,A,nt,"","\\xi",!0);x(k,A,nt,"","\\omicron",!0);x(k,A,nt,"","\\pi",!0);x(k,A,nt,"","\\rho",!0);x(k,A,nt,"","\\sigma",!0);x(k,A,nt,"","\\tau",!0);x(k,A,nt,"","\\upsilon",!0);x(k,A,nt,"","\\phi",!0);x(k,A,nt,"","\\chi",!0);x(k,A,nt,"","\\psi",!0);x(k,A,nt,"","\\omega",!0);x(k,A,nt,"","\\varepsilon",!0);x(k,A,nt,"","\\vartheta",!0);x(k,A,nt,"","\\varpi",!0);x(k,A,nt,"","\\varrho",!0);x(k,A,nt,"","\\varsigma",!0);x(k,A,nt,"","\\varphi",!0);x(k,A,Le,"","*",!0);x(k,A,Le,"+","+");x(k,A,Le,"","-",!0);x(k,A,Le,"","\\cdot",!0);x(k,A,Le,"","\\circ",!0);x(k,A,Le,"","\\div",!0);x(k,A,Le,"","\\pm",!0);x(k,A,Le,"","\\times",!0);x(k,A,Le,"","\\cap",!0);x(k,A,Le,"","\\cup",!0);x(k,A,Le,"","\\setminus",!0);x(k,A,Le,"","\\land");x(k,A,Le,"","\\lor");x(k,A,Le,"","\\wedge",!0);x(k,A,Le,"","\\vee",!0);x(k,A,j,"","\\surd");x(k,A,Os,"","\\langle",!0);x(k,A,Os,"","\\lvert");x(k,A,Os,"","\\lVert");x(k,A,Ei,"?","?");x(k,A,Ei,"!","!");x(k,A,Ei,"","\\rangle",!0);x(k,A,Ei,"","\\rvert");x(k,A,Ei,"","\\rVert");x(k,A,D,"=","=");x(k,A,D,":",":");x(k,A,D,"","\\approx",!0);x(k,A,D,"","\\cong",!0);x(k,A,D,"","\\ge");x(k,A,D,"","\\geq",!0);x(k,A,D,"","\\gets");x(k,A,D,">","\\gt",!0);x(k,A,D,"","\\in",!0);x(k,A,D,"","\\@not");x(k,A,D,"","\\subset",!0);x(k,A,D,"","\\supset",!0);x(k,A,D,"","\\subseteq",!0);x(k,A,D,"","\\supseteq",!0);x(k,P,D,"","\\nsubseteq",!0);x(k,P,D,"","\\nsupseteq",!0);x(k,A,D,"","\\models");x(k,A,D,"","\\leftarrow",!0);x(k,A,D,"","\\le");x(k,A,D,"","\\leq",!0);x(k,A,D,"<","\\lt",!0);x(k,A,D,"","\\rightarrow",!0);x(k,A,D,"","\\to");x(k,P,D,"","\\ngeq",!0);x(k,P,D,"","\\nleq",!0);x(k,A,tc,"","\\ ");x(k,A,tc,"","\\space");x(k,A,tc,"","\\nobreakspace");x(he,A,tc,"","\\ ");x(he,A,tc,""," ");x(he,A,tc,"","\\space");x(he,A,tc,"","\\nobreakspace");x(k,A,tc,null,"\\nobreak");x(k,A,tc,null,"\\allowbreak");x(k,A,d3,",",",");x(k,A,d3,";",";");x(k,P,Le,"","\\barwedge",!0);x(k,P,Le,"","\\veebar",!0);x(k,A,Le,"","\\odot",!0);x(k,A,Le,"","\\oplus",!0);x(k,A,Le,"","\\otimes",!0);x(k,A,j,"","\\partial",!0);x(k,A,Le,"","\\oslash",!0);x(k,P,Le,"","\\circledcirc",!0);x(k,P,Le,"","\\boxdot",!0);x(k,A,Le,"","\\bigtriangleup");x(k,A,Le,"","\\bigtriangledown");x(k,A,Le,"","\\dagger");x(k,A,Le,"","\\diamond");x(k,A,Le,"","\\star");x(k,A,Le,"","\\triangleleft");x(k,A,Le,"","\\triangleright");x(k,A,Os,"{","\\{");x(he,A,j,"{","\\{");x(he,A,j,"{","\\textbraceleft");x(k,A,Ei,"}","\\}");x(he,A,j,"}","\\}");x(he,A,j,"}","\\textbraceright");x(k,A,Os,"{","\\lbrace");x(k,A,Ei,"}","\\rbrace");x(k,A,Os,"[","\\lbrack",!0);x(he,A,j,"[","\\lbrack",!0);x(k,A,Ei,"]","\\rbrack",!0);x(he,A,j,"]","\\rbrack",!0);x(k,A,Os,"(","\\lparen",!0);x(k,A,Ei,")","\\rparen",!0);x(he,A,j,"<","\\textless",!0);x(he,A,j,">","\\textgreater",!0);x(k,A,Os,"","\\lfloor",!0);x(k,A,Ei,"","\\rfloor",!0);x(k,A,Os,"","\\lceil",!0);x(k,A,Ei,"","\\rceil",!0);x(k,A,j,"\\","\\backslash");x(k,A,j,"","|");x(k,A,j,"","\\vert");x(he,A,j,"|","\\textbar",!0);x(k,A,j,"","\\|");x(k,A,j,"","\\Vert");x(he,A,j,"","\\textbardbl");x(he,A,j,"~","\\textasciitilde");x(he,A,j,"\\","\\textbackslash");x(he,A,j,"^","\\textasciicircum");x(k,A,D,"","\\uparrow",!0);x(k,A,D,"","\\Uparrow",!0);x(k,A,D,"","\\downarrow",!0);x(k,A,D,"","\\Downarrow",!0);x(k,A,D,"","\\updownarrow",!0);x(k,A,D,"","\\Updownarrow",!0);x(k,A,rr,"","\\coprod");x(k,A,rr,"","\\bigvee");x(k,A,rr,"","\\bigwedge");x(k,A,rr,"","\\biguplus");x(k,A,rr,"","\\bigcap");x(k,A,rr,"","\\bigcup");x(k,A,rr,"","\\int");x(k,A,rr,"","\\intop");x(k,A,rr,"","\\iint");x(k,A,rr,"","\\iiint");x(k,A,rr,"","\\prod");x(k,A,rr,"","\\sum");x(k,A,rr,"","\\bigotimes");x(k,A,rr,"","\\bigoplus");x(k,A,rr,"","\\bigodot");x(k,A,rr,"","\\oint");x(k,A,rr,"","\\oiint");x(k,A,rr,"","\\oiiint");x(k,A,rr,"","\\bigsqcup");x(k,A,rr,"","\\smallint");x(he,A,up,"","\\textellipsis");x(k,A,up,"","\\mathellipsis");x(he,A,up,"","\\ldots",!0);x(k,A,up,"","\\ldots",!0);x(k,A,up,"","\\@cdots",!0);x(k,A,up,"","\\ddots",!0);x(k,A,j,"","\\varvdots");x(he,A,j,"","\\varvdots");x(k,A,Tn,"","\\acute");x(k,A,Tn,"","\\grave");x(k,A,Tn,"","\\ddot");x(k,A,Tn,"~","\\tilde");x(k,A,Tn,"","\\bar");x(k,A,Tn,"","\\breve");x(k,A,Tn,"","\\check");x(k,A,Tn,"^","\\hat");x(k,A,Tn,"","\\vec");x(k,A,Tn,"","\\dot");x(k,A,Tn,"","\\mathring");x(k,A,nt,"","\\@imath");x(k,A,nt,"","\\@jmath");x(k,A,j,"","");x(k,A,j,"","");x(he,A,j,"","\\i",!0);x(he,A,j,"","\\j",!0);x(he,A,j,"","\\ss",!0);x(he,A,j,"","\\ae",!0);x(he,A,j,"","\\oe",!0);x(he,A,j,"","\\o",!0);x(he,A,j,"","\\AE",!0);x(he,A,j,"","\\OE",!0);x(he,A,j,"","\\O",!0);x(he,A,Tn,"","\\'");x(he,A,Tn,"","\\`");x(he,A,Tn,"","\\^");x(he,A,Tn,"","\\~");x(he,A,Tn,"","\\=");x(he,A,Tn,"","\\u");x(he,A,Tn,"","\\.");x(he,A,Tn,"","\\c");x(he,A,Tn,"","\\r");x(he,A,Tn,"","\\v");x(he,A,Tn,"",'\\"');x(he,A,Tn,"","\\H");x(he,A,Tn,"","\\textcircled");var dY={"--":!0,"---":!0,"``":!0,"''":!0};x(he,A,j,"","--",!0);x(he,A,j,"","\\textendash");x(he,A,j,"","---",!0);x(he,A,j,"","\\textemdash");x(he,A,j,"","`",!0);x(he,A,j,"","\\textquoteleft");x(he,A,j,"","'",!0);x(he,A,j,"","\\textquoteright");x(he,A,j,"","``",!0);x(he,A,j,"","\\textquotedblleft");x(he,A,j,"","''",!0);x(he,A,j,"","\\textquotedblright");x(k,A,j,"","\\degree",!0);x(he,A,j,"","\\degree");x(he,A,j,"","\\textdegree",!0);x(k,A,j,"","\\pounds");x(k,A,j,"","\\mathsterling",!0);x(he,A,j,"","\\pounds");x(he,A,j,"","\\textsterling",!0);x(k,P,j,"","\\maltese");x(he,P,j,"","\\maltese");var hB='0123456789/@."';for(var e7=0;e7<hB.length;e7++){var dB=hB.charAt(e7);x(k,A,j,dB,dB)}var fB='0123456789!@*()-=+";:?/.,';for(var t7=0;t7<fB.length;t7++){var pB=fB.charAt(t7);x(he,A,j,pB,pB)}var _b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var n7=0;n7<_b.length;n7++){var P2=_b.charAt(n7);x(k,A,nt,P2,P2),x(he,A,j,P2,P2)}x(k,P,j,"C","");x(he,P,j,"C","");x(k,P,j,"H","");x(he,P,j,"H","");x(k,P,j,"N","");x(he,P,j,"N","");x(k,P,j,"P","");x(he,P,j,"P","");x(k,P,j,"Q","");x(he,P,j,"Q","");x(k,P,j,"R","");x(he,P,j,"R","");x(k,P,j,"Z","");x(he,P,j,"Z","");x(k,A,nt,"h","");x(he,A,nt,"h","");var at="";for(var ai=0;ai<_b.length;ai++){var zn=_b.charAt(ai);at=String.fromCharCode(55349,56320+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56372+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56424+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56580+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56684+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56736+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56788+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56840+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56944+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),ai<26&&(at=String.fromCharCode(55349,56632+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at),at=String.fromCharCode(55349,56476+ai),x(k,A,nt,zn,at),x(he,A,j,zn,at))}at="";x(k,A,nt,"k",at);x(he,A,j,"k",at);for(var Xu=0;Xu<10;Xu++){var ac=Xu.toString();at=String.fromCharCode(55349,57294+Xu),x(k,A,nt,ac,at),x(he,A,j,ac,at),at=String.fromCharCode(55349,57314+Xu),x(k,A,nt,ac,at),x(he,A,j,ac,at),at=String.fromCharCode(55349,57324+Xu),x(k,A,nt,ac,at),x(he,A,j,ac,at),at=String.fromCharCode(55349,57334+Xu),x(k,A,nt,ac,at),x(he,A,j,ac,at)}var Z9="";for(var r7=0;r7<Z9.length;r7++){var R2=Z9.charAt(r7);x(k,A,nt,R2,R2),x(he,A,j,R2,R2)}var D2=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],mB=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],q8e=function(e,n){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,o=n==="math"?0:1;if(119808<=s&&s<120484){var l=Math.floor((s-119808)/26);return[D2[l][2],D2[l][o]]}else if(120782<=s&&s<=120831){var a=Math.floor((s-120782)/10);return[mB[a][2],mB[a][o]]}else{if(s===120485||s===120486)return[D2[0][2],D2[0][o]];if(120486<s&&s<120782)return["",""];throw new ge("Unsupported character: "+e)}},f3=function(e,n,r){return pn[r][e]&&pn[r][e].replace&&(e=pn[r][e].replace),{value:e,metrics:XM(e,n,r)}},So=function(e,n,r,i,s){var o=f3(e,n,r),l=o.metrics;e=o.value;var a;if(l){var c=l.italic;(r==="text"||i&&i.font==="mathit")&&(c=0),a=new io(e,l.height,l.depth,c,l.skew,l.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+r+"'")),a=new io(e,0,0,0,0,0,s);if(i){a.maxFontSize=i.sizeMultiplier,i.style.isTight()&&a.classes.push("mtight");var u=i.getColor();u&&(a.style.color=u)}return a},U8e=function(e,n,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&f3(e,"Main-Bold",n).metrics?So(e,"Main-Bold",n,r,i.concat(["mathbf"])):e==="\\"||pn[n][e].font==="main"?So(e,"Main-Regular",n,r,i):So(e,"AMS-Regular",n,r,i.concat(["amsrm"]))},G8e=function(e,n,r,i,s){return s!=="textord"&&f3(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},K8e=function(e,n,r){var i=e.mode,s=e.text,o=["mord"],l=i==="math"||i==="text"&&n.font,a=l?n.font:n.fontFamily,c="",u="";if(s.charCodeAt(0)===55349&&([c,u]=q8e(s,i)),c.length>0)return So(s,c,i,n,o.concat(u));if(a){var h,d;if(a==="boldsymbol"){var f=G8e(s,i,n,o,r);h=f.fontName,d=[f.fontClass]}else l?(h=mY[a].fontName,d=[a]):(h=L2(a,n.fontWeight,n.fontShape),d=[a,n.fontWeight,n.fontShape]);if(f3(s,h,i).metrics)return So(s,h,i,n,o.concat(d));if(dY.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var p=[],m=0;m<s.length;m++)p.push(So(s[m],h,i,n,o.concat(d)));return pY(p)}}if(r==="mathord")return So(s,"Math-Italic",i,n,o.concat(["mathnormal"]));if(r==="textord"){var y=pn[i][s]&&pn[i][s].font;if(y==="ams"){var g=L2("amsrm",n.fontWeight,n.fontShape);return So(s,g,i,n,o.concat("amsrm",n.fontWeight,n.fontShape))}else if(y==="main"||!y){var v=L2("textrm",n.fontWeight,n.fontShape);return So(s,v,i,n,o.concat(n.fontWeight,n.fontShape))}else{var w=L2(y,n.fontWeight,n.fontShape);return So(s,w,i,n,o.concat(w,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},J8e=(t,e)=>{if(Cu(t.classes)!==Cu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var n=t.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},Y8e=t=>{for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n instanceof io&&r instanceof io&&J8e(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,t.splice(e+1,1),e--)}return t},ZM=function(e){for(var n=0,r=0,i=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>n&&(n=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}e.height=n,e.depth=r,e.maxFontSize=i},Ri=function(e,n,r,i){var s=new cv(e,n,r,i);return ZM(s),s},fY=(t,e,n,r)=>new cv(t,e,n,r),X8e=function(e,n,r){var i=Ri([e],[],n);return i.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),i.style.borderBottomWidth=Te(i.height),i.maxFontSize=1,i},Q8e=function(e,n,r,i){var s=new QM(e,n,r,i);return ZM(s),s},pY=function(e){var n=new av(e);return ZM(n),n},Z8e=function(e,n){return e instanceof av?Ri([],[e],n):e},eSe=function(e){if(e.positionType==="individualShift"){for(var n=e.children,r=[n[0]],i=-n[0].shift-n[0].elem.depth,s=i,o=1;o<n.length;o++){var l=-n[o].shift-s-n[o].elem.depth,a=l-(n[o-1].elem.height+n[o-1].elem.depth);s=s+l,r.push({type:"kern",size:a}),r.push(n[o])}return{children:r,depth:i}}var c;if(e.positionType==="top"){for(var u=e.positionData,h=0;h<e.children.length;h++){var d=e.children[h];u-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var f=e.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-f.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-f.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},tSe=function(e,n){for(var{children:r,depth:i}=eSe(e),s=0,o=0;o<r.length;o++){var l=r[o];if(l.type==="elem"){var a=l.elem;s=Math.max(s,a.maxFontSize,a.height)}}s+=2;var c=Ri(["pstrut"],[]);c.style.height=Te(s);for(var u=[],h=i,d=i,f=i,p=0;p<r.length;p++){var m=r[p];if(m.type==="kern")f+=m.size;else{var y=m.elem,g=m.wrapperClasses||[],v=m.wrapperStyle||{},w=Ri(g,[c,y],void 0,v);w.style.top=Te(-s-f-y.depth),m.marginLeft&&(w.style.marginLeft=m.marginLeft),m.marginRight&&(w.style.marginRight=m.marginRight),u.push(w),f+=y.height+y.depth}h=Math.min(h,f),d=Math.max(d,f)}var S=Ri(["vlist"],u);S.style.height=Te(d);var _;if(h<0){var C=Ri([],[]),T=Ri(["vlist"],[C]);T.style.height=Te(-h);var I=Ri(["vlist-s"],[new io("")]);_=[Ri(["vlist-r"],[S,I]),Ri(["vlist-r"],[T])]}else _=[Ri(["vlist-r"],[S])];var L=Ri(["vlist-t"],_);return _.length===2&&L.classes.push("vlist-t2"),L.height=d,L.depth=-h,L},nSe=(t,e)=>{var n=Ri(["mspace"],[],e),r=Rn(t,e);return n.style.marginRight=Te(r),n},L2=function(e,n,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return n==="textbf"&&r==="textit"?s="BoldItalic":n==="textbf"?s="Bold":n==="textit"?s="Italic":s="Regular",i+"-"+s},mY={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},gY={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},rSe=function(e,n){var[r,i,s]=gY[e],o=new _u(r),l=new Wa([o],{width:Te(i),height:Te(s),style:"width:"+Te(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),a=fY(["overlay"],[l],n);return a.height=s,a.style.height=Te(s),a.style.width=Te(i),a},q={fontMap:mY,makeSymbol:So,mathsym:U8e,makeSpan:Ri,makeSvgSpan:fY,makeLineSpan:X8e,makeAnchor:Q8e,makeFragment:pY,wrapFragment:Z8e,makeVList:tSe,makeOrd:K8e,makeGlue:nSe,staticSvg:rSe,svgData:gY,tryCombineChars:Y8e},Nn={number:3,unit:"mu"},Qu={number:4,unit:"mu"},ea={number:5,unit:"mu"},iSe={mord:{mop:Nn,mbin:Qu,mrel:ea,minner:Nn},mop:{mord:Nn,mop:Nn,mrel:ea,minner:Nn},mbin:{mord:Qu,mop:Qu,mopen:Qu,minner:Qu},mrel:{mord:ea,mop:ea,mopen:ea,minner:ea},mopen:{},mclose:{mop:Nn,mbin:Qu,mrel:ea,minner:Nn},mpunct:{mord:Nn,mop:Nn,mrel:ea,mopen:Nn,mclose:Nn,mpunct:Nn,minner:Nn},minner:{mord:Nn,mop:Nn,mbin:Qu,mrel:ea,mopen:Nn,mpunct:Nn,minner:Nn}},sSe={mord:{mop:Nn},mop:{mord:Nn,mop:Nn},mbin:{},mrel:{},mopen:{},mclose:{mop:Nn},mpunct:{},minner:{mop:Nn}},yY={},Ab={},Tb={};function Ne(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,l={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},a=0;a<n.length;++a)yY[n[a]]=l;e&&(s&&(Ab[e]=s),o&&(Tb[e]=o))}function Md(t){var{type:e,htmlBuilder:n,mathmlBuilder:r}=t;Ne({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var Mb=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Gn=function(e){return e.type==="ordgroup"?e.body:[e]},qa=q.makeSpan,oSe=["leftmost","mbin","mopen","mrel","mop","mpunct"],lSe=["rightmost","mrel","mclose","mpunct"],aSe={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT},cSe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},hr=function(e,n,r,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<e.length;o++){var l=Lt(e[o],n);if(l instanceof av){var a=l.children;s.push(...a)}else s.push(l)}if(q.tryCombineChars(s),!r)return s;var c=n;if(e.length===1){var u=e[0];u.type==="sizing"?c=n.havingSize(u.size):u.type==="styling"&&(c=n.havingStyle(aSe[u.style]))}var h=qa([i[0]||"leftmost"],[],n),d=qa([i[1]||"rightmost"],[],n),f=r==="root";return gB(s,(p,m)=>{var y=m.classes[0],g=p.classes[0];y==="mbin"&&Ze.contains(lSe,g)?m.classes[0]="mord":g==="mbin"&&Ze.contains(oSe,y)&&(p.classes[0]="mord")},{node:h},d,f),gB(s,(p,m)=>{var y=eC(m),g=eC(p),v=y&&g?p.hasClass("mtight")?sSe[y][g]:iSe[y][g]:null;if(v)return q.makeGlue(v,c)},{node:h},d,f),s},gB=function t(e,n,r,i,s){i&&e.push(i);for(var o=0;o<e.length;o++){var l=e[o],a=vY(l);if(a){t(a.children,n,r,null,s);continue}var c=!l.hasClass("mspace");if(c){var u=n(l,r.node);u&&(r.insertAfter?r.insertAfter(u):(e.unshift(u),o++))}c?r.node=l:s&&l.hasClass("newline")&&(r.node=qa(["leftmost"])),r.insertAfter=(h=>d=>{e.splice(h+1,0,d),o++})(o)}i&&e.pop()},vY=function(e){return e instanceof av||e instanceof QM||e instanceof cv&&e.hasClass("enclosing")?e:null},uSe=function t(e,n){var r=vY(e);if(r){var i=r.children;if(i.length){if(n==="right")return t(i[i.length-1],"right");if(n==="left")return t(i[0],"left")}}return e},eC=function(e,n){return e?(n&&(e=uSe(e,n)),cSe[e.classes[0]]||null):null},wy=function(e,n){var r=["nulldelimiter"].concat(e.baseSizingClasses());return qa(n.concat(r))},Lt=function(e,n,r){if(!e)return qa();if(Ab[e.type]){var i=Ab[e.type](e,n);if(r&&n.size!==r.size){i=qa(n.sizingClasses(r),[i],n);var s=n.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new ge("Got group of unknown type: '"+e.type+"'")};function B2(t,e){var n=qa(["base"],t,e),r=qa(["strut"]);return r.style.height=Te(n.height+n.depth),n.depth&&(r.style.verticalAlign=Te(-n.depth)),n.children.unshift(r),n}function tC(t,e){var n=null;t.length===1&&t[0].type==="tag"&&(n=t[0].tag,t=t[0].body);var r=hr(t,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],o=[],l=0;l<r.length;l++)if(o.push(r[l]),r[l].hasClass("mbin")||r[l].hasClass("mrel")||r[l].hasClass("allowbreak")){for(var a=!1;l<r.length-1&&r[l+1].hasClass("mspace")&&!r[l+1].hasClass("newline");)l++,o.push(r[l]),r[l].hasClass("nobreak")&&(a=!0);a||(s.push(B2(o,e)),o=[])}else r[l].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(B2(o,e)),o=[]),s.push(r[l]));o.length>0&&s.push(B2(o,e));var c;n?(c=B2(hr(n,e,!0)),c.classes=["tag"],s.push(c)):i&&s.push(i);var u=qa(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var h=c.children[0];h.style.height=Te(u.height+u.depth),u.depth&&(h.style.verticalAlign=Te(-u.depth))}return u}function wY(t){return new av(t)}class ws{constructor(e,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=Cu(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Tl&&this.children[r+1]instanceof Tl){for(var i=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Tl;)i+=this.children[++r].toText();e.appendChild(new Tl(i).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=Ze.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+Ze.escape(Cu(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Tl{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Ze.escape(this.toText())}toText(){return this.text}}class hSe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Te(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Te(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var me={MathNode:ws,TextNode:Tl,SpaceNode:hSe,newDocumentFragment:wY},so=function(e,n,r){return pn[n][e]&&pn[n][e].replace&&e.charCodeAt(0)!==55349&&!(dY.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=pn[n][e].replace),new me.TextNode(e)},eE=function(e){return e.length===1?e[0]:new me.MathNode("mrow",e)},tE=function(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(Ze.contains(["\\imath","\\jmath"],s))return null;pn[i][s]&&pn[i][s].replace&&(s=pn[i][s].replace);var o=q.fontMap[r].fontName;return XM(s,o,i)?q.fontMap[r].variant:null};function i7(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Tl&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var n=t.children[0];return n instanceof Tl&&n.text===","}else return!1}var Zi=function(e,n,r){if(e.length===1){var i=on(e[0],n);return r&&i instanceof ws&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,l=0;l<e.length;l++){var a=on(e[l],n);if(a instanceof ws&&o instanceof ws){if(a.type==="mtext"&&o.type==="mtext"&&a.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...a.children);continue}else if(a.type==="mn"&&o.type==="mn"){o.children.push(...a.children);continue}else if(i7(a)&&o.type==="mn"){o.children.push(...a.children);continue}else if(a.type==="mn"&&i7(o))a.children=[...o.children,...a.children],s.pop();else if((a.type==="msup"||a.type==="msub")&&a.children.length>=1&&(o.type==="mn"||i7(o))){var c=a.children[0];c instanceof ws&&c.type==="mn"&&(c.children=[...o.children,...c.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var u=o.children[0];if(u instanceof Tl&&u.text===""&&(a.type==="mo"||a.type==="mi"||a.type==="mn")){var h=a.children[0];h instanceof Tl&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),s.pop())}}}s.push(a),o=a}return s},Au=function(e,n,r){return eE(Zi(e,n,r))},on=function(e,n){if(!e)return new me.MathNode("mrow");if(Tb[e.type]){var r=Tb[e.type](e,n);return r}else throw new ge("Got group of unknown type: '"+e.type+"'")};function yB(t,e,n,r,i){var s=Zi(t,n),o;s.length===1&&s[0]instanceof ws&&Ze.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new me.MathNode("mrow",s);var l=new me.MathNode("annotation",[new me.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var a=new me.MathNode("semantics",[o,l]),c=new me.MathNode("math",[a]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return q.makeSpan([u],[c])}var xY=function(e){return new ya({style:e.displayMode?rt.DISPLAY:rt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},bY=function(e,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),e=q.makeSpan(r,[e])}return e},dSe=function(e,n,r){var i=xY(r),s;if(r.output==="mathml")return yB(e,n,i,r.displayMode,!0);if(r.output==="html"){var o=tC(e,i);s=q.makeSpan(["katex"],[o])}else{var l=yB(e,n,i,r.displayMode,!1),a=tC(e,i);s=q.makeSpan(["katex"],[l,a])}return bY(s,r)},fSe=function(e,n,r){var i=xY(r),s=tC(e,i),o=q.makeSpan(["katex"],[s]);return bY(o,r)},pSe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mSe=function(e){var n=new me.MathNode("mo",[new me.TextNode(pSe[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},gSe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ySe=function(e){return e.type==="ordgroup"?e.body.length:1},vSe=function(e,n){function r(){var l=4e5,a=e.label.slice(1);if(Ze.contains(["widehat","widecheck","widetilde","utilde"],a)){var c=e,u=ySe(c.base),h,d,f;if(u>5)a==="widehat"||a==="widecheck"?(h=420,l=2364,f=.42,d=a+"4"):(h=312,l=2340,f=.34,d="tilde4");else{var p=[1,1,2,2,3,3][u];a==="widehat"||a==="widecheck"?(l=[0,1062,2364,2364,2364][p],h=[0,239,300,360,420][p],f=[0,.24,.3,.3,.36,.42][p],d=a+p):(l=[0,600,1033,2339,2340][p],h=[0,260,286,306,312][p],f=[0,.26,.286,.3,.306,.34][p],d="tilde"+p)}var m=new _u(d),y=new Wa([m],{width:"100%",height:Te(f),viewBox:"0 0 "+l+" "+h,preserveAspectRatio:"none"});return{span:q.makeSvgSpan([],[y],n),minWidth:0,height:f}}else{var g=[],v=gSe[a],[w,S,_]=v,C=_/1e3,T=w.length,I,L;if(T===1){var N=v[3];I=["hide-tail"],L=[N]}else if(T===2)I=["halfarrow-left","halfarrow-right"],L=["xMinYMin","xMaxYMin"];else if(T===3)I=["brace-left","brace-center","brace-right"],L=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+T+" children.");for(var $=0;$<T;$++){var F=new _u(w[$]),ie=new Wa([F],{width:"400em",height:Te(C),viewBox:"0 0 "+l+" "+_,preserveAspectRatio:L[$]+" slice"}),Z=q.makeSvgSpan([I[$]],[ie],n);if(T===1)return{span:Z,minWidth:S,height:C};Z.style.height=Te(C),g.push(Z)}return{span:q.makeSpan(["stretchy"],g,n),minWidth:S,height:C}}}var{span:i,minWidth:s,height:o}=r();return i.height=o,i.style.height=Te(o),s>0&&(i.style.minWidth=Te(s)),i},wSe=function(e,n,r,i,s){var o,l=e.height+e.depth+r+i;if(/fbox|color|angl/.test(n)){if(o=q.makeSpan(["stretchy",n],[],s),n==="fbox"){var a=s.color&&s.getColor();a&&(o.style.borderColor=a)}}else{var c=[];/^[bx]cancel$/.test(n)&&c.push(new Q9({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&c.push(new Q9({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Wa(c,{width:"100%",height:Te(l)});o=q.makeSvgSpan([],[u],s)}return o.height=l,o.style.height=Te(l),o},Ua={encloseSpan:wSe,mathMLnode:mSe,svgSpan:vSe};function yt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function nE(t){var e=p3(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function p3(t){return t&&(t.type==="atom"||W8e.hasOwnProperty(t.type))?t:null}var rE=(t,e)=>{var n,r,i;t&&t.type==="supsub"?(r=yt(t.base,"accent"),n=r.base,t.base=n,i=H8e(Lt(t,e)),t.base=r):(r=yt(t,"accent"),n=r.base);var s=Lt(n,e.havingCrampedStyle()),o=r.isShifty&&Ze.isCharacterBox(n),l=0;if(o){var a=Ze.getBaseElem(n),c=Lt(a,e.havingCrampedStyle());l=uB(c).skew}var u=r.label==="\\c",h=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),d;if(r.isStretchy)d=Ua.svgSpan(r,e),d=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+Te(2*l)+")",marginLeft:Te(2*l)}:void 0}]},e);else{var f,p;r.label==="\\vec"?(f=q.staticSvg("vec",e),p=q.svgData.vec[1]):(f=q.makeOrd({mode:r.mode,text:r.label},e,"textord"),f=uB(f),f.italic=0,p=f.width,u&&(h+=f.depth)),d=q.makeSpan(["accent-body"],[f]);var m=r.label==="\\textcircled";m&&(d.classes.push("accent-full"),h=s.height);var y=l;m||(y-=p/2),d.style.left=Te(y),r.label==="\\textcircled"&&(d.style.top=".2em"),d=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:d}]},e)}var g=q.makeSpan(["mord","accent"],[d],e);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},kY=(t,e)=>{var n=t.isStretchy?Ua.mathMLnode(t.label):new me.MathNode("mo",[so(t.label,t.mode)]),r=new me.MathNode("mover",[on(t.base,e),n]);return r.setAttribute("accent","true"),r},xSe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Ne({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var n=Mb(e[0]),r=!xSe.test(t.funcName),i=!r||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:rE,mathmlBuilder:kY});Ne({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var n=e[0],r=t.parser.mode;return r==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:t.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:rE,mathmlBuilder:kY});Ne({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(t,e)=>{var n=Lt(t.base,e),r=Ua.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,s=q.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},e);return q.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var n=Ua.mathMLnode(t.label),r=new me.MathNode("munder",[on(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var $2=t=>{var e=new me.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Ne({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r,funcName:i}=t;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:n[0]}},htmlBuilder(t,e){var n=e.style,r=e.havingStyle(n.sup()),i=q.wrapFragment(Lt(t.body,r,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;t.below&&(r=e.havingStyle(n.sub()),o=q.wrapFragment(Lt(t.below,r,e),e),o.classes.push(s+"-arrow-pad"));var l=Ua.svgSpan(t,e),a=-e.fontMetrics().axisHeight+.5*l.height,c=-e.fontMetrics().axisHeight-.5*l.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(c-=i.depth);var u;if(o){var h=-e.fontMetrics().axisHeight+o.height+.5*l.height+.111;u=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:l,shift:a},{type:"elem",elem:o,shift:h}]},e)}else u=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:c},{type:"elem",elem:l,shift:a}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),q.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(t,e){var n=Ua.mathMLnode(t.label);n.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(t.body){var i=$2(on(t.body,e));if(t.below){var s=$2(on(t.below,e));r=new me.MathNode("munderover",[n,s,i])}else r=new me.MathNode("mover",[n,i])}else if(t.below){var o=$2(on(t.below,e));r=new me.MathNode("munder",[n,o])}else r=$2(),r=new me.MathNode("mover",[n,r]);return r}});var bSe=q.makeSpan;function SY(t,e){var n=hr(t.body,e,!0);return bSe([t.mclass],n,e)}function CY(t,e){var n,r=Zi(t.body,e);return t.mclass==="minner"?n=new me.MathNode("mpadded",r):t.mclass==="mord"?t.isCharacterBox?(n=r[0],n.type="mi"):n=new me.MathNode("mi",r):(t.isCharacterBox?(n=r[0],n.type="mo"):n=new me.MathNode("mo",r),t.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):t.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):t.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}Ne({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:Gn(i),isCharacterBox:Ze.isCharacterBox(i)}},htmlBuilder:SY,mathmlBuilder:CY});var m3=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Ne({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:n}=t;return{type:"mclass",mode:n.mode,mclass:m3(e[0]),body:Gn(e[1]),isCharacterBox:Ze.isCharacterBox(e[1])}}});Ne({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:n,funcName:r}=t,i=e[1],s=e[0],o;r!=="\\stackrel"?o=m3(i):o="mrel";var l={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:Gn(i)},a={type:"supsub",mode:s.mode,base:l,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:n.mode,mclass:o,body:[a],isCharacterBox:Ze.isCharacterBox(a)}},htmlBuilder:SY,mathmlBuilder:CY});Ne({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"pmb",mode:n.mode,mclass:m3(e[0]),body:Gn(e[0])}},htmlBuilder(t,e){var n=hr(t.body,e,!0),r=q.makeSpan([t.mclass],n,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(t,e){var n=Zi(t.body,e),r=new me.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var kSe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},vB=()=>({type:"styling",body:[],mode:"math",style:"display"}),wB=t=>t.type==="textord"&&t.text==="@",SSe=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function CSe(t,e,n){var r=kSe[t];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=n.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=n.callFunction("\\Big",[s],[]),l=n.callFunction("\\\\cdright",[e[1]],[]),a={type:"ordgroup",mode:"math",body:[i,o,l]};return n.callFunction("\\\\cdparent",[a],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function _Se(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var n=t.fetch().text;if(n==="&"||n==="\\\\")t.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ge("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var o=e[s],l=vB(),a=0;a<o.length;a++)if(!wB(o[a]))l.body.push(o[a]);else{r.push(l),a+=1;var c=nE(o[a]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var d=!0,f=a+1;f<o.length;f++){if(SSe(o[f],c)){d=!1,a=f;break}if(wB(o[f]))throw new ge("Missing a "+c+" character to complete a CD arrow.",o[f]);u[h].body.push(o[f])}if(d)throw new ge("Missing a "+c+" character to complete a CD arrow.",o[a])}else throw new ge('Expected one of "<>AV=|." after @',o[a]);var p=CSe(c,u,t),m={type:"styling",body:[p],mode:"math",style:"display"};r.push(m),l=vB()}s%2===0?r.push(l):r.shift(),r=[],i.push(r)}t.gullet.endGroup(),t.gullet.endGroup();var y=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:y,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}Ne({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:e[0]}},htmlBuilder(t,e){var n=e.havingStyle(e.style.sup()),r=q.wrapFragment(Lt(t.label,n,e),e);return r.classes.push("cd-label-"+t.side),r.style.bottom=Te(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(t,e){var n=new me.MathNode("mrow",[on(t.label,e)]);return n=new me.MathNode("mpadded",[n]),n.setAttribute("width","0"),t.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new me.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});Ne({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:n}=t;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(t,e){var n=q.wrapFragment(Lt(t.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(t,e){return new me.MathNode("mrow",[on(t.fragment,e)])}});Ne({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:n}=t,r=yt(e[0],"ordgroup"),i=r.body,s="",o=0;o<i.length;o++){var l=yt(i[o],"textord");s+=l.text}var a=parseInt(s),c;if(isNaN(a))throw new ge("\\@char has non-numeric argument "+s);if(a<0||a>=1114111)throw new ge("\\@char with invalid code point "+s);return a<=65535?c=String.fromCharCode(a):(a-=65536,c=String.fromCharCode((a>>10)+55296,(a&1023)+56320)),{type:"textord",mode:n.mode,text:c}}});var _Y=(t,e)=>{var n=hr(t.body,e.withColor(t.color),!1);return q.makeFragment(n)},AY=(t,e)=>{var n=Zi(t.body,e.withColor(t.color)),r=new me.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};Ne({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:n}=t,r=yt(e[0],"color-token").color,i=e[1];return{type:"color",mode:n.mode,color:r,body:Gn(i)}},htmlBuilder:_Y,mathmlBuilder:AY});Ne({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:n,breakOnTokenText:r}=t,i=yt(e[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:s}},htmlBuilder:_Y,mathmlBuilder:AY});Ne({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,n){var{parser:r}=t,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&yt(i,"size").value}},htmlBuilder(t,e){var n=q.makeSpan(["mspace"],[],e);return t.newLine&&(n.classes.push("newline"),t.size&&(n.style.marginTop=Te(Rn(t.size,e)))),n},mathmlBuilder(t,e){var n=new me.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",Te(Rn(t.size,e)))),n}});var nC={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},TY=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ge("Expected a control sequence",t);return e},ASe=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},MY=(t,e,n,r)=>{var i=t.gullet.macros.get(n.text);i==null&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!t.gullet.isExpandable(n.text)}),t.gullet.macros.set(e,i,r)};Ne({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:n}=t;e.consumeSpaces();var r=e.fetch();if(nC[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=nC[r.text]),yt(e.parseFunction(),"internal");throw new ge("Invalid token after macro prefix",r)}});Ne({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new ge("Expected a control sequence",r);for(var s=0,o,l=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),l[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new ge('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new ge('Argument number "'+r.text+'" out of order');s++,l.push([])}else{if(r.text==="EOF")throw new ge("Expected a macro definition");l[s].push(r.text)}var{tokens:a}=e.gullet.consumeArg();return o&&a.unshift(o),(n==="\\edef"||n==="\\xdef")&&(a=e.gullet.expandTokens(a),a.reverse()),e.gullet.macros.set(i,{tokens:a,numArgs:s,delimiters:l},n===nC[n]),{type:"internal",mode:e.mode}}});Ne({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=TY(e.gullet.popToken());e.gullet.consumeSpaces();var i=ASe(e);return MY(e,r,i,n==="\\\\globallet"),{type:"internal",mode:e.mode}}});Ne({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=TY(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return MY(e,r,s,n==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Ym=function(e,n,r){var i=pn.math[e]&&pn.math[e].replace,s=XM(i||e,n,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return s},iE=function(e,n,r,i){var s=r.havingBaseStyle(n),o=q.makeSpan(i.concat(s.sizingClasses(r)),[e],r),l=s.sizeMultiplier/r.sizeMultiplier;return o.height*=l,o.depth*=l,o.maxFontSize=s.sizeMultiplier,o},EY=function(e,n,r){var i=n.havingBaseStyle(r),s=(1-n.sizeMultiplier/i.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Te(s),e.height-=s,e.depth+=s},TSe=function(e,n,r,i,s,o){var l=q.makeSymbol(e,"Main-Regular",s,i),a=iE(l,n,i,o);return r&&EY(a,i,n),a},MSe=function(e,n,r,i){return q.makeSymbol(e,"Size"+n+"-Regular",r,i)},OY=function(e,n,r,i,s,o){var l=MSe(e,n,s,i),a=iE(q.makeSpan(["delimsizing","size"+n],[l],i),rt.TEXT,i,o);return r&&EY(a,i,rt.TEXT),a},s7=function(e,n,r){var i;n==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=q.makeSpan(["delimsizinginner",i],[q.makeSpan([],[q.makeSymbol(e,n,r)])]);return{type:"elem",elem:s}},o7=function(e,n,r){var i=Al["Size4-Regular"][e.charCodeAt(0)]?Al["Size4-Regular"][e.charCodeAt(0)][4]:Al["Size1-Regular"][e.charCodeAt(0)][4],s=new _u("inner",P8e(e,Math.round(1e3*n))),o=new Wa([s],{width:Te(i),height:Te(n),style:"width:"+Te(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),l=q.makeSvgSpan([],[o],r);return l.height=n,l.style.height=Te(n),l.style.width=Te(i),{type:"elem",elem:l}},rC=.008,F2={type:"kern",size:-1*rC},ESe=["|","\\lvert","\\rvert","\\vert"],OSe=["\\|","\\lVert","\\rVert","\\Vert"],NY=function(e,n,r,i,s,o){var l,a,c,u,h="",d=0;l=c=u=e,a=null;var f="Size1-Regular";e==="\\uparrow"?c=u="":e==="\\Uparrow"?c=u="":e==="\\downarrow"?l=c="":e==="\\Downarrow"?l=c="":e==="\\updownarrow"?(l="\\uparrow",c="",u="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",c="",u="\\Downarrow"):Ze.contains(ESe,e)?(c="",h="vert",d=333):Ze.contains(OSe,e)?(c="",h="doublevert",d=556):e==="["||e==="\\lbrack"?(l="",c="",u="",f="Size4-Regular",h="lbrack",d=667):e==="]"||e==="\\rbrack"?(l="",c="",u="",f="Size4-Regular",h="rbrack",d=667):e==="\\lfloor"||e===""?(c=l="",u="",f="Size4-Regular",h="lfloor",d=667):e==="\\lceil"||e===""?(l="",c=u="",f="Size4-Regular",h="lceil",d=667):e==="\\rfloor"||e===""?(c=l="",u="",f="Size4-Regular",h="rfloor",d=667):e==="\\rceil"||e===""?(l="",c=u="",f="Size4-Regular",h="rceil",d=667):e==="("||e==="\\lparen"?(l="",c="",u="",f="Size4-Regular",h="lparen",d=875):e===")"||e==="\\rparen"?(l="",c="",u="",f="Size4-Regular",h="rparen",d=875):e==="\\{"||e==="\\lbrace"?(l="",a="",u="",c="",f="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="",a="",u="",c="",f="Size4-Regular"):e==="\\lgroup"||e===""?(l="",u="",c="",f="Size4-Regular"):e==="\\rgroup"||e===""?(l="",u="",c="",f="Size4-Regular"):e==="\\lmoustache"||e===""?(l="",u="",c="",f="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(l="",u="",c="",f="Size4-Regular");var p=Ym(l,f,s),m=p.height+p.depth,y=Ym(c,f,s),g=y.height+y.depth,v=Ym(u,f,s),w=v.height+v.depth,S=0,_=1;if(a!==null){var C=Ym(a,f,s);S=C.height+C.depth,_=2}var T=m+w+S,I=Math.max(0,Math.ceil((n-T)/(_*g))),L=T+I*_*g,N=i.fontMetrics().axisHeight;r&&(N*=i.sizeMultiplier);var $=L/2-N,F=[];if(h.length>0){var ie=L-m-w,Z=Math.round(L*1e3),Y=R8e(h,Math.round(ie*1e3)),pe=new _u(h,Y),de=(d/1e3).toFixed(3)+"em",W=(Z/1e3).toFixed(3)+"em",z=new Wa([pe],{width:de,height:W,viewBox:"0 0 "+d+" "+Z}),O=q.makeSvgSpan([],[z],i);O.height=Z/1e3,O.style.width=de,O.style.height=W,F.push({type:"elem",elem:O})}else{if(F.push(s7(u,f,s)),F.push(F2),a===null){var ee=L-m-w+2*rC;F.push(o7(c,ee,i))}else{var X=(L-m-w-S)/2+2*rC;F.push(o7(c,X,i)),F.push(F2),F.push(s7(a,f,s)),F.push(F2),F.push(o7(c,X,i))}F.push(F2),F.push(s7(l,f,s))}var E=i.havingBaseStyle(rt.TEXT),xe=q.makeVList({positionType:"bottom",positionData:$,children:F},E);return iE(q.makeSpan(["delimsizing","mult"],[xe],E),rt.TEXT,i,o)},l7=80,a7=.08,c7=function(e,n,r,i,s){var o=I8e(e,i,r),l=new _u(e,o),a=new Wa([l],{width:"400em",height:Te(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return q.makeSvgSpan(["hide-tail"],[a],s)},NSe=function(e,n){var r=n.havingBaseSizing(),i=DY("\\surd",e*r.sizeMultiplier,RY,r),s=r.sizeMultiplier,o=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),l,a=0,c=0,u=0,h;return i.type==="small"?(u=1e3+1e3*o+l7,e<1?s=1:e<1.4&&(s=.7),a=(1+o+a7)/s,c=(1+o)/s,l=c7("sqrtMain",a,u,o,n),l.style.minWidth="0.853em",h=.833/s):i.type==="large"?(u=(1e3+l7)*h1[i.size],c=(h1[i.size]+o)/s,a=(h1[i.size]+o+a7)/s,l=c7("sqrtSize"+i.size,a,u,o,n),l.style.minWidth="1.02em",h=1/s):(a=e+o+a7,c=e+o,u=Math.floor(1e3*e+o)+l7,l=c7("sqrtTall",a,u,o,n),l.style.minWidth="0.742em",h=1.056),l.height=c,l.style.height=Te(a),{span:l,advanceWidth:h,ruleWidth:(n.fontMetrics().sqrtRuleThickness+o)*s}},IY=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],ISe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],PY=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],h1=[0,1.2,1.8,2.4,3],PSe=function(e,n,r,i,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Ze.contains(IY,e)||Ze.contains(PY,e))return OY(e,n,!1,r,i,s);if(Ze.contains(ISe,e))return NY(e,h1[n],!1,r,i,s);throw new ge("Illegal delimiter: '"+e+"'")},RSe=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],DSe=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"stack"}],RY=[{type:"small",style:rt.SCRIPTSCRIPT},{type:"small",style:rt.SCRIPT},{type:"small",style:rt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],LSe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},DY=function(e,n,r,i){for(var s=Math.min(2,3-i.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var l=Ym(e,LSe(r[o]),"math"),a=l.height+l.depth;if(r[o].type==="small"){var c=i.havingBaseStyle(r[o].style);a*=c.sizeMultiplier}if(a>n)return r[o]}return r[r.length-1]},LY=function(e,n,r,i,s,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var l;Ze.contains(PY,e)?l=RSe:Ze.contains(IY,e)?l=RY:l=DSe;var a=DY(e,n,l,i);return a.type==="small"?TSe(e,a.style,r,i,s,o):a.type==="large"?OY(e,a.size,r,i,s,o):NY(e,n,r,i,s,o)},BSe=function(e,n,r,i,s,o){var l=i.fontMetrics().axisHeight*i.sizeMultiplier,a=901,c=5/i.fontMetrics().ptPerEm,u=Math.max(n-l,r+l),h=Math.max(u/500*a,2*u-c);return LY(e,h,!0,i,s,o)},Ia={sqrtImage:NSe,sizedDelim:PSe,sizeToMaxHeight:h1,customSizedDelim:LY,leftRightDelim:BSe},xB={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},$Se=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function g3(t,e){var n=p3(t);if(n&&Ze.contains($Se,n.text))return n;throw n?new ge("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",t):new ge("Invalid delimiter type '"+t.type+"'",t)}Ne({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var n=g3(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:xB[t.funcName].size,mclass:xB[t.funcName].mclass,delim:n.text}},htmlBuilder:(t,e)=>t.delim==="."?q.makeSpan([t.mclass]):Ia.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(so(t.delim,t.mode));var n=new me.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=Te(Ia.sizeToMaxHeight[t.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function bB(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Ne({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=t.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new ge("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:g3(e[0],t).text,color:n}}});Ne({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=g3(e[0],t),r=t.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=yt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{bB(t);for(var n=hr(t.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,o=0;o<n.length;o++)n[o].isMiddle?s=!0:(r=Math.max(n[o].height,r),i=Math.max(n[o].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var l;if(t.left==="."?l=wy(e,["mopen"]):l=Ia.leftRightDelim(t.left,r,i,e,t.mode,["mopen"]),n.unshift(l),s)for(var a=1;a<n.length;a++){var c=n[a],u=c.isMiddle;u&&(n[a]=Ia.leftRightDelim(u.delim,r,i,u.options,t.mode,[]))}var h;if(t.right===".")h=wy(e,["mclose"]);else{var d=t.rightColor?e.withColor(t.rightColor):e;h=Ia.leftRightDelim(t.right,r,i,d,t.mode,["mclose"])}return n.push(h),q.makeSpan(["minner"],n,e)},mathmlBuilder:(t,e)=>{bB(t);var n=Zi(t.body,e);if(t.left!=="."){var r=new me.MathNode("mo",[so(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(t.right!=="."){var i=new me.MathNode("mo",[so(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),n.push(i)}return eE(n)}});Ne({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=g3(e[0],t);if(!t.parser.leftrightDepth)throw new ge("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:(t,e)=>{var n;if(t.delim===".")n=wy(e,[]);else{n=Ia.sizedDelim(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};n.isMiddle=r}return n},mathmlBuilder:(t,e)=>{var n=t.delim==="\\vert"||t.delim==="|"?so("|","text"):so(t.delim,t.mode),r=new me.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var sE=(t,e)=>{var n=q.wrapFragment(Lt(t.body,e),e),r=t.label.slice(1),i=e.sizeMultiplier,s,o=0,l=Ze.isCharacterBox(t.body);if(r==="sout")s=q.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var a=Rn({number:.6,unit:"pt"},e),c=Rn({number:.35,unit:"ex"},e),u=e.havingBaseSizing();i=i/u.sizeMultiplier;var h=n.height+n.depth+a+c;n.style.paddingLeft=Te(h/2+a);var d=Math.floor(1e3*h*i),f=O8e(d),p=new Wa([new _u("phase",f)],{width:"400em",height:Te(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});s=q.makeSvgSpan(["hide-tail"],[p],e),s.style.height=Te(h),o=n.depth+a+c}else{/cancel/.test(r)?l||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var m=0,y=0,g=0;/box/.test(r)?(g=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),m=e.fontMetrics().fboxsep+(r==="colorbox"?0:g),y=m):r==="angl"?(g=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),m=4*g,y=Math.max(0,.25-n.depth)):(m=l?.2:0,y=m),s=Ua.encloseSpan(n,r,m,y,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=Te(g)):r==="angl"&&g!==.049&&(s.style.borderTopWidth=Te(g),s.style.borderRightWidth=Te(g)),o=n.depth+y,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var v;if(t.backgroundColor)v=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:n,shift:0}]},e);else{var w=/cancel|phase/.test(r)?["svg-align"]:[];v=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:w}]},e)}return/cancel/.test(r)&&(v.height=n.height,v.depth=n.depth),/cancel/.test(r)&&!l?q.makeSpan(["mord","cancel-lap"],[v],e):q.makeSpan(["mord"],[v],e)},oE=(t,e)=>{var n=0,r=new me.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[on(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};Ne({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=yt(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:sE,mathmlBuilder:oE});Ne({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=yt(e[0],"color-token").color,o=yt(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:s,body:l}},htmlBuilder:sE,mathmlBuilder:oE});Ne({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}});Ne({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:sE,mathmlBuilder:oE});Ne({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var BY={};function Ul(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,l={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},a=0;a<n.length;++a)BY[n[a]]=l;s&&(Ab[e]=s),o&&(Tb[e]=o)}var $Y={};function M(t,e){$Y[t]=e}function kB(t){var e=[];t.consumeSpaces();var n=t.fetch().text;for(n==="\\relax"&&(t.consume(),t.consumeSpaces(),n=t.fetch().text);n==="\\hline"||n==="\\hdashline";)t.consume(),e.push(n==="\\hdashline"),t.consumeSpaces(),n=t.fetch().text;return e}var y3=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ge("{"+t.envName+"} can be used only in display mode.")};function lE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function zu(t,e,n){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:o,colSeparationType:l,autoTag:a,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:d}=e;if(t.gullet.beginGroup(),c||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var f=t.gullet.expandMacroAsText("\\arraystretch");if(f==null)o=1;else if(o=parseFloat(f),!o||o<0)throw new ge("Invalid \\arraystretch: "+f)}t.gullet.beginGroup();var p=[],m=[p],y=[],g=[],v=a!=null?[]:void 0;function w(){a&&t.gullet.macros.set("\\@eqnsw","1",!0)}function S(){v&&(t.gullet.macros.get("\\df@tag")?(v.push(t.subparse([new Xs("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):v.push(!!a&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(w(),g.push(kB(t));;){var _=t.parseExpression(!1,c?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),_={type:"ordgroup",mode:t.mode,body:_},n&&(_={type:"styling",mode:t.mode,style:n,body:[_]}),p.push(_);var C=t.fetch().text;if(C==="&"){if(h&&p.length===h){if(c||l)throw new ge("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(C==="\\end"){S(),p.length===1&&_.type==="styling"&&_.body[0].body.length===0&&(m.length>1||!u)&&m.pop(),g.length<m.length+1&&g.push([]);break}else if(C==="\\\\"){t.consume();var T=void 0;t.gullet.future().text!==" "&&(T=t.parseSizeGroup(!0)),y.push(T?T.value:null),S(),g.push(kB(t)),p=[],m.push(p),w()}else throw new ge("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:o,body:m,cols:s,rowGaps:y,hskipBeforeAndAfter:r,hLinesBeforeRow:g,colSeparationType:l,tags:v,leqno:d}}function aE(t){return t.slice(0,1)==="d"?"display":"text"}var Gl=function(e,n){var r,i,s=e.body.length,o=e.hLinesBeforeRow,l=0,a=new Array(s),c=[],u=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),h=1/n.fontMetrics().ptPerEm,d=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var f=n.havingStyle(rt.SCRIPT).sizeMultiplier;d=.2778*(f/n.sizeMultiplier)}var p=e.colSeparationType==="CD"?Rn({number:3,unit:"ex"},n):12*h,m=3*h,y=e.arraystretch*p,g=.7*y,v=.3*y,w=0;function S(ae){for(var ke=0;ke<ae.length;++ke)ke>0&&(w+=.25),c.push({pos:w,isDashed:ae[ke]})}for(S(o[0]),r=0;r<e.body.length;++r){var _=e.body[r],C=g,T=v;l<_.length&&(l=_.length);var I=new Array(_.length);for(i=0;i<_.length;++i){var L=Lt(_[i],n);T<L.depth&&(T=L.depth),C<L.height&&(C=L.height),I[i]=L}var N=e.rowGaps[r],$=0;N&&($=Rn(N,n),$>0&&($+=v,T<$&&(T=$),$=0)),e.addJot&&(T+=m),I.height=C,I.depth=T,w+=C,I.pos=w,w+=T+$,a[r]=I,S(o[r+1])}var F=w/2+n.fontMetrics().axisHeight,ie=e.cols||[],Z=[],Y,pe,de=[];if(e.tags&&e.tags.some(ae=>ae))for(r=0;r<s;++r){var W=a[r],z=W.pos-F,O=e.tags[r],ee=void 0;O===!0?ee=q.makeSpan(["eqn-num"],[],n):O===!1?ee=q.makeSpan([],[],n):ee=q.makeSpan([],hr(O,n,!0),n),ee.depth=W.depth,ee.height=W.height,de.push({type:"elem",elem:ee,shift:z})}for(i=0,pe=0;i<l||pe<ie.length;++i,++pe){for(var X=ie[pe]||{},E=!0;X.type==="separator";){if(E||(Y=q.makeSpan(["arraycolsep"],[]),Y.style.width=Te(n.fontMetrics().doubleRuleSep),Z.push(Y)),X.separator==="|"||X.separator===":"){var xe=X.separator==="|"?"solid":"dashed",U=q.makeSpan(["vertical-separator"],[],n);U.style.height=Te(w),U.style.borderRightWidth=Te(u),U.style.borderRightStyle=xe,U.style.margin="0 "+Te(-u/2);var ue=w-F;ue&&(U.style.verticalAlign=Te(-ue)),Z.push(U)}else throw new ge("Invalid separator type: "+X.separator);pe++,X=ie[pe]||{},E=!1}if(!(i>=l)){var ve=void 0;(i>0||e.hskipBeforeAndAfter)&&(ve=Ze.deflt(X.pregap,d),ve!==0&&(Y=q.makeSpan(["arraycolsep"],[]),Y.style.width=Te(ve),Z.push(Y)));var Oe=[];for(r=0;r<s;++r){var st=a[r],vt=st[i];if(vt){var _t=st.pos-F;vt.depth=st.depth,vt.height=st.height,Oe.push({type:"elem",elem:vt,shift:_t})}}Oe=q.makeVList({positionType:"individualShift",children:Oe},n),Oe=q.makeSpan(["col-align-"+(X.align||"c")],[Oe]),Z.push(Oe),(i<l-1||e.hskipBeforeAndAfter)&&(ve=Ze.deflt(X.postgap,d),ve!==0&&(Y=q.makeSpan(["arraycolsep"],[]),Y.style.width=Te(ve),Z.push(Y)))}}if(a=q.makeSpan(["mtable"],Z),c.length>0){for(var ln=q.makeLineSpan("hline",n,u),R=q.makeLineSpan("hdashline",n,u),B=[{type:"elem",elem:a,shift:0}];c.length>0;){var G=c.pop(),ce=G.pos-F;G.isDashed?B.push({type:"elem",elem:R,shift:ce}):B.push({type:"elem",elem:ln,shift:ce})}a=q.makeVList({positionType:"individualShift",children:B},n)}if(de.length===0)return q.makeSpan(["mord"],[a],n);var se=q.makeVList({positionType:"individualShift",children:de},n);return se=q.makeSpan(["tag"],[se],n),q.makeFragment([a,se])},FSe={c:"center ",l:"left ",r:"right "},Kl=function(e,n){for(var r=[],i=new me.MathNode("mtd",[],["mtr-glue"]),s=new me.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var l=e.body[o],a=[],c=0;c<l.length;c++)a.push(new me.MathNode("mtd",[on(l[c],n)]));e.tags&&e.tags[o]&&(a.unshift(i),a.push(i),e.leqno?a.unshift(s):a.push(s)),r.push(new me.MathNode("mtr",a))}var u=new me.MathNode("mtable",r),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Te(h));var d="",f="";if(e.cols&&e.cols.length>0){var p=e.cols,m="",y=!1,g=0,v=p.length;p[0].type==="separator"&&(d+="top ",g=1),p[p.length-1].type==="separator"&&(d+="bottom ",v-=1);for(var w=g;w<v;w++)p[w].type==="align"?(f+=FSe[p[w].align],y&&(m+="none "),y=!0):p[w].type==="separator"&&y&&(m+=p[w].separator==="|"?"solid ":"dashed ",y=!1);u.setAttribute("columnalign",f.trim()),/[sd]/.test(m)&&u.setAttribute("columnlines",m.trim())}if(e.colSeparationType==="align"){for(var S=e.cols||[],_="",C=1;C<S.length;C++)_+=C%2?"0em ":"1em ";u.setAttribute("columnspacing",_.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var T="",I=e.hLinesBeforeRow;d+=I[0].length>0?"left ":"",d+=I[I.length-1].length>0?"right ":"";for(var L=1;L<I.length-1;L++)T+=I[L].length===0?"none ":I[L][0]?"dashed ":"solid ";return/[sd]/.test(T)&&u.setAttribute("rowlines",T.trim()),d!==""&&(u=new me.MathNode("menclose",[u]),u.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(u=new me.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},FY=function(e,n){e.envName.indexOf("ed")===-1&&y3(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=zu(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:lE(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),l,a=0,c={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var u="",h=0;h<n[0].body.length;h++){var d=yt(n[0].body[h],"textord");u+=d.text}l=Number(u),a=l*2}var f=!a;o.body.forEach(function(g){for(var v=1;v<g.length;v+=2){var w=yt(g[v],"styling"),S=yt(w.body[0],"ordgroup");S.body.unshift(c)}if(f)a<g.length&&(a=g.length);else{var _=g.length/2;if(l<_)throw new ge("Too many math in a row: "+("expected "+l+", but got "+_),g[0])}});for(var p=0;p<a;++p){var m="r",y=0;p%2===1?m="l":p>0&&f&&(y=1),r[p]={type:"align",align:m,pregap:y,postgap:0}}return o.colSeparationType=f?"align":"alignat",o};Ul({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var n=p3(e[0]),r=n?[e[0]]:yt(e[0],"ordgroup").body,i=r.map(function(o){var l=nE(o),a=l.text;if("lcr".indexOf(a)!==-1)return{type:"align",align:a};if(a==="|")return{type:"separator",separator:"|"};if(a===":")return{type:"separator",separator:":"};throw new ge("Unknown column alignment: "+a,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return zu(t.parser,s,aE(t.envName))},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,"lcr".indexOf(n)===-1)throw new ge("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var s=zu(t.parser,r,aE(t.envName)),o=Math.max(0,...s.body.map(l=>l.length));return s.cols=new Array(o).fill({type:"align",align:n}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},n=zu(t.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var n=p3(e[0]),r=n?[e[0]]:yt(e[0],"ordgroup").body,i=r.map(function(o){var l=nE(o),a=l.text;if("lc".indexOf(a)!==-1)return{type:"align",align:a};throw new ge("Unknown column alignment: "+a,o)});if(i.length>1)throw new ge("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=zu(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new ge("{subarray} can contain only one column");return s},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=zu(t.parser,e,aE(t.envName));return{type:"leftright",mode:t.mode,body:[n],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:FY,htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){Ze.contains(["gather","gather*"],t.envName)&&y3(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:lE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return zu(t.parser,e,"display")},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:FY,htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){y3(t);var e={autoTag:lE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return zu(t.parser,e,"display")},htmlBuilder:Gl,mathmlBuilder:Kl});Ul({type:"array",names:["CD"],props:{numArgs:0},handler(t){return y3(t),_Se(t.parser)},htmlBuilder:Gl,mathmlBuilder:Kl});M("\\nonumber","\\gdef\\@eqnsw{0}");M("\\notag","\\nonumber");Ne({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ge(t.funcName+" valid only within array environment")}});var SB=BY;Ne({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];if(i.type!=="ordgroup")throw new ge("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=yt(i.body[o],"textord").text;if(r==="\\begin"){if(!SB.hasOwnProperty(s))throw new ge("No such environment: "+s,i);var l=SB[s],{args:a,optArgs:c}=n.parseArguments("\\begin{"+s+"}",l),u={mode:n.mode,envName:s,parser:n},h=l.handler(u,a,c);n.expect("\\end",!1);var d=n.nextToken,f=yt(n.parseFunction(),"environment");if(f.name!==s)throw new ge("Mismatch: \\begin{"+s+"} matched by \\end{"+f.name+"}",d);return h}return{type:"environment",mode:n.mode,name:s,nameGroup:i}}});var zY=(t,e)=>{var n=t.font,r=e.withFont(n);return Lt(t.body,r)},jY=(t,e)=>{var n=t.font,r=e.withFont(n);return on(t.body,r)},CB={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Ne({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=Mb(e[0]),s=r;return s in CB&&(s=CB[s]),{type:"font",mode:n.mode,font:s.slice(1),body:i}},htmlBuilder:zY,mathmlBuilder:jY});Ne({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:n}=t,r=e[0],i=Ze.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:m3(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});Ne({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,breakOnTokenText:i}=t,{mode:s}=n,o=n.parseExpression(!0,i),l="math"+r.slice(1);return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:n.mode,body:o}}},htmlBuilder:zY,mathmlBuilder:jY});var HY=(t,e)=>{var n=e;return t==="display"?n=n.id>=rt.SCRIPT.id?n.text():rt.DISPLAY:t==="text"&&n.size===rt.DISPLAY.size?n=rt.TEXT:t==="script"?n=rt.SCRIPT:t==="scriptscript"&&(n=rt.SCRIPTSCRIPT),n},cE=(t,e)=>{var n=HY(t.size,e.style),r=n.fracNum(),i=n.fracDen(),s;s=e.havingStyle(r);var o=Lt(t.numer,s,e);if(t.continued){var l=8.5/e.fontMetrics().ptPerEm,a=3.5/e.fontMetrics().ptPerEm;o.height=o.height<l?l:o.height,o.depth=o.depth<a?a:o.depth}s=e.havingStyle(i);var c=Lt(t.denom,s,e),u,h,d;t.hasBarLine?(t.barSize?(h=Rn(t.barSize,e),u=q.makeLineSpan("frac-line",e,h)):u=q.makeLineSpan("frac-line",e),h=u.height,d=u.height):(u=null,h=0,d=e.fontMetrics().defaultRuleThickness);var f,p,m;n.size===rt.DISPLAY.size||t.size==="display"?(f=e.fontMetrics().num1,h>0?p=3*d:p=7*d,m=e.fontMetrics().denom1):(h>0?(f=e.fontMetrics().num2,p=d):(f=e.fontMetrics().num3,p=3*d),m=e.fontMetrics().denom2);var y;if(u){var v=e.fontMetrics().axisHeight;f-o.depth-(v+.5*h)<p&&(f+=p-(f-o.depth-(v+.5*h))),v-.5*h-(c.height-m)<p&&(m+=p-(v-.5*h-(c.height-m)));var w=-(v-.5*h);y=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:u,shift:w},{type:"elem",elem:o,shift:-f}]},e)}else{var g=f-o.depth-(c.height-m);g<p&&(f+=.5*(p-g),m+=.5*(p-g)),y=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:m},{type:"elem",elem:o,shift:-f}]},e)}s=e.havingStyle(n),y.height*=s.sizeMultiplier/e.sizeMultiplier,y.depth*=s.sizeMultiplier/e.sizeMultiplier;var S;n.size===rt.DISPLAY.size?S=e.fontMetrics().delim1:n.size===rt.SCRIPTSCRIPT.size?S=e.havingStyle(rt.SCRIPT).fontMetrics().delim2:S=e.fontMetrics().delim2;var _,C;return t.leftDelim==null?_=wy(e,["mopen"]):_=Ia.customSizedDelim(t.leftDelim,S,!0,e.havingStyle(n),t.mode,["mopen"]),t.continued?C=q.makeSpan([]):t.rightDelim==null?C=wy(e,["mclose"]):C=Ia.customSizedDelim(t.rightDelim,S,!0,e.havingStyle(n),t.mode,["mclose"]),q.makeSpan(["mord"].concat(s.sizingClasses(e)),[_,q.makeSpan(["mfrac"],[y]),C],e)},uE=(t,e)=>{var n=new me.MathNode("mfrac",[on(t.numer,e),on(t.denom,e)]);if(!t.hasBarLine)n.setAttribute("linethickness","0px");else if(t.barSize){var r=Rn(t.barSize,e);n.setAttribute("linethickness",Te(r))}var i=HY(t.size,e.style);if(i.size!==e.style.size){n=new me.MathNode("mstyle",[n]);var s=i.size===rt.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",s),n.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var l=new me.MathNode("mo",[new me.TextNode(t.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}if(o.push(n),t.rightDelim!=null){var a=new me.MathNode("mo",[new me.TextNode(t.rightDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}return eE(o)}return n};Ne({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1],o,l=null,a=null,c="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,l="(",a=")";break;case"\\\\bracefrac":o=!1,l="\\{",a="\\}";break;case"\\\\brackfrac":o=!1,l="[",a="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:l,rightDelim:a,size:c,barSize:null}},htmlBuilder:cE,mathmlBuilder:uE});Ne({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Ne({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:n,token:r}=t,i;switch(n){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var _B=["display","text","script","scriptscript"],AB=function(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};Ne({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:n}=t,r=e[4],i=e[5],s=Mb(e[0]),o=s.type==="atom"&&s.family==="open"?AB(s.text):null,l=Mb(e[1]),a=l.type==="atom"&&l.family==="close"?AB(l.text):null,c=yt(e[2],"size"),u,h=null;c.isBlank?u=!0:(h=c.value,u=h.number>0);var d="auto",f=e[3];if(f.type==="ordgroup"){if(f.body.length>0){var p=yt(f.body[0],"textord");d=_B[Number(p.text)]}}else f=yt(f,"textord"),d=_B[Number(f.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:i,continued:!1,hasBarLine:u,barSize:h,leftDelim:o,rightDelim:a,size:d}},htmlBuilder:cE,mathmlBuilder:uE});Ne({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:n,funcName:r,token:i}=t;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:yt(e[0],"size").value,token:i}}});Ne({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=m8e(yt(e[1],"infix").size),o=e[2],l=s.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:o,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:cE,mathmlBuilder:uE});var VY=(t,e)=>{var n=e.style,r,i;t.type==="supsub"?(r=t.sup?Lt(t.sup,e.havingStyle(n.sup()),e):Lt(t.sub,e.havingStyle(n.sub()),e),i=yt(t.base,"horizBrace")):i=yt(t,"horizBrace");var s=Lt(i.base,e.havingBaseStyle(rt.DISPLAY)),o=Ua.svgSpan(i,e),l;if(i.isOver?(l=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),l.children[0].children[0].children[1].classes.push("svg-align")):(l=q.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),l.children[0].children[0].children[0].classes.push("svg-align")),r){var a=q.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e);i.isOver?l=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:r}]},e):l=q.makeVList({positionType:"bottom",positionData:a.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:a}]},e)}return q.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e)},zSe=(t,e)=>{var n=Ua.mathMLnode(t.label);return new me.MathNode(t.isOver?"mover":"munder",[on(t.base,e),n])};Ne({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:VY,mathmlBuilder:zSe});Ne({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[1],i=yt(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:Gn(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var n=hr(t.body,e,!1);return q.makeAnchor(t.href,[],n,e)},mathmlBuilder:(t,e)=>{var n=Au(t.body,e);return n instanceof ws||(n=new ws("mrow",[n])),n.setAttribute("href",t.href),n}});Ne({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=yt(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var l={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:Gn(l)}}});Ne({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:n}=t;return{type:"hbox",mode:n.mode,body:Gn(e[0])}},htmlBuilder(t,e){var n=hr(t.body,e,!1);return q.makeFragment(n)},mathmlBuilder(t,e){return new me.MathNode("mrow",Zi(t.body,e))}});Ne({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,token:i}=t,s=yt(e[0],"raw").string,o=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,a={};switch(r){case"\\htmlClass":a.class=s,l={command:"\\htmlClass",class:s};break;case"\\htmlId":a.id=s,l={command:"\\htmlId",id:s};break;case"\\htmlStyle":a.style=s,l={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length!==2)throw new ge("Error parsing key-value for \\htmlData");a["data-"+h[0].trim()]=h[1].trim()}l={command:"\\htmlData",attributes:a};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(l)?{type:"html",mode:n.mode,attributes:a,body:Gn(o)}:n.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var n=hr(t.body,e,!1),r=["enclosing"];t.attributes.class&&r.push(...t.attributes.class.trim().split(/\s+/));var i=q.makeSpan(r,n,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&i.setAttribute(s,t.attributes[s]);return i},mathmlBuilder:(t,e)=>Au(t.body,e)});Ne({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"htmlmathml",mode:n.mode,html:Gn(e[0]),mathml:Gn(e[1])}},htmlBuilder:(t,e)=>{var n=hr(t.html,e,!1);return q.makeFragment(n)},mathmlBuilder:(t,e)=>Au(t.mathml,e)});var u7=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new ge("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!aY(r))throw new ge("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Ne({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,n)=>{var{parser:r}=t,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(n[0])for(var a=yt(n[0],"raw").string,c=a.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length===2){var d=h[1].trim();switch(h[0].trim()){case"alt":l=d;break;case"width":i=u7(d);break;case"height":s=u7(d);break;case"totalheight":o=u7(d);break;default:throw new ge("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=yt(e[0],"url").url;return l===""&&(l=f,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:r.mode,alt:l,width:i,height:s,totalheight:o,src:f}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var n=Rn(t.height,e),r=0;t.totalheight.number>0&&(r=Rn(t.totalheight,e)-n);var i=0;t.width.number>0&&(i=Rn(t.width,e));var s={height:Te(n+r)};i>0&&(s.width=Te(i)),r>0&&(s.verticalAlign=Te(-r));var o=new z8e(t.src,t.alt,s);return o.height=n,o.depth=r,o},mathmlBuilder:(t,e)=>{var n=new me.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=Rn(t.height,e),i=0;if(t.totalheight.number>0&&(i=Rn(t.totalheight,e)-r,n.setAttribute("valign",Te(-i))),n.setAttribute("height",Te(r+i)),t.width.number>0){var s=Rn(t.width,e);n.setAttribute("width",Te(s))}return n.setAttribute("src",t.src),n}});Ne({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=yt(e[0],"size");if(n.settings.strict){var s=r[1]==="m",o=i.value.unit==="mu";s?(o||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder(t,e){return q.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var n=Rn(t.dimension,e);return new me.SpaceNode(n)}});Ne({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(t,e)=>{var n;t.alignment==="clap"?(n=q.makeSpan([],[Lt(t.body,e)]),n=q.makeSpan(["inner"],[n],e)):n=q.makeSpan(["inner"],[Lt(t.body,e)]);var r=q.makeSpan(["fix"],[]),i=q.makeSpan([t.alignment],[n,r],e),s=q.makeSpan(["strut"]);return s.style.height=Te(i.height+i.depth),i.depth&&(s.style.verticalAlign=Te(-i.depth)),i.children.unshift(s),i=q.makeSpan(["thinbox"],[i],e),q.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var n=new me.MathNode("mpadded",[on(t.body,e)]);if(t.alignment!=="rlap"){var r=t.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});Ne({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:n,parser:r}=t,i=r.mode;r.switchMode("math");var s=n==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}});Ne({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ge("Mismatched "+t.funcName)}});var TB=(t,e)=>{switch(e.style.size){case rt.DISPLAY.size:return t.display;case rt.TEXT.size:return t.text;case rt.SCRIPT.size:return t.script;case rt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Ne({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"mathchoice",mode:n.mode,display:Gn(e[0]),text:Gn(e[1]),script:Gn(e[2]),scriptscript:Gn(e[3])}},htmlBuilder:(t,e)=>{var n=TB(t,e),r=hr(n,e,!1);return q.makeFragment(r)},mathmlBuilder:(t,e)=>{var n=TB(t,e);return Au(n,e)}});var WY=(t,e,n,r,i,s,o)=>{t=q.makeSpan([],[t]);var l=n&&Ze.isCharacterBox(n),a,c;if(e){var u=Lt(e,r.havingStyle(i.sup()),r);c={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(n){var h=Lt(n,r.havingStyle(i.sub()),r);a={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-h.height)}}var d;if(c&&a){var f=r.fontMetrics().bigOpSpacing5+a.elem.height+a.elem.depth+a.kern+t.depth+o;d=q.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:Te(-s)},{type:"kern",size:a.kern},{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Te(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(a){var p=t.height-o;d=q.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:a.elem,marginLeft:Te(-s)},{type:"kern",size:a.kern},{type:"elem",elem:t}]},r)}else if(c){var m=t.depth+o;d=q.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:t},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Te(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return t;var y=[d];if(a&&s!==0&&!l){var g=q.makeSpan(["mspace"],[],r);g.style.marginRight=Te(s),y.unshift(g)}return q.makeSpan(["mop","op-limits"],y,r)},qY=["\\smallint"],hp=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=yt(t.base,"op"),i=!0):s=yt(t,"op");var o=e.style,l=!1;o.size===rt.DISPLAY.size&&s.symbol&&!Ze.contains(qY,s.name)&&(l=!0);var a;if(s.symbol){var c=l?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),a=q.makeSymbol(s.name,c,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var h=a.italic,d=q.staticSvg(u+"Size"+(l?"2":"1"),e);a=q.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:d,shift:l?.08:0}]},e),s.name="\\"+u,a.classes.unshift("mop"),a.italic=h}}else if(s.body){var f=hr(s.body,e,!0);f.length===1&&f[0]instanceof io?(a=f[0],a.classes[0]="mop"):a=q.makeSpan(["mop"],f,e)}else{for(var p=[],m=1;m<s.name.length;m++)p.push(q.mathsym(s.name[m],s.mode,e));a=q.makeSpan(["mop"],p,e)}var y=0,g=0;return(a instanceof io||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(y=(a.height-a.depth)/2-e.fontMetrics().axisHeight,g=a.italic),i?WY(a,n,r,e,o,g,y):(y&&(a.style.position="relative",a.style.top=Te(y)),a)},uv=(t,e)=>{var n;if(t.symbol)n=new ws("mo",[so(t.name,t.mode)]),Ze.contains(qY,t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new ws("mo",Zi(t.body,e));else{n=new ws("mi",[new Tl(t.name.slice(1))]);var r=new ws("mo",[so("","text")]);t.parentIsSupSub?n=new ws("mrow",[n,r]):n=wY([n,r])}return n},jSe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Ne({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=r;return i.length===1&&(i=jSe[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:hp,mathmlBuilder:uv});Ne({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Gn(r)}},htmlBuilder:hp,mathmlBuilder:uv});var HSe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Ne({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:hp,mathmlBuilder:uv});Ne({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:hp,mathmlBuilder:uv});Ne({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t,r=n;return r.length===1&&(r=HSe[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:hp,mathmlBuilder:uv});var UY=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=yt(t.base,"operatorname"),i=!0):s=yt(t,"operatorname");var o;if(s.body.length>0){for(var l=s.body.map(h=>{var d=h.text;return typeof d=="string"?{type:"textord",mode:h.mode,text:d}:h}),a=hr(l,e.withFont("mathrm"),!0),c=0;c<a.length;c++){var u=a[c];u instanceof io&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=q.makeSpan(["mop"],a,e)}else o=q.makeSpan(["mop"],[],e);return i?WY(o,n,r,e,e.style,0,0):o},VSe=(t,e)=>{for(var n=Zi(t.body,e.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var s=n[i];if(!(s instanceof me.SpaceNode))if(s instanceof me.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof me.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var l=n.map(u=>u.toText()).join("");n=[new me.TextNode(l)]}var a=new me.MathNode("mi",n);a.setAttribute("mathvariant","normal");var c=new me.MathNode("mo",[so("","text")]);return t.parentIsSupSub?new me.MathNode("mrow",[a,c]):me.newDocumentFragment([a,c])};Ne({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"operatorname",mode:n.mode,body:Gn(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:UY,mathmlBuilder:VSe});M("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Md({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?q.makeFragment(hr(t.body,e,!1)):q.makeSpan(["mord"],hr(t.body,e,!0),e)},mathmlBuilder(t,e){return Au(t.body,e,!0)}});Ne({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:n}=t,r=e[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(t,e){var n=Lt(t.body,e.havingCrampedStyle()),r=q.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return q.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var n=new me.MathNode("mo",[new me.TextNode("")]);n.setAttribute("stretchy","true");var r=new me.MathNode("mover",[on(t.body,e),n]);return r.setAttribute("accent","true"),r}});Ne({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"phantom",mode:n.mode,body:Gn(r)}},htmlBuilder:(t,e)=>{var n=hr(t.body,e.withPhantom(),!1);return q.makeFragment(n)},mathmlBuilder:(t,e)=>{var n=Zi(t.body,e);return new me.MathNode("mphantom",n)}});Ne({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=q.makeSpan([],[Lt(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),q.makeSpan(["mord"],[n],e)},mathmlBuilder:(t,e)=>{var n=Zi(Gn(t.body),e),r=new me.MathNode("mphantom",n),i=new me.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});Ne({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=q.makeSpan(["inner"],[Lt(t.body,e.withPhantom())]),r=q.makeSpan(["fix"],[]);return q.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:(t,e)=>{var n=Zi(Gn(t.body),e),r=new me.MathNode("mphantom",n),i=new me.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});Ne({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t,r=yt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(t,e){var n=Lt(t.body,e),r=Rn(t.dy,e);return q.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){var n=new me.MathNode("mpadded",[on(t.body,e)]),r=t.dy.number+t.dy.unit;return n.setAttribute("voffset",r),n}});Ne({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Ne({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,n){var{parser:r}=t,i=n[0],s=yt(e[0],"size"),o=yt(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&yt(i,"size").value,width:s.value,height:o.value}},htmlBuilder(t,e){var n=q.makeSpan(["mord","rule"],[],e),r=Rn(t.width,e),i=Rn(t.height,e),s=t.shift?Rn(t.shift,e):0;return n.style.borderRightWidth=Te(r),n.style.borderTopWidth=Te(i),n.style.bottom=Te(s),n.width=r,n.height=i+s,n.depth=-s,n.maxFontSize=i*1.125*e.sizeMultiplier,n},mathmlBuilder(t,e){var n=Rn(t.width,e),r=Rn(t.height,e),i=t.shift?Rn(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new me.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",Te(n)),o.setAttribute("height",Te(r));var l=new me.MathNode("mpadded",[o]);return i>=0?l.setAttribute("height",Te(i)):(l.setAttribute("height",Te(i)),l.setAttribute("depth",Te(-i))),l.setAttribute("voffset",Te(i)),l}});function GY(t,e,n){for(var r=hr(t,e,!1),i=e.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(n)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+n.size),r[s].height*=i,r[s].depth*=i}return q.makeFragment(r)}var MB=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],WSe=(t,e)=>{var n=e.havingSize(t.size);return GY(t.body,n,e)};Ne({type:"sizing",names:MB,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:MB.indexOf(r)+1,body:s}},htmlBuilder:WSe,mathmlBuilder:(t,e)=>{var n=e.havingSize(t.size),r=Zi(t.body,n),i=new me.MathNode("mstyle",r);return i.setAttribute("mathsize",Te(n.sizeMultiplier)),i}});Ne({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,n)=>{var{parser:r}=t,i=!1,s=!1,o=n[0]&&yt(n[0],"ordgroup");if(o)for(var l="",a=0;a<o.body.length;++a){var c=o.body[a];if(l=c.text,l==="t")i=!0;else if(l==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var u=e[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:s}},htmlBuilder:(t,e)=>{var n=q.makeSpan([],[Lt(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var s=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return q.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var n=new me.MathNode("mpadded",[on(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}});Ne({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r}=t,i=n[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(t,e){var n=Lt(t.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=q.wrapFragment(n,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<rt.TEXT.id&&(s=e.fontMetrics().xHeight);var o=i+s/4,l=n.height+n.depth+o+i,{span:a,ruleWidth:c,advanceWidth:u}=Ia.sqrtImage(l,e),h=a.height-c;h>n.height+n.depth+o&&(o=(o+h-n.height-n.depth)/2);var d=a.height-n.height-o-c;n.style.paddingLeft=Te(u);var f=q.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+d)},{type:"elem",elem:a},{type:"kern",size:c}]},e);if(t.index){var p=e.havingStyle(rt.SCRIPTSCRIPT),m=Lt(t.index,p,e),y=.6*(f.height-f.depth),g=q.makeVList({positionType:"shift",positionData:-y,children:[{type:"elem",elem:m}]},e),v=q.makeSpan(["root"],[g]);return q.makeSpan(["mord","sqrt"],[v,f],e)}else return q.makeSpan(["mord","sqrt"],[f],e)},mathmlBuilder(t,e){var{body:n,index:r}=t;return r?new me.MathNode("mroot",[on(n,e),on(r,e)]):new me.MathNode("msqrt",[on(n,e)])}});var EB={display:rt.DISPLAY,text:rt.TEXT,script:rt.SCRIPT,scriptscript:rt.SCRIPTSCRIPT};Ne({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!0,n),o=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(t,e){var n=EB[t.style],r=e.havingStyle(n).withFont("");return GY(t.body,r,e)},mathmlBuilder(t,e){var n=EB[t.style],r=e.havingStyle(n),i=Zi(t.body,r),s=new me.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=o[t.style];return s.setAttribute("scriptlevel",l[0]),s.setAttribute("displaystyle",l[1]),s}});var qSe=function(e,n){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(n.style.size===rt.DISPLAY.size||r.alwaysHandleSupSub);return i?hp:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(n.style.size===rt.DISPLAY.size||r.limits);return s?UY:null}else{if(r.type==="accent")return Ze.isCharacterBox(r.base)?rE:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?VY:null}else return null}else return null};Md({type:"supsub",htmlBuilder(t,e){var n=qSe(t,e);if(n)return n(t,e);var{base:r,sup:i,sub:s}=t,o=Lt(r,e),l,a,c=e.fontMetrics(),u=0,h=0,d=r&&Ze.isCharacterBox(r);if(i){var f=e.havingStyle(e.style.sup());l=Lt(i,f,e),d||(u=o.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(s){var p=e.havingStyle(e.style.sub());a=Lt(s,p,e),d||(h=o.depth+p.fontMetrics().subDrop*p.sizeMultiplier/e.sizeMultiplier)}var m;e.style===rt.DISPLAY?m=c.sup1:e.style.cramped?m=c.sup3:m=c.sup2;var y=e.sizeMultiplier,g=Te(.5/c.ptPerEm/y),v=null;if(a){var w=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof io||w)&&(v=Te(-o.italic))}var S;if(l&&a){u=Math.max(u,m,l.depth+.25*c.xHeight),h=Math.max(h,c.sub2);var _=c.defaultRuleThickness,C=4*_;if(u-l.depth-(a.height-h)<C){h=C-(u-l.depth)+a.height;var T=.8*c.xHeight-(u-l.depth);T>0&&(u+=T,h-=T)}var I=[{type:"elem",elem:a,shift:h,marginRight:g,marginLeft:v},{type:"elem",elem:l,shift:-u,marginRight:g}];S=q.makeVList({positionType:"individualShift",children:I},e)}else if(a){h=Math.max(h,c.sub1,a.height-.8*c.xHeight);var L=[{type:"elem",elem:a,marginLeft:v,marginRight:g}];S=q.makeVList({positionType:"shift",positionData:h,children:L},e)}else if(l)u=Math.max(u,m,l.depth+.25*c.xHeight),S=q.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:l,marginRight:g}]},e);else throw new Error("supsub must have either sup or sub.");var N=eC(o,"right")||"mord";return q.makeSpan([N],[o,q.makeSpan(["msupsub"],[S])],e)},mathmlBuilder(t,e){var n=!1,r,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(n=!0,r=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[on(t.base,e)];t.sub&&s.push(on(t.sub,e)),t.sup&&s.push(on(t.sup,e));var o;if(n)o=r?"mover":"munder";else if(t.sub)if(t.sup){var c=t.base;c&&c.type==="op"&&c.limits&&e.style===rt.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===rt.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var a=t.base;a&&a.type==="op"&&a.limits&&(e.style===rt.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===rt.DISPLAY)?o="munder":o="msub"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===rt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===rt.DISPLAY)?o="mover":o="msup"}return new me.MathNode(o,s)}});Md({type:"atom",htmlBuilder(t,e){return q.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var n=new me.MathNode("mo",[so(t.text,t.mode)]);if(t.family==="bin"){var r=tE(t,e);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else t.family==="punct"?n.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&n.setAttribute("stretchy","false");return n}});var KY={mi:"italic",mn:"normal",mtext:"normal"};Md({type:"mathord",htmlBuilder(t,e){return q.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var n=new me.MathNode("mi",[so(t.text,t.mode,e)]),r=tE(t,e)||"italic";return r!==KY[n.type]&&n.setAttribute("mathvariant",r),n}});Md({type:"textord",htmlBuilder(t,e){return q.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var n=so(t.text,t.mode,e),r=tE(t,e)||"normal",i;return t.mode==="text"?i=new me.MathNode("mtext",[n]):/[0-9]/.test(t.text)?i=new me.MathNode("mn",[n]):t.text==="\\prime"?i=new me.MathNode("mo",[n]):i=new me.MathNode("mi",[n]),r!==KY[i.type]&&i.setAttribute("mathvariant",r),i}});var h7={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},d7={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Md({type:"spacing",htmlBuilder(t,e){if(d7.hasOwnProperty(t.text)){var n=d7[t.text].className||"";if(t.mode==="text"){var r=q.makeOrd(t,e,"textord");return r.classes.push(n),r}else return q.makeSpan(["mspace",n],[q.mathsym(t.text,t.mode,e)],e)}else{if(h7.hasOwnProperty(t.text))return q.makeSpan(["mspace",h7[t.text]],[],e);throw new ge('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var n;if(d7.hasOwnProperty(t.text))n=new me.MathNode("mtext",[new me.TextNode("")]);else{if(h7.hasOwnProperty(t.text))return new me.MathNode("mspace");throw new ge('Unknown type of space "'+t.text+'"')}return n}});var OB=()=>{var t=new me.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};Md({type:"tag",mathmlBuilder(t,e){var n=new me.MathNode("mtable",[new me.MathNode("mtr",[OB(),new me.MathNode("mtd",[Au(t.body,e)]),OB(),new me.MathNode("mtd",[Au(t.tag,e)])])]);return n.setAttribute("width","100%"),n}});var NB={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},IB={"\\textbf":"textbf","\\textmd":"textmd"},USe={"\\textit":"textit","\\textup":"textup"},PB=(t,e)=>{var n=t.font;if(n){if(NB[n])return e.withTextFontFamily(NB[n]);if(IB[n])return e.withTextFontWeight(IB[n]);if(n==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(USe[n])};Ne({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"text",mode:n.mode,body:Gn(i),font:r}},htmlBuilder(t,e){var n=PB(t,e),r=hr(t.body,n,!0);return q.makeSpan(["mord","text"],r,n)},mathmlBuilder(t,e){var n=PB(t,e);return Au(t.body,n)}});Ne({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=Lt(t.body,e),r=q.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=q.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},e);return q.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var n=new me.MathNode("mo",[new me.TextNode("")]);n.setAttribute("stretchy","true");var r=new me.MathNode("munder",[on(t.body,e),n]);return r.setAttribute("accentunder","true"),r}});Ne({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=Lt(t.body,e),r=e.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return q.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){return new me.MathNode("mpadded",[on(t.body,e)],["vcenter"])}});Ne({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,n){throw new ge("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var n=RB(t),r=[],i=e.havingStyle(e.style.text()),s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),r.push(q.makeSymbol(o,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return q.makeSpan(["mord","text"].concat(i.sizingClasses(e)),q.tryCombineChars(r),i)},mathmlBuilder(t,e){var n=new me.TextNode(RB(t)),r=new me.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var RB=t=>t.body.replace(/ /g,t.star?"":""),Xc=yY,JY=`[ \r
	]`,GSe="\\\\[a-zA-Z@]+",KSe="\\\\[^\uD800-\uDFFF]",JSe="("+GSe+")"+JY+"*",YSe=`\\\\(
|[ \r	]+
?)[ \r	]*`,iC="[-]",XSe=new RegExp(iC+"+$"),QSe="("+JY+"+)|"+(YSe+"|")+"([!-\\[\\]---]"+(iC+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(iC+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+JSe)+("|"+KSe+")");class DB{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(QSe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new Xs("EOF",new ms(this,n,n));var r=this.tokenRegex.exec(e);if(r===null||r.index!==n)throw new ge("Unexpected character: '"+e[n]+"'",new Xs(e[n],new ms(this,n,n+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Xs(i,new ms(this,n,this.tokenRegex.lastIndex))}}class ZSe{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ge("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var e9e=$Y;M("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});M("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});M("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});M("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});M("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var n=t.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});M("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");M("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var LB={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};M("\\char",function(t){var e=t.popToken(),n,r="";if(e.text==="'")n=8,e=t.popToken();else if(e.text==='"')n=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ge("\\char` missing argument");r=e.text.charCodeAt(0)}else n=10;if(n){if(r=LB[e.text],r==null||r>=n)throw new ge("Invalid base-"+n+" digit "+e.text);for(var i;(i=LB[t.future().text])!=null&&i<n;)r*=n,r+=i,t.popToken()}return"\\@char{"+r+"}"});var hE=(t,e,n,r)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new ge("\\newcommand's first argument must be a macro name");var s=i[0].text,o=t.isDefined(s);if(o&&!e)throw new ge("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!n)throw new ge("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var l=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var a="",c=t.expandNextToken();c.text!=="]"&&c.text!=="EOF";)a+=c.text,c=t.expandNextToken();if(!a.match(/^\s*[0-9]+\s*$/))throw new ge("Invalid number of arguments: "+a);l=parseInt(a),i=t.consumeArg().tokens}return o&&r||t.macros.set(s,{tokens:i,numArgs:l}),""};M("\\newcommand",t=>hE(t,!1,!0,!1));M("\\renewcommand",t=>hE(t,!0,!1,!1));M("\\providecommand",t=>hE(t,!0,!0,!0));M("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""});M("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""});M("\\show",t=>{var e=t.popToken(),n=e.text;return console.log(e,t.macros.get(n),Xc[n],pn.math[n],pn.text[n]),""});M("\\bgroup","{");M("\\egroup","}");M("~","\\nobreakspace");M("\\lq","`");M("\\rq","'");M("\\aa","\\r a");M("\\AA","\\r A");M("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");M("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");M("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");M("","\\mathscr{B}");M("","\\mathscr{E}");M("","\\mathscr{F}");M("","\\mathscr{H}");M("","\\mathscr{I}");M("","\\mathscr{L}");M("","\\mathscr{M}");M("","\\mathscr{R}");M("","\\mathfrak{C}");M("","\\mathfrak{H}");M("","\\mathfrak{Z}");M("\\Bbbk","\\Bbb{k}");M("","\\cdotp");M("\\llap","\\mathllap{\\textrm{#1}}");M("\\rlap","\\mathrlap{\\textrm{#1}}");M("\\clap","\\mathclap{\\textrm{#1}}");M("\\mathstrut","\\vphantom{(}");M("\\underbar","\\underline{\\text{#1}}");M("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');M("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");M("\\ne","\\neq");M("","\\neq");M("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");M("","\\notin");M("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");M("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");M("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");M("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");M("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");M("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");M("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");M("","\\perp");M("","\\mathclose{!\\mkern-0.8mu!}");M("","\\notni");M("","\\ulcorner");M("","\\urcorner");M("","\\llcorner");M("","\\lrcorner");M("","\\copyright");M("","\\textregistered");M("","\\textregistered");M("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');M("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');M("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');M("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');M("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");M("","\\vdots");M("\\varGamma","\\mathit{\\Gamma}");M("\\varDelta","\\mathit{\\Delta}");M("\\varTheta","\\mathit{\\Theta}");M("\\varLambda","\\mathit{\\Lambda}");M("\\varXi","\\mathit{\\Xi}");M("\\varPi","\\mathit{\\Pi}");M("\\varSigma","\\mathit{\\Sigma}");M("\\varUpsilon","\\mathit{\\Upsilon}");M("\\varPhi","\\mathit{\\Phi}");M("\\varPsi","\\mathit{\\Psi}");M("\\varOmega","\\mathit{\\Omega}");M("\\substack","\\begin{subarray}{c}#1\\end{subarray}");M("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");M("\\boxed","\\fbox{$\\displaystyle{#1}$}");M("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");M("\\implies","\\DOTSB\\;\\Longrightarrow\\;");M("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");M("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");M("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var BB={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};M("\\dots",function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in BB?e=BB[n]:(n.slice(0,4)==="\\not"||n in pn.math&&Ze.contains(["bin","rel"],pn.math[n].group))&&(e="\\dotsb"),e});var dE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};M("\\dotso",function(t){var e=t.future().text;return e in dE?"\\ldots\\,":"\\ldots"});M("\\dotsc",function(t){var e=t.future().text;return e in dE&&e!==","?"\\ldots\\,":"\\ldots"});M("\\cdots",function(t){var e=t.future().text;return e in dE?"\\@cdots\\,":"\\@cdots"});M("\\dotsb","\\cdots");M("\\dotsm","\\cdots");M("\\dotsi","\\!\\cdots");M("\\dotsx","\\ldots\\,");M("\\DOTSI","\\relax");M("\\DOTSB","\\relax");M("\\DOTSX","\\relax");M("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");M("\\,","\\tmspace+{3mu}{.1667em}");M("\\thinspace","\\,");M("\\>","\\mskip{4mu}");M("\\:","\\tmspace+{4mu}{.2222em}");M("\\medspace","\\:");M("\\;","\\tmspace+{5mu}{.2777em}");M("\\thickspace","\\;");M("\\!","\\tmspace-{3mu}{.1667em}");M("\\negthinspace","\\!");M("\\negmedspace","\\tmspace-{4mu}{.2222em}");M("\\negthickspace","\\tmspace-{5mu}{.277em}");M("\\enspace","\\kern.5em ");M("\\enskip","\\hskip.5em\\relax");M("\\quad","\\hskip1em\\relax");M("\\qquad","\\hskip2em\\relax");M("\\tag","\\@ifstar\\tag@literal\\tag@paren");M("\\tag@paren","\\tag@literal{({#1})}");M("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ge("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});M("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");M("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");M("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");M("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");M("\\newline","\\\\\\relax");M("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var YY=Te(Al["Main-Regular"][84][1]-.7*Al["Main-Regular"][65][1]);M("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+YY+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");M("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+YY+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");M("\\hspace","\\@ifstar\\@hspacer\\@hspace");M("\\@hspace","\\hskip #1\\relax");M("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");M("\\ordinarycolon",":");M("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");M("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');M("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');M("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');M("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');M("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');M("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');M("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');M("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');M("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');M("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');M("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');M("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');M("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');M("","\\dblcolon");M("","\\eqcolon");M("","\\coloneqq");M("","\\eqqcolon");M("","\\Coloneqq");M("\\ratio","\\vcentcolon");M("\\coloncolon","\\dblcolon");M("\\colonequals","\\coloneqq");M("\\coloncolonequals","\\Coloneqq");M("\\equalscolon","\\eqqcolon");M("\\equalscoloncolon","\\Eqqcolon");M("\\colonminus","\\coloneq");M("\\coloncolonminus","\\Coloneq");M("\\minuscolon","\\eqcolon");M("\\minuscoloncolon","\\Eqcolon");M("\\coloncolonapprox","\\Colonapprox");M("\\coloncolonsim","\\Colonsim");M("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");M("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");M("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");M("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");M("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");M("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");M("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");M("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");M("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");M("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");M("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");M("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");M("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");M("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");M("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");M("\\ngeqq","\\html@mathml{\\@ngeqq}{}");M("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");M("\\nleqq","\\html@mathml{\\@nleqq}{}");M("\\nleqslant","\\html@mathml{\\@nleqslant}{}");M("\\nshortmid","\\html@mathml{\\@nshortmid}{}");M("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");M("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");M("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");M("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");M("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");M("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");M("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");M("\\imath","\\html@mathml{\\@imath}{}");M("\\jmath","\\html@mathml{\\@jmath}{}");M("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");M("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");M("","\\llbracket");M("","\\rrbracket");M("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");M("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");M("","\\lBrace");M("","\\rBrace");M("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");M("","\\minuso");M("\\darr","\\downarrow");M("\\dArr","\\Downarrow");M("\\Darr","\\Downarrow");M("\\lang","\\langle");M("\\rang","\\rangle");M("\\uarr","\\uparrow");M("\\uArr","\\Uparrow");M("\\Uarr","\\Uparrow");M("\\N","\\mathbb{N}");M("\\R","\\mathbb{R}");M("\\Z","\\mathbb{Z}");M("\\alef","\\aleph");M("\\alefsym","\\aleph");M("\\Alpha","\\mathrm{A}");M("\\Beta","\\mathrm{B}");M("\\bull","\\bullet");M("\\Chi","\\mathrm{X}");M("\\clubs","\\clubsuit");M("\\cnums","\\mathbb{C}");M("\\Complex","\\mathbb{C}");M("\\Dagger","\\ddagger");M("\\diamonds","\\diamondsuit");M("\\empty","\\emptyset");M("\\Epsilon","\\mathrm{E}");M("\\Eta","\\mathrm{H}");M("\\exist","\\exists");M("\\harr","\\leftrightarrow");M("\\hArr","\\Leftrightarrow");M("\\Harr","\\Leftrightarrow");M("\\hearts","\\heartsuit");M("\\image","\\Im");M("\\infin","\\infty");M("\\Iota","\\mathrm{I}");M("\\isin","\\in");M("\\Kappa","\\mathrm{K}");M("\\larr","\\leftarrow");M("\\lArr","\\Leftarrow");M("\\Larr","\\Leftarrow");M("\\lrarr","\\leftrightarrow");M("\\lrArr","\\Leftrightarrow");M("\\Lrarr","\\Leftrightarrow");M("\\Mu","\\mathrm{M}");M("\\natnums","\\mathbb{N}");M("\\Nu","\\mathrm{N}");M("\\Omicron","\\mathrm{O}");M("\\plusmn","\\pm");M("\\rarr","\\rightarrow");M("\\rArr","\\Rightarrow");M("\\Rarr","\\Rightarrow");M("\\real","\\Re");M("\\reals","\\mathbb{R}");M("\\Reals","\\mathbb{R}");M("\\Rho","\\mathrm{P}");M("\\sdot","\\cdot");M("\\sect","\\S");M("\\spades","\\spadesuit");M("\\sub","\\subset");M("\\sube","\\subseteq");M("\\supe","\\supseteq");M("\\Tau","\\mathrm{T}");M("\\thetasym","\\vartheta");M("\\weierp","\\wp");M("\\Zeta","\\mathrm{Z}");M("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");M("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");M("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");M("\\bra","\\mathinner{\\langle{#1}|}");M("\\ket","\\mathinner{|{#1}\\rangle}");M("\\braket","\\mathinner{\\langle{#1}\\rangle}");M("\\Bra","\\left\\langle#1\\right|");M("\\Ket","\\left|#1\\right\\rangle");var XY=t=>e=>{var n=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var a=h=>d=>{t&&(d.macros.set("|",o),i.length&&d.macros.set("\\|",l));var f=h;if(!h&&i.length){var p=d.future();p.text==="|"&&(d.popToken(),f=!0)}return{tokens:f?i:r,numArgs:0}};e.macros.set("|",a(!1)),i.length&&e.macros.set("\\|",a(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...s,...c,...n]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};M("\\bra@ket",XY(!1));M("\\bra@set",XY(!0));M("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");M("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");M("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");M("\\angln","{\\angl n}");M("\\blue","\\textcolor{##6495ed}{#1}");M("\\orange","\\textcolor{##ffa500}{#1}");M("\\pink","\\textcolor{##ff00af}{#1}");M("\\red","\\textcolor{##df0030}{#1}");M("\\green","\\textcolor{##28ae7b}{#1}");M("\\gray","\\textcolor{gray}{#1}");M("\\purple","\\textcolor{##9d38bd}{#1}");M("\\blueA","\\textcolor{##ccfaff}{#1}");M("\\blueB","\\textcolor{##80f6ff}{#1}");M("\\blueC","\\textcolor{##63d9ea}{#1}");M("\\blueD","\\textcolor{##11accd}{#1}");M("\\blueE","\\textcolor{##0c7f99}{#1}");M("\\tealA","\\textcolor{##94fff5}{#1}");M("\\tealB","\\textcolor{##26edd5}{#1}");M("\\tealC","\\textcolor{##01d1c1}{#1}");M("\\tealD","\\textcolor{##01a995}{#1}");M("\\tealE","\\textcolor{##208170}{#1}");M("\\greenA","\\textcolor{##b6ffb0}{#1}");M("\\greenB","\\textcolor{##8af281}{#1}");M("\\greenC","\\textcolor{##74cf70}{#1}");M("\\greenD","\\textcolor{##1fab54}{#1}");M("\\greenE","\\textcolor{##0d923f}{#1}");M("\\goldA","\\textcolor{##ffd0a9}{#1}");M("\\goldB","\\textcolor{##ffbb71}{#1}");M("\\goldC","\\textcolor{##ff9c39}{#1}");M("\\goldD","\\textcolor{##e07d10}{#1}");M("\\goldE","\\textcolor{##a75a05}{#1}");M("\\redA","\\textcolor{##fca9a9}{#1}");M("\\redB","\\textcolor{##ff8482}{#1}");M("\\redC","\\textcolor{##f9685d}{#1}");M("\\redD","\\textcolor{##e84d39}{#1}");M("\\redE","\\textcolor{##bc2612}{#1}");M("\\maroonA","\\textcolor{##ffbde0}{#1}");M("\\maroonB","\\textcolor{##ff92c6}{#1}");M("\\maroonC","\\textcolor{##ed5fa6}{#1}");M("\\maroonD","\\textcolor{##ca337c}{#1}");M("\\maroonE","\\textcolor{##9e034e}{#1}");M("\\purpleA","\\textcolor{##ddd7ff}{#1}");M("\\purpleB","\\textcolor{##c6b9fc}{#1}");M("\\purpleC","\\textcolor{##aa87ff}{#1}");M("\\purpleD","\\textcolor{##7854ab}{#1}");M("\\purpleE","\\textcolor{##543b78}{#1}");M("\\mintA","\\textcolor{##f5f9e8}{#1}");M("\\mintB","\\textcolor{##edf2df}{#1}");M("\\mintC","\\textcolor{##e0e5cc}{#1}");M("\\grayA","\\textcolor{##f6f7f7}{#1}");M("\\grayB","\\textcolor{##f0f1f2}{#1}");M("\\grayC","\\textcolor{##e3e5e6}{#1}");M("\\grayD","\\textcolor{##d6d8da}{#1}");M("\\grayE","\\textcolor{##babec2}{#1}");M("\\grayF","\\textcolor{##888d93}{#1}");M("\\grayG","\\textcolor{##626569}{#1}");M("\\grayH","\\textcolor{##3b3e40}{#1}");M("\\grayI","\\textcolor{##21242c}{#1}");M("\\kaBlue","\\textcolor{##314453}{#1}");M("\\kaGreen","\\textcolor{##71B307}{#1}");var QY={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class t9e{constructor(e,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new ZSe(e9e,n.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new DB(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:n,end:r}=this.consumeArg());return this.pushToken(new Xs("EOF",r.loc)),this.pushTokens(i),n.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,o=0,l=0;do{if(s=this.popToken(),n.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new ge("Extra }",s)}else if(s.text==="EOF")throw new ge("Unexpected end of input in a macro argument, expected '"+(e&&r?e[l]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[l]==="{")&&s.text===e[l]){if(++l,l===e.length){n.splice(-l,l);break}}else l=0}while(o!==0||r);return i.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:i,end:s}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new ge("The length of delimiters doesn't match the number of args!");for(var r=n[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new ge("Use of the macro doesn't match its definition",s)}}for(var o=[],l=0;l<e;l++)o.push(this.consumeArg(n&&n[l+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ge("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var n=this.popToken(),r=n.text,i=n.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new ge("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var l=s.length-1;l>=0;--l){var a=s[l];if(a.text==="#"){if(l===0)throw new ge("Incomplete placeholder at end of macro body",a);if(a=s[--l],a.text==="#")s.splice(l+1,1);else if(/^[1-9]$/.test(a.text))s.splice(l,2,...o[+a.text-1]);else throw new ge("Not a valid argument number",a)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Xs(e)]):void 0}expandTokens(e){var n=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),n.push(i)}return this.countExpansion(n.length),n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(r=>r.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof n=="function"?n(this):n;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var l=new DB(i,this.settings),a=[],c=l.lex();c.text!=="EOF";)a.push(c),c=l.lex();a.reverse();var u={tokens:a,numArgs:s};return u}return i}isDefined(e){return this.macros.has(e)||Xc.hasOwnProperty(e)||pn.math.hasOwnProperty(e)||pn.text.hasOwnProperty(e)||QY.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:Xc.hasOwnProperty(e)&&!Xc[e].primitive}}var $B=/^[]/,z2=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),f7={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},FB={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class v3{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new t9e(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new ge("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new Xs("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(e,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(v3.endOfExpression.indexOf(i.text)!==-1||n&&i.text===n||e&&Xc[i.text]&&Xc[i.text].infix)break;var s=this.parseAtom(n);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var n=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(n!==-1)throw new ge("only one infix operator per group",e[i].token);n=i,r=e[i].replaceWith}if(n!==-1&&r){var s,o,l=e.slice(0,n),a=e.slice(n+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},a.length===1&&a[0].type==="ordgroup"?o=a[0]:o={type:"ordgroup",mode:this.mode,body:a};var c;return r==="\\\\abovefrac"?c=this.callFunction(r,[s,e[n],o],[]):c=this.callFunction(r,[s,o],[]),[c]}else return e}handleSupSubscript(e){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(e)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new ge("Expected group after '"+r+"'",n);return i}formatUnsupportedCmd(e){for(var n=[],r=0;r<e.length;r++)n.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:n},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var n=this.parseGroup("atom",e);if((n==null?void 0:n.type)==="internal"||this.mode==="text")return n;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(n&&n.type==="op"){var o=s.text==="\\limits";n.limits=o,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=s.text==="\\limits");else throw new ge("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new ge("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new ge("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new ge("Double superscript",s);var l={type:"textord",mode:this.mode,text:"\\prime"},a=[l];for(this.consume();this.fetch().text==="'";)a.push(l),this.consume();this.fetch().text==="^"&&a.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:a}}else if(z2[s.text]){var c=$B.test(s.text),u=[];for(u.push(new Xs(z2[s.text])),this.consume();;){var h=this.fetch().text;if(!z2[h]||$B.test(h)!==c)break;u.unshift(new Xs(z2[h])),this.consume()}var d=this.subparse(u);c?i={type:"ordgroup",mode:"math",body:d}:r={type:"ordgroup",mode:"math",body:d}}else break}return r||i?{type:"supsub",mode:this.mode,base:n,sup:r,sub:i}:n}parseFunction(e,n){var r=this.fetch(),i=r.text,s=Xc[i];if(!s)return null;if(this.consume(),n&&n!=="atom"&&!s.allowedInArgument)throw new ge("Got function '"+i+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!s.allowedInText)throw new ge("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new ge("Can't use function '"+i+"' in math mode",r);var{args:o,optArgs:l}=this.parseArguments(i,s);return this.callFunction(i,o,l,r,e)}callFunction(e,n,r,i,s){var o={funcName:e,parser:this,token:i,breakOnTokenText:s},l=Xc[e];if(l&&l.handler)return l.handler(o,n,r);throw new ge("No function handler for "+e)}parseArguments(e,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<r;o++){var l=n.argTypes&&n.argTypes[o],a=o<n.numOptionalArgs;(n.primitive&&l==null||n.type==="sqrt"&&o===1&&s[0]==null)&&(l="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",l,a);if(a)s.push(c);else if(c!=null)i.push(c);else throw new ge("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new ge("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ge("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new ge("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,n){for(var r=this.fetch(),i=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new ge("Invalid "+n+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new ge("Invalid color: '"+n.text+"'",n);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var n,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!i)throw new ge("Invalid size: '"+n.text+"'",n);var s={number:+(i[1]+i[2]),unit:i[3]};if(!aY(s))throw new ge("Invalid unit: '"+s.unit+"'",n);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,n){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return n&&this.switchMode(i),o}parseGroup(e,n){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,o),a=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:ms.range(r,a),body:l,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(n,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!QY.hasOwnProperty(i)){if(this.settings.throwOnError)throw new ge("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var n=e.length-1,r=0;r<n;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<n&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:ms.range(i,e[r+2]),text:"---"}),n-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:ms.range(i,e[r+1]),text:"--"}),n-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:ms.range(i,e[r+1]),text:s+s}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new ge(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}FB.hasOwnProperty(n[0])&&!pn[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=FB[n[0]]+n.slice(1));var s=XSe.exec(n);s&&(n=n.substring(0,s.index),n==="i"?n="":n==="j"&&(n=""));var o;if(pn[this.mode][n]){this.settings.strict&&this.mode==="math"&&Z9.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var l=pn[this.mode][n].group,a=ms.range(e),c;if(V8e.hasOwnProperty(l)){var u=l;c={type:"atom",mode:this.mode,family:u,loc:a,text:n}}else c={type:l,mode:this.mode,loc:a,text:n};o=c}else if(n.charCodeAt(0)>=128)this.settings.strict&&(lY(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:ms.range(e),text:n};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var d=s[0][h];if(!f7[d])throw new ge("Unknown accent ' "+d+"'",e);var f=f7[d][this.mode]||f7[d].text;if(!f)throw new ge("Accent "+d+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:ms.range(e),label:f,isStretchy:!1,isShifty:!0,base:o}}return o}}v3.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var fE=function(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new v3(e,n);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new ge("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new Xs("\\df@tag")])}]}return i},ZY=function(e,n,r){n.textContent="";var i=pE(e,r).toNode();n.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ZY=function(){throw new ge("KaTeX doesn't work in quirks mode.")});var n9e=function(e,n){var r=pE(e,n).toMarkup();return r},r9e=function(e,n){var r=new JM(n);return fE(e,r)},eX=function(e,n,r){if(r.throwOnError||!(e instanceof ge))throw e;var i=q.makeSpan(["katex-error"],[new io(n)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},pE=function(e,n){var r=new JM(n);try{var i=fE(e,r);return dSe(i,e,r)}catch(s){return eX(s,e,r)}},i9e=function(e,n){var r=new JM(n);try{var i=fE(e,r);return fSe(i,e,r)}catch(s){return eX(s,e,r)}},s9e="0.16.22",o9e={Span:cv,Anchor:QM,SymbolNode:io,SvgNode:Wa,PathNode:_u,LineNode:Q9},tX={version:s9e,render:ZY,renderToString:n9e,ParseError:ge,SETTINGS_SCHEMA:S4,__parse:r9e,__renderToDomTree:pE,__renderToHTMLTree:i9e,__setFontMetrics:D8e,__defineSymbol:x,__defineFunction:Ne,__defineMacro:M,__domTree:o9e},nX=t=>{throw TypeError(t)},mE=(t,e,n)=>e.has(t)||nX("Cannot "+n),ns=(t,e,n)=>(mE(t,e,"read from private field"),n?n.call(t):e.get(t)),tl=(t,e,n)=>e.has(t)?nX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),nl=(t,e,n,r)=>(mE(t,e,"write to private field"),e.set(t,n),n),l9e=(t,e,n)=>(mE(t,e,"access private method"),n),_4,A4,Xm,Qm,T4,Zm,eg,tg,M4,sC,rX;class w3{constructor(e){tl(this,sC),tl(this,_4),tl(this,A4),tl(this,Xm),tl(this,Qm),tl(this,T4),tl(this,Zm),tl(this,eg),tl(this,tg),tl(this,M4),nl(this,Zm,!1),this.onShow=()=>{},this.onHide=()=>{},nl(this,M4,(n,r)=>{const{state:i,composing:s}=n,{selection:o,doc:l}=i,{ranges:a}=o,c=Math.min(...a.map(f=>f.$from.pos)),u=Math.max(...a.map(f=>f.$to.pos)),h=r&&r.doc.eq(l)&&r.selection.eq(o);if(ns(this,Zm)||((ns(this,T4)??n.dom.parentElement??document.body).appendChild(this.element),nl(this,Zm,!0)),s||h)return;if(!ns(this,A4).call(this,n,r)){this.hide();return}Ho({getBoundingClientRect:()=>x5(n,c,u)},this.element,{placement:ns(this,Qm).placement??"top",middleware:[nb(),ku(ns(this,eg)),mD(ns(this,tg)),...ns(this,Xm)]}).then(({x:f,y:p})=>{Object.assign(this.element.style,{left:`${f}px`,top:`${p}px`})}).catch(console.error),this.show()}),this.update=(n,r)=>{O5(ns(this,M4),ns(this,_4))(n,r)},this.destroy=()=>{},this.show=n=>{this.element.dataset.show="true",n&&Ho(n,this.element,{placement:"top",middleware:[nb(),ku(ns(this,eg)),mD(ns(this,tg)),...ns(this,Xm)],...ns(this,Qm)}).then(({x:r,y:i})=>{Object.assign(this.element.style,{left:`${r}px`,top:`${i}px`})}).catch(console.error),this.onShow()},this.hide=()=>{this.element.dataset.show!=="false"&&(this.element.dataset.show="false",this.onHide())},this.element=e.content,nl(this,_4,e.debounce??200),nl(this,A4,e.shouldShow??l9e(this,sC,rX)),nl(this,eg,e.offset),nl(this,tg,e.shift),nl(this,Xm,e.middleware??[]),nl(this,Qm,e.floatingUIOptions??{}),nl(this,T4,e.root),this.element.dataset.show="false"}}_4=new WeakMap;A4=new WeakMap;Xm=new WeakMap;Qm=new WeakMap;T4=new WeakMap;Zm=new WeakMap;eg=new WeakMap;tg=new WeakMap;M4=new WeakMap;sC=new WeakSet;rX=function(t){const{doc:e,selection:n}=t.state,{empty:r,from:i,to:s}=n,o=!e.textBetween(i,s).length&&t.state.selection instanceof qe,l=this.element.contains(document.activeElement),a=!t.hasFocus()&&!l,c=!t.editable;return!(a||r||o||c)};function x3(t){const e=Jt({},`${t}_TOOLTIP_SPEC`),n=dr(i=>{const s=i.get(e.key);return new An({key:new $n(`${t}_TOOLTIP`),...s})}),r=[e,n];return r.key=e.key,r.pluginKey=n.key,e.meta={package:"@milkdown/plugin-tooltip",displayName:`Ctx<tooltipSpec>|${t}`},n.meta={package:"@milkdown/plugin-tooltip",displayName:`Prose<tooltip>|${t}`},r}function a9e(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:s},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:l,mathText:o,mathTextData:l}};function t(a){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},a)}function e(){this.buffer()}function n(){const a=this.resume(),c=this.stack[this.stack.length-1];c.type,c.meta=a}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(a){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(a),u.value=c;const h=u.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function s(a){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},a),this.buffer()}function o(a){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(a),u.value=c,u.data.hChildren.push({type:"text",value:c})}function l(a){this.config.enter.data.call(this,a),this.config.exit.data.call(this,a)}}function c9e(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(s,o,l,a){const c=s.value||"",u=l.createTracker(a),h="$".repeat(Math.max(nq(c,"$")+1,2)),d=l.enter("mathFlow");let f=u.move(h);if(s.meta){const p=l.enter("mathFlowMeta");f+=u.move(l.safe(s.meta,{after:`
`,before:f,encode:["$"],...u.current()})),p()}return f+=u.move(`
`),c&&(f+=u.move(c+`
`)),f+=u.move(h),d(),f}function r(s,o,l){let a=s.value||"",c=1;for(e||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(a);)c++;const u="$".repeat(c);/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^\$|\$$/.test(a))&&(a=" "+a+" ");let h=-1;for(;++h<l.unsafe.length;){const d=l.unsafe[h];if(!d.atBreak)continue;const f=l.compilePattern(d);let p;for(;p=f.exec(a);){let m=p.index;a.codePointAt(m)===10&&a.codePointAt(m-1)===13&&m--,a=a.slice(0,m)+" "+a.slice(p.index+1)}}return u+a+u}function i(){return"$"}}const u9e={tokenize:h9e,concrete:!0,name:"mathFlow"},zB={tokenize:d9e,partial:!0};function h9e(t,e,n){const r=this,i=r.events[r.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let o=0;return l;function l(v){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),a(v)}function a(v){return v===36?(t.consume(v),o++,a):o<2?n(v):(t.exit("mathFlowFenceSequence"),St(t,c,"whitespace")(v))}function c(v){return v===null||Ue(v)?h(v):(t.enter("mathFlowFenceMeta"),t.enter("chunkString",{contentType:"string"}),u(v))}function u(v){return v===null||Ue(v)?(t.exit("chunkString"),t.exit("mathFlowFenceMeta"),h(v)):v===36?n(v):(t.consume(v),u)}function h(v){return t.exit("mathFlowFence"),r.interrupt?e(v):t.attempt(zB,d,y)(v)}function d(v){return t.attempt({tokenize:g,partial:!0},y,f)(v)}function f(v){return(s?St(t,p,"linePrefix",s+1):p)(v)}function p(v){return v===null?y(v):Ue(v)?t.attempt(zB,d,y)(v):(t.enter("mathFlowValue"),m(v))}function m(v){return v===null||Ue(v)?(t.exit("mathFlowValue"),p(v)):(t.consume(v),m)}function y(v){return t.exit("mathFlow"),e(v)}function g(v,w,S){let _=0;return St(v,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C(L){return v.enter("mathFlowFence"),v.enter("mathFlowFenceSequence"),T(L)}function T(L){return L===36?(_++,v.consume(L),T):_<o?S(L):(v.exit("mathFlowFenceSequence"),St(v,I,"whitespace")(L))}function I(L){return L===null||Ue(L)?(v.exit("mathFlowFence"),w(L)):S(L)}}}function d9e(t,e,n){const r=this;return i;function i(o){return o===null?e(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function f9e(t){let n=(t||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:p9e,previous:m9e,name:"mathText"};function r(i,s,o){let l=0,a,c;return u;function u(m){return i.enter("mathText"),i.enter("mathTextSequence"),h(m)}function h(m){return m===36?(i.consume(m),l++,h):l<2&&!n?o(m):(i.exit("mathTextSequence"),d(m))}function d(m){return m===null?o(m):m===36?(c=i.enter("mathTextSequence"),a=0,p(m)):m===32?(i.enter("space"),i.consume(m),i.exit("space"),d):Ue(m)?(i.enter("lineEnding"),i.consume(m),i.exit("lineEnding"),d):(i.enter("mathTextData"),f(m))}function f(m){return m===null||m===32||m===36||Ue(m)?(i.exit("mathTextData"),d(m)):(i.consume(m),f)}function p(m){return m===36?(i.consume(m),a++,p):a===l?(i.exit("mathTextSequence"),i.exit("mathText"),s(m)):(c.type="mathTextData",f(m))}}}function p9e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[n][1].type="mathTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="mathTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function m9e(t){return t!==36||this.events[this.events.length-1][1].type==="characterEscape"}function g9e(t){return{flow:{36:u9e},text:{36:f9e(t)}}}const y9e={};function v9e(t){const e=this,n=t||y9e,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(g9e(n)),s.push(a9e()),o.push(c9e(n))}var w9e=Object.defineProperty,jB=Object.getOwnPropertySymbols,x9e=Object.prototype.hasOwnProperty,b9e=Object.prototype.propertyIsEnumerable,HB=(t,e,n)=>e in t?w9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k9e=(t,e)=>{for(var n in e||(e={}))x9e.call(e,n)&&HB(t,n,e[n]);if(jB)for(var n of jB(e))b9e.call(e,n)&&HB(t,n,e[n]);return t};function Ed(t,e){return Object.assign(t,{meta:k9e({package:"@milkdown/components"},e)}),t}var S9e=Object.defineProperty,VB=Object.getOwnPropertySymbols,C9e=Object.prototype.hasOwnProperty,_9e=Object.prototype.propertyIsEnumerable,WB=(t,e,n)=>e in t?S9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gE=(t,e)=>{for(var n in e||(e={}))C9e.call(e,n)&&WB(t,n,e[n]);if(VB)for(var n of VB(e))_9e.call(e,n)&&WB(t,n,e[n]);return t};const A9e={mode:"preview"},Ga=Jt(gE({},A9e),"linkTooltipStateCtx");Ed(Ga,{displayName:"State<link-tooltip>",group:"LinkTooltip"});const T9e={addLink:()=>{},editLink:()=>{},removeLink:()=>{}},j0=Jt(gE({},T9e),"linkTooltipAPICtx");Ed(Ga,{displayName:"API<link-tooltip>",group:"LinkTooltip"});const M9e={linkIcon:"",editButton:"",removeButton:"",confirmButton:"Confirm ",onCopyLink:()=>{},inputPlaceholder:"Paste link..."},H0=Jt(gE({},M9e),"linkTooltipConfigCtx");Ed(Ga,{displayName:"Config<link-tooltip>",group:"LinkTooltip"});const iX=ut("ToggleLink",t=>()=>e=>{const{doc:n,selection:r}=e,i=Io.type(t);return n.rangeHasMark(r.from,r.to,i)?(t.get(j0.key).removeLink(r.from,r.to),!0):(t.get(j0.key).addLink(r.from,r.to),!0)}),hv=x3("LINK_PREVIEW");Ed(hv[0],{displayName:"PreviewTooltipSpec<link-tooltip>",group:"LinkTooltip"});Ed(hv[1],{displayName:"PreviewTooltipPlugin<link-tooltip>",group:"LinkTooltip"});const b3=x3("LINK_EDIT");Ed(b3[0],{displayName:"EditTooltipSpec<link-tooltip>",group:"LinkTooltip"});Ed(b3[1],{displayName:"EditTooltipPlugin<link-tooltip>",group:"LinkTooltip"});function d1({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}d1.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const E9e=si({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onConfirm:{type:Function,required:!0},onCancel:{type:Function,required:!0}},setup({config:t,src:e,onConfirm:n,onCancel:r}){const i=je(e);o0(e,l=>{i.value=l});const s=()=>{n(i.value)},o=l=>{l.stopPropagation(),l.key==="Enter"&&(l.preventDefault(),s()),l.key==="Escape"&&(l.preventDefault(),r())};return()=>Q("div",{class:"link-edit"},Q("input",{class:"input-area",placeholder:t.value.inputPlaceholder,onKeydown:o,onInput:l=>{i.value=l.target.value},value:i.value}),i.value?Q(d1,{class:"button confirm",icon:t.value.confirmButton,onClick:s}):null)}});var O9e=Object.defineProperty,N9e=Object.defineProperties,I9e=Object.getOwnPropertyDescriptors,qB=Object.getOwnPropertySymbols,P9e=Object.prototype.hasOwnProperty,R9e=Object.prototype.propertyIsEnumerable,sX=t=>{throw TypeError(t)},UB=(t,e,n)=>e in t?O9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j2=(t,e)=>{for(var n in e||(e={}))P9e.call(e,n)&&UB(t,n,e[n]);if(qB)for(var n of qB(e))R9e.call(e,n)&&UB(t,n,e[n]);return t},GB=(t,e)=>N9e(t,I9e(e)),oX=(t,e,n)=>e.has(t)||sX("Cannot "+n),Mn=(t,e,n)=>(oX(t,e,"read from private field"),n?n.call(t):e.get(t)),ta=(t,e,n)=>e.has(t)?sX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Zu=(t,e,n,r)=>(oX(t,e,"write to private field"),e.set(t,n),n),ng,bc,kc,E4,rg,O4,fh,oC,N4;const KB={from:-1,to:-1,mark:null};class D9e{constructor(e,n){this.ctx=e,ta(this,ng),ta(this,bc),ta(this,kc,j2({},KB)),ta(this,E4),ta(this,rg),ta(this,O4,je("")),ta(this,fh,()=>{Mn(this,bc).hide(),this.ctx.update(Ga.key,s=>GB(j2({},s),{mode:"preview"})),Zu(this,kc,j2({},KB))}),ta(this,oC,s=>{const o=this.ctx.get(hn),{from:l,to:a,mark:c}=Mn(this,kc),u=Io.type(this.ctx),h=Uo.sanitize(s);if(c&&c.attrs.href===h){Mn(this,fh).call(this);return}const d=o.state.tr;c&&d.removeMark(l,a,c),d.addMark(l,a,u.create({href:h})),o.dispatch(d),Mn(this,fh).call(this)}),ta(this,N4,(s,o,l)=>{const a=this.ctx.get(H0.key);Mn(this,rg).value=a,Mn(this,O4).value=s,this.ctx.update(Ga.key,u=>GB(j2({},u),{mode:"edit"}));const c=this.ctx.get(hn);c.dispatch(c.state.tr.setSelection(qe.create(c.state.doc,o,l))),Mn(this,bc).show({getBoundingClientRect:()=>x5(c,o,l)}),requestAnimationFrame(()=>{var u;(u=Mn(this,ng).querySelector("input"))==null||u.focus()})}),this.update=s=>{const{state:o}=s,{selection:l}=o;if(!(l instanceof qe))return;const{from:a,to:c}=l;a===Mn(this,kc).from&&c===Mn(this,kc).to||Mn(this,fh).call(this)},this.destroy=()=>{Mn(this,E4).unmount(),Mn(this,bc).destroy(),Mn(this,ng).remove()},this.addLink=(s,o)=>{Zu(this,kc,{from:s,to:o,mark:null}),Mn(this,N4).call(this,"",s,o)},this.editLink=(s,o,l)=>{Zu(this,kc,{from:o,to:l,mark:s}),Mn(this,N4).call(this,s.attrs.href,o,l)},this.removeLink=(s,o)=>{const l=this.ctx.get(hn),a=l.state.tr;a.removeMark(s,o,Io.type(this.ctx)),l.dispatch(a),Mn(this,fh).call(this)},Zu(this,rg,je(this.ctx.get(H0.key)));const r=document.createElement("div");r.className="milkdown-link-edit";const i=qo(E9e,{config:Mn(this,rg),src:Mn(this,O4),onConfirm:Mn(this,oC),onCancel:Mn(this,fh)});i.mount(r),Zu(this,E4,i),Zu(this,ng,r),Zu(this,bc,new w3({content:r,debounce:0,shouldShow:()=>!1})),Mn(this,bc).onHide=()=>{requestAnimationFrame(()=>{n.dom.focus({preventScroll:!0})})},Mn(this,bc).update(n)}}ng=new WeakMap;bc=new WeakMap;kc=new WeakMap;E4=new WeakMap;rg=new WeakMap;O4=new WeakMap;fh=new WeakMap;oC=new WeakMap;N4=new WeakMap;var L9e=Object.defineProperty,B9e=Object.defineProperties,$9e=Object.getOwnPropertyDescriptors,JB=Object.getOwnPropertySymbols,F9e=Object.prototype.hasOwnProperty,z9e=Object.prototype.propertyIsEnumerable,YB=(t,e,n)=>e in t?L9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j9e=(t,e)=>{for(var n in e||(e={}))F9e.call(e,n)&&YB(t,n,e[n]);if(JB)for(var n of JB(e))z9e.call(e,n)&&YB(t,n,e[n]);return t},H9e=(t,e)=>B9e(t,$9e(e));function V9e(t){let e;t.update(j0.key,n=>H9e(j9e({},n),{addLink:(r,i)=>{e==null||e.addLink(r,i)},editLink:(r,i,s)=>{e==null||e.editLink(r,i,s)},removeLink:(r,i)=>{e==null||e.removeLink(r,i)}})),t.set(b3.key,{view:n=>(e=new D9e(t,n),e)})}function W9e(t,e,n,r,i){let s={start:-1,end:-1};return n.nodesBetween(r,i,(o,l)=>{if(s.start>-1)return!1;s.start===-1&&t.isInSet(o.marks)&&e===o&&(s={start:l,end:l+Math.max(o.textContent.length,1)})}),s}function q9e(t,e,n){const r=e.posAtCoords({left:n.clientX,top:n.clientY});if(!r)return;const{pos:i}=r,s=e.state.doc.nodeAt(i);if(!s)return;const o=s.marks.find(a=>a.type===Io.mark.type(t));if(!(!o||!hv.pluginKey()))return{show:!0,pos:i,node:s,mark:o}}const U9e=si({props:{config:{type:Object,required:!0},src:{type:Object,required:!0},onEdit:{type:Object,required:!0},onRemove:{type:Object,required:!0}},setup({config:t,src:e,onEdit:n,onRemove:r}){const i=l=>{l.preventDefault(),l.stopPropagation(),n.value()},s=l=>{l.preventDefault(),l.stopPropagation(),r.value()},o=l=>{l.preventDefault();const a=e.value;navigator.clipboard&&a&&navigator.clipboard.writeText(a).then(()=>{t.value.onCopyLink(a)}).catch(c=>console.error(c))};return()=>Q("div",{class:"link-preview",onPointerdown:o},Q(d1,{class:"link-icon",icon:t.value.linkIcon}),Q("a",{href:e.value,target:"_blank",class:"link-display"},e.value),Q(d1,{class:"button link-edit-button",icon:t.value.editButton,onClick:i}),Q(d1,{class:"button link-remove-button",icon:t.value.removeButton,onClick:s}))}});var lX=t=>{throw TypeError(t)},aX=(t,e,n)=>e.has(t)||lX("Cannot "+n),It=(t,e,n)=>(aX(t,e,"read from private field"),n?n.call(t):e.get(t)),rs=(t,e,n)=>e.has(t)?lX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),eh=(t,e,n,r)=>(aX(t,e,"write to private field"),e.set(t,n),n),ph,mo,ig,sg,I4,P4,R4,og,lg,D4,L4,B4,ag;class G9e{constructor(e,n){this.ctx=e,rs(this,ph),rs(this,mo),rs(this,ig,this.ctx.use(Ga.key)),rs(this,sg),rs(this,I4,je("")),rs(this,P4,je(()=>{})),rs(this,R4,je(()=>{})),rs(this,og),rs(this,lg,!1),rs(this,D4,({mode:r})=>{r==="edit"&&It(this,ag).call(this)}),rs(this,L4,()=>{eh(this,lg,!0)}),rs(this,B4,()=>{eh(this,lg,!1)}),rs(this,ag,()=>{It(this,mo).hide(),It(this,mo).element.removeEventListener("mouseenter",It(this,L4)),It(this,mo).element.removeEventListener("mouseleave",It(this,B4))}),this.show=(r,i,s,o)=>{It(this,sg).value=this.ctx.get(H0.key),It(this,I4).value=r.attrs.href,It(this,P4).value=()=>{this.ctx.get(j0.key).editLink(r,i,s)},It(this,R4).value=()=>{this.ctx.get(j0.key).removeLink(i,s),It(this,ag).call(this)},It(this,mo).show({getBoundingClientRect:()=>o}),It(this,mo).element.addEventListener("mouseenter",It(this,L4)),It(this,mo).element.addEventListener("mouseleave",It(this,B4))},this.hide=()=>{It(this,lg)||It(this,ag).call(this)},this.update=()=>{},this.destroy=()=>{It(this,og).unmount(),It(this,ig).off(It(this,D4)),It(this,mo).destroy(),It(this,ph).remove()},eh(this,sg,je(this.ctx.get(H0.key))),eh(this,og,qo(U9e,{config:It(this,sg),src:It(this,I4),onEdit:It(this,P4),onRemove:It(this,R4)})),eh(this,ph,document.createElement("div")),It(this,ph).className="milkdown-link-preview",It(this,og).mount(It(this,ph)),eh(this,mo,new w3({debounce:0,content:It(this,ph),shouldShow:()=>!1})),It(this,mo).update(n),eh(this,ig,e.use(Ga.key)),It(this,ig).on(It(this,D4))}}ph=new WeakMap;mo=new WeakMap;ig=new WeakMap;sg=new WeakMap;I4=new WeakMap;P4=new WeakMap;R4=new WeakMap;og=new WeakMap;lg=new WeakMap;D4=new WeakMap;L4=new WeakMap;B4=new WeakMap;ag=new WeakMap;function K9e(t){let e;const r=lM((s,o)=>{if(!e||!s.hasFocus()||t.get(Ga.key).mode==="edit")return;const a=q9e(t,s,o);if(a){const c=s.state.doc.resolve(a.pos),u=W9e(a.mark,a.node,s.state.doc,c.before(),c.after()),h=u.start,d=u.end;e.show(a.mark,h,d,x5(s,h,d));return}e.hide()},200),i=()=>{setTimeout(()=>{e==null||e.hide()},200)};t.set(hv.key,{props:{handleDOMEvents:{mousemove:r,mouseleave:i}},view:s=>(e=new G9e(t,s),e)})}function J9e(t){K9e(t),V9e(t)}const Y9e=[Ga,j0,H0,hv,b3,iX].flat();var X9e=Object.defineProperty,XB=Object.getOwnPropertySymbols,Q9e=Object.prototype.hasOwnProperty,Z9e=Object.prototype.propertyIsEnumerable,QB=(t,e,n)=>e in t?X9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eCe=(t,e)=>{for(var n in e||(e={}))Q9e.call(e,n)&&QB(t,n,e[n]);if(XB)for(var n of XB(e))Z9e.call(e,n)&&QB(t,n,e[n]);return t};function cX(t,e){return Object.assign(t,{meta:eCe({package:"@milkdown/components"},e)}),t}const tCe={renderLabel:({label:t,listType:e,checked:n})=>n==null?e==="bullet"?"":t:n?"":""},k3=Jt(tCe,"listItemBlockConfigCtx");cX(k3,{displayName:"Config<list-item-block>",group:"ListItemBlock"});function uX({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}uX.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};const nCe=si({props:{label:{type:Object,required:!0},checked:{type:Object,required:!0},listType:{type:Object,required:!0},config:{type:Object,required:!0},readonly:{type:Object,required:!0},selected:{type:Object,required:!0},setAttr:{type:Function,required:!0},onMount:{type:Function,required:!0}},setup({label:t,checked:e,listType:n,config:r,readonly:i,setAttr:s,onMount:o,selected:l}){const a=d=>{d!=null&&d instanceof Element&&o(d)},c=d=>{d.stopPropagation(),d.preventDefault(),e.value!=null&&s("checked",!e.value)},u=pd(()=>r.renderLabel({label:t.value,listType:n.value,checked:e.value,readonly:i.value})),h=pd(()=>e.value==null?n.value==="bullet"?"bullet":"ordered":e.value?"checked":"unchecked");return()=>Q("li",{class:jr("list-item",l.value&&"ProseMirror-selectednode")},Q("div",{class:"label-wrapper",onPointerdown:c,contenteditable:!1},Q(uX,{class:jr("label",i.value&&"readonly",h.value),icon:u.value})),Q("div",{class:"children",ref:a}))}}),hX=Vy(to.node,t=>(e,n,r)=>{const i=document.createElement("div");i.className="milkdown-list-item-block";const s=document.createElement("div");s.setAttribute("data-content-dom","true"),s.classList.add("content-dom");const o=je(e.attrs.label),l=je(e.attrs.checked),a=je(e.attrs.listType),c=je(!n.editable),u=t.get(k3.key),h=je(!1),d=(v,w)=>{if(!n.editable)return;const S=r();S!=null&&(n.hasFocus()||n.focus(),n.dispatch(n.state.tr.setNodeAttribute(S,v,w)))},f=ip(()=>{h.value?i.classList.add("selected"):i.classList.remove("selected")}),m=qo(nCe,{label:o,checked:l,listType:a,readonly:c,config:u,selected:h,setAttr:d,onMount:v=>{const{anchor:w,head:S}=n.state.selection;v.appendChild(s),requestAnimationFrame(()=>{const _=n.state.doc.resolve(w),C=n.state.doc.resolve(S);n.dispatch(n.state.tr.setSelection(new qe(_,C)))})}});m.mount(i);const y=v=>{a.value=v.attrs.listType,o.value=v.attrs.label,l.value=v.attrs.checked,c.value=!n.editable};y(e);let g=e;return{dom:i,contentDOM:s,update:v=>v.type!==e.type?!1:(v.sameMarkup(g)&&v.content.eq(g.content)||(g=v,y(v)),!0),ignoreMutation:v=>!i||!s?!0:v.type==="selection"?!1:s===v.target&&v.type==="attributes"?!0:!s.contains(v.target),selectNode:()=>{h.value=!0},deselectNode:()=>{h.value=!1},destroy:()=>{f(),m.unmount(),i.remove(),s.remove()}}});cX(hX,{displayName:"NodeView<list-item-block>",group:"ListItemBlock"});const rCe=[k3,hX];var iCe=Object.defineProperty,ZB=Object.getOwnPropertySymbols,sCe=Object.prototype.hasOwnProperty,oCe=Object.prototype.propertyIsEnumerable,e$=(t,e,n)=>e in t?iCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lCe=(t,e)=>{for(var n in e||(e={}))sCe.call(e,n)&&e$(t,n,e[n]);if(ZB)for(var n of ZB(e))oCe.call(e,n)&&e$(t,n,e[n]);return t};function dX(t,e){return Object.assign(t,{meta:lCe({package:"@milkdown/components"},e)}),t}var aCe=Object.defineProperty,t$=Object.getOwnPropertySymbols,cCe=Object.prototype.hasOwnProperty,uCe=Object.prototype.propertyIsEnumerable,n$=(t,e,n)=>e in t?aCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hCe=(t,e)=>{for(var n in e||(e={}))cCe.call(e,n)&&n$(t,n,e[n]);if(t$)for(var n of t$(e))uCe.call(e,n)&&n$(t,n,e[n]);return t};const dCe={renderButton:t=>{switch(t){case"add_row":return"+";case"add_col":return"+";case"delete_row":return"-";case"delete_col":return"-";case"align_col_left":return"left";case"align_col_center":return"center";case"align_col_right":return"right";case"col_drag_handle":return"=";case"row_drag_handle":return"="}}},S3=Jt(hCe({},dCe),"tableBlockConfigCtx");dX(S3,{displayName:"Config<table-block>",group:"TableBlock"});function cl({icon:t,class:e,onClick:n}){return Q("span",{class:jr("milkdown-icon",e),onPointerdown:n,ref:r=>{r&&t&&(r.innerHTML=Uo.sanitize(t.trim()))}})}cl.props={icon:{type:String,required:!1},class:{type:String,required:!1},onClick:{type:Function,required:!1}};function lC(t,e){for(let n=0;n<t.childCount;n++)if(t.child(n)===e)return n;return-1}function fCe(t,e){var n,r,i;if(e)try{const s=e.posAtCoords({left:t.clientX,top:t.clientY});if(!s)return;const o=s==null?void 0:s.inside;if(o==null||o<0)return;const l=e.state.doc.resolve(o),a=e.state.doc.nodeAt(o);if(!a)return;const c=["table_cell","table_header"],u=["table_row","table_header_row"],h=c.includes(a.type.name)?a:(n=Il(y=>c.includes(y.type.name))(l))==null?void 0:n.node,d=(r=Il(y=>u.includes(y.type.name))(l))==null?void 0:r.node,f=(i=Il(y=>y.type.name==="table")(l))==null?void 0:i.node;if(!h||!d||!f)return;const p=lC(d,h);return[lC(f,d),p]}catch{return}}function C3(t,[e,n]){const r=t.value;if(!r)return;const i=r.querySelectorAll("tr"),s=i[e];if(!s)return;const o=i[0];if(!o)return;const l=o.children[n];if(!l)return;const a=s.children[n];if(a)return{row:s,col:a,headerCol:l}}function pCe(t,e,n){if(!n||!e)return;const{selection:r}=e.state;if(!(r instanceof sn))return;const{$from:i}=r,s=op(i);if(!(!s||s.node!==n)){if(r.isColSelection()){const{$head:o}=r,l=o.index(o.depth-1);yE({refs:t,index:[0,l],before:a=>{var c;(c=a.querySelector(".button-group"))==null||c.setAttribute("data-show","true")}});return}if(r.isRowSelection()){const{$head:o}=r,l=Il(c=>c.type.name==="table_row"||c.type.name==="table_header_row")(o);if(!l)return;const a=lC(s.node,l.node);vE({refs:t,index:[a,0],before:c=>{var u;a>0&&((u=c.querySelector(".button-group"))==null||u.setAttribute("data-show","true"))}})}}}function yE({refs:t,index:e,before:n,after:r}){const{contentWrapperRef:i,colHandleRef:s,hoverIndex:o}=t,l=s.value;if(!l)return;o.value=e;const a=C3(i,e);if(!a)return;const{headerCol:c}=a;l.dataset.show="true",n&&n(l),Ho(c,l,{placement:"top"}).then(({x:u,y:h})=>{Object.assign(l.style,{left:`${u}px`,top:`${h}px`}),r&&r(l)}).catch(console.error)}function vE({refs:t,index:e,before:n,after:r}){const{contentWrapperRef:i,rowHandleRef:s,hoverIndex:o}=t,l=s.value;if(!l)return;o.value=e;const a=C3(i,e);if(!a)return;const{row:c}=a;l.dataset.show="true",n&&n(l),Ho(c,l,{placement:"left"}).then(({x:u,y:h})=>{Object.assign(l.style,{left:`${u}px`,top:`${h}px`}),r&&r(l)}).catch(console.error)}function fX(t){const{dragPreviewRef:e,tableWrapperRef:n,contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:l}=t,a=e.value;if(!a)return;const c=n.value;if(!c)return;const u=r.value;if(!u)return;const h=u.querySelector("tbody");if(!h)return;const d=a.querySelector("tbody");if(!d)return;const f=i.value;if(!f)return;const p=s.value;if(!p)return;const m=o.value;if(!m)return;const y=l.value;return y?{preview:a,wrapper:c,content:u,contentRoot:h,previewRoot:d,yHandle:f,xHandle:p,colHandle:m,rowHandle:y}:void 0}function pX(t,e,n,r){const i=n==null?void 0:n.get(hn);if(!(i!=null&&i.editable))return;e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.effectAllowed="move");const s=fX(t);s&&requestAnimationFrame(()=>{r(s)})}function mCe(t,e){return n=>{pX(t,n,e,({preview:r,content:i,previewRoot:s,yHandle:o,xHandle:l,colHandle:a,rowHandle:c})=>{var u;const{hoverIndex:h,dragInfo:d}=t;l.dataset.displayType="indicator",o.dataset.show="false",a.dataset.show="false",(u=c.querySelector(".button-group"))==null||u.setAttribute("data-show","false");const[f]=h.value;d.value={startCoords:[n.clientX,n.clientY],startIndex:f,endIndex:f,type:"row"},r.dataset.direction="vertical";const p=i.querySelectorAll("tr");for(;s.firstChild;)s.removeChild(s.firstChild);const m=p[f];if(!m)return;s.appendChild(m.cloneNode(!0));const y=m.getBoundingClientRect().height,{width:g}=i.querySelector("tbody").getBoundingClientRect();Object.assign(r.style,{width:`${g}px`,height:`${y}px`}),r.dataset.show="true"})}}function gCe(t,e){return n=>{pX(t,n,e,({preview:r,content:i,previewRoot:s,yHandle:o,xHandle:l,colHandle:a,rowHandle:c})=>{var u;const{hoverIndex:h,dragInfo:d}=t;l.dataset.show="false",o.dataset.displayType="indicator",c.dataset.show="false",(u=a.querySelector(".button-group"))==null||u.setAttribute("data-show","false");const[f,p]=h.value;d.value={startCoords:[n.clientX,n.clientY],startIndex:p,endIndex:p,type:"col"},r.dataset.direction="horizontal";const m=i.querySelectorAll("tr");for(;s.firstChild;)s.removeChild(s.firstChild);let y;Array.from(m).forEach(v=>{const w=v.children[p];if(!w)return;y===void 0&&(y=w.getBoundingClientRect().width);const S=w.parentElement.cloneNode(!1),_=w.cloneNode(!0);S.appendChild(_),s.appendChild(S)});const{height:g}=i.querySelector("tbody").getBoundingClientRect();Object.assign(r.style,{width:`${y}px`,height:`${g}px`}),r.dataset.show="true"})}}function yCe(t){return O5(e=>{const n=fX(t);if(!n)return;const{preview:r,content:i,contentRoot:s,xHandle:o,yHandle:l}=n,{dragInfo:a,hoverIndex:c}=t;if(r.dataset.show==="false")return;const u=C3(t.contentWrapperRef,c.value);if(!u)return;const h=s.querySelector("tr");if(!h)return;const d=a.value;if(!d||!s.offsetParent)return;const f=s.offsetParent.offsetTop,p=s.offsetParent.offsetLeft;if(d.type==="col"){const m=u.col.getBoundingClientRect().width,{left:y,width:g}=s.getBoundingClientRect(),v=p-y,w=e.clientX+v-m/2,S=e.clientX+v+m/2,[_]=d.startCoords,C=_<e.clientX?"right":"left";r.style.top=`${f}px`;const T=w<y+v-20?y+v-20:w>y+g+v-m+20?y+g+v-m+20:w;r.style.left=`${T}px`;const I=Array.from(h.children),L=I.find((N,$)=>{const F=N.getBoundingClientRect();let ie=F.left+p-y,Z=F.right+p-y;if(C==="right"){if(ie=ie+F.width/2,Z=Z+F.width/2,ie<=S&&Z>=S||$===h.children.length-1&&S>Z)return!0}else if(ie=ie-F.width/2,Z=Z-F.width/2,ie<=w&&Z>=w||$===0&&w<ie)return!0;return!1});if(L){const N=l.getBoundingClientRect().width,$=i.getBoundingClientRect(),F=I.indexOf(L);d.endIndex=F,Ho(L,l,{placement:C==="left"?"left":"right",middleware:[ku(C==="left"?-1*N:0)]}).then(({x:ie})=>{l.dataset.show="true",Object.assign(l.style,{height:`${$.height}px`,left:`${ie}px`,top:`${f}px`})}).catch(console.error)}}else if(d.type==="row"){const m=u.row.getBoundingClientRect().height,{top:y,height:g}=s.getBoundingClientRect(),v=f-y,w=e.clientY+v-m/2,S=e.clientY+v+m/2,[_,C]=d.startCoords,T=C<e.clientY?"down":"up",I=w<y+v-20?y+v-20:w>y+g+v-m+20?y+g+v-m+20:w;r.style.top=`${I}px`,r.style.left=`${p}px`;const L=Array.from(s.querySelectorAll("tr")),N=L.find(($,F)=>{const ie=$.getBoundingClientRect();let Z=ie.top+f-y,Y=ie.bottom+f-y;if(T==="down"){if(Z=Z+ie.height/2,Y=Y+ie.height/2,Z<=S&&Y>=S||F===L.length-1&&S>Y)return!0}else if(Z=Z-ie.height/2,Y=Y-ie.height/2,Z<=w&&Y>=w||F===0&&w<Z)return!0;return!1});if(N){const $=o.getBoundingClientRect().height,F=i.getBoundingClientRect(),ie=L.indexOf(N);d.endIndex=ie,Ho(N,o,{placement:T==="up"?"top":"bottom",middleware:[ku(T==="up"?-1*$:0)]}).then(({y:Z})=>{o.dataset.show="true",Object.assign(o.style,{width:`${F.width}px`,top:`${Z}px`})}).catch(console.error)}}},20)}function vCe(t,e,n){const{dragPreviewRef:r,yLineHandleRef:i,xLineHandleRef:s,dragInfo:o}=t,l=mCe(t,e),a=gCe(t,e),c=()=>{const d=r.value;if(!d||d.dataset.show==="false")return;const f=d==null?void 0:d.querySelector("tbody");for(;f!=null&&f.firstChild;)f==null||f.removeChild(f.firstChild);d&&(d.dataset.show="false")},u=()=>{var d;const f=r.value;if(!f)return;const p=i.value;if(!p)return;const m=s.value;if(!m)return;const y=o.value;if(!y||!e||f.dataset.show==="false"||!t.colHandleRef.value||!t.rowHandleRef.value||(p.dataset.show="false",m.dataset.show="false",y.startIndex===y.endIndex))return;const w=e.get(ze),S={from:y.startIndex,to:y.endIndex,pos:((d=n==null?void 0:n())!=null?d:0)+1};if(y.type==="col"){w.call(Oh.key,{pos:S.pos,index:y.startIndex}),w.call(bM.key,S);const _=[0,y.endIndex];yE({refs:t,index:_})}else{w.call(Eh.key,{pos:S.pos,index:y.startIndex}),w.call(xM.key,S);const _=[y.endIndex,0];vE({refs:t,index:_})}requestAnimationFrame(()=>{e.get(hn).focus()})},h=yCe(t);return Jy(()=>{window.addEventListener("dragover",h),window.addEventListener("dragend",c),window.addEventListener("drop",u)}),Yy(()=>{window.removeEventListener("dragover",h),window.removeEventListener("dragend",c),window.removeEventListener("drop",u)}),{dragRow:l,dragCol:a}}function wCe(t,e,n){const{xLineHandleRef:r,contentWrapperRef:i,colHandleRef:s,rowHandleRef:o,hoverIndex:l,lineHoverIndex:a}=t;return{onAddRow:()=>{var m,y,g;if(!e)return;const v=r.value;if(!v)return;const[w]=a.value;if(w<0||!e.get(hn).editable)return;const S=Array.from((y=(m=i.value)==null?void 0:m.querySelectorAll("tr"))!=null?y:[]),_=e.get(ze),C=((g=n==null?void 0:n())!=null?g:0)+1;S.length===w?(_.call(Eh.key,{pos:C,index:w-1}),_.call(AM.key)):(_.call(Eh.key,{pos:C,index:w}),_.call(_M.key)),_.call(Eh.key,{pos:C,index:w}),v.dataset.show="false"},onAddCol:()=>{var m,y,g,v;if(!e||!r.value)return;const[S,_]=a.value;if(_<0||!e.get(hn).editable)return;const C=Array.from((g=(y=(m=i.value)==null?void 0:m.querySelector("tr"))==null?void 0:y.children)!=null?g:[]),T=e.get(ze),I=((v=n==null?void 0:n())!=null?v:0)+1;C.length===_?(T.call(Oh.key,{pos:I,index:_-1}),T.call(CM.key)):(T.call(Oh.key,{pos:I,index:_}),T.call(SM.key)),T.call(Oh.key,{pos:I,index:_})},selectCol:()=>{var m,y;if(!e)return;const[g,v]=l.value,w=e.get(ze),S=((m=n==null?void 0:n())!=null?m:0)+1;w.call(Oh.key,{pos:S,index:v});const _=(y=s.value)==null?void 0:y.querySelector(".button-group");_&&(_.dataset.show=_.dataset.show==="true"?"false":"true")},selectRow:()=>{var m,y;if(!e)return;const[g,v]=l.value,w=e.get(ze),S=((m=n==null?void 0:n())!=null?m:0)+1;w.call(Eh.key,{pos:S,index:g});const _=(y=o.value)==null?void 0:y.querySelector(".button-group");_&&g>0&&(_.dataset.show=_.dataset.show==="true"?"false":"true")},deleteSelected:m=>{if(!e||!e.get(hn).editable)return;m.preventDefault(),m.stopPropagation(),e.get(ze).call(kM.key),requestAnimationFrame(()=>{e.get(hn).focus()})},onAlign:m=>y=>{if(!e||!e.get(hn).editable)return;y.preventDefault(),y.stopPropagation(),e.get(ze).call(TM.key,m),requestAnimationFrame(()=>{e.get(hn).focus()})}}}function xCe(t,e){return O5(n=>{if(!(e!=null&&e.editable))return;const{contentWrapperRef:r,yLineHandleRef:i,xLineHandleRef:s,colHandleRef:o,rowHandleRef:l,hoverIndex:a,lineHoverIndex:c}=t,u=i.value;if(!u)return;const h=s.value;if(!h)return;const d=r.value;if(!d)return;const f=l.value;if(!f)return;const p=o.value;if(!p)return;const m=fCe(n,e);if(!m)return;const y=C3(r,m);if(!y)return;const[g,v]=m,w=y.col.getBoundingClientRect(),S=Math.abs(n.clientX-w.left)<8,_=Math.abs(w.right-n.clientX)<8,C=Math.abs(n.clientY-w.top)<8,T=Math.abs(w.bottom-n.clientY)<8,I=S||_||C||T,L=f.querySelector(".button-group"),N=p.querySelector(".button-group");if(L&&(L.dataset.show="false"),N&&(N.dataset.show="false"),I){const $=d.getBoundingClientRect();f.dataset.show="false",p.dataset.show="false",h.dataset.displayType="tool",u.dataset.displayType="tool";const F=u.getBoundingClientRect().width,ie=h.getBoundingClientRect().height;S||_?(c.value[1]=S?v:v+1,Ho(y.col,u,{placement:S?"left":"right",middleware:[ku(S?-1*F:0)]}).then(({x:Z})=>{u.dataset.show="true",Object.assign(u.style,{height:`${$.height}px`,left:`${Z}px`})}).catch(console.error)):u.dataset.show="false",m[0]!==0&&(C||T)?(c.value[0]=C?g:g+1,Ho(y.row,h,{placement:C?"top":"bottom",middleware:[ku(C?-1*ie:0)]}).then(({y:Z})=>{h.dataset.show="true",Object.assign(h.style,{width:`${$.width}px`,top:`${Z}px`})}).catch(console.error)):h.dataset.show="false";return}c.value=[-1,-1],u.dataset.show="false",h.dataset.show="false",f.dataset.show="true",p.dataset.show="true",vE({refs:t,index:m}),yE({refs:t,index:m}),a.value=m},20)}function bCe(t){return()=>{const{rowHandleRef:e,colHandleRef:n,yLineHandleRef:r,xLineHandleRef:i}=t;setTimeout(()=>{const s=e.value;if(!s)return;const o=n.value;if(!o)return;const l=r.value;if(!l)return;const a=i.value;a&&(s.dataset.show="false",o.dataset.show="false",l.dataset.show="false",a.dataset.show="false")},200)}}function kCe(t,e){const n=xCe(t,e),r=bCe(t);return{pointerMove:n,pointerLeave:r}}const SCe=si({props:{view:{type:Object,required:!0},ctx:{type:Object,required:!0},getPos:{type:Function,required:!0},config:{type:Object,required:!0},onMount:{type:Function,required:!0},node:{type:Object,required:!0}},setup({view:t,node:e,ctx:n,getPos:r,config:i,onMount:s}){const o=je(),l=F=>{F!=null&&(F instanceof HTMLElement?(o.value=F,s(F)):o.value=void 0)},a=je(),c=je(),u=je(),h=je(),d=je(),f=je(),p=je([0,0]),m=je([-1,-1]),y=je(),g={dragPreviewRef:f,tableWrapperRef:d,contentWrapperRef:o,yLineHandleRef:h,xLineHandleRef:u,colHandleRef:a,rowHandleRef:c,hoverIndex:p,lineHoverIndex:m,dragInfo:y},{pointerLeave:v,pointerMove:w}=kCe(g,t),{dragRow:S,dragCol:_}=vCe(g,n,r),{onAddRow:C,onAddCol:T,selectCol:I,selectRow:L,deleteSelected:N,onAlign:$}=wCe(g,n,r);return Jy(()=>{requestAnimationFrame(()=>{t.editable&&pCe(g,t,e.value)})}),()=>Q("div",{onDragstart:F=>F.preventDefault(),onDragover:F=>F.preventDefault(),onDragleave:F=>F.preventDefault(),onPointermove:w,onPointerleave:v},Q("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"col-drag-handle",class:"handle cell-handle",onDragstart:_,onClick:I,onPointerdown:F=>F.stopPropagation(),onPointermove:F=>F.stopPropagation(),ref:a},Q(cl,{icon:i.renderButton("col_drag_handle")}),Q("div",{"data-show":"false",class:"button-group",onPointermove:F=>F.stopPropagation()},Q("button",{type:"button",onPointerdown:$("left")},Q(cl,{icon:i.renderButton("align_col_left")})),Q("button",{type:"button",onPointerdown:$("center")},Q(cl,{icon:i.renderButton("align_col_center")})),Q("button",{type:"button",onPointerdown:$("right")},Q(cl,{icon:i.renderButton("align_col_right")})),Q("button",{type:"button",onPointerdown:N},Q(cl,{icon:i.renderButton("delete_col")})))),Q("button",{type:"button","data-show":"false",contenteditable:"false",draggable:"true","data-role":"row-drag-handle",class:"handle cell-handle",onDragstart:S,onClick:L,onPointerdown:F=>F.stopPropagation(),onPointermove:F=>F.stopPropagation(),ref:c},Q(cl,{icon:i.renderButton("row_drag_handle")}),Q("div",{"data-show":"false",class:"button-group",onPointermove:F=>F.stopPropagation()},Q("button",{type:"button",onPointerdown:N},Q(cl,{icon:i.renderButton("delete_row")})))),Q("div",{class:"table-wrapper",ref:d},Q("div",{"data-show":"false",class:"drag-preview","data-direction":"vertical",ref:f},Q("table",null,Q("tbody",null))),Q("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"x-line-drag-handle",class:"handle line-handle",onPointermove:F=>F.stopPropagation(),ref:u},Q("button",{type:"button",onClick:C,class:"add-button"},Q(cl,{icon:i.renderButton("add_row")}))),Q("div",{"data-show":"false",contenteditable:"false","data-display-type":"tool","data-role":"y-line-drag-handle",class:"handle line-handle",onPointermove:F=>F.stopPropagation(),ref:h},Q("button",{type:"button",onClick:T,class:"add-button"},Q(cl,{icon:i.renderButton("add_col")}))),Q("table",{ref:l,class:"children"})))}});var mX=t=>{throw TypeError(t)},CCe=(t,e,n)=>e.has(t)||mX("Cannot "+n),_Ce=(t,e,n)=>e.has(t)?mX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ACe=(t,e,n)=>(CCe(t,e,"access private method"),n),aC,gX;class TCe{constructor(e,n,r,i){this.ctx=e,this.node=n,this.view=r,this.getPos=i,_Ce(this,aC);const s=document.createElement("div");s.className="milkdown-table-block";const o=document.createElement("tbody");this.contentDOM=o,o.setAttribute("data-content-dom","true"),o.classList.add("content-dom"),this.nodeRef=ob(n);const l=qo(SCe,{view:r,ctx:e,getPos:i,config:e.get(S3.key),onMount:a=>{a.appendChild(o)},node:this.nodeRef});l.mount(s),this.app=l,this.dom=s}update(e){return e.type!==this.node.type||e.sameMarkup(this.node)&&e.content.eq(this.node.content)?!1:(this.node=e,this.nodeRef.value=e,!0)}stopEvent(e){if(e.type==="drop"||e.type.startsWith("drag"))return!0;if(e.type==="mousedown"||e.type==="pointerdown"){if(e.target instanceof Element&&e.target.closest("button"))return!0;const n=e.target;if(n instanceof HTMLElement&&(n.closest("th")||n.closest("td"))){const r=e;return ACe(this,aC,gX).call(this,r)}}return!1}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:e.type==="selection"?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}destroy(){this.app.unmount(),this.dom.remove(),this.contentDOM.remove()}}aC=new WeakSet;gX=function(t){const e=this.view;if(!e.editable)return!1;const{state:n,dispatch:r}=e,i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return!1;const s=n.doc.resolve(i.inside),o=Il(c=>c.type.name==="table_cell"||c.type.name==="table_header")(s);if(!o)return!1;if(n.selection instanceof qe){const c=Il(u=>u.type.name==="table_cell"||u.type.name==="table_header")(n.selection.$from);if((c==null?void 0:c.node)===o.node)return!1}const{from:l}=o,a=tt.create(n.doc,l+1);return n.selection.eq(a)?!1:(n.selection instanceof sn?setTimeout(()=>{r(n.tr.setSelection(a).scrollIntoView())},20):requestAnimationFrame(()=>{r(n.tr.setSelection(a).scrollIntoView())}),!0)};const yX=Vy(Td.node,t=>(e,n,r)=>new TCe(t,e,n,r));dX(yX,{displayName:"NodeView<table-block>",group:"TableBlock"});const MCe=[S3,yX];function cC(t){if(!t)return!1;if(Array.isArray(t))return t.length>1?!1:cC(t[0]);const e=t.content;return e?cC(e):t.type==="text"}const vX=dr(t=>{const e=t.get(Oa);t.update(Qg,i=>({...i,editable:i.editable??(()=>!0)}));const n=new $n("MILKDOWN_CLIPBOARD");return new An({key:n,props:{handlePaste:(i,s)=>{var o,l;const a=t.get(Yg),c=(l=(o=i.props).editable)==null?void 0:l.call(o,i.state),{clipboardData:u}=s;if(!c||!u||i.state.selection.$from.node().type.spec.code)return!1;const d=u.getData("text/plain"),f=u.getData("vscode-editor-data");if(f){const w=JSON.parse(f),S=w==null?void 0:w.mode;if(d&&S){const{tr:_}=i.state,C=bfe("code_block",e);return _.replaceSelectionWith(C.create({language:S})).setSelection(qe.near(_.doc.resolve(Math.max(0,_.selection.from-2)))).insertText(d.replace(/\r\n?/g,`
`)),i.dispatch(_),!0}}const p=u.getData("text/html");if(p.length===0&&d.length===0)return!1;const m=od.fromSchema(e);let y;if(p.length===0){const w=a(d);if(!w||typeof w=="string")return!1;y=bd.fromSchema(e).serializeFragment(w.content)}else{const w=document.createElement("template");w.innerHTML=p,y=w.content.cloneNode(!0),w.remove()}const g=m.parseSlice(y),v=wfe(g);return v?(i.dispatch(i.state.tr.replaceSelectionWith(v,!0)),!0):(i.dispatch(i.state.tr.replaceSelection(g)),!0)},clipboardTextSerializer:i=>{const s=t.get(Zf);if(cC(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const l=e.topNodeType.createAndFill(void 0,i.content);return l?s(l):""}}})});vX.meta={displayName:"Prose<clipboard>",package:"@milkdown/plugin-clipboard"};function dp(t,e){return Object.assign(t,{meta:{package:"@milkdown/plugin-history",...e}}),t}const wE=ut("Undo",()=>()=>a3);dp(wE,{displayName:"Command<undo>"});const xE=ut("Redo",()=>()=>B0);dp(xE,{displayName:"Command<redo>"});const bE=Jt({},"historyProviderConfig");dp(bE,{displayName:"Ctx<historyProviderConfig>"});const wX=dr(t=>$ke(t.get(bE.key)));dp(wX,{displayName:"Ctx<historyProviderPlugin>"});const kE=Qi("historyKeymap",{Undo:{shortcuts:"Mod-z",command:t=>{const e=t.get(ze);return()=>e.call(wE.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:t=>{const e=t.get(ze);return()=>e.call(xE.key)}}});dp(kE.ctx,{displayName:"KeymapCtx<history>"});dp(kE.shortcuts,{displayName:"Keymap<history>"});const ECe=[bE,wX,kE,wE,xE].flat();function OCe(t,e){const{doc:n,selection:r}=t;if(!n||!r||!(r instanceof qe||r instanceof Gi))return t;const{to:i}=r,s=e.type==="space"?Array(e.size).fill(" ").join(""):"	";return t.insertText(s,i)}const _3=Jt({type:"space",size:2},"indentConfig");_3.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const xX=xU(t=>({Tab:(e,n)=>{const r=t.get(_3.key),{tr:i}=e,s=OCe(i,r);return s.docChanged?(n==null||n(s),!0):!1}}));xX.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const NCe=[_3,xX];class bX{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=e=>(this.beforeMountedListeners.push(e),this),this.mounted=e=>(this.mountedListeners.push(e),this),this.updated=e=>(this.updatedListeners.push(e),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(e){return this.markdownUpdatedListeners.push(e),this}blur(e){return this.blurListeners.push(e),this}focus(e){return this.focusListeners.push(e),this}destroy(e){return this.destroyListeners.push(e),this}selectionUpdated(e){return this.selectionUpdatedListeners.push(e),this}}const Eb=Pt(new bX,"listener"),ICe=new $n("MILKDOWN_LISTENER"),kX=t=>(t.inject(Eb,new bX),async()=>{await t.wait(jh);const e=t.get(Eb),{listeners:n}=e;n.beforeMount.forEach(a=>a(t)),await t.wait(Xg);const r=t.get(Zf);let i=null,s=null,o=null;const l=new An({key:ICe,view:()=>({destroy:()=>{n.destroy.forEach(a=>a(t))}}),props:{handleDOMEvents:{focus:()=>(n.focus.forEach(a=>a(t)),!1),blur:()=>(n.blur.forEach(a=>a(t)),!1)}},state:{init:(a,c)=>{i=c.doc,s=r(c.doc)},apply:a=>{const c=a.selection;return(!o&&c||o&&!c.eq(o))&&(n.selectionUpdated.forEach(h=>{h(t,c,o)}),o=c),!a.docChanged||a.getMeta("addToHistory")===!1?void 0:lM(()=>{const{doc:h}=a;if(n.updated.length>0&&i&&!i.eq(h)&&n.updated.forEach(d=>{d(t,h,i)}),n.markdownUpdated.length>0&&i&&!i.eq(h)){const d=r(h);n.markdownUpdated.forEach(f=>{f(t,d,s)}),s=d}i=h},200)()}}});t.update(Bl,a=>a.concat(l)),await t.wait(e4),n.mounted.forEach(a=>a(t))});kX.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};const SE=Jt({shouldAppend:t=>!(!t||["heading","paragraph"].includes(t.type.name)),getNode:t=>t.schema.nodes.paragraph.create()},"trailingConfig");SE.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const SX=dr(t=>{const e=new $n("MILKDOWN_TRAILING"),{shouldAppend:n,getNode:r}=t.get(SE.key),i=new An({key:e,state:{init:(s,o)=>{const l=o.tr.doc.lastChild;return n(l,o)},apply:(s,o,l,a)=>{if(!s.docChanged)return o;const c=s.doc.lastChild;return n(c,a)}},appendTransaction:(s,o,l)=>{const{doc:a,tr:c}=l,u=r==null?void 0:r(l),h=i.getState(l),d=a.content.size;if(!(!h||!u))return c.insert(d,u)}});return i});SX.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const PCe=[SE,SX];var Kt=(t=>(t.CodeMirror="code-mirror",t.ListItem="list-item",t.LinkTooltip="link-tooltip",t.Cursor="cursor",t.ImageBlock="image-block",t.BlockEdit="block-edit",t.Toolbar="toolbar",t.Placeholder="placeholder",t.Table="table",t.Latex="latex",t))(Kt||{});const RCe={cursor:!0,"list-item":!0,"link-tooltip":!0,"image-block":!0,"block-edit":!0,placeholder:!0,toolbar:!0,"code-mirror":!0,table:!0,latex:!0},DCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM8.25 16.625C8.0375 16.625 7.85942 16.5531 7.71575 16.4093C7.57192 16.2654 7.5 16.0872 7.5 15.8748C7.5 15.6621 7.57192 15.484 7.71575 15.3405C7.85942 15.1968 8.0375 15.125 8.25 15.125H15.75C15.9625 15.125 16.1406 15.1969 16.2843 15.3408C16.4281 15.4846 16.5 15.6628 16.5 15.8753C16.5 16.0879 16.4281 16.266 16.2843 16.4095C16.1406 16.5532 15.9625 16.625 15.75 16.625H8.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM8.25 8.875C8.0375 8.875 7.85942 8.80308 7.71575 8.65925C7.57192 8.51542 7.5 8.33725 7.5 8.12475C7.5 7.91208 7.57192 7.734 7.71575 7.5905C7.85942 7.44683 8.0375 7.375 8.25 7.375H15.75C15.9625 7.375 16.1406 7.44692 16.2843 7.59075C16.4281 7.73458 16.5 7.91275 16.5 8.12525C16.5 8.33792 16.4281 8.516 16.2843 8.6595C16.1406 8.80317 15.9625 8.875 15.75 8.875H8.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,LCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25ZM4.25 16.625C4.0375 16.625 3.85942 16.5531 3.71575 16.4093C3.57192 16.2654 3.5 16.0872 3.5 15.8748C3.5 15.6621 3.57192 15.484 3.71575 15.3405C3.85942 15.1968 4.0375 15.125 4.25 15.125H13.75C13.9625 15.125 14.1406 15.1969 14.2843 15.3408C14.4281 15.4846 14.5 15.6628 14.5 15.8753C14.5 16.0879 14.4281 16.266 14.2843 16.4095C14.1406 16.5532 13.9625 16.625 13.75 16.625H4.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM4.25 8.875C4.0375 8.875 3.85942 8.80308 3.71575 8.65925C3.57192 8.51542 3.5 8.33725 3.5 8.12475C3.5 7.91208 3.57192 7.734 3.71575 7.5905C3.85942 7.44683 4.0375 7.375 4.25 7.375H13.75C13.9625 7.375 14.1406 7.44692 14.2843 7.59075C14.4281 7.73458 14.5 7.91275 14.5 8.12525C14.5 8.33792 14.4281 8.516 14.2843 8.6595C14.1406 8.80317 13.9625 8.875 13.75 8.875H4.25ZM4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25Z"
    />
  </svg>
`,BCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M4.25 5C4.0375 5 3.85942 4.92808 3.71575 4.78425C3.57192 4.64042 3.5 4.46225 3.5 4.24975C3.5 4.03708 3.57192 3.859 3.71575 3.7155C3.85942 3.57183 4.0375 3.5 4.25 3.5H19.75C19.9625 3.5 20.1406 3.57192 20.2843 3.71575C20.4281 3.85958 20.5 4.03775 20.5 4.25025C20.5 4.46292 20.4281 4.641 20.2843 4.7845C20.1406 4.92817 19.9625 5 19.75 5H4.25ZM10.25 8.875C10.0375 8.875 9.85942 8.80308 9.71575 8.65925C9.57192 8.51542 9.5 8.33725 9.5 8.12475C9.5 7.91208 9.57192 7.734 9.71575 7.5905C9.85942 7.44683 10.0375 7.375 10.25 7.375H19.75C19.9625 7.375 20.1406 7.44692 20.2843 7.59075C20.4281 7.73458 20.5 7.91275 20.5 8.12525C20.5 8.33792 20.4281 8.516 20.2843 8.6595C20.1406 8.80317 19.9625 8.875 19.75 8.875H10.25ZM4.25 12.75C4.0375 12.75 3.85942 12.6781 3.71575 12.5343C3.57192 12.3904 3.5 12.2122 3.5 11.9998C3.5 11.7871 3.57192 11.609 3.71575 11.4655C3.85942 11.3218 4.0375 11.25 4.25 11.25H19.75C19.9625 11.25 20.1406 11.3219 20.2843 11.4658C20.4281 11.6096 20.5 11.7878 20.5 12.0003C20.5 12.2129 20.4281 12.391 20.2843 12.5345C20.1406 12.6782 19.9625 12.75 19.75 12.75H4.25ZM10.25 16.625C10.0375 16.625 9.85942 16.5531 9.71575 16.4093C9.57192 16.2654 9.5 16.0872 9.5 15.8748C9.5 15.6621 9.57192 15.484 9.71575 15.3405C9.85942 15.1968 10.0375 15.125 10.25 15.125H19.75C19.9625 15.125 20.1406 15.1969 20.2843 15.3408C20.4281 15.4846 20.5 15.6628 20.5 15.8753C20.5 16.0879 20.4281 16.266 20.2843 16.4095C20.1406 16.5532 19.9625 16.625 19.75 16.625H10.25ZM4.25 20.5C4.0375 20.5 3.85942 20.4281 3.71575 20.2843C3.57192 20.1404 3.5 19.9622 3.5 19.7498C3.5 19.5371 3.57192 19.359 3.71575 19.2155C3.85942 19.0718 4.0375 19 4.25 19H19.75C19.9625 19 20.1406 19.0719 20.2843 19.2158C20.4281 19.3596 20.5 19.5378 20.5 19.7502C20.5 19.9629 20.4281 20.141 20.2843 20.2845C20.1406 20.4282 19.9625 20.5 19.75 20.5H4.25Z"
    />
  </svg>
`,$Ce=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M8.85758 18.625C8.4358 18.625 8.07715 18.4772 7.78163 18.1817C7.48613 17.8862 7.33838 17.5275 7.33838 17.1058V6.8942C7.33838 6.47242 7.48613 6.11377 7.78163 5.81825C8.07715 5.52275 8.4358 5.375 8.85758 5.375H12.1999C13.2191 5.375 14.1406 5.69231 14.9643 6.32693C15.788 6.96154 16.1999 7.81603 16.1999 8.89038C16.1999 9.63779 16.0194 10.2471 15.6585 10.7183C15.2976 11.1894 14.9088 11.5314 14.4922 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3157 16.6614 14.0192 16.6614 14.9038C16.6614 16.182 16.1902 17.1217 15.2479 17.723C14.3056 18.3243 13.3563 18.625 12.3999 18.625H8.85758ZM9.4883 16.6327H12.3191C13.1063 16.6327 13.6627 16.4141 13.9884 15.9769C14.314 15.5397 14.4768 15.1205 14.4768 14.7192C14.4768 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8057 12.273 12.8057H9.4883V16.6327ZM9.4883 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5278 10.3539C13.8836 10.0064 14.0615 9.59037 14.0615 9.10575C14.0615 8.59035 13.8733 8.16918 13.497 7.84225C13.1207 7.51533 12.6595 7.35188 12.1133 7.35188H9.4883V10.875Z"
    />
  </svg>
`,FCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_952_6527)">
      <circle cx="12" cy="12" r="3" />
    </g>
    <defs>
      <clipPath id="clip0_952_6527">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,zCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8070)">
      <path
        d="M4 10.5C3.17 10.5 2.5 11.17 2.5 12C2.5 12.83 3.17 13.5 4 13.5C4.83 13.5 5.5 12.83 5.5 12C5.5 11.17 4.83 10.5 4 10.5ZM4 4.5C3.17 4.5 2.5 5.17 2.5 6C2.5 6.83 3.17 7.5 4 7.5C4.83 7.5 5.5 6.83 5.5 6C5.5 5.17 4.83 4.5 4 4.5ZM4 16.5C3.17 16.5 2.5 17.18 2.5 18C2.5 18.82 3.18 19.5 4 19.5C4.82 19.5 5.5 18.82 5.5 18C5.5 17.18 4.83 16.5 4 16.5ZM8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19ZM8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13ZM7 6C7 6.55 7.45 7 8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8070">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,jCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M9 22a1 1 0 0 1-1-1v-3H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6.1l-3.7 3.71c-.2.19-.45.29-.7.29zm1-6v3.08L13.08 16H20V4H4v12z"
    />
  </svg>
`,HCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_1151)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM10.71 16.29C10.32 16.68 9.69 16.68 9.3 16.29L5.71 12.7C5.32 12.31 5.32 11.68 5.71 11.29C6.1 10.9 6.73 10.9 7.12 11.29L10 14.17L16.88 7.29C17.27 6.9 17.9 6.9 18.29 7.29C18.68 7.68 18.68 8.31 18.29 8.7L10.71 16.29Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_1151">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,VCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1803_535)">
      <path
        d="M18 19H6C5.45 19 5 18.55 5 18V6C5 5.45 5.45 5 6 5H18C18.55 5 19 5.45 19 6V18C19 18.55 18.55 19 18 19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1803_535">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,CX=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M19.5 8.25l-7.5 7.5-7.5-7.5"
    />
  </svg>
`,_X=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1098_15553)">
      <path
        d="M18.3007 5.70973C17.9107 5.31973 17.2807 5.31973 16.8907 5.70973L12.0007 10.5897L7.1107 5.69973C6.7207 5.30973 6.0907 5.30973 5.7007 5.69973C5.3107 6.08973 5.3107 6.71973 5.7007 7.10973L10.5907 11.9997L5.7007 16.8897C5.3107 17.2797 5.3107 17.9097 5.7007 18.2997C6.0907 18.6897 6.7207 18.6897 7.1107 18.2997L12.0007 13.4097L16.8907 18.2997C17.2807 18.6897 17.9107 18.6897 18.3007 18.2997C18.6907 17.9097 18.6907 17.2797 18.3007 16.8897L13.4107 11.9997L18.3007 7.10973C18.6807 6.72973 18.6807 6.08973 18.3007 5.70973Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1098_15553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,AX=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8081)">
      <path
        d="M9.4 16.6L4.8 12L9.4 7.4L8 6L2 12L8 18L9.4 16.6ZM14.6 16.6L19.2 12L14.6 7.4L16 6L22 12L16 18L14.6 16.6Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8081">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,CE=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
  >
    <g clip-path="url(#clip0_1013_1606)">
      <path
        d="M9.00012 16.1998L5.50012 12.6998C5.11012 12.3098 4.49012 12.3098 4.10012 12.6998C3.71012 13.0898 3.71012 13.7098 4.10012 14.0998L8.29012 18.2898C8.68012 18.6798 9.31012 18.6798 9.70012 18.2898L20.3001 7.69982C20.6901 7.30982 20.6901 6.68982 20.3001 6.29982C19.9101 5.90982 19.2901 5.90982 18.9001 6.29982L9.00012 16.1998Z"
        fill="#817567"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1606">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,WCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
    fill="none"
  >
    <path
      d="M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"
    />
  </svg>
`,qCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7900)">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M19 13H5C4.45 13 4 12.55 4 12C4 11.45 4.45 11 5 11H19C19.55 11 20 11.45 20 12C20 12.55 19.55 13 19 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7900">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,r$=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 16 16"
  >
    <path
      d="M3.5 9.83366C3.35833 9.83366 3.23961 9.78571 3.14383 9.68983C3.04794 9.59394 3 9.47516 3 9.33349C3 9.19171 3.04794 9.07299 3.14383 8.97733C3.23961 8.88155 3.35833 8.83366 3.5 8.83366H12.5C12.6417 8.83366 12.7604 8.8816 12.8562 8.97749C12.9521 9.07338 13 9.19216 13 9.33383C13 9.4756 12.9521 9.59433 12.8562 9.68999C12.7604 9.78577 12.6417 9.83366 12.5 9.83366H3.5ZM3.5 7.16699C3.35833 7.16699 3.23961 7.11905 3.14383 7.02316C3.04794 6.92727 3 6.80849 3 6.66683C3 6.52505 3.04794 6.40633 3.14383 6.31066C3.23961 6.21488 3.35833 6.16699 3.5 6.16699H12.5C12.6417 6.16699 12.7604 6.21494 12.8562 6.31083C12.9521 6.40671 13 6.52549 13 6.66716C13 6.80894 12.9521 6.92766 12.8562 7.02333C12.7604 7.1191 12.6417 7.16699 12.5 7.16699H3.5Z"
    />
  </svg>
`,_E=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_1013_1585)">
      <path
        d="M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_1013_1585">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,UCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5553)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM12 17H14V7H10V9H12V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5553">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,GCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5559)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15H11V13H13C14.1 13 15 12.11 15 11V9C15 7.89 14.1 7 13 7H9V9H13V11H11C9.9 11 9 11.89 9 13V17H15V15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5559">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,KCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5565)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.67 14.33 12 13.5 12C14.33 12 15 11.33 15 10.5V9C15 7.89 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5565">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,JCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7757)">
      <path
        d="M19.04 3H5.04004C3.94004 3 3.04004 3.9 3.04004 5V19C3.04004 20.1 3.94004 21 5.04004 21H19.04C20.14 21 21.04 20.1 21.04 19V5C21.04 3.9 20.14 3 19.04 3ZM19.04 19H5.04004V5H19.04V19ZM13.04 17H15.04V7H13.04V11H11.04V7H9.04004V13H13.04V17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7757">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,YCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7760)">
      <path
        d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H9V13H13V15H9V17H13C14.1 17 15 16.11 15 15Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7760">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,XCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7763)">
      <path
        d="M11 17H13C14.1 17 15 16.11 15 15V13C15 11.89 14.1 11 13 11H11V9H15V7H11C9.9 7 9 7.89 9 9V15C9 16.11 9.9 17 11 17ZM11 13H13V15H11V13ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7763">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,uC=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8075)">
      <path
        d="M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8075">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,QCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M6.29811 18.625C6.04505 18.625 5.83115 18.5375 5.65641 18.3626C5.48166 18.1877 5.39429 17.9736 5.39429 17.7203C5.39429 17.467 5.48166 17.2532 5.65641 17.0788C5.83115 16.9045 6.04505 16.8173 6.29811 16.8173H9.21159L12.452 7.18265H9.53851C9.28545 7.18265 9.07155 7.0952 8.89681 6.9203C8.72206 6.7454 8.63469 6.5313 8.63469 6.278C8.63469 6.02472 8.72206 5.81089 8.89681 5.63652C9.07155 5.46217 9.28545 5.375 9.53851 5.375H16.8847C17.1377 5.375 17.3516 5.46245 17.5264 5.63735C17.7011 5.81225 17.7885 6.02634 17.7885 6.27962C17.7885 6.53293 17.7011 6.74676 17.5264 6.92113C17.3516 7.09548 17.1377 7.18265 16.8847 7.18265H14.2789L11.0385 16.8173H13.6443C13.8973 16.8173 14.1112 16.9048 14.286 17.0797C14.4607 17.2546 14.5481 17.4687 14.5481 17.722C14.5481 17.9752 14.4607 18.1891 14.286 18.3634C14.1112 18.5378 13.8973 18.625 13.6443 18.625H6.29811Z"
    />
  </svg>
`,ZCe=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.0385 19.5003V16.5388H14.0769V15.0388H17.0385V12.0773H18.5384V15.0388H21.5V16.5388H18.5384V19.5003H17.0385ZM10.8077 16.5388H7.03845C5.78282 16.5388 4.7125 16.0963 3.8275 15.2114C2.9425 14.3266 2.5 13.2564 2.5 12.0009C2.5 10.7454 2.9425 9.67504 3.8275 8.78979C4.7125 7.90454 5.78282 7.46191 7.03845 7.46191H10.8077V8.96186H7.03845C6.1987 8.96186 5.48235 9.25834 4.8894 9.85129C4.29645 10.4442 3.99998 11.1606 3.99998 12.0003C3.99998 12.8401 4.29645 13.5564 4.8894 14.1494C5.48235 14.7423 6.1987 15.0388 7.03845 15.0388H10.8077V16.5388ZM8.25 12.7503V11.2504H15.75V12.7503H8.25ZM21.5 12.0003H20C20 11.1606 19.7035 10.4442 19.1106 9.85129C18.5176 9.25834 17.8013 8.96186 16.9615 8.96186H13.1923V7.46191H16.9615C18.2171 7.46191 19.2875 7.90441 20.1725 8.78939C21.0575 9.67439 21.5 10.7447 21.5 12.0003Z"
    />
  </svg>
`,e_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7680)">
      <path
        d="M11 18C11 19.1 10.1 20 9 20C7.9 20 7 19.1 7 18C7 16.9 7.9 16 9 16C10.1 16 11 16.9 11 18ZM9 10C7.9 10 7 10.9 7 12C7 13.1 7.9 14 9 14C10.1 14 11 13.1 11 12C11 10.9 10.1 10 9 10ZM9 4C7.9 4 7 4.9 7 6C7 7.1 7.9 8 9 8C10.1 8 11 7.1 11 6C11 4.9 10.1 4 9 4ZM15 8C16.1 8 17 7.1 17 6C17 4.9 16.1 4 15 4C13.9 4 13 4.9 13 6C13 7.1 13.9 8 15 8ZM15 10C13.9 10 13 10.9 13 12C13 13.1 13.9 14 15 14C16.1 14 17 13.1 17 12C17 10.9 16.1 10 15 10ZM15 16C13.9 16 13 16.9 13 18C13 19.1 13.9 20 15 20C16.1 20 17 19.1 17 18C17 16.9 16.1 16 15 16Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7680">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,t_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8067)">
      <path
        d="M8 7H20C20.55 7 21 6.55 21 6C21 5.45 20.55 5 20 5H8C7.45 5 7 5.45 7 6C7 6.55 7.45 7 8 7ZM20 17H8C7.45 17 7 17.45 7 18C7 18.55 7.45 19 8 19H20C20.55 19 21 18.55 21 18C21 17.45 20.55 17 20 17ZM20 11H8C7.45 11 7 11.45 7 12C7 12.55 7.45 13 8 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11ZM4.5 16H2.5C2.22 16 2 16.22 2 16.5C2 16.78 2.22 17 2.5 17H4V17.5H3.5C3.22 17.5 3 17.72 3 18C3 18.28 3.22 18.5 3.5 18.5H4V19H2.5C2.22 19 2 19.22 2 19.5C2 19.78 2.22 20 2.5 20H4.5C4.78 20 5 19.78 5 19.5V16.5C5 16.22 4.78 16 4.5 16ZM2.5 5H3V7.5C3 7.78 3.22 8 3.5 8C3.78 8 4 7.78 4 7.5V4.5C4 4.22 3.78 4 3.5 4H2.5C2.22 4 2 4.22 2 4.5C2 4.78 2.22 5 2.5 5ZM4.5 10H2.5C2.22 10 2 10.22 2 10.5C2 10.78 2.22 11 2.5 11H3.8L2.12 12.96C2.04 13.05 2 13.17 2 13.28V13.5C2 13.78 2.22 14 2.5 14H4.5C4.78 14 5 13.78 5 13.5C5 13.22 4.78 13 4.5 13H3.2L4.88 11.04C4.96 10.95 5 10.83 5 10.72V10.5C5 10.22 4.78 10 4.5 10Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8067">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,hC=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_971_7676)">
      <path
        d="M18 13H13V18C13 18.55 12.55 19 12 19C11.45 19 11 18.55 11 18V13H6C5.45 13 5 12.55 5 12C5 11.45 5.45 11 6 11H11V6C11 5.45 11.45 5 12 5C12.55 5 13 5.45 13 6V11H18C18.55 11 19 11.45 19 12C19 12.55 18.55 13 18 13Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_971_7676">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,n_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_7897)">
      <path
        d="M7.17 17C7.68 17 8.15 16.71 8.37 16.26L9.79 13.42C9.93 13.14 10 12.84 10 12.53V8C10 7.45 9.55 7 9 7H5C4.45 7 4 7.45 4 8V12C4 12.55 4.45 13 5 13H7L5.97 15.06C5.52 15.95 6.17 17 7.17 17ZM17.17 17C17.68 17 18.15 16.71 18.37 16.26L19.79 13.42C19.93 13.14 20 12.84 20 12.53V8C20 7.45 19.55 7 19 7H15C14.45 7 14 7.45 14 8V12C14 12.55 14.45 13 15 13H17L15.97 15.06C15.52 15.95 16.17 17 17.17 17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_7897">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,dC=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M7.30775 20.4997C6.81058 20.4997 6.385 20.3227 6.031 19.9687C5.677 19.6147 5.5 19.1892 5.5 18.692V5.99973H5.25C5.0375 5.99973 4.85942 5.92782 4.71575 5.78398C4.57192 5.64015 4.5 5.46198 4.5 5.24948C4.5 5.03682 4.57192 4.85873 4.71575 4.71523C4.85942 4.57157 5.0375 4.49973 5.25 4.49973H9C9 4.2549 9.08625 4.04624 9.25875 3.87374C9.43108 3.7014 9.63967 3.61523 9.8845 3.61523H14.1155C14.3603 3.61523 14.5689 3.7014 14.7413 3.87374C14.9138 4.04624 15 4.2549 15 4.49973H18.75C18.9625 4.49973 19.1406 4.57165 19.2843 4.71548C19.4281 4.85932 19.5 5.03748 19.5 5.24998C19.5 5.46265 19.4281 5.64073 19.2843 5.78423C19.1406 5.9279 18.9625 5.99973 18.75 5.99973H18.5V18.692C18.5 19.1892 18.323 19.6147 17.969 19.9687C17.615 20.3227 17.1894 20.4997 16.6923 20.4997H7.30775ZM17 5.99973H7V18.692C7 18.7818 7.02883 18.8556 7.0865 18.9132C7.14417 18.9709 7.21792 18.9997 7.30775 18.9997H16.6923C16.7821 18.9997 16.8558 18.9709 16.9135 18.9132C16.9712 18.8556 17 18.7818 17 18.692V5.99973ZM10.1543 16.9997C10.3668 16.9997 10.5448 16.9279 10.6885 16.7842C10.832 16.6404 10.9037 16.4622 10.9037 16.2497V8.74973C10.9037 8.53723 10.8318 8.35907 10.688 8.21523C10.5443 8.07157 10.3662 7.99973 10.1535 7.99973C9.941 7.99973 9.76292 8.07157 9.61925 8.21523C9.47575 8.35907 9.404 8.53723 9.404 8.74973V16.2497C9.404 16.4622 9.47583 16.6404 9.6195 16.7842C9.76333 16.9279 9.94158 16.9997 10.1543 16.9997ZM13.8465 16.9997C14.059 16.9997 14.2371 16.9279 14.3807 16.7842C14.5243 16.6404 14.596 16.4622 14.596 16.2497V8.74973C14.596 8.53723 14.5242 8.35907 14.3805 8.21523C14.2367 8.07157 14.0584 7.99973 13.8458 7.99973C13.6333 7.99973 13.4552 8.07157 13.3115 8.21523C13.168 8.35907 13.0962 8.53723 13.0962 8.74973V16.2497C13.0962 16.4622 13.1682 16.6404 13.312 16.7842C13.4557 16.9279 13.6338 16.9997 13.8465 16.9997Z"
    />
  </svg>
`,TX=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="w-6 h-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
    />
  </svg>
`,r_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M3.25 13.7404C3.0375 13.7404 2.85938 13.6684 2.71563 13.5246C2.57188 13.3808 2.5 13.2026 2.5 12.99C2.5 12.7774 2.57188 12.5993 2.71563 12.4558C2.85938 12.3122 3.0375 12.2404 3.25 12.2404H20.75C20.9625 12.2404 21.1406 12.3123 21.2843 12.4561C21.4281 12.5999 21.5 12.7781 21.5 12.9907C21.5 13.2033 21.4281 13.3814 21.2843 13.525C21.1406 13.6686 20.9625 13.7404 20.75 13.7404H3.25ZM10.9423 10.2596V6.62495H6.5673C6.2735 6.62495 6.02377 6.52201 5.8181 6.31613C5.61245 6.11026 5.50963 5.86027 5.50963 5.56615C5.50963 5.27205 5.61245 5.02083 5.8181 4.8125C6.02377 4.60417 6.2735 4.5 6.5673 4.5H17.4423C17.7361 4.5 17.9858 4.60294 18.1915 4.80883C18.3971 5.01471 18.5 5.2647 18.5 5.5588C18.5 5.85292 18.3971 6.10413 18.1915 6.31245C17.9858 6.52078 17.7361 6.62495 17.4423 6.62495H13.0673V10.2596H10.9423ZM10.9423 15.7211H13.0673V18.4423C13.0673 18.7361 12.9643 18.9858 12.7584 19.1915C12.5526 19.3971 12.3026 19.5 12.0085 19.5C11.7144 19.5 11.4631 19.3962 11.2548 19.1887C11.0465 18.9811 10.9423 18.7291 10.9423 18.4327V15.7211Z"
    />
  </svg>
`,i_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_977_8078)">
      <path
        d="M20 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3ZM20 5V8H5V5H20ZM15 19H10V10H15V19ZM5 10H8V19H5V10ZM17 19V10H20V19H17Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_977_8078">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,s_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <g clip-path="url(#clip0_992_5547)">
      <path
        d="M5 5.5C5 6.33 5.67 7 6.5 7H10.5V17.5C10.5 18.33 11.17 19 12 19C12.83 19 13.5 18.33 13.5 17.5V7H17.5C18.33 7 19 6.33 19 5.5C19 4.67 18.33 4 17.5 4H6.5C5.67 4 5 4.67 5 5.5Z"
      />
    </g>
    <defs>
      <clipPath id="clip0_992_5547">
        <rect width="24" height="24" />
      </clipPath>
    </defs>
  </svg>
`,o_e=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
  >
    <path
      d="M5.66936 16.3389L9.39244 12.6158C9.54115 12.4671 9.71679 12.3937 9.91936 12.3957C10.1219 12.3976 10.2975 12.4761 10.4463 12.6312C10.5847 12.7823 10.654 12.9585 10.654 13.1599C10.654 13.3613 10.5847 13.5363 10.4463 13.6851L6.32704 17.8197C6.14627 18.0004 5.93538 18.0908 5.69436 18.0908C5.45333 18.0908 5.24243 18.0004 5.06166 17.8197L3.01744 15.7754C2.87899 15.637 2.81136 15.4629 2.81456 15.2533C2.81776 15.0437 2.88859 14.8697 3.02706 14.7312C3.16551 14.5928 3.34008 14.5235 3.55076 14.5235C3.76144 14.5235 3.93494 14.5928 4.07126 14.7312L5.66936 16.3389ZM5.66936 8.72359L9.39244 5.00049C9.54115 4.85177 9.71679 4.77838 9.91936 4.78031C10.1219 4.78223 10.2975 4.86075 10.4463 5.01586C10.5847 5.16691 10.654 5.34314 10.654 5.54454C10.654 5.74592 10.5847 5.92097 10.4463 6.06969L6.32704 10.2043C6.14627 10.3851 5.93538 10.4755 5.69436 10.4755C5.45333 10.4755 5.24243 10.3851 5.06166 10.2043L3.01744 8.16009C2.87899 8.02162 2.81136 7.84759 2.81456 7.63799C2.81776 7.42837 2.88859 7.25433 3.02706 7.11586C3.16551 6.97741 3.34008 6.90819 3.55076 6.90819C3.76144 6.90819 3.93494 6.97741 4.07126 7.11586L5.66936 8.72359ZM13.7597 16.5581C13.5472 16.5581 13.3691 16.4862 13.2253 16.3424C13.0816 16.1986 13.0097 16.0204 13.0097 15.8078C13.0097 15.5952 13.0816 15.4171 13.2253 15.2735C13.3691 15.13 13.5472 15.0582 13.7597 15.0582H20.7597C20.9722 15.0582 21.1503 15.1301 21.2941 15.2739C21.4378 15.4177 21.5097 15.5959 21.5097 15.8085C21.5097 16.0211 21.4378 16.1992 21.2941 16.3427C21.1503 16.4863 20.9722 16.5581 20.7597 16.5581H13.7597ZM13.7597 8.94276C13.5472 8.94276 13.3691 8.87085 13.2253 8.72704C13.0816 8.58324 13.0097 8.40504 13.0097 8.19244C13.0097 7.97985 13.0816 7.80177 13.2253 7.65819C13.3691 7.5146 13.5472 7.44281 13.7597 7.44281H20.7597C20.9722 7.44281 21.1503 7.51471 21.2941 7.65851C21.4378 7.80233 21.5097 7.98053 21.5097 8.19311C21.5097 8.40571 21.4378 8.5838 21.2941 8.72739C21.1503 8.87097 20.9722 8.94276 20.7597 8.94276H13.7597Z"
    />
  </svg>
`,MX=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="32"
    height="32"
    viewBox="0 0 24 24"
  >
    <path
      fill="currentColor"
      d="M7 19v-.808L13.096 12L7 5.808V5h10v1.25H9.102L14.727 12l-5.625 5.77H17V19z"
    />
  </svg>
`,EX=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 -960 960 960"
    width="24px"
  >
    <path
      d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"
    />
  </svg>
`,l_e={[Kt.CodeMirror]:{theme:Uhe,languages:Dhe,expandIcon:CX,searchIcon:TX,clearSearchIcon:_X,searchPlaceholder:"Search language",noResultText:"No result",previewToggleIcon:t=>t?_E:EX}},a_e=Pt([],"FeaturesCtx"),c_e=Pt({},"CrepeCtx");function A3(t){return t.use("FeaturesCtx")}function Jl(t){return e=>{A3(e).update(n=>n.includes(t)?n:[...n,t])}}function OX(t){return t.$from.parent.type.name==="code_block"}function NX(t){var e;const n=(e=t.$from.node(t.$from.depth-1))==null?void 0:e.type;return(n==null?void 0:n.name)==="list_item"}var IX=t=>{throw TypeError(t)},PX=(t,e,n)=>e.has(t)||IX("Cannot "+n),tm=(t,e,n)=>(PX(t,e,"read from private field"),n?n.call(t):e.get(t)),i$=(t,e,n)=>e.has(t)?IX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),u_e=(t,e,n,r)=>(PX(t,e,"write to private field"),e.set(t,n),n),vf,$4;class RX{constructor(){i$(this,vf,[]),this.clear=()=>(u_e(this,vf,[]),this),i$(this,$4,e=>{const n={group:e,addItem:(r,i)=>{const s={...i,key:r};return e.items.push(s),n},clear:()=>(e.items=[],n)};return n}),this.addGroup=(e,n)=>{const i={key:e,label:n,items:[]};return tm(this,vf).push(i),tm(this,$4).call(this,i)},this.getGroup=e=>{const n=tm(this,vf).find(r=>r.key===e);if(!n)throw new Error(`Group with key ${e} not found`);return tm(this,$4).call(this,n)},this.build=()=>tm(this,vf)}}vf=new WeakMap;$4=new WeakMap;function h_e(t,e,n){var r,i,s,o,l,a,c,u,h,d,f,p,m,y,g,v,w,S,_,C,T,I,L,N,$,F,ie,Z,Y,pe,de,W,z,O,ee,X,E,xe,U,ue,ve,Oe,st,vt,_t,ln,R,B,G,ce,se,ae,ke,Se,be,fe,Ve,_e,De,V,ne,Ee,Ie,lt,Ot,Yt,Ft,bn,pr,Nt,kn,_r,Vu,Wu,wv,nc,xv,bv,Wn,Yl,kv,gp,Od,yp,vp,Sv,es,Xl,wp,xp,Nd,bp,Ns,kp,Sp,Cp,_p,Cv,Ge,H,we,He,Xt,ir,Fn,Ar,Is,rc,Id,sr,Ap,Tp,uO,hO,dO,fO,pO,mO,gO;const Pd=n&&A3(n).get(),hZ=Pd==null?void 0:Pd.includes(Kt.Latex),dZ=Pd==null?void 0:Pd.includes(Kt.ImageBlock),fZ=Pd==null?void 0:Pd.includes(Kt.Table),Mp=new RX;if((e==null?void 0:e.textGroup)!==null){const jt=Mp.addGroup("text",(i=(r=e==null?void 0:e.textGroup)==null?void 0:r.label)!=null?i:"Text");((s=e==null?void 0:e.textGroup)==null?void 0:s.text)!==null&&jt.addItem("text",{label:(a=(l=(o=e==null?void 0:e.textGroup)==null?void 0:o.text)==null?void 0:l.label)!=null?a:"Text",icon:(h=(u=(c=e==null?void 0:e.textGroup)==null?void 0:c.text)==null?void 0:u.icon)!=null?h:s_e,onRun:Xe=>{const et=Xe.get(ze),zt=Vl.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt})}}),((d=e==null?void 0:e.textGroup)==null?void 0:d.h1)!==null&&jt.addItem("h1",{label:(m=(p=(f=e==null?void 0:e.textGroup)==null?void 0:f.h1)==null?void 0:p.label)!=null?m:"Heading 1",icon:(v=(g=(y=e==null?void 0:e.textGroup)==null?void 0:y.h1)==null?void 0:g.icon)!=null?v:UCe,onRun:Xe=>{const et=Xe.get(ze),zt=gs.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt,attrs:{level:1}})}}),((w=e==null?void 0:e.textGroup)==null?void 0:w.h2)!==null&&jt.addItem("h2",{label:(C=(_=(S=e==null?void 0:e.textGroup)==null?void 0:S.h2)==null?void 0:_.label)!=null?C:"Heading 2",icon:(L=(I=(T=e==null?void 0:e.textGroup)==null?void 0:T.h2)==null?void 0:I.icon)!=null?L:GCe,onRun:Xe=>{const et=Xe.get(ze),zt=gs.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt,attrs:{level:2}})}}),((N=e==null?void 0:e.textGroup)==null?void 0:N.h3)!==null&&jt.addItem("h3",{label:(ie=(F=($=e==null?void 0:e.textGroup)==null?void 0:$.h3)==null?void 0:F.label)!=null?ie:"Heading 3",icon:(pe=(Y=(Z=e==null?void 0:e.textGroup)==null?void 0:Z.h3)==null?void 0:Y.icon)!=null?pe:KCe,onRun:Xe=>{const et=Xe.get(ze),zt=gs.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt,attrs:{level:3}})}}),((de=e==null?void 0:e.textGroup)==null?void 0:de.h4)!==null&&jt.addItem("h4",{label:(O=(z=(W=e==null?void 0:e.textGroup)==null?void 0:W.h4)==null?void 0:z.label)!=null?O:"Heading 4",icon:(E=(X=(ee=e==null?void 0:e.textGroup)==null?void 0:ee.h4)==null?void 0:X.icon)!=null?E:JCe,onRun:Xe=>{const et=Xe.get(ze),zt=gs.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt,attrs:{level:4}})}}),((xe=e==null?void 0:e.textGroup)==null?void 0:xe.h5)!==null&&jt.addItem("h5",{label:(ve=(ue=(U=e==null?void 0:e.textGroup)==null?void 0:U.h5)==null?void 0:ue.label)!=null?ve:"Heading 5",icon:(vt=(st=(Oe=e==null?void 0:e.textGroup)==null?void 0:Oe.h5)==null?void 0:st.icon)!=null?vt:YCe,onRun:Xe=>{const et=Xe.get(ze),zt=gs.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt,attrs:{level:5}})}}),((_t=e==null?void 0:e.textGroup)==null?void 0:_t.h6)!==null&&jt.addItem("h6",{label:(B=(R=(ln=e==null?void 0:e.textGroup)==null?void 0:ln.h6)==null?void 0:R.label)!=null?B:"Heading 6",icon:(se=(ce=(G=e==null?void 0:e.textGroup)==null?void 0:G.h6)==null?void 0:ce.icon)!=null?se:XCe,onRun:Xe=>{const et=Xe.get(ze),zt=gs.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt,attrs:{level:6}})}}),((ae=e==null?void 0:e.textGroup)==null?void 0:ae.quote)!==null&&jt.addItem("quote",{label:(be=(Se=(ke=e==null?void 0:e.textGroup)==null?void 0:ke.quote)==null?void 0:Se.label)!=null?be:"Quote",icon:(_e=(Ve=(fe=e==null?void 0:e.textGroup)==null?void 0:fe.quote)==null?void 0:Ve.icon)!=null?_e:n_e,onRun:Xe=>{const et=Xe.get(ze),zt=tp.type(Xe);et.call(Tr.key),et.call(Wm.key,{nodeType:zt})}}),((De=e==null?void 0:e.textGroup)==null?void 0:De.divider)!==null&&jt.addItem("divider",{label:(Ee=(ne=(V=e==null?void 0:e.textGroup)==null?void 0:V.divider)==null?void 0:ne.label)!=null?Ee:"Divider",icon:(Ot=(lt=(Ie=e==null?void 0:e.textGroup)==null?void 0:Ie.divider)==null?void 0:lt.icon)!=null?Ot:qCe,onRun:Xe=>{const et=Xe.get(ze),zt=np.type(Xe);et.call(Tr.key),et.call(qm.key,{nodeType:zt})}})}if((e==null?void 0:e.listGroup)!==null){const jt=Mp.addGroup("list",(Ft=(Yt=e==null?void 0:e.listGroup)==null?void 0:Yt.label)!=null?Ft:"List");((bn=e==null?void 0:e.listGroup)==null?void 0:bn.bulletList)!==null&&jt.addItem("bullet-list",{label:(kn=(Nt=(pr=e==null?void 0:e.listGroup)==null?void 0:pr.bulletList)==null?void 0:Nt.label)!=null?kn:"Bullet List",icon:(Wu=(Vu=(_r=e==null?void 0:e.listGroup)==null?void 0:_r.bulletList)==null?void 0:Vu.icon)!=null?Wu:zCe,onRun:Xe=>{const et=Xe.get(ze),zt=Cd.type(Xe);et.call(Tr.key),et.call(Wm.key,{nodeType:zt})}}),((wv=e==null?void 0:e.listGroup)==null?void 0:wv.orderedList)!==null&&jt.addItem("ordered-list",{label:(bv=(xv=(nc=e==null?void 0:e.listGroup)==null?void 0:nc.orderedList)==null?void 0:xv.label)!=null?bv:"Ordered List",icon:(kv=(Yl=(Wn=e==null?void 0:e.listGroup)==null?void 0:Wn.orderedList)==null?void 0:Yl.icon)!=null?kv:t_e,onRun:Xe=>{const et=Xe.get(ze),zt=_d.type(Xe);et.call(Tr.key),et.call(Wm.key,{nodeType:zt})}}),((gp=e==null?void 0:e.listGroup)==null?void 0:gp.taskList)!==null&&jt.addItem("task-list",{label:(vp=(yp=(Od=e==null?void 0:e.listGroup)==null?void 0:Od.taskList)==null?void 0:yp.label)!=null?vp:"Task List",icon:(Xl=(es=(Sv=e==null?void 0:e.listGroup)==null?void 0:Sv.taskList)==null?void 0:es.icon)!=null?Xl:o_e,onRun:Xe=>{const et=Xe.get(ze),zt=to.type(Xe);et.call(Tr.key),et.call(Wm.key,{nodeType:zt,attrs:{checked:!1}})}})}if((e==null?void 0:e.advancedGroup)!==null){const jt=Mp.addGroup("advanced",(xp=(wp=e==null?void 0:e.advancedGroup)==null?void 0:wp.label)!=null?xp:"Advanced");((Nd=e==null?void 0:e.advancedGroup)==null?void 0:Nd.image)!==null&&dZ&&jt.addItem("image",{label:(kp=(Ns=(bp=e==null?void 0:e.advancedGroup)==null?void 0:bp.image)==null?void 0:Ns.label)!=null?kp:"Image",icon:(_p=(Cp=(Sp=e==null?void 0:e.advancedGroup)==null?void 0:Sp.image)==null?void 0:Cp.icon)!=null?_p:uC,onRun:Xe=>{const et=Xe.get(ze),zt=Z5.type(Xe);et.call(Tr.key),et.call(qm.key,{nodeType:zt})}}),((Cv=e==null?void 0:e.advancedGroup)==null?void 0:Cv.codeBlock)!==null&&jt.addItem("code",{label:(we=(H=(Ge=e==null?void 0:e.advancedGroup)==null?void 0:Ge.codeBlock)==null?void 0:H.label)!=null?we:"Code",icon:(ir=(Xt=(He=e==null?void 0:e.advancedGroup)==null?void 0:He.codeBlock)==null?void 0:Xt.icon)!=null?ir:AX,onRun:Xe=>{const et=Xe.get(ze),zt=Fl.type(Xe);et.call(Tr.key),et.call(sa.key,{nodeType:zt})}}),((Fn=e==null?void 0:e.advancedGroup)==null?void 0:Fn.table)!==null&&fZ&&jt.addItem("table",{label:(rc=(Is=(Ar=e==null?void 0:e.advancedGroup)==null?void 0:Ar.table)==null?void 0:Is.label)!=null?rc:"Table",icon:(Ap=(sr=(Id=e==null?void 0:e.advancedGroup)==null?void 0:Id.table)==null?void 0:sr.icon)!=null?Ap:i_e,onRun:Xe=>{const et=Xe.get(ze),zt=Xe.get(hn);et.call(Tr.key);const{from:pZ}=zt.state.selection;et.call(qm.key,{nodeType:gM(Xe,3,3)}),et.call(rG.key,{pos:pZ})}}),((Tp=e==null?void 0:e.advancedGroup)==null?void 0:Tp.math)!==null&&hZ&&jt.addItem("math",{label:(dO=(hO=(uO=e==null?void 0:e.advancedGroup)==null?void 0:uO.math)==null?void 0:hO.label)!=null?dO:"Math",icon:(mO=(pO=(fO=e==null?void 0:e.advancedGroup)==null?void 0:fO.math)==null?void 0:pO.icon)!=null?mO:MX,onRun:Xe=>{const et=Xe.get(ze),zt=Fl.type(Xe);et.call(Tr.key),et.call(qm.key,{nodeType:zt,attrs:{language:"LaTex"}})}})}(gO=e==null?void 0:e.buildMenu)==null||gO.call(e,Mp);let Ep=Mp.build();t&&(Ep=Ep.map(jt=>{const Xe=jt.items.filter(et=>et.label.toLowerCase().includes(t.toLowerCase()));return{...jt,items:Xe}}).filter(jt=>jt.items.length>0));const yO=Ep.flatMap(jt=>jt.items);return yO.forEach((jt,Xe)=>{Object.assign(jt,{index:Xe})}),Ep.reduce((jt,Xe)=>{const et=jt+Xe.items.length;return Object.assign(Xe,{range:[jt,et]}),et},0),{groups:Ep,size:yO.length}}const d_e=si({props:{ctx:{type:Object,required:!0},show:{type:Object,required:!0},filter:{type:Object,required:!0},hide:{type:Function,required:!0},config:{type:Object,required:!1}},setup({ctx:t,show:e,filter:n,hide:r,config:i}){const s=je(),o=pd(()=>h_e(n.value,i,t)),l=je(0),a=je({x:-999,y:-999}),c=m=>{const{x:y,y:g}=m;a.value={x:y,y:g}};o0([o,e],()=>{const{size:m}=o.value;m===0&&e.value?r():l.value>=m&&(l.value=0)});const u=(m,y)=>{const g=l.value,v=typeof m=="function"?m(g):m;y==null||y(v),l.value=v},h=m=>{var y,g;const v=(y=s.value)==null?void 0:y.querySelector(`[data-index="${m}"]`),w=(g=s.value)==null?void 0:g.querySelector(".menu-groups");!v||!w||(w.scrollTop=v.offsetTop-w.offsetTop)},d=m=>{const y=o.value.groups.flatMap(g=>g.items).at(m);y&&t&&y.onRun(t),r()},f=m=>{const{size:y,groups:g}=o.value;if(m.key==="Escape"){m.preventDefault(),r==null||r();return}if(m.key==="ArrowDown")return m.preventDefault(),u(v=>v<y-1?v+1:v,h);if(m.key==="ArrowUp")return m.preventDefault(),u(v=>v<=0?v:v-1,h);if(m.key==="ArrowLeft")return m.preventDefault(),u(v=>{const w=g.find(_=>_.range[0]<=v&&_.range[1]>v);if(!w)return v;const S=g[g.indexOf(w)-1];return S?S.range[1]-1:v},h);if(m.key==="ArrowRight")return m.preventDefault(),u(v=>{const w=g.find(_=>_.range[0]<=v&&_.range[1]>v);if(!w)return v;const S=g[g.indexOf(w)+1];return S?S.range[0]:v},h);m.key==="Enter"&&(m.preventDefault(),d(l.value))},p=m=>y=>{const g=a.value;if(!g)return;const{x:v,y:w}=y;v===g.x&&w===g.y||u(m)};return ip(()=>{e.value?window.addEventListener("keydown",f,{capture:!0}):window.removeEventListener("keydown",f,{capture:!0})}),Yy(()=>{window.removeEventListener("keydown",f,{capture:!0})}),()=>Q("div",{ref:s,onPointerdown:m=>m.preventDefault()},Q("nav",{class:"tab-group"},Q("ul",null,o.value.groups.map(m=>Q("li",{key:m.key,onPointerdown:()=>u(m.range[0],h),class:l.value>=m.range[0]&&l.value<m.range[1]?"selected":""},m.label)))),Q("div",{class:"menu-groups",onPointermove:c},o.value.groups.map(m=>Q("div",{key:m.key,class:"menu-group"},Q("h6",null,m.label),Q("ul",null,m.items.map(y=>Q("li",{key:y.key,"data-index":y.index,class:l.value===y.index?"hover":"",onPointerenter:p(y.index),onPointerdown:()=>{var g,v;(v=(g=s.value)==null?void 0:g.querySelector(`[data-index="${y.index}"]`))==null||v.classList.add("active")},onPointerup:()=>{var g,v;(v=(g=s.value)==null?void 0:g.querySelector(`[data-index="${y.index}"]`))==null||v.classList.remove("active"),d(y.index)}},Q(L0,{icon:y.icon}),Q("span",null,y.label))))))))}});var DX=t=>{throw TypeError(t)},LX=(t,e,n)=>e.has(t)||DX("Cannot "+n),co=(t,e,n)=>(LX(t,e,"read from private field"),n?n.call(t):e.get(t)),nm=(t,e,n)=>e.has(t)?DX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),th=(t,e,n,r)=>(LX(t,e,"write to private field"),e.set(t,n),n),cg,F4,z4,aa,wf;const BX=I4e("CREPE_MENU"),AE=Jt({show:()=>{},hide:()=>{}},"menuAPICtx");function f_e(t,e){t.set(BX.key,{view:n=>new p_e(t,n,e)})}class p_e{constructor(e,n,r){nm(this,cg),nm(this,F4),nm(this,z4),nm(this,aa),nm(this,wf,null),this.update=u=>{co(this,aa).update(u)},this.show=u=>{th(this,wf,u),co(this,z4).value="",co(this,aa).show()},this.hide=()=>{th(this,wf,null),co(this,aa).hide()},this.destroy=()=>{co(this,aa).destroy(),co(this,F4).unmount(),co(this,cg).remove()};const i=document.createElement("div");i.classList.add("milkdown-slash-menu");const s=je(!1),o=je("");th(this,z4,o);const l=this.hide,a=qo(d_e,{ctx:e,config:r,show:s,filter:o,hide:l});th(this,F4,a),a.mount(i),th(this,cg,i);const c=this;th(this,aa,new P4e({content:co(this,cg),debounce:20,shouldShow(u){if(OX(u.state.selection)||NX(u.state.selection))return!1;const h=this.getContent(u,f=>["paragraph","heading"].includes(f.type.name));if(h==null||!m_e(u.state.selection))return!1;const d=co(c,wf);if(o.value=h.startsWith("/")?h.slice(1):h,typeof d=="number"){const f=u.state.doc.nodeSize-2,p=Math.min(d,f);return u.state.doc.resolve(p).node()!==u.state.doc.resolve(u.state.selection.from).node()?(th(c,wf,null),!1):!0}return!!h.startsWith("/")},offset:10})),co(this,aa).onShow=()=>{s.value=!0},co(this,aa).onHide=()=>{s.value=!1},this.update(n),e.set(AE.key,{show:u=>this.show(u),hide:()=>this.hide()})}}cg=new WeakMap;F4=new WeakMap;z4=new WeakMap;aa=new WeakMap;wf=new WeakMap;function m_e(t){if(!(t instanceof qe))return!1;const{$head:e}=t,n=e.parent;return e.parentOffset===n.content.size}const g_e=si({props:{onAdd:{type:Function,required:!0},addIcon:{type:String,required:!0},handleIcon:{type:String,required:!0}},setup(t){const e=je();return()=>Q(Yr,null,Q("div",{ref:e,class:"operation-item",onPointerdown:n=>{var r;n.preventDefault(),n.stopPropagation(),(r=e.value)==null||r.classList.add("active")},onPointerup:n=>{var r;n.preventDefault(),n.stopPropagation(),(r=e.value)==null||r.classList.remove("active"),t.onAdd()}},Q(L0,{icon:t.addIcon})),Q("div",{class:"operation-item"},Q(L0,{icon:t.handleIcon})))}});var $X=t=>{throw TypeError(t)},FX=(t,e,n)=>e.has(t)||$X("Cannot "+n),nh=(t,e,n)=>(FX(t,e,"read from private field"),n?n.call(t):e.get(t)),H2=(t,e,n)=>e.has(t)?$X("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),V2=(t,e,n,r)=>(FX(t,e,"write to private field"),e.set(t,n),n),j4,mh,H4,V4;class y_e{constructor(e,n){H2(this,j4),H2(this,mh),H2(this,H4),H2(this,V4),this.update=()=>{nh(this,mh).update()},this.destroy=()=>{nh(this,mh).destroy(),nh(this,j4).remove(),nh(this,H4).unmount()},this.onAdd=()=>{const l=nh(this,V4),a=l.get(hn);a.hasFocus()||a.focus();const{state:c,dispatch:u}=a,h=nh(this,mh).active;if(!h)return;const f=h.$pos.pos+h.node.nodeSize;let p=c.tr.insert(f,Vl.type(l).create());p=p.setSelection(qe.near(p.doc.resolve(f))),u(p.scrollIntoView()),nh(this,mh).hide(),l.get(AE.key).show(p.selection.from)};var r,i;V2(this,V4,e);const s=document.createElement("div");s.classList.add("milkdown-block-handle");const o=qo(g_e,{onAdd:this.onAdd,addIcon:(r=n==null?void 0:n.handleAddIcon)!=null?r:hC,handleIcon:(i=n==null?void 0:n.handleDragIcon)!=null?i:e_e});o.mount(s),V2(this,H4,o),V2(this,j4,s),V2(this,mh,new mve({ctx:e,content:s,getOffset:()=>16,getPlacement:({active:l,blockDom:a})=>{if(l.node.type.name==="heading")return"left";let c=0;l.node.descendants(v=>{c+=v.childCount});const u=l.el,h=u.getBoundingClientRect(),d=a.getBoundingClientRect(),f=window.getComputedStyle(u),p=Number.parseInt(f.paddingTop,10)||0,m=Number.parseInt(f.paddingBottom,10)||0,y=h.height-p-m,g=d.height;return c>2||g<y?"left-start":"left"}})),this.update()}}j4=new WeakMap;mh=new WeakMap;H4=new WeakMap;V4=new WeakMap;function v_e(t,e){t.set(L5.key,{filterNodes:n=>!Il(i=>["table","blockquote","math_inline"].includes(i.type.name))(n)}),t.set(F5.key,{view:()=>new y_e(t,e)})}const w_e=(t,e)=>{t.config(Jl(Kt.BlockEdit)).config(n=>v_e(n,e)).config(n=>f_e(n,e)).use(AE).use(F5).use(BX)},x_e=(t,e={})=>{t.config(Jl(Kt.CodeMirror)).config(n=>{const{languages:r=[],theme:i}=e,s=[Q0.of(AJ.concat(Eke)),D7e];i&&s.push(i),e.extensions&&s.push(...e.extensions),n.update(sv.key,o=>({extensions:s,languages:r,expandIcon:e.expandIcon||CX,searchIcon:e.searchIcon||TX,clearSearchIcon:e.clearSearchIcon||_X,searchPlaceholder:e.searchPlaceholder||"Search language",noResultText:e.noResultText||"No result",renderLanguage:e.renderLanguage||o.renderLanguage,renderPreview:e.renderPreview||o.renderPreview,previewToggleButton:l=>{var a,c;const u=((a=e.previewToggleIcon)==null?void 0:a.call(e,l))||(l?_E:EX),h=((c=e.previewToggleText)==null?void 0:c.call(e,l))||(l?"Edit":"Hide");return[u,h].map(d=>d.trim()).join(" ")},previewLabel:e.previewLabel||o.previewLabel}))}).use(Yke)},b_e=(t,e)=>{if(t.config(Jl(Kt.Cursor)).config(r=>{r.update(u3.key,()=>{var i,s;return{class:"crepe-drop-cursor",width:(i=e==null?void 0:e.width)!=null?i:4,color:(s=e==null?void 0:e.color)!=null?s:!1}})}).use(q7e),(e==null?void 0:e.virtual)===!1)return;const n=U7e();t.use(dr(()=>n))},k_e=(t,e)=>{t.config(Jl(Kt.ImageBlock)).config(n=>{n.update(h3.key,r=>{var i,s,o,l,a,c;return{uploadButton:(i=e==null?void 0:e.inlineUploadButton)!=null?i:"Upload",imageIcon:(s=e==null?void 0:e.inlineImageIcon)!=null?s:uC,confirmButton:(o=e==null?void 0:e.inlineConfirmButton)!=null?o:CE,uploadPlaceholderText:(l=e==null?void 0:e.inlineUploadPlaceholderText)!=null?l:"or paste link",onUpload:(c=(a=e==null?void 0:e.inlineOnUpload)!=null?a:e==null?void 0:e.onUpload)!=null?c:r.onUpload,proxyDomURL:e==null?void 0:e.proxyDomURL}}),n.update(Q5.key,r=>{var i,s,o,l,a,c,u,h;return{uploadButton:(i=e==null?void 0:e.blockUploadButton)!=null?i:"Upload file",imageIcon:(s=e==null?void 0:e.blockImageIcon)!=null?s:uC,captionIcon:(o=e==null?void 0:e.blockCaptionIcon)!=null?o:jCe,confirmButton:(l=e==null?void 0:e.blockConfirmButton)!=null?l:"Confirm",captionPlaceholderText:(a=e==null?void 0:e.blockCaptionPlaceholderText)!=null?a:"Write Image Caption",uploadPlaceholderText:(c=e==null?void 0:e.blockUploadPlaceholderText)!=null?c:"or paste link",onUpload:(h=(u=e==null?void 0:e.blockOnUpload)!=null?u:e==null?void 0:e.onUpload)!=null?h:r.onUpload,proxyDomURL:e==null?void 0:e.proxyDomURL}})}).use(bxe).use(o8e)},S_e=Fl.extendSchema(t=>e=>{const n=t(e);return{...n,toMarkdown:{match:n.toMarkdown.match,runner:(r,i)=>{var s,o;if(((s=i.attrs.language)!=null?s:"").toLowerCase()==="latex")r.addNode("math",void 0,((o=i.content.firstChild)==null?void 0:o.text)||"");else return n.toMarkdown.runner(r,i)}}}}),ug="math_inline",xy=nr(ug,()=>({group:"inline",inline:!0,draggable:!0,atom:!0,attrs:{value:{default:""}},parseDOM:[{tag:`span[data-type="${ug}"]`,getAttrs:t=>{var e;return{value:(e=t.dataset.value)!=null?e:""}}}],toDOM:t=>{const e=t.attrs.value,n=document.createElement("span");return n.dataset.type=ug,n.dataset.value=e,tX.render(e,n,{throwOnError:!1}),n},parseMarkdown:{match:t=>t.type==="inlineMath",runner:(t,e,n)=>{t.addNode(n,{value:e.value})}},toMarkdown:{match:t=>t.type.name===ug,runner:(t,e)=>{t.addNode("inlineMath",void 0,e.attrs.value)}}})),zX=ut("ToggleLatex",t=>()=>(e,n)=>{const{hasNode:r,pos:i,target:s}=RW(e,xy.type(t)),{selection:o,doc:l,tr:a}=e;if(!r){const f=l.textBetween(o.from,o.to);let p=a.replaceSelectionWith(xy.type(t).create({value:f}));return n&&n(p.setSelection(tt.create(p.doc,o.from))),!0}const{from:c,to:u}=o;if(!s||i<0)return!1;let h=a.delete(i,i+1);const d=s.attrs.value;return h=h.insertText(d,i),n&&n(h.setSelection(qe.create(h.doc,c,u+d.length-1))),!0}),s$=x3("INLINE_LATEX"),C_e=si({props:{config:{type:Object,required:!0},innerView:{type:Object,required:!0},updateValue:{type:Object,required:!0}},setup(t){const e=r=>{if(!(!r||!(r instanceof HTMLElement))){for(;r.firstChild;)r.removeChild(r.firstChild);t.innerView.value&&r.appendChild(t.innerView.value.dom)}},n=r=>{r.preventDefault(),t.updateValue.value()};return()=>Q("div",{class:"container"},t.innerView&&Q("div",{ref:e}),Q("button",{onPointerdown:n},Q(L0,{icon:t.config.inlineEditConfirm})))}});var jX=t=>{throw TypeError(t)},HX=(t,e,n)=>e.has(t)||jX("Cannot "+n),mr=(t,e,n)=>(HX(t,e,"read from private field"),n?n.call(t):e.get(t)),cc=(t,e,n)=>e.has(t)?jX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),W2=(t,e,n,r)=>(HX(t,e,"write to private field"),e.set(t,n),n),hg,xf,W4,gh,dg,fg,fC,pC;class __e{constructor(e,n,r){this.ctx=e,cc(this,hg),cc(this,xf),cc(this,W4),cc(this,gh,ob(null)),cc(this,dg,ob(()=>{})),cc(this,fg),cc(this,fC,()=>{mr(this,gh).value&&(mr(this,gh).value.destroy(),mr(this,gh).value=null)}),cc(this,pC,s=>{const l=(()=>{const{selection:a,schema:c}=s.state;if(a.empty||!(a instanceof tt))return!1;const u=a.node;if(u.type.name!==ug)return!1;const h=a.from,d=c.nodes.paragraph.create(null,c.text(u.attrs.value)),f=new FA(mr(this,W4),{state:Ah.create({doc:d,schema:new cW({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},text:{group:"inline"}}}),plugins:[MA({"Mod-z":a3,"Mod-Z":B0,"Mod-y":B0,Enter:()=>(mr(this,dg).value(),!0)})]})});return mr(this,gh).value=f,mr(this,dg).value=()=>{const{tr:p}=s.state;p.setNodeAttribute(h,"value",f.state.doc.textContent),s.dispatch(p),requestAnimationFrame(()=>{s.focus()})},!0})();return l||mr(this,fC).call(this),l}),this.update=(s,o)=>{mr(this,xf).update(s,o)},this.destroy=()=>{mr(this,fg).unmount(),mr(this,xf).destroy(),mr(this,hg).remove()};const i=document.createElement("div");i.className="milkdown-latex-inline-edit",W2(this,hg,i),W2(this,fg,qo(C_e,{config:r,innerView:mr(this,gh),updateValue:mr(this,dg)})),mr(this,fg).mount(i),W2(this,xf,new w3({debounce:0,content:mr(this,hg),shouldShow:mr(this,pC),offset:10,floatingUIOptions:{placement:"bottom"}})),mr(this,xf).update(n),W2(this,W4,document.createElement("div"))}}hg=new WeakMap;xf=new WeakMap;W4=new WeakMap;gh=new WeakMap;dg=new WeakMap;fg=new WeakMap;fC=new WeakMap;pC=new WeakMap;const A_e=ii(t=>ufe(/(?:\$)([^$]+)(?:\$)$/,xy.type(t),{getAttr:e=>{var n;return{value:(n=e[1])!=null?n:""}}})),T_e=ii(t=>fA(/^\$\$[\s\n]$/,Fl.type(t),()=>({language:"LaTeX"}))),M_e=Hl("remarkMath",()=>v9e);function E_e(t){return Du(t,"math",(e,n,r)=>{const{value:i}=e,s={type:"code",lang:"LaTeX",value:i};r.children.splice(n,1,s)})}const O_e=Hl("remarkMathBlock",()=>()=>E_e),N_e=(t,e)=>{t.config(Jl(Kt.Latex)).config(n=>{if(!A3(n).get().includes(Kt.CodeMirror))throw new Error("You need to enable CodeMirror to use LaTeX feature");n.update(sv.key,s=>({...s,renderPreview:(o,l)=>{if(o.toLowerCase()==="latex"&&l.length>0)return I_e(l,e==null?void 0:e.katexOptions);const a=s.renderPreview;return a(o,l)}})),n.set(s$.key,{view:s=>{var o;return new __e(n,s,{inlineEditConfirm:(o=e==null?void 0:e.inlineEditConfirm)!=null?o:CE,...e})}})}).use(M_e).use(O_e).use(xy).use(s$).use(A_e).use(T_e).use(S_e).use(zX)};function I_e(t,e){return tX.renderToString(t,{...e,throwOnError:!1,displayMode:!0})}const P_e=(t,e)=>{t.config(Jl(Kt.LinkTooltip)).config(J9e).config(n=>{n.update(H0.key,r=>{var i,s,o,l,a,c;return{...r,linkIcon:(i=e==null?void 0:e.linkIcon)!=null?i:WCe,editButton:(s=e==null?void 0:e.editButton)!=null?s:_E,removeButton:(o=e==null?void 0:e.removeButton)!=null?o:dC,confirmButton:(l=e==null?void 0:e.confirmButton)!=null?l:CE,inputPlaceholder:(a=e==null?void 0:e.inputPlaceholder)!=null?a:"Paste link...",onCopyLink:(c=e==null?void 0:e.onCopyLink)!=null?c:()=>{}}})}).use(Y9e)};function R_e(t,e){t.set(k3.key,{renderLabel:({label:n,listType:r,checked:i})=>{var s,o,l;return i==null?r==="bullet"?(s=e==null?void 0:e.bulletIcon)!=null?s:FCe:n:i?(o=e==null?void 0:e.checkBoxCheckedIcon)!=null?o:HCe:(l=e==null?void 0:e.checkBoxUncheckedIcon)!=null?l:VCe}})}const D_e=(t,e)=>{t.config(Jl(Kt.ListItem)).config(n=>R_e(n,e)).use(rCe)};function L_e(t){var e;return t.childCount<=1&&!((e=t.firstChild)!=null&&e.content.size)}function B_e(t,e){const{selection:n}=t;if(!n.empty)return null;const r=n.$anchor,i=r.parent;if(i.content.size>0||Il(l=>l.type.name==="table")(r))return null;const o=r.before();return er.node(o,o+i.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const mC=Jt({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),$_e=dr(t=>new An({key:new $n("CREPE_PLACEHOLDER"),props:{decorations:e=>{var n;const r=t.get(mC.key);if(r.mode==="doc"&&!L_e(e.doc)||OX(e.selection)||NX(e.selection))return null;const i=(n=r.text)!=null?n:"Please enter...",s=B_e(e,i);return s?tn.create(e.doc,[s]):null}}})),F_e=(t,e)=>{t.config(Jl(Kt.Placeholder)).config(n=>{e&&n.update(mC.key,r=>({...r,...e}))}).use($_e).use(mC)},z_e=(t,e)=>{t.config(Jl(Kt.Table)).config(n=>{n.update(S3.key,r=>({...r,renderButton:i=>{var s,o,l,a,c,u,h,d,f;switch(i){case"add_row":return(s=e==null?void 0:e.addRowIcon)!=null?s:hC;case"add_col":return(o=e==null?void 0:e.addColIcon)!=null?o:hC;case"delete_row":return(l=e==null?void 0:e.deleteRowIcon)!=null?l:dC;case"delete_col":return(a=e==null?void 0:e.deleteColIcon)!=null?a:dC;case"align_col_left":return(c=e==null?void 0:e.alignLeftIcon)!=null?c:LCe;case"align_col_center":return(u=e==null?void 0:e.alignCenterIcon)!=null?u:DCe;case"align_col_right":return(h=e==null?void 0:e.alignRightIcon)!=null?h:BCe;case"col_drag_handle":return(d=e==null?void 0:e.colDragHandleIcon)!=null?d:r$;case"row_drag_handle":return(f=e==null?void 0:e.rowDragHandleIcon)!=null?f:r$}}}))}).use(MCe)};function j_e(t,e){var n,r,i,s,o,l,a;const c=new RX;c.addGroup("formatting","Formatting").addItem("bold",{icon:(n=t==null?void 0:t.boldIcon)!=null?n:$Ce,active:f=>f.get(ze).call(hf.key,ep.type(f)),onRun:f=>{f.get(ze).call(j5.key)}}).addItem("italic",{icon:(r=t==null?void 0:t.italicIcon)!=null?r:QCe,active:f=>f.get(ze).call(hf.key,kd.type(f)),onRun:f=>{f.get(ze).call(z5.key)}}).addItem("strikethrough",{icon:(i=t==null?void 0:t.strikethroughIcon)!=null?i:r_e,active:f=>f.get(ze).call(hf.key,sp.type(f)),onRun:f=>{f.get(ze).call(t3.key)}});const u=c.addGroup("function","Function");u.addItem("code",{icon:(s=t==null?void 0:t.codeIcon)!=null?s:AX,active:f=>f.get(ze).call(hf.key,Ca.type(f)),onRun:f=>{f.get(ze).call(H5.key)}});const h=e&&A3(e).get();return(h==null?void 0:h.includes(Kt.Latex))&&u.addItem("latex",{icon:(o=t==null?void 0:t.latexIcon)!=null?o:MX,active:f=>f.get(ze).call(nG.key,xy.type(f)),onRun:f=>{f.get(ze).call(zX.key)}}),u.addItem("link",{icon:(l=t==null?void 0:t.linkIcon)!=null?l:ZCe,active:f=>f.get(ze).call(hf.key,Io.type(f)),onRun:f=>{f.get(ze).call(iX.key)}}),(a=t==null?void 0:t.buildToolbar)==null||a.call(t,c),c.build()}const H_e=si({props:{ctx:{type:Object,required:!0},hide:{type:Function,required:!0},show:{type:Object,required:!0},selection:{type:Object,required:!0},config:{type:Object,required:!1}},setup(t){const{ctx:e,config:n}=t,r=o=>l=>{l.preventDefault(),e&&o(e)};function i(o){return t.selection.value,e.get(h9).status!==Xx.Created?!1:o(e)}const s=pd(()=>j_e(n,e));return()=>Q(Yr,null,s.value.map(o=>o.items.map(l=>Q("button",{type:"button",class:jr("toolbar-item",e&&i(l.active)&&"active"),onPointerdown:r(l.onRun)},Q(L0,{icon:l.icon})))).reduce((o,l,a)=>(a===0?o.push(...l):o.push(Q("div",{class:"divider"}),...l),o),[]))}});var VX=t=>{throw TypeError(t)},WX=(t,e,n)=>e.has(t)||VX("Cannot "+n),is=(t,e,n)=>(WX(t,e,"read from private field"),n?n.call(t):e.get(t)),rm=(t,e,n)=>e.has(t)?VX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),q2=(t,e,n,r)=>(WX(t,e,"write to private field"),e.set(t,n),n),Sc,pg,q4,mg,gg;const o$=x3("CREPE_TOOLBAR");class V_e{constructor(e,n,r){rm(this,Sc),rm(this,pg),rm(this,q4),rm(this,mg),rm(this,gg,je(!1)),this.update=(o,l)=>{is(this,Sc).update(o,l),is(this,mg).value=o.state.selection},this.destroy=()=>{is(this,Sc).destroy(),is(this,q4).unmount(),is(this,pg).remove()},this.hide=()=>{is(this,Sc).hide()};const i=document.createElement("div");i.className="milkdown-toolbar",q2(this,mg,ob(n.state.selection));const s=qo(H_e,{ctx:e,hide:this.hide,config:r,selection:is(this,mg),show:is(this,gg)});s.mount(i),q2(this,pg,i),q2(this,q4,s),q2(this,Sc,new w3({content:is(this,pg),debounce:20,offset:10,shouldShow(o){const{doc:l,selection:a}=o.state,{empty:c,from:u,to:h}=a,d=!l.textBetween(u,h).length&&a instanceof qe,f=!(a instanceof qe),p=o.dom.getRootNode().activeElement,m=i.contains(p),y=!o.hasFocus()&&!m,g=!o.editable;return!(y||f||c||d||g)}})),is(this,Sc).onShow=()=>{is(this,gg).value=!0},is(this,Sc).onHide=()=>{is(this,gg).value=!1},this.update(n)}}Sc=new WeakMap;pg=new WeakMap;q4=new WeakMap;mg=new WeakMap;gg=new WeakMap;const W_e=(t,e)=>{t.config(Jl(Kt.Toolbar)).config(n=>{n.set(o$.key,{view:r=>new V_e(n,r,e)})}).use(o$)};function q_e(t,e,n){switch(t){case Kt.CodeMirror:return x_e(e,n);case Kt.ListItem:return D_e(e,n);case Kt.LinkTooltip:return P_e(e,n);case Kt.ImageBlock:return k_e(e,n);case Kt.Cursor:return b_e(e,n);case Kt.BlockEdit:return w_e(e,n);case Kt.Placeholder:return F_e(e,n);case Kt.Toolbar:return W_e(e,n);case Kt.Table:return z_e(e,n);case Kt.Latex:return N_e(e,n)}}var qX=t=>{throw TypeError(t)},UX=(t,e,n)=>e.has(t)||qX("Cannot "+n),Ps=(t,e,n)=>(UX(t,e,"read from private field"),n?n.call(t):e.get(t)),p7=(t,e,n)=>e.has(t)?qX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),m7=(t,e,n,r)=>(UX(t,e,"write to private field"),e.set(t,n),n),as,U4,G4;class U_e{constructor({root:e,defaultValue:n=""}){p7(this,as),p7(this,U4),p7(this,G4,!0),this.addFeature=(i,s)=>(i(Ps(this,as),s),this),this.create=()=>Ps(this,as).create(),this.destroy=()=>Ps(this,as).destroy(),this.setReadonly=i=>(m7(this,G4,!i),Ps(this,as).action(s=>{Ps(this,as).status===Xx.Created&&s.get(hn).setProps({editable:()=>!i})}),this),this.getMarkdown=()=>Ps(this,as).action(yye()),this.on=i=>Ps(this,as).status!==Xx.Created?(Ps(this,as).config(s=>{const o=s.get(Eb);i(o)}),this):(Ps(this,as).action(s=>{const o=s.get(Eb);i(o)}),this);var r;m7(this,U4,(r=typeof e=="string"?document.querySelector(e):e)!=null?r:document.body),m7(this,as,mye.make().config(i=>{i.inject(c_e,this),i.inject(a_e,[])}).config(i=>{i.set(t4,Ps(this,U4)),i.set(Qw,n),i.set(Qg,{editable:()=>Ps(this,G4)}),i.update(_3.key,s=>({...s,size:4}))}).use($ve).use(kX).use(ECe).use(NCe).use(PCe).use(vX).use(w3e))}get editor(){return Ps(this,as)}}as=new WeakMap;U4=new WeakMap;G4=new WeakMap;class ca extends U_e{constructor({features:e={},featureConfigs:n={},...r}){super(r);const i=xle(n,l_e);Object.entries({...RCe,...e}).filter(([,o])=>o).map(([o])=>o).forEach(o=>{const l=i[o];q_e(o,this.editor,l)})}}ca.Feature=Kt;const gC="RFC3986",yC={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},G_e="RFC1738",K_e=Array.isArray,rl=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),g7=1024,J_e=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let o="";for(let l=0;l<s.length;l+=g7){const a=s.length>=g7?s.slice(l,l+g7):s,c=[];for(let u=0;u<a.length;++u){let h=a.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===G_e&&(h===40||h===41)){c[c.length]=a.charAt(u);continue}if(h<128){c[c.length]=rl[h];continue}if(h<2048){c[c.length]=rl[192|h>>6]+rl[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=rl[224|h>>12]+rl[128|h>>6&63]+rl[128|h&63];continue}u+=1,h=65536+((h&1023)<<10|a.charCodeAt(u)&1023),c[c.length]=rl[240|h>>18]+rl[128|h>>12&63]+rl[128|h>>6&63]+rl[128|h&63]}o+=c.join("")}return o};function Y_e(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function l$(t,e){if(K_e(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const X_e=Object.prototype.hasOwnProperty,GX={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},pl=Array.isArray,Q_e=Array.prototype.push,KX=function(t,e){Q_e.apply(t,pl(e)?e:[e])},Z_e=Date.prototype.toISOString,lr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:J_e,encodeValuesOnly:!1,format:gC,formatter:yC[gC],indices:!1,serializeDate(t){return Z_e.call(t)},skipNulls:!1,strictNullHandling:!1};function eAe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const y7={};function JX(t,e,n,r,i,s,o,l,a,c,u,h,d,f,p,m,y,g){let v=t,w=g,S=0,_=!1;for(;(w=w.get(y7))!==void 0&&!_;){const N=w.get(t);if(S+=1,typeof N<"u"){if(N===S)throw new RangeError("Cyclic object value");_=!0}typeof w.get(y7)>"u"&&(S=0)}if(typeof c=="function"?v=c(e,v):v instanceof Date?v=d==null?void 0:d(v):n==="comma"&&pl(v)&&(v=l$(v,function(N){return N instanceof Date?d==null?void 0:d(N):N})),v===null){if(s)return a&&!m?a(e,lr.encoder,y,"key",f):e;v=""}if(eAe(v)||Y_e(v)){if(a){const N=m?e:a(e,lr.encoder,y,"key",f);return[(p==null?void 0:p(N))+"="+(p==null?void 0:p(a(v,lr.encoder,y,"value",f)))]}return[(p==null?void 0:p(e))+"="+(p==null?void 0:p(String(v)))]}const C=[];if(typeof v>"u")return C;let T;if(n==="comma"&&pl(v))m&&a&&(v=l$(v,a)),T=[{value:v.length>0?v.join(",")||null:void 0}];else if(pl(c))T=c;else{const N=Object.keys(v);T=u?N.sort(u):N}const I=l?String(e).replace(/\./g,"%2E"):String(e),L=r&&pl(v)&&v.length===1?I+"[]":I;if(i&&pl(v)&&v.length===0)return L+"[]";for(let N=0;N<T.length;++N){const $=T[N],F=typeof $=="object"&&typeof $.value<"u"?$.value:v[$];if(o&&F===null)continue;const ie=h&&l?$.replace(/\./g,"%2E"):$,Z=pl(v)?typeof n=="function"?n(L,ie):L:L+(h?"."+ie:"["+ie+"]");g.set(t,S);const Y=new WeakMap;Y.set(y7,g),KX(C,JX(F,Z,n,r,i,s,o,l,n==="comma"&&m&&pl(v)?null:a,c,u,h,d,f,p,m,y,Y))}return C}function tAe(t=lr){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||lr.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=gC;if(typeof t.format<"u"){if(!X_e.call(yC,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=yC[n];let i=lr.filter;(typeof t.filter=="function"||pl(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in GX?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=lr.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:lr.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:lr.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:lr.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:lr.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?lr.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:lr.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:lr.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:lr.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:lr.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:lr.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:lr.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:lr.strictNullHandling}}function nAe(t,e={}){let n=t;const r=tAe(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):pl(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const l=GX[r.arrayFormat],a=l==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let d=0;d<i.length;++d){const f=i[d];r.skipNulls&&n[f]===null||KX(o,JX(n[f],f,l,a,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=o.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""}const bf="4.104.0";let a$=!1,f1,YX,XX,vC,QX,ZX,eQ,tQ,nQ;function rAe(t,e={auto:!1}){if(a$)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(f1)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${f1}'\``);a$=e.auto,f1=t.kind,YX=t.fetch,XX=t.FormData,vC=t.File,QX=t.ReadableStream,ZX=t.getMultipartRequestOptions,eQ=t.getDefaultAgent,tQ=t.fileFromPath,nQ=t.isFsReadStream}class iAe{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function sAe({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,l)=>({...l,body:new iAe(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const rQ=()=>{f1||rAe(sAe(),{auto:!0})};rQ();class ot extends Error{}class Hr extends ot{constructor(e,n,r,i){super(`${Hr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new T3({message:r,cause:xC(n)});const s=n==null?void 0:n.error;return e===400?new iQ(e,s,r,i):e===401?new sQ(e,s,r,i):e===403?new oQ(e,s,r,i):e===404?new lQ(e,s,r,i):e===409?new aQ(e,s,r,i):e===422?new cQ(e,s,r,i):e===429?new uQ(e,s,r,i):e>=500?new hQ(e,s,r,i):new Hr(e,s,r,i)}}class Gs extends Hr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class T3 extends Hr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class TE extends T3{constructor({message:e}={}){super({message:e??"Request timed out."})}}class iQ extends Hr{}class sQ extends Hr{}class oQ extends Hr{}class lQ extends Hr{}class aQ extends Hr{}class cQ extends Hr{}class uQ extends Hr{}class hQ extends Hr{}class dQ extends ot{constructor(){super("Could not parse response content as the length limit was reached")}}class fQ extends ot{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var U2=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},rh=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},cs;class M3{constructor(){cs.set(this,void 0),this.buffer=new Uint8Array,U2(this,cs,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const i=[];let s;for(;(s=oAe(this.buffer,rh(this,cs,"f")))!=null;){if(s.carriage&&rh(this,cs,"f")==null){U2(this,cs,s.index,"f");continue}if(rh(this,cs,"f")!=null&&(s.index!==rh(this,cs,"f")+1||s.carriage)){i.push(this.decodeText(this.buffer.slice(0,rh(this,cs,"f")-1))),this.buffer=this.buffer.slice(rh(this,cs,"f")),U2(this,cs,null,"f");continue}const o=rh(this,cs,"f")!==null?s.preceding-1:s.preceding,l=this.decodeText(this.buffer.slice(0,o));i.push(l),this.buffer=this.buffer.slice(s.index),U2(this,cs,null,"f")}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new ot(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new ot(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ot("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}cs=new WeakMap;M3.NEWLINE_CHARS=new Set([`
`,"\r"]);M3.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function oAe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function lAe(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function pQ(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Ml{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const o of aAe(e,n))if(!s){if(o.data.startsWith("[DONE]")){s=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let l;try{l=JSON.parse(o.data)}catch(a){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),a}if(l&&l.error)throw new Hr(void 0,l.error,void 0,bQ(e.headers));yield l}else{let l;try{l=JSON.parse(o.data)}catch(a){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),a}if(o.event=="error")throw new Hr(void 0,l.error,l.message,void 0);yield{event:o.event,data:l}}}s=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{s||n.abort()}}return new Ml(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const o=new M3,l=pQ(e);for await(const a of l)for(const c of o.decode(a))yield c;for(const a of o.flush())yield a}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||n.abort()}}return new Ml(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Ml(()=>i(e),this.controller),new Ml(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new QX({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:o}=await n.next();if(o)return i.close();const l=r.encode(JSON.stringify(s)+`
`);i.enqueue(l)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}async function*aAe(t,e){if(!t.body)throw e.abort(),new ot("Attempted to iterate over a response with no body");const n=new uAe,r=new M3,i=pQ(t.body);for await(const s of cAe(i))for(const o of r.decode(s)){const l=n.decode(o);l&&(yield l)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*cAe(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=lAe(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class uAe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=hAe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function hAe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const mQ=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",gQ=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&E3(t),E3=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",dAe=t=>gQ(t)||mQ(t)||nQ(t);async function yQ(t,e,n){var i;if(t=await t,gQ(t))return t;if(mQ(t)){const s=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=E3(s)?[await s.arrayBuffer()]:[s];return new vC(o,e,n)}const r=await fAe(t);if(e||(e=mAe(t)??"unknown_file"),!(n!=null&&n.type)){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new vC(r,e,n)}async function fAe(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(E3(t))e.push(await t.arrayBuffer());else if(gAe(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${pAe(t)}`);return e}function pAe(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function mAe(t){var e;return v7(t.name)||v7(t.filename)||((e=v7(t.path))==null?void 0:e.split(/[\\/]/).pop())}const v7=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},gAe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",c$=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",gd=async t=>{const e=await yAe(t.body);return ZX(e,t)},yAe=async t=>{const e=new XX;return await Promise.all(Object.entries(t||{}).map(([n,r])=>wC(e,n,r))),e},wC=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(dAe(n)){const r=await yQ(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>wC(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>wC(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var h0={},vAe=function(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},wAe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},G2;rQ();async function vQ(t){var o;const{response:e}=t;if(t.options.stream)return du("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Ml.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(o=n==null?void 0:n.split(";")[0])==null?void 0:o.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const l=await e.json();return du("response",e.status,e.url,e.headers,l),wQ(l,e)}const s=await e.text();return du("response",e.status,e.url,e.headers,s),s}function wQ(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class O3 extends Promise{constructor(e,n=vQ){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new O3(this.responsePromise,async n=>wQ(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class xAe{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=w7("maxRetries",n),this.timeout=w7("timeout",r),this.httpAgent=i,this.fetch=s??YX}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),..._Ae(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${EAe()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&E3(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:n,...i,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var m;const r={...e},{method:i,path:s,query:o,headers:l={}}=r,a=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:c$(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,c=this.calculateContentLength(a),u=this.buildURL(s,o);"timeout"in r&&w7("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??eQ(u),d=r.timeout+1e3;typeof((m=h==null?void 0:h.options)==null?void 0:m.timeout)=="number"&&d>(h.options.timeout??0)&&(h.options.timeout=d),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:r,headers:l,contentLength:c,retryCount:n});return{req:{method:i,...a&&{body:a},headers:f,...h&&{agent:h},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const o=this.defaultHeaders(e);return f$(s,o),f$(s,n),c$(e.body)&&f1!=="node"&&delete s["content-type"],J2(o,"x-stainless-retry-count")===void 0&&J2(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),J2(o,"x-stainless-timeout")===void 0&&J2(n,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,n),s}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return Hr.generate(e,n,r,i)}request(e,n=null){return new O3(this.makeRequest(e,n))}async makeRequest(e,n){var h,d;const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:o,timeout:l}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:o,options:r}),du("request",o,r,s.headers),(h=r.signal)!=null&&h.aborted)throw new Gs;const a=new AbortController,c=await this.fetchWithTimeout(o,s,l,a).catch(xC);if(c instanceof Error){if((d=r.signal)!=null&&d.aborted)throw new Gs;if(n)return this.retryRequest(r,n);throw c.name==="AbortError"?new TE:new T3({cause:c})}const u=bQ(c.headers);if(!c.ok){if(n&&this.shouldRetry(c)){const v=`retrying, ${n} attempts remaining`;return du(`response (error; ${v})`,c.status,o,u),this.retryRequest(r,n,u)}const f=await c.text().catch(v=>xC(v).message),p=AAe(f),m=p?void 0:f;throw du(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,u,m),this.makeStatusError(c.status,p,m,u)}return{response:c,options:r,controller:a}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new bAe(this,r,e)}buildURL(e,n){const r=MAe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return kQ(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ot(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...o}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r),a={signal:i.signal,...o};return a.method&&(a.method=a.method.toUpperCase()),this.fetch.call(void 0,e,a).finally(()=>{clearTimeout(l)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const l=parseFloat(s);Number.isNaN(l)||(i=l)}const o=r==null?void 0:r["retry-after"];if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await dv(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return o*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${bf}`}}class xQ{constructor(e,n,r,i){G2.set(this,void 0),vAe(this,G2,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new ot("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,s]of r)e.url.searchParams.set(i,s);n.query=void 0,n.path=e.url.toString()}return await wAe(this,G2,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(G2=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class bAe extends O3{constructor(e,n,r){super(n,async i=>new r(e,i.response,await vQ(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const bQ=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),kAe={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Bn=t=>typeof t=="object"&&t!==null&&!kQ(t)&&Object.keys(t).every(e=>SQ(kAe,e)),SAe=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bf,"X-Stainless-OS":h$(Deno.build.os),"X-Stainless-Arch":u$(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bf,"X-Stainless-OS":h$(process.platform),"X-Stainless-Arch":u$(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=CAe();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bf,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function CAe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const u$=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",h$=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let d$;const _Ae=()=>d$??(d$=SAe()),AAe=t=>{try{return JSON.parse(t)}catch{return}},TAe=/^[a-z][a-z0-9+.-]*:/i,MAe=t=>TAe.test(t),dv=t=>new Promise(e=>setTimeout(e,t)),w7=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ot(`${t} must be an integer`);if(e<0)throw new ot(`${t} must be a positive integer`);return e},xC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},K2=t=>{var e,n,r,i;if(typeof process<"u")return((e=h0==null?void 0:h0[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};function kQ(t){if(!t)return!0;for(const e in t)return!1;return!0}function SQ(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f$(t,e){for(const n in e){if(!SQ(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}const p$=new Set(["authorization","api-key"]);function du(t,...e){if(typeof process<"u"&&(h0==null?void 0:h0.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const s={...r,headers:{...r.headers}};for(const o in r.headers)p$.has(o.toLowerCase())&&(s.headers[o]="REDACTED");return s}let i=null;for(const s in r)p$.has(s.toLowerCase())&&(i??(i={...r}),i[s]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const EAe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),OAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",NAe=t=>typeof(t==null?void 0:t.get)=="function",J2=(t,e)=>{var r;const n=e.toLowerCase();if(NAe(t)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(s,o,l)=>o+l.toUpperCase());for(const s of[e,n,e.toUpperCase(),i]){const o=t.get(s);if(o)return o}}for(const[i,s]of Object.entries(t))if(i.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${e} header, using the first entry.`),s[0]):s},IAe=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function x7(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class N3 extends xQ{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class fr extends xQ{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class ht{constructor(e){this._client=e}}let CQ=class extends ht{list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,PAe,{query:n,...r})}},I3=class extends ht{constructor(){super(...arguments),this.messages=new CQ(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/chat/completions",P3,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class P3 extends fr{}class PAe extends fr{}I3.ChatCompletionsPage=P3;I3.Messages=CQ;let R3=class extends ht{constructor(){super(...arguments),this.completions=new I3(this._client)}};R3.Completions=I3;R3.ChatCompletionsPage=P3;class _Q extends ht{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class AQ extends ht{create(e,n){return this._client.post("/audio/transcriptions",gd({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class TQ extends ht{create(e,n){return this._client.post("/audio/translations",gd({body:e,...n,__metadata:{model:e.model}}))}}class fv extends ht{constructor(){super(...arguments),this.transcriptions=new AQ(this._client),this.translations=new TQ(this._client),this.speech=new _Q(this._client)}}fv.Transcriptions=AQ;fv.Translations=TQ;fv.Speech=_Q;class ME extends ht{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/batches",EE,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class EE extends fr{}ME.BatchesPage=EE;var yo=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},En=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},bC,K4,J4,yg,vg,Y4,wg,ua,xg,Ob,Nb,kf,MQ;class OE{constructor(){bC.add(this),this.controller=new AbortController,K4.set(this,void 0),J4.set(this,()=>{}),yg.set(this,()=>{}),vg.set(this,void 0),Y4.set(this,()=>{}),wg.set(this,()=>{}),ua.set(this,{}),xg.set(this,!1),Ob.set(this,!1),Nb.set(this,!1),kf.set(this,!1),yo(this,K4,new Promise((e,n)=>{yo(this,J4,e,"f"),yo(this,yg,n,"f")}),"f"),yo(this,vg,new Promise((e,n)=>{yo(this,Y4,e,"f"),yo(this,wg,n,"f")}),"f"),En(this,K4,"f").catch(()=>{}),En(this,vg,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},En(this,bC,"m",MQ).bind(this))},0)}_connected(){this.ended||(En(this,J4,"f").call(this),this._emit("connect"))}get ended(){return En(this,xg,"f")}get errored(){return En(this,Ob,"f")}get aborted(){return En(this,Nb,"f")}abort(){this.controller.abort()}on(e,n){return(En(this,ua,"f")[e]||(En(this,ua,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=En(this,ua,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(En(this,ua,"f")[e]||(En(this,ua,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{yo(this,kf,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){yo(this,kf,!0,"f"),await En(this,vg,"f")}_emit(e,...n){if(En(this,xg,"f"))return;e==="end"&&(yo(this,xg,!0,"f"),En(this,Y4,"f").call(this));const r=En(this,ua,"f")[e];if(r&&(En(this,ua,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!En(this,kf,"f")&&!(r!=null&&r.length)&&Promise.reject(i),En(this,yg,"f").call(this,i),En(this,wg,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!En(this,kf,"f")&&!(r!=null&&r.length)&&Promise.reject(i),En(this,yg,"f").call(this,i),En(this,wg,"f").call(this,i),this._emit("end")}}_emitFinal(){}}K4=new WeakMap,J4=new WeakMap,yg=new WeakMap,vg=new WeakMap,Y4=new WeakMap,wg=new WeakMap,ua=new WeakMap,xg=new WeakMap,Ob=new WeakMap,Nb=new WeakMap,kf=new WeakMap,bC=new WeakSet,MQ=function(e){if(yo(this,Ob,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Gs),e instanceof Gs)return yo(this,Nb,!0,"f"),this._emit("abort",e);if(e instanceof ot)return this._emit("error",e);if(e instanceof Error){const n=new ot(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new ot(String(e)))};var Ye=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ss=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Ir,kC,ml,X4,xo,Ih,$f,bh,Ib,hs,Q4,Z4,p1,bg,kg,m$,g$,y$,v$,w$,x$,b$;class To extends OE{constructor(){super(...arguments),Ir.add(this),kC.set(this,[]),ml.set(this,{}),X4.set(this,{}),xo.set(this,void 0),Ih.set(this,void 0),$f.set(this,void 0),bh.set(this,void 0),Ib.set(this,void 0),hs.set(this,void 0),Q4.set(this,void 0),Z4.set(this,void 0),p1.set(this,void 0)}[(kC=new WeakMap,ml=new WeakMap,X4=new WeakMap,xo=new WeakMap,Ih=new WeakMap,$f=new WeakMap,bh=new WeakMap,Ib=new WeakMap,hs=new WeakMap,Q4=new WeakMap,Z4=new WeakMap,p1=new WeakMap,Ir=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new To;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Ml.fromReadableStream(e,this.controller);for await(const o of i)Ye(this,Ir,"m",bg).call(this,o);if((s=i.controller.signal)!=null&&s.aborted)throw new Gs;return this._addRun(Ye(this,Ir,"m",kg).call(this))}toReadableStream(){return new Ml(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,s){const o=new To;return o._run(()=>o._runToolAssistantStream(e,n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,n,r,i,s){var c;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const l={...i,stream:!0},a=await e.submitToolOutputs(n,r,l,{...s,signal:this.controller.signal});this._connected();for await(const u of a)Ye(this,Ir,"m",bg).call(this,u);if((c=a.controller.signal)!=null&&c.aborted)throw new Gs;return this._addRun(Ye(this,Ir,"m",kg).call(this))}static createThreadAssistantStream(e,n,r){const i=new To;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new To;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Ye(this,Q4,"f")}currentRun(){return Ye(this,Z4,"f")}currentMessageSnapshot(){return Ye(this,xo,"f")}currentRunStepSnapshot(){return Ye(this,p1,"f")}async finalRunSteps(){return await this.done(),Object.values(Ye(this,ml,"f"))}async finalMessages(){return await this.done(),Object.values(Ye(this,X4,"f"))}async finalRun(){if(await this.done(),!Ye(this,Ih,"f"))throw Error("Final run was not received.");return Ye(this,Ih,"f")}async _createThreadAssistantStream(e,n,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const a of o)Ye(this,Ir,"m",bg).call(this,a);if((l=o.controller.signal)!=null&&l.aborted)throw new Gs;return this._addRun(Ye(this,Ir,"m",kg).call(this))}async _createAssistantStream(e,n,r,i){var a;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},l=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const c of l)Ye(this,Ir,"m",bg).call(this,c);if((a=l.controller.signal)!=null&&a.aborted)throw new Gs;return this._addRun(Ye(this,Ir,"m",kg).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(x7(s)&&x7(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!x7(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const l=o.index;if(l==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const a=s[l];a==null?s.push(o):s[l]=this.accumulateDelta(a,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,s){return await this._createToolAssistantStream(r,e,n,i,s)}}bg=function(e){if(!this.ended)switch(ss(this,Q4,e,"f"),Ye(this,Ir,"m",y$).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Ye(this,Ir,"m",b$).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ye(this,Ir,"m",g$).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Ye(this,Ir,"m",m$).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},kg=function(){if(this.ended)throw new ot("stream has ended, this shouldn't happen");if(!Ye(this,Ih,"f"))throw Error("Final run has not been received");return Ye(this,Ih,"f")},m$=function(e){const[n,r]=Ye(this,Ir,"m",w$).call(this,e,Ye(this,xo,"f"));ss(this,xo,n,"f"),Ye(this,X4,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Ye(this,$f,"f")){if(Ye(this,bh,"f"))switch(Ye(this,bh,"f").type){case"text":this._emit("textDone",Ye(this,bh,"f").text,Ye(this,xo,"f"));break;case"image_file":this._emit("imageFileDone",Ye(this,bh,"f").image_file,Ye(this,xo,"f"));break}ss(this,$f,i.index,"f")}ss(this,bh,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Ye(this,$f,"f")!==void 0){const i=e.data.content[Ye(this,$f,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Ye(this,xo,"f"));break;case"text":this._emit("textDone",i.text,Ye(this,xo,"f"));break}}Ye(this,xo,"f")&&this._emit("messageDone",e.data),ss(this,xo,void 0,"f")}},g$=function(e){const n=Ye(this,Ir,"m",v$).call(this,e);switch(ss(this,p1,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==Ye(this,Ib,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(Ye(this,hs,"f")&&this._emit("toolCallDone",Ye(this,hs,"f")),ss(this,Ib,s.index,"f"),ss(this,hs,n.step_details.tool_calls[s.index],"f"),Ye(this,hs,"f")&&this._emit("toolCallCreated",Ye(this,hs,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ss(this,p1,void 0,"f"),e.data.step_details.type=="tool_calls"&&Ye(this,hs,"f")&&(this._emit("toolCallDone",Ye(this,hs,"f")),ss(this,hs,void 0,"f")),this._emit("runStepDone",e.data,n);break}},y$=function(e){Ye(this,kC,"f").push(e),this._emit("event",e)},v$=function(e){switch(e.event){case"thread.run.step.created":return Ye(this,ml,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=Ye(this,ml,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=To.accumulateDelta(n,r.delta);Ye(this,ml,"f")[e.data.id]=i}return Ye(this,ml,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Ye(this,ml,"f")[e.data.id]=e.data;break}if(Ye(this,ml,"f")[e.data.id])return Ye(this,ml,"f")[e.data.id];throw new Error("No snapshot available")},w$=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=Ye(this,Ir,"m",x$).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},x$=function(e,n){return To.accumulateDelta(n,e)},b$=function(e){switch(ss(this,Z4,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ss(this,Ih,e.data,"f"),Ye(this,hs,"f")&&(this._emit("toolCallDone",Ye(this,hs,"f")),ss(this,hs,void 0,"f"));break}};class NE extends ht{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/assistants",IE,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class IE extends fr{}NE.AssistantsPage=IE;function k$(t){return typeof t.parse=="function"}const d0=t=>(t==null?void 0:t.role)==="assistant",EQ=t=>(t==null?void 0:t.role)==="function",OQ=t=>(t==null?void 0:t.role)==="tool";function PE(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function pv(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function RAe(t,e){return!e||!NQ(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:RE(t,e)}function RE(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new dQ;if(r.finish_reason==="content_filter")throw new fQ;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>LAe(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?DAe(e,r.message.content):null}}});return{...t,choices:n}}function DAe(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function LAe(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:pv(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function BAe(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===e.function.name});return pv(n)||(n==null?void 0:n.function.strict)||!1}function NQ(t){var e;return PE(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>pv(n)||n.type==="function"&&n.function.strict===!0))??!1}function $Ae(t){for(const e of t??[]){if(e.type!=="function")throw new ot(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ot(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Ii=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},qr,SC,Pb,CC,_C,AC,IQ,TC;const S$=10;class PQ extends OE{constructor(){super(...arguments),qr.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(EQ(e)||OQ(e))&&e.content)this._emit("functionCallResult",e.content);else if(d0(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(d0(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ot("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ii(this,qr,"m",SC).call(this)}async finalMessage(){return await this.done(),Ii(this,qr,"m",Pb).call(this)}async finalFunctionCall(){return await this.done(),Ii(this,qr,"m",CC).call(this)}async finalFunctionCallResult(){return await this.done(),Ii(this,qr,"m",_C).call(this)}async totalUsage(){return await this.done(),Ii(this,qr,"m",AC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Ii(this,qr,"m",Pb).call(this);n&&this._emit("finalMessage",n);const r=Ii(this,qr,"m",SC).call(this);r&&this._emit("finalContent",r);const i=Ii(this,qr,"m",CC).call(this);i&&this._emit("finalFunctionCall",i);const s=Ii(this,qr,"m",_C).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Ii(this,qr,"m",AC).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ii(this,qr,"m",IQ).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(RE(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var d;const i="function",{function_call:s="auto",stream:o,...l}=n,a=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:c=S$}=r||{},u={};for(const f of n.functions)u[f.name||f.function.name]=f;const h=n.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of n.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const m=(d=(await this._createChatCompletion(e,{...l,function_call:s,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:d.message;if(!m)throw new ot("missing message in ChatCompletion response");if(!m.function_call)return;const{name:y,arguments:g}=m.function_call,v=u[y];if(v){if(a&&a!==y){const C=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:i,name:y,content:C});continue}}else{const C=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${h.map(T=>JSON.stringify(T.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:y,content:C});continue}let w;try{w=k$(v)?await v.parse(g):g}catch(C){this._addMessage({role:i,name:y,content:C instanceof Error?C.message:String(C)});continue}const S=await v.function(w,this),_=Ii(this,qr,"m",TC).call(this,S);if(this._addMessage({role:i,name:y,content:_}),a)return}}async _runTools(e,n,r){var f,p,m;const i="tool",{tool_choice:s="auto",stream:o,...l}=n,a=typeof s!="string"&&((f=s==null?void 0:s.function)==null?void 0:f.name),{maxChatCompletions:c=S$}=r||{},u=n.tools.map(y=>{if(pv(y)){if(!y.$callback)throw new ot("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),h={};for(const y of u)y.type==="function"&&(h[y.function.name||y.function.function.name]=y.function);const d="tools"in n?u.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const v=(p=(await this._createChatCompletion(e,{...l,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0])==null?void 0:p.message;if(!v)throw new ot("missing message in ChatCompletion response");if(!((m=v.tool_calls)!=null&&m.length))return;for(const w of v.tool_calls){if(w.type!=="function")continue;const S=w.id,{name:_,arguments:C}=w.function,T=h[_];if(T){if(a&&a!==_){const $=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:i,tool_call_id:S,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${Object.keys(h).map(F=>JSON.stringify(F)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:S,content:$});continue}let I;try{I=k$(T)?await T.parse(C):C}catch($){const F=$ instanceof Error?$.message:String($);this._addMessage({role:i,tool_call_id:S,content:F});continue}const L=await T.function(I,this),N=Ii(this,qr,"m",TC).call(this,L);if(this._addMessage({role:i,tool_call_id:S,content:N}),a)return}}}}qr=new WeakSet,SC=function(){return Ii(this,qr,"m",Pb).call(this).content??null},Pb=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(d0(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new ot("stream ended without producing a ChatCompletionMessage with role=assistant")},CC=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(d0(i)&&(i!=null&&i.function_call))return i.function_call;if(d0(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.at(-1))==null?void 0:n.function}},_C=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(EQ(n)&&n.content!=null||OQ(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},AC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},IQ=function(e){if(e.n!=null&&e.n>1)throw new ot("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},TC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class by extends PQ{static runFunctions(e,n,r){const i=new by,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new by,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),d0(e)&&e.content&&this._emit("content",e.content)}}const RQ=1,DQ=2,LQ=4,BQ=8,$Q=16,FQ=32,zQ=64,jQ=128,HQ=256,VQ=jQ|HQ,WQ=$Q|FQ|VQ|zQ,qQ=RQ|DQ|WQ,UQ=LQ|BQ,FAe=qQ|UQ,gr={STR:RQ,NUM:DQ,ARR:LQ,OBJ:BQ,NULL:$Q,BOOL:FQ,NAN:zQ,INFINITY:jQ,MINUS_INFINITY:HQ,INF:VQ,SPECIAL:WQ,ATOM:qQ,COLLECTION:UQ,ALL:FAe};class zAe extends Error{}class jAe extends Error{}function HAe(t,e=gr.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return VAe(t.trim(),e)}const VAe=(t,e)=>{const n=t.length;let r=0;const i=d=>{throw new zAe(`${d} at position ${r}`)},s=d=>{throw new jAe(`${d} at position ${r}`)},o=()=>(h(),r>=n&&i("Unexpected end of input"),t[r]==='"'?l():t[r]==="{"?a():t[r]==="["?c():t.substring(r,r+4)==="null"||gr.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||gr.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||gr.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||gr.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||gr.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||gr.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):u()),l=()=>{const d=r;let f=!1;for(r++;r<n&&(t[r]!=='"'||f&&t[r-1]==="\\");)f=t[r]==="\\"?!f:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(d,++r-Number(f)))}catch(p){s(String(p))}else if(gr.STR&e)try{return JSON.parse(t.substring(d,r-Number(f))+'"')}catch{return JSON.parse(t.substring(d,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},a=()=>{r++,h();const d={};try{for(;t[r]!=="}";){if(h(),r>=n&&gr.OBJ&e)return d;const f=l();h(),r++;try{const p=o();Object.defineProperty(d,f,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(gr.OBJ&e)return d;throw p}h(),t[r]===","&&r++}}catch{if(gr.OBJ&e)return d;i("Expected '}' at end of object")}return r++,d},c=()=>{r++;const d=[];try{for(;t[r]!=="]";)d.push(o()),h(),t[r]===","&&r++}catch{if(gr.ARR&e)return d;i("Expected ']' at end of array")}return r++,d},u=()=>{if(r===0){t==="-"&&gr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(f){if(gr.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(f))}}const d=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(gr.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(d,r))}catch{t.substring(d,r)==="-"&&gr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(d,t.lastIndexOf("e")))}catch(p){s(String(p))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},C$=t=>HAe(t,gr.ALL^gr.NUM);var Wd=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Gt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},or,na,qd,uc,b7,Y2,k7,S7,C7,X2,_7,_$;class ky extends PQ{constructor(e){super(),or.add(this),na.set(this,void 0),qd.set(this,void 0),uc.set(this,void 0),Wd(this,na,e,"f"),Wd(this,qd,[],"f")}get currentChatCompletionSnapshot(){return Gt(this,uc,"f")}static fromReadableStream(e){const n=new ky(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new ky(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Gt(this,or,"m",b7).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of s)Gt(this,or,"m",k7).call(this,l);if((o=s.controller.signal)!=null&&o.aborted)throw new Gs;return this._addChatCompletion(Gt(this,or,"m",X2).call(this))}async _fromReadableStream(e,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Gt(this,or,"m",b7).call(this),this._connected();const i=Ml.fromReadableStream(e,this.controller);let s;for await(const l of i)s&&s!==l.id&&this._addChatCompletion(Gt(this,or,"m",X2).call(this)),Gt(this,or,"m",k7).call(this,l),s=l.id;if((o=i.controller.signal)!=null&&o.aborted)throw new Gs;return this._addChatCompletion(Gt(this,or,"m",X2).call(this))}[(na=new WeakMap,qd=new WeakMap,uc=new WeakMap,or=new WeakSet,b7=function(){this.ended||Wd(this,uc,void 0,"f")},Y2=function(n){let r=Gt(this,qd,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Gt(this,qd,"f")[n.index]=r,r)},k7=function(n){var i,s,o,l,a,c,u,h,d,f,p,m,y,g,v;if(this.ended)return;const r=Gt(this,or,"m",_$).call(this,n);this._emit("chunk",n,r);for(const w of n.choices){const S=r.choices[w.index];w.delta.content!=null&&((i=S.message)==null?void 0:i.role)==="assistant"&&((s=S.message)!=null&&s.content)&&(this._emit("content",w.delta.content,S.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:S.message.content,parsed:S.message.parsed})),w.delta.refusal!=null&&((o=S.message)==null?void 0:o.role)==="assistant"&&((l=S.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:S.message.refusal}),((a=w.logprobs)==null?void 0:a.content)!=null&&((c=S.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=w.logprobs)==null?void 0:u.content,snapshot:((h=S.logprobs)==null?void 0:h.content)??[]}),((d=w.logprobs)==null?void 0:d.refusal)!=null&&((f=S.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(p=w.logprobs)==null?void 0:p.refusal,snapshot:((m=S.logprobs)==null?void 0:m.refusal)??[]});const _=Gt(this,or,"m",Y2).call(this,S);S.finish_reason&&(Gt(this,or,"m",C7).call(this,S),_.current_tool_call_index!=null&&Gt(this,or,"m",S7).call(this,S,_.current_tool_call_index));for(const C of w.delta.tool_calls??[])_.current_tool_call_index!==C.index&&(Gt(this,or,"m",C7).call(this,S),_.current_tool_call_index!=null&&Gt(this,or,"m",S7).call(this,S,_.current_tool_call_index)),_.current_tool_call_index=C.index;for(const C of w.delta.tool_calls??[]){const T=(y=S.message.tool_calls)==null?void 0:y[C.index];T!=null&&T.type&&((T==null?void 0:T.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(g=T.function)==null?void 0:g.name,index:C.index,arguments:T.function.arguments,parsed_arguments:T.function.parsed_arguments,arguments_delta:((v=C.function)==null?void 0:v.arguments)??""}):(T==null||T.type,void 0))}}},S7=function(n,r){var o,l,a;if(Gt(this,or,"m",Y2).call(this,n).done_tool_calls.has(r))return;const s=(o=n.message.tool_calls)==null?void 0:o[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const c=(a=(l=Gt(this,na,"f"))==null?void 0:l.tools)==null?void 0:a.find(u=>u.type==="function"&&u.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:pv(c)?c.$parseRaw(s.function.arguments):c!=null&&c.function.strict?JSON.parse(s.function.arguments):null})}else s.type},C7=function(n){var i,s;const r=Gt(this,or,"m",Y2).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const o=Gt(this,or,"m",_7).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},X2=function(){if(this.ended)throw new ot("stream has ended, this shouldn't happen");const n=Gt(this,uc,"f");if(!n)throw new ot("request ended without sending any chunks");return Wd(this,uc,void 0,"f"),Wd(this,qd,[],"f"),WAe(n,Gt(this,na,"f"))},_7=function(){var r;const n=(r=Gt(this,na,"f"))==null?void 0:r.response_format;return PE(n)?n:null},_$=function(n){var r,i,s,o;let l=Gt(this,uc,"f");const{choices:a,...c}=n;l?Object.assign(l,c):l=Wd(this,uc,{...c,choices:[]},"f");for(const{delta:u,finish_reason:h,index:d,logprobs:f=null,...p}of n.choices){let m=l.choices[d];if(m||(m=l.choices[d]={finish_reason:h,index:d,message:{},logprobs:f,...p}),f)if(!m.logprobs)m.logprobs=Object.assign({},f);else{const{content:C,refusal:T,...I}=f;Object.assign(m.logprobs,I),C&&((r=m.logprobs).content??(r.content=[]),m.logprobs.content.push(...C)),T&&((i=m.logprobs).refusal??(i.refusal=[]),m.logprobs.refusal.push(...T))}if(h&&(m.finish_reason=h,Gt(this,na,"f")&&NQ(Gt(this,na,"f")))){if(h==="length")throw new dQ;if(h==="content_filter")throw new fQ}if(Object.assign(m,p),!u)continue;const{content:y,refusal:g,function_call:v,role:w,tool_calls:S,..._}=u;if(Object.assign(m.message,_),g&&(m.message.refusal=(m.message.refusal||"")+g),w&&(m.message.role=w),v&&(m.message.function_call?(v.name&&(m.message.function_call.name=v.name),v.arguments&&((s=m.message.function_call).arguments??(s.arguments=""),m.message.function_call.arguments+=v.arguments)):m.message.function_call=v),y&&(m.message.content=(m.message.content||"")+y,!m.message.refusal&&Gt(this,or,"m",_7).call(this)&&(m.message.parsed=C$(m.message.content))),S){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:C,id:T,type:I,function:L,...N}of S){const $=(o=m.message.tool_calls)[C]??(o[C]={});Object.assign($,N),T&&($.id=T),I&&($.type=I),L&&($.function??($.function={name:L.name??"",arguments:""})),L!=null&&L.name&&($.function.name=L.name),L!=null&&L.arguments&&($.function.arguments+=L.arguments,BAe(Gt(this,na,"f"),$)&&($.function.parsed_arguments=C$($.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ml(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function WAe(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...l}=t,a={...l,id:n,choices:r.map(({message:c,finish_reason:u,index:h,logprobs:d,...f})=>{if(!u)throw new ot(`missing finish_reason for choice ${h}`);const{content:p=null,function_call:m,tool_calls:y,...g}=c,v=c.role;if(!v)throw new ot(`missing role for choice ${h}`);if(m){const{arguments:w,name:S}=m;if(w==null)throw new ot(`missing function_call.arguments for choice ${h}`);if(!S)throw new ot(`missing function_call.name for choice ${h}`);return{...f,message:{content:p,function_call:{arguments:w,name:S},role:v,refusal:c.refusal??null},finish_reason:u,index:h,logprobs:d}}return y?{...f,index:h,finish_reason:u,logprobs:d,message:{...g,role:v,content:p,refusal:c.refusal??null,tool_calls:y.map((w,S)=>{const{function:_,type:C,id:T,...I}=w,{arguments:L,name:N,...$}=_||{};if(T==null)throw new ot(`missing choices[${h}].tool_calls[${S}].id
${Q2(t)}`);if(C==null)throw new ot(`missing choices[${h}].tool_calls[${S}].type
${Q2(t)}`);if(N==null)throw new ot(`missing choices[${h}].tool_calls[${S}].function.name
${Q2(t)}`);if(L==null)throw new ot(`missing choices[${h}].tool_calls[${S}].function.arguments
${Q2(t)}`);return{...I,id:T,type:C,function:{...$,name:N,arguments:L}}})}}:{...f,message:{...g,content:p,role:v,refusal:c.refusal??null},finish_reason:u,index:h,logprobs:d}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return RAe(a,e)}function Q2(t){return JSON.stringify(t)}class f0 extends ky{static fromReadableStream(e){const n=new f0(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new f0(null),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new f0(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let GQ=class extends ht{parse(e,n){return $Ae(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>RE(r,e))}runFunctions(e,n){return e.stream?f0.runFunctions(this._client,e,n):by.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?f0.runTools(this._client,e,n):by.runTools(this._client,e,n)}stream(e,n){return ky.createChatCompletion(this._client,e,n)}};class MC extends ht{constructor(){super(...arguments),this.completions=new GQ(this._client)}}(function(t){t.Completions=GQ})(MC||(MC={}));class KQ extends ht{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class JQ extends ht{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class D3 extends ht{constructor(){super(...arguments),this.sessions=new KQ(this._client),this.transcriptionSessions=new JQ(this._client)}}D3.Sessions=KQ;D3.TranscriptionSessions=JQ;class DE extends ht{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,LE,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class LE extends fr{}DE.MessagesPage=LE;class BE extends ht{retrieve(e,n,r,i={},s){return Bn(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n,r={},i){return Bn(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,$E,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class $E extends fr{}BE.RunStepsPage=$E;let mv=class extends ht{constructor(){super(...arguments),this.steps=new BE(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,FE,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return To.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const a=o.headers.get("openai-poll-after-ms");if(a){const c=parseInt(a);isNaN(c)||(l=c)}}await dv(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return To.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const s=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,s.id,i)}submitToolOutputsStream(e,n,r,i){return To.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}};class FE extends fr{}mv.RunsPage=FE;mv.Steps=BE;mv.RunStepsPage=$E;class fp extends ht{constructor(){super(...arguments),this.runs=new mv(this._client),this.messages=new DE(this._client)}create(e={},n){return Bn(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return To.createThreadAssistantStream(e,this._client.beta.threads,n)}}fp.Runs=mv;fp.RunsPage=FE;fp.Messages=DE;fp.MessagesPage=LE;class pp extends ht{constructor(){super(...arguments),this.realtime=new D3(this._client),this.chat=new MC(this._client),this.assistants=new NE(this._client),this.threads=new fp(this._client)}}pp.Realtime=D3;pp.Assistants=NE;pp.AssistantsPage=IE;pp.Threads=fp;class YQ extends ht{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class XQ extends ht{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let L3=class extends ht{constructor(){super(...arguments),this.content=new XQ(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,gd({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,zE,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class zE extends fr{}L3.FileListResponsesPage=zE;L3.Content=XQ;class gv extends ht{constructor(){super(...arguments),this.files=new L3(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/containers",jE,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class jE extends fr{}gv.ContainerListResponsesPage=jE;gv.Files=L3;gv.FileListResponsesPage=zE;class QQ extends ht{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&du("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(du("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(l=>{const a=l.embedding;l.embedding=IAe(a)}),o)))}}class HE extends ht{retrieve(e,n,r,i){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,i)}list(e,n,r={},i){return Bn(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,VE,{query:r,...i})}}class VE extends fr{}HE.OutputItemListResponsesPage=VE;class yv extends ht{constructor(){super(...arguments),this.outputItems=new HE(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,WE,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class WE extends fr{}yv.RunListResponsesPage=WE;yv.OutputItems=HE;yv.OutputItemListResponsesPage=VE;class vv extends ht{constructor(){super(...arguments),this.runs=new yv(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/evals",qE,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class qE extends fr{}vv.EvalListResponsesPage=qE;vv.Runs=yv;vv.RunListResponsesPage=WE;let UE=class extends ht{create(e,n){return this._client.post("/files",gd({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/files",GE,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await dv(n),o=await this.retrieve(e),Date.now()-s>r)throw new TE({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class GE extends fr{}UE.FileObjectsPage=GE;class ZQ extends ht{}let eZ=class extends ht{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class KE extends ht{constructor(){super(...arguments),this.graders=new eZ(this._client)}}KE.Graders=eZ;class JE extends ht{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,YE,{body:n,method:"post",...r})}retrieve(e,n={},r){return Bn(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class YE extends N3{}JE.PermissionCreateResponsesPage=YE;let B3=class extends ht{constructor(){super(...arguments),this.permissions=new JE(this._client)}};B3.Permissions=JE;B3.PermissionCreateResponsesPage=YE;class XE extends ht{list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,QE,{query:n,...r})}}class QE extends fr{}XE.FineTuningJobCheckpointsPage=QE;class mp extends ht{constructor(){super(...arguments),this.checkpoints=new XE(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",ZE,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Bn(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,eO,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class ZE extends fr{}class eO extends fr{}mp.FineTuningJobsPage=ZE;mp.FineTuningJobEventsPage=eO;mp.Checkpoints=XE;mp.FineTuningJobCheckpointsPage=QE;class ju extends ht{constructor(){super(...arguments),this.methods=new ZQ(this._client),this.jobs=new mp(this._client),this.checkpoints=new B3(this._client),this.alpha=new KE(this._client)}}ju.Methods=ZQ;ju.Jobs=mp;ju.FineTuningJobsPage=ZE;ju.FineTuningJobEventsPage=eO;ju.Checkpoints=B3;ju.Alpha=KE;class tZ extends ht{}class tO extends ht{constructor(){super(...arguments),this.graderModels=new tZ(this._client)}}tO.GraderModels=tZ;class nZ extends ht{createVariation(e,n){return this._client.post("/images/variations",gd({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",gd({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class nO extends ht{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",rO,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class rO extends N3{}nO.ModelsPage=rO;class rZ extends ht{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function qAe(t,e){return!e||!GAe(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:iZ(t,e)}function iZ(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:YAe(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:UAe(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||sZ(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function UAe(t,e){var n,r,i,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=t.text)==null?void 0:i.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function GAe(t){var e;return!!PE((e=t.text)==null?void 0:e.format)}function KAe(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function JAe(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function YAe(t,e){const n=JAe(t.tools??[],e.name);return{...e,...e,parsed_arguments:KAe(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function sZ(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class oZ extends ht{list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,QAe,{query:n,...r})}}var Ud=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},hc=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Gd,Z2,dc,ew,A$,T$,M$,E$;class iO extends OE{constructor(e){super(),Gd.add(this),Z2.set(this,void 0),dc.set(this,void 0),ew.set(this,void 0),Ud(this,Z2,e,"f")}static createResponse(e,n,r){const i=new iO(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),hc(this,Gd,"m",A$).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of s)hc(this,Gd,"m",T$).call(this,a,o);if((l=s.controller.signal)!=null&&l.aborted)throw new Gs;return hc(this,Gd,"m",M$).call(this)}[(Z2=new WeakMap,dc=new WeakMap,ew=new WeakMap,Gd=new WeakSet,A$=function(){this.ended||Ud(this,dc,void 0,"f")},T$=function(n,r){if(this.ended)return;const i=(o,l)=>{(r==null||l.sequence_number>r)&&this._emit(o,l)},s=hc(this,Gd,"m",E$).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new ot(`missing output at index ${n.output_index}`);if(o.type==="message"){const l=o.content[n.content_index];if(!l)throw new ot(`missing content at index ${n.content_index}`);if(l.type!=="output_text")throw new ot(`expected content to be 'output_text', got ${l.type}`);i("response.output_text.delta",{...n,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new ot(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},M$=function(){if(this.ended)throw new ot("stream has ended, this shouldn't happen");const n=hc(this,dc,"f");if(!n)throw new ot("request ended without sending any events");Ud(this,dc,void 0,"f");const r=XAe(n,hc(this,Z2,"f"));return Ud(this,ew,r,"f"),r},E$=function(n){let r=hc(this,dc,"f");if(!r){if(n.type!=="response.created")throw new ot(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ud(this,dc,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new ot(`missing output at index ${n.output_index}`);i.type==="message"&&i.content.push(n.part);break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new ot(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new ot(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new ot(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new ot(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.completed":{Ud(this,dc,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=hc(this,ew,"f");if(!e)throw new ot("stream ended without producing a ChatCompletion");return e}}function XAe(t,e){return qAe(t,e)}class sO extends ht{constructor(){super(...arguments),this.inputItems=new oZ(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&sZ(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>iZ(r,e))}stream(e,n){return iO.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class QAe extends fr{}sO.InputItems=oZ;class lZ extends ht{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,gd({body:n,...r}))}}class oO extends ht{constructor(){super(...arguments),this.parts=new lZ(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}oO.Parts=lZ;const ZAe=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class $3 extends ht{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return Bn(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,F3,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(e,n,{...r,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const a=s.response.headers.get("openai-poll-after-ms");if(a){const c=parseInt(a);isNaN(c)||(l=c)}}await dv(l);break;case"failed":case"completed":return o}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,lO,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class F3 extends fr{}class lO extends N3{}$3.VectorStoreFilesPage=F3;$3.FileContentResponsesPage=lO;class aZ extends ht{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return Bn(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,F3,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const a=o.headers.get("openai-poll-after-ms");if(a){const c=parseInt(a);isNaN(c)||(l=c)}}await dv(l);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(s,n.length),l=this._client,a=n.values(),c=[...r];async function u(d){for(let f of d){const p=await l.files.create({file:f,purpose:"assistants"},i);c.push(p.id)}}const h=Array(o).fill(a).map(u);return await ZAe(h),await this.createAndPoll(e,{file_ids:c})}}class Hu extends ht{constructor(){super(...arguments),this.files=new $3(this._client),this.fileBatches=new aZ(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Bn(e)?this.list({},e):this._client.getAPIList("/vector_stores",aO,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,cO,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class aO extends fr{}class cO extends N3{}Hu.VectorStoresPage=aO;Hu.VectorStoreSearchResponsesPage=cO;Hu.Files=$3;Hu.VectorStoreFilesPage=F3;Hu.FileContentResponsesPage=lO;Hu.FileBatches=aZ;var cZ;class pt extends xAe{constructor({baseURL:e=K2("OPENAI_BASE_URL"),apiKey:n=K2("OPENAI_API_KEY"),organization:r=K2("OPENAI_ORG_ID")??null,project:i=K2("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new ot("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:n,organization:r,project:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&OAe())throw new ot(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new YQ(this),this.chat=new R3(this),this.embeddings=new QQ(this),this.files=new UE(this),this.images=new nZ(this),this.audio=new fv(this),this.moderations=new rZ(this),this.models=new nO(this),this.fineTuning=new ju(this),this.graders=new tO(this),this.vectorStores=new Hu(this),this.beta=new pp(this),this.batches=new ME(this),this.uploads=new oO(this),this.responses=new sO(this),this.evals=new vv(this),this.containers=new gv(this),this._options=o,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return nAe(e,{arrayFormat:"brackets"})}}cZ=pt;pt.OpenAI=cZ;pt.DEFAULT_TIMEOUT=6e5;pt.OpenAIError=ot;pt.APIError=Hr;pt.APIConnectionError=T3;pt.APIConnectionTimeoutError=TE;pt.APIUserAbortError=Gs;pt.NotFoundError=lQ;pt.ConflictError=aQ;pt.RateLimitError=uQ;pt.BadRequestError=iQ;pt.AuthenticationError=sQ;pt.InternalServerError=hQ;pt.PermissionDeniedError=oQ;pt.UnprocessableEntityError=cQ;pt.toFile=yQ;pt.fileFromPath=tQ;pt.Completions=YQ;pt.Chat=R3;pt.ChatCompletionsPage=P3;pt.Embeddings=QQ;pt.Files=UE;pt.FileObjectsPage=GE;pt.Images=nZ;pt.Audio=fv;pt.Moderations=rZ;pt.Models=nO;pt.ModelsPage=rO;pt.FineTuning=ju;pt.Graders=tO;pt.VectorStores=Hu;pt.VectorStoresPage=aO;pt.VectorStoreSearchResponsesPage=cO;pt.Beta=pp;pt.Batches=ME;pt.BatchesPage=EE;pt.Uploads=oO;pt.Responses=sO;pt.Evals=vv;pt.EvalListResponsesPage=qE;pt.Containers=gv;pt.ContainerListResponsesPage=jE;const O$=new pt({apiKey:"ad5035ae-9f71-49c0-9c4b-0249752fceb4",baseURL:"https://api.kluster.ai/v1",dangerouslyAllowBrowser:!0});class Ph{static getInstance(){return Ph.instance||(Ph.instance=new Ph),Ph.instance}async generateResponse(e,n){var r,i;try{console.log(" Generating AI response for room:",n),console.log(" Message history:",e);const s=`You are an AI assistant in ChatMind, a collaborative chat platform. You're participating in a room called "${n}".

INSTRUCTIONS:
- Be helpful, collaborative, and concise (keep responses under 200 words)
- Stay focused on topics related to this room: "${n}"
- Use a friendly, professional tone
- Help facilitate productive discussions and decision-making
- When users mention @AI, respond directly to their request
- If asked about unrelated topics, politely redirect them back to the room's purpose

Remember: You should focus on topics relevant to "${n}". Keep your responses concise and helpful.`,o=new Promise((u,h)=>{setTimeout(()=>h(new Error("AI response timeout")),2e4)}),l=O$.chat.completions.create({model:"klusterai/Meta-Llama-3.1-8B-Instruct-Turbo",max_tokens:300,temperature:.7,top_p:1,messages:[{role:"system",content:s},...e.slice(-5)]});console.log(" Waiting for AI response...");const c=((i=(r=(await Promise.race([l,o])).choices[0])==null?void 0:r.message)==null?void 0:i.content)||"I apologize, but I couldn't generate a response at this time.";return console.log(" AI response generated:",c),c}catch(s){return console.error(" Kluster.ai API Error:",s),s instanceof Error&&s.message==="AI response timeout"?(console.warn(" AI response timed out"),"I'm taking a bit longer than usual to respond. Let me try to help you quickly - could you please rephrase your question?"):s instanceof Error&&(s.message.includes("fetch")||s.message.includes("network"))?(console.warn(" Network error detected"),"I'm having network connectivity issues right now. Please try mentioning @AI again in a moment!"):s instanceof Error&&s.message.includes("401")?(console.warn(" API authentication error"),"I'm having authentication issues with my AI service. Please try again later or contact support if this persists."):(console.warn(" Generic AI error, returning fallback message"),"I'm having trouble connecting to my AI service right now. Please try mentioning @AI again in a moment, or feel free to continue your conversation - I'll be back soon!")}}async testConnection(){var e,n;try{console.log(" Testing AI connection...");const r=O$.chat.completions.create({model:"klusterai/Meta-Llama-3.1-8B-Instruct-Turbo",max_tokens:50,temperature:.7,messages:[{role:"user",content:"Hello, can you respond with 'AI service is working'?"}]}),i=new Promise((l,a)=>{setTimeout(()=>a(new Error("Connection test timeout")),8e3)}),o=(n=(e=(await Promise.race([r,i])).choices[0])==null?void 0:e.message)==null?void 0:n.content;return console.log(" AI test response:",o),!!o}catch(r){return console.error(" AI test connection failed:",r),!1}}async checkAPIStatus(){try{return await this.testConnection()?{working:!0,message:"AI service is operational"}:{working:!1,message:"AI service test failed"}}catch(e){return{working:!1,message:`AI service error: ${e instanceof Error?e.message:"Unknown error"}`}}}}const uZ=Ph.getInstance(),eTe=Object.freeze(Object.defineProperty({__proto__:null,KlusterAIService:Ph,klusterAI:uZ},Symbol.toStringTag,{value:"Module"})),tTe=({onClose:t})=>{const{currentRoom:e,currentUser:n}=E_(),{user:r}=xd(),[i,s]=Ae.useState("overall"),[o,l]=Ae.useState(!1),[a,c]=Ae.useState(!1),[u,h]=Ae.useState("rich"),[d,f]=Ae.useState(""),[p,m]=Ae.useState({overall:{id:"overall",type:"overall",content:"",lastUpdated:new Date,messageCount:0,autoGenerated:!1},user:{id:"user",type:"user",content:"",lastUpdated:new Date,messageCount:0,autoGenerated:!1}}),[y,g]=Ae.useState(!0),v=Ae.useRef(null),w=Ae.useRef(null),S=Ae.useRef(null),_=p[i],C=Ae.useCallback(async()=>{if(!(!v.current||!o||u!=="rich"))try{w.current&&(w.current.destroy(),w.current=null);const Y=new ca({root:v.current,defaultValue:_.content||`# Summary

Start writing your summary here...`,placeholder:"Write your summary here...",features:{[ca.Feature.CodeMirror]:!0,[ca.Feature.ListItem]:!0,[ca.Feature.LinkTooltip]:!0,[ca.Feature.ImageBlock]:!1,[ca.Feature.TableBlock]:!0,[ca.Feature.Copilot]:!1},featureConfigs:{[ca.Feature.Toolbar]:{config:[["bold","italic","strikethrough"],["heading","bulletList","orderedList"],["link","blockquote","code","codeBlock"],["table","divider"],["undo","redo"]]}}});await Y.create(),w.current=Y,_.content&&Y.setMarkdown(_.content)}catch(Y){console.error("Failed to initialize Milkdown editor:",Y)}},[o,u,_.content]);Ae.useEffect(()=>{if(S.current&&o&&u==="markdown"){const Y=S.current;Y.style.height="auto",Y.style.height=`${Y.scrollHeight}px`}},[d,o,u]),Ae.useEffect(()=>(o&&u==="rich"&&setTimeout(C,100),()=>{w.current&&(w.current.destroy(),w.current=null)}),[C]),Ae.useEffect(()=>{if(e){const Y=localStorage.getItem(`chatmind_summaries_${e.id}`);if(Y)try{const pe=JSON.parse(Y);m(de=>({...de,...Object.fromEntries(Object.entries(pe).map(([W,z])=>[W,{...z,lastUpdated:new Date(z.lastUpdated)}]))}))}catch(pe){console.warn("Failed to load saved summaries:",pe)}}},[e]);const T=Y=>{e&&localStorage.setItem(`chatmind_summaries_${e.id}`,JSON.stringify(Y))},I=async Y=>{if(!(!e||!r)){c(!0);try{const pe=e.messages,de=Y==="user"?pe.filter(X=>X.userId===r.id&&!X.isAI):pe.filter(X=>!X.isAI);if(de.length===0){const E={id:Y,type:Y,content:Y==="user"?`# My Contributions

No messages from you yet in this conversation. Start participating to see your summary here!`:`# Chat Summary

No messages in this conversation yet. Start chatting to generate a summary!`,lastUpdated:new Date,messageCount:0,autoGenerated:!0};m(xe=>{const U={...xe,[Y]:E};return T(U),U});return}const W=de.slice(-20).map(X=>({role:"user",content:`${X.userName}: ${X.content}`})),z=Y==="user"?`Create a concise summary of ${r.name}'s contributions to this chat conversation. Focus on:
- Key points they made
- Questions they asked
- Decisions or actions they proposed
- Their main areas of focus

Format as markdown with bullet points. Keep it under 300 words.`:`Create a comprehensive summary of this chat conversation in the room "${e.name}". Include:
- Main topics discussed
- Key decisions made
- Important questions raised
- Action items or next steps
- Key participants and their contributions

Format as markdown with clear sections and bullet points. Keep it under 400 words.`,O=await uZ.generateResponse([{role:"user",content:z},...W],e.name),ee={id:Y,type:Y,content:O,lastUpdated:new Date,messageCount:de.length,autoGenerated:!0};m(X=>{const E={...X,[Y]:ee};return T(E),E})}catch(pe){console.error("Failed to generate summary:",pe);const de=`# Summary Generation Failed

Unable to generate summary at this time. Please try again later.

**Error:** ${pe instanceof Error?pe.message:"Unknown error"}`,W={id:Y,type:Y,content:de,lastUpdated:new Date,messageCount:0,autoGenerated:!0};m(z=>{const O={...z,[Y]:W};return T(O),O})}finally{c(!1)}}},L=()=>{f(_.content),l(!0)},N=async()=>{let Y="";if(u==="rich"&&w.current)try{Y=await w.current.getMarkdown()}catch(de){console.error("Failed to get markdown from editor:",de),Y=_.content}else Y=d;const pe={..._,content:Y,lastUpdated:new Date,autoGenerated:!1};m(de=>{const W={...de,[i]:pe};return T(W),W}),l(!1),f("")},$=()=>{l(!1),f("")},F=()=>{const Y=_.content,pe=`${(e==null?void 0:e.name)||"chat"}-${i}-summary.md`,de=new Blob([Y],{type:"text/markdown"}),W=URL.createObjectURL(de),z=document.createElement("a");z.href=W,z.download=pe,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(W)},ie=Y=>{const de=new Date().getTime()-Y.getTime(),W=Math.floor(de/(1e3*60));if(W<1)return"Just now";if(W<60)return`${W}m ago`;const z=Math.floor(W/60);return z<24?`${z}h ago`:`${Math.floor(z/24)}d ago`},Z=()=>e?(i==="user"?e.messages.filter(pe=>pe.userId===(r==null?void 0:r.id)&&!pe.isAI).length:e.messages.filter(pe=>!pe.isAI).length)>_.messageCount+5:!1;return e?b.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col shadow-subtle",children:[b.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(pw,{className:"w-5 h-5 text-primary-600"}),b.jsx("h3",{className:"font-semibold text-gray-900",children:"Summary"})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{onClick:()=>g(!y),className:"btn-ghost p-1",title:y?"Collapse":"Expand",children:y?b.jsx(mie,{className:"w-4 h-4"}):b.jsx(gie,{className:"w-4 h-4"})}),b.jsx("button",{onClick:t,className:"btn-ghost p-1",title:"Close summary",children:b.jsx(mw,{className:"w-4 h-4"})})]})]}),y&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-3",children:[b.jsxs("button",{onClick:()=>s("overall"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${i==="overall"?"bg-white text-gray-900 shadow-subtle":"text-gray-600 hover:text-gray-900"}`,children:[b.jsx(bie,{className:"w-4 h-4"}),"Overall"]}),b.jsxs("button",{onClick:()=>s("user"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${i==="user"?"bg-white text-gray-900 shadow-subtle":"text-gray-600 hover:text-gray-900"}`,children:[b.jsx(k0,{className:"w-4 h-4"}),"Mine"]})]}),b.jsxs("div",{className:"flex gap-2 mb-3",children:[b.jsxs("button",{onClick:()=>I(i),disabled:a,className:"flex-1 btn-primary flex items-center justify-center gap-2 text-sm py-2",children:[a?b.jsx(N8,{className:"w-4 h-4 animate-spin"}):b.jsx(ou,{className:"w-4 h-4"}),a?"Generating...":"AI Summary"]}),o?b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{onClick:N,className:"px-3 py-2 text-sm text-success-600 hover:text-success-800 hover:bg-success-50 rounded-lg transition-colors",title:"Save changes",children:b.jsx(Nie,{className:"w-4 h-4"})}),b.jsx("button",{onClick:$,className:"btn-ghost px-3 py-2 text-sm",title:"Cancel editing",children:b.jsx(mw,{className:"w-4 h-4"})})]}):b.jsx("button",{onClick:L,className:"btn-ghost px-3 py-2 text-sm",title:"Edit summary",children:b.jsx(Mie,{className:"w-4 h-4"})})]}),o&&b.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-3",children:[b.jsxs("button",{onClick:()=>h("rich"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${u==="rich"?"bg-white text-gray-900 shadow-subtle":"text-gray-600 hover:text-gray-900"}`,children:[b.jsx(Lie,{className:"w-4 h-4"}),"Rich Text"]}),b.jsxs("button",{onClick:()=>h("markdown"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${u==="markdown"?"bg-white text-gray-900 shadow-subtle":"text-gray-600 hover:text-gray-900"}`,children:[b.jsx(yie,{className:"w-4 h-4"}),"Markdown"]})]}),Z()&&!a&&b.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-3 mb-3",children:b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(Oie,{className:"w-4 h-4 text-primary-600 mt-0.5"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-primary-800 text-sm font-medium",children:"New messages available"}),b.jsx("p",{className:"text-primary-700 text-xs mt-1",children:"Generate a new summary to include recent messages"})]})]})}),b.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(wj,{className:"w-3 h-3"}),b.jsx("span",{children:ie(_.lastUpdated)})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[_.autoGenerated&&b.jsx("span",{className:"bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full text-xs font-medium border border-primary-200",children:"AI Generated"}),b.jsx("button",{onClick:F,className:"btn-ghost p-1",title:"Download as markdown",children:b.jsx(xie,{className:"w-3 h-3"})})]})]})]})]}),y&&b.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:o?b.jsxs("div",{className:"p-4",children:[u==="rich"?b.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden shadow-subtle",children:b.jsx("div",{ref:v,className:"min-h-96 prose prose-sm max-w-none",style:{"--crepe-editor-padding":"16px","--crepe-editor-min-height":"384px"}})}):b.jsx("textarea",{ref:S,value:d,onChange:Y=>f(Y.target.value),placeholder:"Write your summary in markdown...",className:"w-full min-h-96 p-3 input-field resize-none text-sm font-mono",style:{lineHeight:"1.5"}}),u==="markdown"&&b.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[b.jsx("p",{className:"mb-1 font-medium",children:"Markdown supported:"}),b.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-gray-400",children:[b.jsx("li",{children:"# Headers"}),b.jsx("li",{children:"**Bold** and *italic*"}),b.jsx("li",{children:"- Bullet points"}),b.jsx("li",{children:"[Links](url)"}),b.jsx("li",{children:"`code` and ```code blocks```"})]})]})]}):b.jsx("div",{className:"p-4",children:_.content?b.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:_.content.replace(/^# (.*$)/gim,'<h1 class="text-lg font-bold text-gray-900 mb-3">$1</h1>').replace(/^## (.*$)/gim,'<h2 class="text-base font-semibold text-gray-900 mb-2">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="text-sm font-semibold text-gray-900 mb-2">$1</h3>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic text-gray-800">$1</em>').replace(/`(.*?)`/g,'<code class="bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-xs font-mono">$1</code>').replace(/^- (.*$)/gim,'<li class="text-sm text-gray-700">$1</li>').replace(/\n\n/g,'</p><p class="text-sm text-gray-700 mb-3 leading-relaxed">').replace(/^(.*)$/gim,'<p class="text-sm text-gray-700 mb-3 leading-relaxed">$1</p>')}}):b.jsxs("div",{className:"text-center py-12",children:[b.jsx(pw,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),b.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"No summary yet"}),b.jsx("p",{className:"text-sm text-gray-500 mb-4",children:i==="user"?"Generate a summary of your contributions to this conversation":"Generate an overall summary of this chat conversation"}),b.jsxs("button",{onClick:()=>I(i),disabled:a,className:"btn-primary inline-flex items-center gap-2 text-sm",children:[a?b.jsx(N8,{className:"w-4 h-4 animate-spin"}):b.jsx(ou,{className:"w-4 h-4"}),"Generate Summary"]})]})})})]}):b.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col shadow-subtle",children:[b.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h3",{className:"font-semibold text-gray-900",children:"Summary"}),b.jsx("button",{onClick:t,className:"btn-ghost p-1",children:b.jsx(mw,{className:"w-4 h-4"})})]})}),b.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:b.jsxs("div",{className:"text-center text-gray-500",children:[b.jsx(pw,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),b.jsx("p",{children:"Join a room to view summaries"})]})})]})},nTe=()=>{const{currentUser:t,currentRoom:e,sendMessage:n,leaveRoom:r,isAIMuted:i,isAIResponding:s,toggleAIMute:o}=E_(),[l,a]=Ae.useState(""),[c,u]=Ae.useState(!1),[h,d]=Ae.useState(!1),[f,p]=Ae.useState("connected"),[m,y]=Ae.useState(0),[g,v]=Ae.useState(!0),[w,S]=Ae.useState(!1),_=Ae.useRef(null),C=Ae.useRef(null),{mentionState:T,detectMention:I,selectMention:L,navigateMentions:N,closeMentions:$,getSelectedOption:F}=Uie({participants:(e==null?void 0:e.participants)||[],isAIMuted:i});Ae.useEffect(()=>{ie()},[e==null?void 0:e.messages,s]),Ae.useEffect(()=>{if(C.current){const U=C.current;U.style.height="auto";const ue=U.scrollHeight,ve=128;U.style.height=`${Math.min(ue,ve)}px`}},[l]),Ae.useEffect(()=>{const U=()=>{const Oe=Ht.getChannels().some(st=>st.state==="joined");p(Oe?"connected":"disconnected")};U();const ue=setInterval(U,3e3);return()=>clearInterval(ue)},[]);const ie=()=>{var U;(U=_.current)==null||U.scrollIntoView({behavior:"smooth"})},Z=async()=>{if(!l.trim())return;const U=l.trim();a(""),u(!0),$();try{await n(U)}catch(ue){console.error("Failed to send message:",ue),a(U)}finally{u(!1)}},Y=U=>{const ue=U.target.value,ve=U.target.selectionStart;a(ue),y(ve),C.current&&I(ue,ve,C.current)},pe=U=>{if(T.isOpen)switch(U.key){case"ArrowUp":U.preventDefault(),N("up");return;case"ArrowDown":U.preventDefault(),N("down");return;case"Enter":U.preventDefault();const ue=F();ue&&de(ue);return;case"Escape":U.preventDefault(),$();return;case"Tab":U.preventDefault();const ve=F();ve&&de(ve);return}U.key==="Enter"&&!U.shiftKey&&!T.isOpen&&(U.preventDefault(),Z())},de=U=>{const ue=L(U,l,m);ue&&typeof ue=="object"&&(a(ue.newText),setTimeout(()=>{C.current&&(C.current.setSelectionRange(ue.newCursorPosition,ue.newCursorPosition),C.current.focus())},0))},W=async()=>{if(!e)return;const U=`${window.location.origin}?room=${e.id}`;await navigator.clipboard.writeText(U),d(!0),setTimeout(()=>d(!1),2e3)},z=U=>U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),O=U=>{const ue=new Date,ve=new Date(U);if(ve.toDateString()===ue.toDateString())return`Today at ${z(ve)}`;const Oe=new Date(ue);if(Oe.setDate(Oe.getDate()-1),ve.toDateString()===Oe.toDateString())return`Yesterday at ${z(ve)}`;const st=new Date(ue);return st.setDate(st.getDate()-7),ve>st?`${ve.toLocaleDateString([],{weekday:"long"})} at ${z(ve)}`:ve.toLocaleDateString([],{month:"short",day:"numeric",year:ve.getFullYear()!==ue.getFullYear()?"numeric":void 0})+` at ${z(ve)}`},ee=U=>U.split(" ").map(ue=>ue[0]).join("").toUpperCase(),X=()=>b.jsx("div",{className:"bg-gradient-to-r from-indigo-50 via-blue-50 to-indigo-50 border border-indigo-200 rounded-lg p-4 mb-4 shadow-gentle",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-blue-600 rounded-lg flex items-center justify-center shadow-gentle",children:b.jsx(T8,{className:"w-5 h-5 text-white animate-pulse"})}),b.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-indigo-500 rounded-full flex items-center justify-center animate-bounce",children:b.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.jsx("span",{className:"font-semibold text-indigo-800",children:"ChatMind AI"}),b.jsxs("div",{className:"typing-dots",children:[b.jsx("div",{className:"typing-dot"}),b.jsx("div",{className:"typing-dot"}),b.jsx("div",{className:"typing-dot"})]})]}),b.jsxs("div",{className:"text-sm text-indigo-700",children:[b.jsx("span",{className:"font-medium",children:"AI is initializing..."}),b.jsx("span",{className:"ml-2 text-indigo-600",children:"Preparing neural networks for intelligent assistance"})]}),b.jsx("div",{className:"mt-2 bg-indigo-100 rounded-full h-2 overflow-hidden",children:b.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full animate-pulse",style:{width:"75%"}})})]}),b.jsxs("div",{className:"flex flex-col items-center gap-1",children:[b.jsx(wie,{className:"w-5 h-5 text-indigo-600 animate-spin",style:{animationDuration:"2s"}}),b.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"Loading"})]})]})}),E=U=>{const ue=[];let ve=null;return U.forEach((Oe,st)=>{const vt=U[st-1],_t=new Date(Oe.timestamp),ln=vt?new Date(vt.timestamp):null,R=!vt||ln&&_t.getTime()-ln.getTime()>20*60*1e3||st>0&&st%10===0,B=vt&&vt.userId===Oe.userId&&vt.isAI===Oe.isAI&&_t.getTime()-((ln==null?void 0:ln.getTime())||0)<5*60*1e3&&!R;R&&ue.push({type:"time-label",timestamp:_t,label:O(_t)}),B&&ve&&ve.type==="message-group"?ve.messages.push(Oe):(ve={type:"message-group",userId:Oe.userId,userName:Oe.userName,userColor:Oe.userColor,isAI:Oe.isAI,timestamp:Oe.timestamp,replyingTo:Oe.replyingTo,messages:[Oe]},ue.push(ve))}),ue};if(!e||!t)return b.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-600",children:"Loading chat room..."})]})});const xe=E(e.messages);return b.jsxs("div",{className:"flex h-screen bg-gray-50",children:[b.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white",children:[b.jsx("div",{className:"border-b border-gray-200 p-4 bg-white shadow-subtle",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("button",{onClick:r,className:"btn-ghost p-2",title:"Leave room",children:b.jsx(die,{className:"w-5 h-5"})}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(O8,{className:"w-5 h-5 text-indigo-600"}),b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.name}),f==="connected"?b.jsx(R8,{className:"w-4 h-4 text-green-500",title:"Connected"}):b.jsx(Sj,{className:"w-4 h-4 text-red-500",title:"Disconnected"})]}),f!=="connected"&&b.jsxs("div",{className:"flex items-center gap-1 text-xs text-indigo-600",children:[b.jsx(T8,{className:"w-3 h-3 animate-pulse"}),f==="connecting"?"AI Reconnecting...":"AI Offline"]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:o,className:`flex items-center gap-2 px-3 py-2 text-sm rounded-lg transition-all duration-200 font-medium ${i?"bg-red-50 text-red-700 hover:bg-red-100 border border-red-200":"bg-indigo-50 text-indigo-700 hover:bg-indigo-100 border border-indigo-200"}`,title:i?"AI is muted for this room - click to activate":"AI is active for this room - click to mute",children:i?b.jsxs(b.Fragment,{children:[b.jsx(P8,{className:"w-4 h-4"}),b.jsx("span",{className:"font-medium",children:"AI Muted"})]}):b.jsxs(b.Fragment,{children:[b.jsx(kj,{className:"w-4 h-4"}),b.jsx("span",{className:"font-medium",children:" AI Active"})]})}),b.jsx("button",{onClick:W,className:"btn-ghost text-sm",title:"Copy room link",children:h?b.jsxs(b.Fragment,{children:[b.jsx(pie,{className:"w-4 h-4 text-green-600"}),b.jsx("span",{className:"text-green-600",children:"Copied!"})]}):b.jsxs(b.Fragment,{children:[b.jsx(vie,{className:"w-4 h-4"}),"Share"]})}),b.jsx("button",{onClick:()=>S(!w),className:`btn-ghost ${w?"bg-indigo-100 text-indigo-700":""}`,title:"Toggle summary",children:b.jsx(pw,{className:"w-5 h-5"})}),b.jsx("button",{onClick:()=>v(!g),className:`btn-ghost ${g?"bg-indigo-100 text-indigo-700":""}`,title:"Toggle user list",children:b.jsx(k0,{className:"w-5 h-5"})})]})]})}),i&&e.settings.aiMutedByName&&b.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-2",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(P8,{className:"w-4 h-4 text-amber-600"}),b.jsxs("p",{className:"text-amber-800 text-sm font-medium",children:["AI is muted for this room by ",e.settings.aiMutedByName]})]}),b.jsx("button",{onClick:o,className:"text-amber-700 hover:text-amber-900 text-sm font-medium underline",children:"Activate AI"})]})}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin",children:[xe.length===0&&b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-gentle",children:b.jsx(O8,{className:"w-8 h-8 text-white"})}),b.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Welcome to #",e.name]}),b.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-4",children:"Start the conversation! Share your thoughts, ask questions, or mention @AI for assistance."}),b.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 max-w-md mx-auto shadow-subtle",children:b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(R8,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),b.jsxs("div",{className:"text-left",children:[b.jsx("p",{className:"text-indigo-800 text-sm font-medium",children:"Real-time messaging is active"}),b.jsx("p",{className:"text-indigo-700 text-sm mt-1",children:"Messages will appear instantly for all participants in this room."})]})]})}),!i&&b.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 max-w-md mx-auto mt-4 shadow-subtle",children:b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(ou,{className:"w-5 h-5 text-green-600 mt-0.5"}),b.jsxs("div",{className:"text-left",children:[b.jsx("p",{className:"text-green-800 text-sm font-medium",children:"AI Assistant is active"}),b.jsx("p",{className:"text-green-700 text-sm mt-1",children:"Type @ to see mention options, or mention @AI for intelligent assistance."})]})]})})]}),xe.map((U,ue)=>{if(U.type==="time-label")return b.jsx("div",{className:"flex justify-center my-6",children:b.jsx("div",{className:"bg-gray-100 text-gray-600 text-xs font-medium px-3 py-1 rounded-full border shadow-subtle",children:U.label})},`time-${ue}`);const ve=U.userId===t.id,Oe=U.isAI,st=U.userId==="system";return b.jsxs("div",{className:`flex gap-3 group ${ve&&!Oe?"flex-row-reverse":""}`,children:[b.jsx("div",{className:"flex-shrink-0",children:Oe?b.jsx("div",{className:"avatar-lg bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-gentle",children:b.jsx(ou,{className:"w-5 h-5 text-white"})}):st?b.jsx("div",{className:"avatar-lg bg-gray-400 shadow-gentle",children:b.jsx(k0,{className:"w-5 h-5 text-white"})}):b.jsx("div",{className:"avatar-lg shadow-gentle",style:{backgroundColor:U.userColor},children:ee(U.userName)})}),b.jsxs("div",{className:`flex-1 min-w-0 ${ve&&!Oe?"flex flex-col items-end":""}`,children:[b.jsxs("div",{className:`flex items-baseline gap-2 mb-2 ${ve&&!Oe?"flex-row-reverse":""}`,children:[b.jsxs("span",{className:`font-medium text-sm ${Oe?"text-indigo-700":st?"text-gray-600":ve?"text-indigo-700":"text-gray-900"}`,children:[U.userName,ve&&!Oe&&b.jsx("span",{className:"text-xs text-indigo-600 font-medium ml-1",children:"(You)"})]}),b.jsx("span",{className:"text-xs text-gray-500",children:z(new Date(U.timestamp))})]}),Oe&&U.replyingTo&&b.jsx("div",{className:`mb-2 ${ve&&!Oe?"flex justify-end":""}`,children:b.jsxs("div",{className:"flex items-center gap-2 text-xs bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full border border-indigo-200",children:[b.jsxs("span",{className:"font-medium",children:["replying to @",U.replyingTo.userName,":"]}),b.jsxs("span",{className:"text-indigo-600 italic",children:['"',U.replyingTo.content,'"']})]})}),b.jsx("div",{className:`space-y-1 ${ve&&!Oe?"flex flex-col items-end":""}`,children:U.messages.map((vt,_t)=>b.jsx("div",{className:`max-w-xs sm:max-w-md lg:max-w-lg xl:max-w-xl ${Oe?"chat-bubble-ai":st?"chat-bubble-system":ve?"bg-indigo-500 text-white rounded-2xl px-4 py-3 shadow-subtle":"chat-bubble-user"} ${_t===0?ve&&!Oe?"rounded-tr-md":"rounded-tl-md":""} ${_t===U.messages.length-1?ve&&!Oe?"rounded-br-md":"rounded-bl-md":""}`,children:b.jsx("p",{className:"leading-relaxed whitespace-pre-wrap break-words",children:vt.content})},vt.id))})]})]},`group-${ue}`)}),s&&b.jsxs("div",{className:"flex gap-3",children:[b.jsx("div",{className:"avatar-lg bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-gentle",children:b.jsx(ou,{className:"w-5 h-5 text-white"})}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("div",{className:"flex items-baseline gap-2 mb-2",children:b.jsx("span",{className:"font-medium text-sm text-indigo-700",children:"AI Assistant"})}),b.jsx(Gie,{})]})]}),b.jsx("div",{ref:_})]}),b.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white relative shadow-subtle",children:[f!=="connected"&&b.jsx(X,{}),b.jsx(qie,{options:T.options,selectedIndex:T.selectedIndex,onSelect:de,position:T.position,visible:T.isOpen}),b.jsxs("div",{className:"flex gap-3 items-end",children:[b.jsx("textarea",{ref:C,value:l,onChange:Y,onKeyDown:pe,placeholder:f!=="connected"?"AI is booting up... Please wait a moment":i?"Type a message... Type @ to mention users (AI is muted for this room)":"Type a message... Type @ to mention users or AI",className:"flex-1 resize-none input-field min-h-[44px] max-h-32 overflow-y-auto calm-focus",rows:1,disabled:c||f!=="connected",style:{lineHeight:"1.5"}}),b.jsx("button",{onClick:Z,disabled:!l.trim()||c||f!=="connected",className:"btn-primary h-[44px] w-[44px] flex items-center justify-center",children:c?b.jsx(N8,{className:"w-4 h-4 animate-spin"}):b.jsx(Iie,{className:"w-4 h-4"})})]}),b.jsx("p",{className:"text-xs text-gray-500 mt-2",children:f!=="connected"?" AI is initializing neural networks... Connection will be restored shortly":`Press Enter to send  Shift+Enter for new line  Type @ to mention${i?"  AI is muted for this room":"  @AI for assistance"}`})]})]}),g&&b.jsx(Kie,{participants:e.participants,currentUser:t,isAIMuted:i,isAITyping:s,onClose:()=>v(!1)}),w&&b.jsx(tTe,{onClose:()=>S(!1)})]})},rTe=()=>{const{user:t,signOut:e}=xd(),{currentRoom:n,rooms:r,joinRoom:i,createRoom:s,isConnected:o}=E_(),[l,a]=Ae.useState(""),[c,u]=Ae.useState(!1),[h,d]=Ae.useState(null),[f,p]=Ae.useState(null),[m,y]=Ae.useState(!1),[g,v]=Ae.useState(null);if(Ae.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("room");if(L){v(L);const N=window.location.pathname;window.history.replaceState({},document.title,N)}},[]),Ae.useEffect(()=>{g&&t&&o&&!n&&(console.log("Attempting to join room from URL:",g),w(g),v(null))},[g,t,o,n]),n)return b.jsx(nTe,{});const w=async I=>{if(!t){d("Please sign in to join a room.");return}if(f){console.log("Already joining a room, ignoring request");return}p(I),d(null);try{if(console.log("Joining room:",I,"User:",t.name),!await S(I)){d(`Room "${I}" not found. The room may have been deleted or the link is invalid.`);return}await i(I,t.name)||d(`Unable to join room "${I}". Please try again or contact the room creator.`)}catch(L){console.error("Failed to join room:",L),d("Failed to join room. Please check your connection and try again.")}finally{p(null)}},S=async I=>{try{const{supabase:L}=await J(async()=>{const{supabase:F}=await Promise.resolve().then(()=>oie);return{supabase:F}},void 0),{data:N,error:$}=await L.from("rooms").select("id").eq("id",I).single();return!$&&!!N}catch(L){return console.error("Error checking room existence:",L),!1}},_=async()=>{if(!(!l.trim()||!t)){y(!0);try{console.log("Creating room with name:",l.trim()),await s(l.trim(),t.name),a(""),u(!1),console.log("Room created successfully")}catch(I){console.error("Failed to create room:",I),d(`Failed to create room: ${I instanceof Error?I.message:"Unknown error"}`)}finally{y(!1)}}},C=I=>{const N=new Date().getTime()-I.getTime(),$=Math.floor(N/(1e3*60*60)),F=Math.floor(N/(1e3*60*60*24));return $<1?"Active now":$<24?`${$}h ago`:`${F}d ago`},T=I=>I.split(" ").map(L=>L[0]).join("").toUpperCase();return o?b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4 shadow-subtle",children:b.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto",children:[b.jsx("div",{className:"flex items-center gap-4",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-gentle",children:b.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),b.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ChatMind"})]})}),b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"avatar",style:{backgroundColor:t==null?void 0:t.color},children:t?T(t.name):b.jsx(bj,{className:"w-4 h-4"})}),b.jsxs("div",{className:"text-left",children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),b.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]})]}),b.jsxs("button",{onClick:e,className:"btn-ghost text-sm",children:[b.jsx(Aie,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})}),b.jsx("div",{className:"container mx-auto px-4 py-8",children:b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome to ChatMind, ",t==null?void 0:t.name,"!"]}),b.jsx("p",{className:"text-gray-600",children:"Create your first room or join an existing one to start collaborating"})]}),h&&b.jsx("div",{className:"notification error max-w-2xl mx-auto mb-6",children:b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx(O_,{className:"w-5 h-5 text-error-600 mt-0.5"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"text-error-700 text-sm font-medium",children:"Unable to join room"}),b.jsx("p",{className:"text-error-600 text-sm mt-1",children:h}),b.jsxs("div",{className:"mt-3 flex gap-2",children:[b.jsx("button",{onClick:()=>u(!0),className:"btn-primary text-sm py-1 px-3",children:"Create New Room"}),b.jsx("button",{onClick:()=>d(null),className:"btn-secondary text-sm py-1 px-3",children:"Dismiss"})]})]})]})}),b.jsx("div",{className:"text-center mb-8",children:b.jsxs("button",{onClick:()=>u(!0),className:"btn-primary inline-flex items-center gap-2",children:[b.jsx(vk,{className:"w-5 h-5"}),"Create New Room"]})}),r.length>0?b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(I=>b.jsxs("div",{className:"card p-6 card-hover",children:[b.jsx("div",{className:"flex items-start justify-between mb-4",children:b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.jsx(O8,{className:"w-4 h-4 text-primary-500"}),b.jsx("h3",{className:"font-semibold text-gray-900",children:I.name})]}),b.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(k0,{className:"w-4 h-4"}),b.jsxs("span",{children:[I.participants.length," online"]})]}),b.jsx("span",{children:C(I.createdAt)})]})]})}),I.participants.length>0&&b.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[b.jsx("div",{className:"flex -space-x-2",children:I.participants.slice(0,4).map((L,N)=>b.jsx("div",{className:"avatar border-2 border-white",style:{backgroundColor:L.color,zIndex:10-N},title:L.name,children:L.name.charAt(0).toUpperCase()},L.id))}),I.participants.length>4&&b.jsxs("span",{className:"text-sm text-gray-500",children:["+",I.participants.length-4]})]}),I.messages.length>0&&b.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 border border-gray-100",children:b.jsxs("p",{className:"text-sm text-gray-600 line-clamp-2",children:[b.jsxs("span",{className:"font-medium",children:[I.messages[I.messages.length-1].userName,":"]})," ",I.messages[I.messages.length-1].content]})}),b.jsx("button",{onClick:()=>w(I.id),disabled:f===I.id,className:"w-full btn-primary flex items-center justify-center gap-2",children:f===I.id?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Joining..."]}):b.jsxs(b.Fragment,{children:["Join Room",b.jsx(yj,{className:"w-4 h-4"})]})})]},I.id))}):b.jsx("div",{className:"text-center py-16",children:b.jsxs("div",{className:"max-w-md mx-auto",children:[b.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-500 to-primary-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-gentle",children:b.jsx(VN,{className:"w-10 h-10 text-white"})}),b.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ready to start collaborating?"}),b.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Create your first room to begin real-time conversations with your team. You can invite others by sharing the room link once it's created."}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[b.jsxs("div",{className:"text-center p-4",children:[b.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-subtle",children:b.jsx(VN,{className:"w-6 h-6 text-primary-600"})}),b.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Real-time Chat"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Instant messaging with live updates"})]}),b.jsxs("div",{className:"text-center p-4",children:[b.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-subtle",children:b.jsx(k0,{className:"w-6 h-6 text-primary-600"})}),b.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Team Collaboration"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Invite team members to join"})]}),b.jsxs("div",{className:"text-center p-4",children:[b.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-subtle",children:b.jsx(Fie,{className:"w-6 h-6 text-primary-600"})}),b.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"AI Assistant"}),b.jsx("p",{className:"text-sm text-gray-600",children:"Get help by mentioning @AI"})]})]}),b.jsxs("button",{onClick:()=>u(!0),className:"btn-primary inline-flex items-center gap-2 text-lg px-8 py-4",children:[b.jsx(vk,{className:"w-6 h-6"}),"Create Your First Room"]})]})})]})}),c&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:b.jsxs("div",{className:"card max-w-md w-full p-6 shadow-gentle",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Room"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Name"}),b.jsx("input",{type:"text",value:l,onChange:I=>a(I.target.value),placeholder:"Enter room name (e.g., Project Alpha, Team Chat)",className:"input-field",onKeyDown:I=>{I.key==="Enter"&&!m&&_()},disabled:m})]}),b.jsx("div",{className:"bg-primary-50 rounded-lg p-3 border border-primary-200",children:b.jsxs("p",{className:"text-sm text-primary-700",children:[" ",b.jsx("strong",{children:"Tip:"})," Choose a descriptive name that helps team members understand the room's purpose."]})})]}),b.jsxs("div",{className:"flex gap-3 mt-6",children:[b.jsx("button",{onClick:()=>{u(!1),a("")},disabled:m,className:"flex-1 btn-secondary",children:"Cancel"}),b.jsx("button",{onClick:_,disabled:!l.trim()||m,className:"flex-1 btn-primary flex items-center justify-center gap-2",children:m?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):b.jsxs(b.Fragment,{children:[b.jsx(vk,{className:"w-4 h-4"}),"Create Room"]})})]})]})})]}):b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-gentle",children:b.jsx("span",{className:"text-white font-bold text-2xl",children:"C"})}),b.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-600",children:"Connecting to ChatMind..."}),g&&b.jsx("p",{className:"text-sm text-primary-600 mt-2",children:"Preparing to join room..."})]})})};function iTe(){const{user:t}=xd();return t?b.jsx(cie,{children:b.jsx(sTe,{})}):null}function sTe(){return b.jsx(rTe,{})}function oTe(){return b.jsx(lie,{children:b.jsx(Wie,{children:b.jsx(iTe,{})})})}Vz(document.getElementById("root")).render(b.jsx(Ae.StrictMode,{children:b.jsx(oTe,{})}));export{_h as A,ehe as B,zJ as C,K as D,$e as E,AS as F,_he as G,ble as H,Pn as I,jue as J,_S as L,wTe as N,Gj as P,$s as T,Wue as a,DTe as b,OTe as c,A6e as d,zr as e,the as f,ETe as g,MTe as h,AV as i,NTe as j,LTe as k,oe as l,As as m,Ct as n,L_ as o,bTe as p,fn as q,X0 as r,Lue as s,te as t,Nu as u,Q0 as v,_n as w,Vs as x,h5 as y,CV as z};
